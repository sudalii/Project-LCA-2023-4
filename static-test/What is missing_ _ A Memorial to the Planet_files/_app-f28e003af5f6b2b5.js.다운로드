(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{74129:function(e,t,n){"use strict";var r,i=n(67294),o=(r=i)&&"object"===typeof r&&"default"in r?r.default:r,a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u(e,t){return e(t={exports:{}},t.exports),t.exports}var c=u((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCKS=void 0,function(e){e.DOCUMENT="document",e.PARAGRAPH="paragraph",e.HEADING_1="heading-1",e.HEADING_2="heading-2",e.HEADING_3="heading-3",e.HEADING_4="heading-4",e.HEADING_5="heading-5",e.HEADING_6="heading-6",e.OL_LIST="ordered-list",e.UL_LIST="unordered-list",e.LIST_ITEM="list-item",e.HR="hr",e.QUOTE="blockquote",e.EMBEDDED_ENTRY="embedded-entry-block",e.EMBEDDED_ASSET="embedded-asset-block",e.TABLE="table",e.TABLE_ROW="table-row",e.TABLE_CELL="table-cell",e.TABLE_HEADER_CELL="table-header-cell"}(t.BLOCKS||(t.BLOCKS={}))}));l(c);c.BLOCKS;var d=u((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.INLINES=void 0,function(e){e.HYPERLINK="hyperlink",e.ENTRY_HYPERLINK="entry-hyperlink",e.ASSET_HYPERLINK="asset-hyperlink",e.EMBEDDED_ENTRY="embedded-entry-inline"}(t.INLINES||(t.INLINES={}))}));l(d);d.INLINES;var h=u((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOLD="bold",e.ITALIC="italic",e.UNDERLINE="underline",e.CODE="code"}(n||(n={})),t.default=n}));l(h);var f=u((function(e,t){var n,r=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.V1_NODE_TYPES=t.TEXT_CONTAINERS=t.HEADINGS=t.CONTAINERS=t.VOID_BLOCKS=t.TABLE_BLOCKS=t.LIST_ITEM_BLOCKS=t.TOP_LEVEL_BLOCKS=void 0,t.TOP_LEVEL_BLOCKS=[c.BLOCKS.PARAGRAPH,c.BLOCKS.HEADING_1,c.BLOCKS.HEADING_2,c.BLOCKS.HEADING_3,c.BLOCKS.HEADING_4,c.BLOCKS.HEADING_5,c.BLOCKS.HEADING_6,c.BLOCKS.OL_LIST,c.BLOCKS.UL_LIST,c.BLOCKS.HR,c.BLOCKS.QUOTE,c.BLOCKS.EMBEDDED_ENTRY,c.BLOCKS.EMBEDDED_ASSET,c.BLOCKS.TABLE],t.LIST_ITEM_BLOCKS=[c.BLOCKS.PARAGRAPH,c.BLOCKS.HEADING_1,c.BLOCKS.HEADING_2,c.BLOCKS.HEADING_3,c.BLOCKS.HEADING_4,c.BLOCKS.HEADING_5,c.BLOCKS.HEADING_6,c.BLOCKS.OL_LIST,c.BLOCKS.UL_LIST,c.BLOCKS.HR,c.BLOCKS.QUOTE,c.BLOCKS.EMBEDDED_ENTRY,c.BLOCKS.EMBEDDED_ASSET],t.TABLE_BLOCKS=[c.BLOCKS.TABLE,c.BLOCKS.TABLE_ROW,c.BLOCKS.TABLE_CELL,c.BLOCKS.TABLE_HEADER_CELL],t.VOID_BLOCKS=[c.BLOCKS.HR,c.BLOCKS.EMBEDDED_ENTRY,c.BLOCKS.EMBEDDED_ASSET],t.CONTAINERS=((n={})[c.BLOCKS.OL_LIST]=[c.BLOCKS.LIST_ITEM],n[c.BLOCKS.UL_LIST]=[c.BLOCKS.LIST_ITEM],n[c.BLOCKS.LIST_ITEM]=t.LIST_ITEM_BLOCKS,n[c.BLOCKS.QUOTE]=[c.BLOCKS.PARAGRAPH],n[c.BLOCKS.TABLE]=[c.BLOCKS.TABLE_ROW],n[c.BLOCKS.TABLE_ROW]=[c.BLOCKS.TABLE_CELL,c.BLOCKS.TABLE_HEADER_CELL],n[c.BLOCKS.TABLE_CELL]=[c.BLOCKS.PARAGRAPH],n[c.BLOCKS.TABLE_HEADER_CELL]=[c.BLOCKS.PARAGRAPH],n),t.HEADINGS=[c.BLOCKS.HEADING_1,c.BLOCKS.HEADING_2,c.BLOCKS.HEADING_3,c.BLOCKS.HEADING_4,c.BLOCKS.HEADING_5,c.BLOCKS.HEADING_6],t.TEXT_CONTAINERS=r([c.BLOCKS.PARAGRAPH],t.HEADINGS,!0),t.V1_NODE_TYPES=[c.BLOCKS.DOCUMENT,c.BLOCKS.PARAGRAPH,c.BLOCKS.HEADING_1,c.BLOCKS.HEADING_2,c.BLOCKS.HEADING_3,c.BLOCKS.HEADING_4,c.BLOCKS.HEADING_5,c.BLOCKS.HEADING_6,c.BLOCKS.OL_LIST,c.BLOCKS.UL_LIST,c.BLOCKS.LIST_ITEM,c.BLOCKS.HR,c.BLOCKS.QUOTE,c.BLOCKS.EMBEDDED_ENTRY,c.BLOCKS.EMBEDDED_ASSET,d.INLINES.HYPERLINK,d.INLINES.ENTRY_HYPERLINK,d.INLINES.ASSET_HYPERLINK,d.INLINES.EMBEDDED_ENTRY,"text"]}));l(f);f.V1_NODE_TYPES,f.TEXT_CONTAINERS,f.HEADINGS,f.CONTAINERS,f.VOID_BLOCKS,f.TABLE_BLOCKS,f.LIST_ITEM_BLOCKS,f.TOP_LEVEL_BLOCKS;var p=u((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}));l(p);var m=u((function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}));l(m);var g=u((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={nodeType:c.BLOCKS.DOCUMENT,data:{},content:[{nodeType:c.BLOCKS.PARAGRAPH,data:{},content:[{nodeType:"text",value:"",marks:[],data:{}}]}]};t.default=n}));l(g);var v=u((function(e,t){function n(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){if(t===e[r[n]])return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.isText=t.isBlock=t.isInline=void 0,t.isInline=function(e){return n(d.INLINES,e.nodeType)},t.isBlock=function(e){return n(c.BLOCKS,e.nodeType)},t.isText=function(e){return"text"===e.nodeType}}));l(v);v.isText,v.isBlock,v.isInline;var y=u((function(e,t){var n=s&&s.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=s&&s.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=s&&s.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=s&&s.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.helpers=t.EMPTY_DOCUMENT=t.MARKS=t.INLINES=t.BLOCKS=void 0,Object.defineProperty(t,"BLOCKS",{enumerable:!0,get:function(){return c.BLOCKS}}),Object.defineProperty(t,"INLINES",{enumerable:!0,get:function(){return d.INLINES}}),Object.defineProperty(t,"MARKS",{enumerable:!0,get:function(){return a(h).default}}),i(f,t),i(p,t),i(m,t),Object.defineProperty(t,"EMPTY_DOCUMENT",{enumerable:!0,get:function(){return a(g).default}});var l=o(v);t.helpers=l}));l(y);var _,b,x=y.helpers,w=(y.EMPTY_DOCUMENT,y.MARKS),S=y.INLINES,D=y.BLOCKS;function A(e,t){return e.map((function(e,n){return r=E(e,t),o=n,i.isValidElement(r)&&null===r.key?i.cloneElement(r,{key:o}):r;var r,o}))}function E(e,t){var n=t.renderNode,r=t.renderMark,i=t.renderText;if(x.isText(e))return e.marks.reduce((function(e,t){return r[t.type]?r[t.type](e):e}),i?i(e.value):e.value);var a=A(e.content,t);return e.nodeType&&n[e.nodeType]?n[e.nodeType](e,a):o.createElement(o.Fragment,null,a)}var M=((_={})[D.DOCUMENT]=function(e,t){return t},_[D.PARAGRAPH]=function(e,t){return o.createElement("p",null,t)},_[D.HEADING_1]=function(e,t){return o.createElement("h1",null,t)},_[D.HEADING_2]=function(e,t){return o.createElement("h2",null,t)},_[D.HEADING_3]=function(e,t){return o.createElement("h3",null,t)},_[D.HEADING_4]=function(e,t){return o.createElement("h4",null,t)},_[D.HEADING_5]=function(e,t){return o.createElement("h5",null,t)},_[D.HEADING_6]=function(e,t){return o.createElement("h6",null,t)},_[D.EMBEDDED_ENTRY]=function(e,t){return o.createElement("div",null,t)},_[D.UL_LIST]=function(e,t){return o.createElement("ul",null,t)},_[D.OL_LIST]=function(e,t){return o.createElement("ol",null,t)},_[D.LIST_ITEM]=function(e,t){return o.createElement("li",null,t)},_[D.QUOTE]=function(e,t){return o.createElement("blockquote",null,t)},_[D.HR]=function(){return o.createElement("hr",null)},_[D.TABLE]=function(e,t){return o.createElement("table",null,o.createElement("tbody",null,t))},_[D.TABLE_ROW]=function(e,t){return o.createElement("tr",null,t)},_[D.TABLE_HEADER_CELL]=function(e,t){return o.createElement("th",null,t)},_[D.TABLE_CELL]=function(e,t){return o.createElement("td",null,t)},_[S.ASSET_HYPERLINK]=function(e){return T(S.ASSET_HYPERLINK,e)},_[S.ENTRY_HYPERLINK]=function(e){return T(S.ENTRY_HYPERLINK,e)},_[S.EMBEDDED_ENTRY]=function(e){return T(S.EMBEDDED_ENTRY,e)},_[S.HYPERLINK]=function(e,t){return o.createElement("a",{href:e.data.uri},t)},_),C=((b={})[w.BOLD]=function(e){return o.createElement("b",null,e)},b[w.ITALIC]=function(e){return o.createElement("i",null,e)},b[w.UNDERLINE]=function(e){return o.createElement("u",null,e)},b[w.CODE]=function(e){return o.createElement("code",null,e)},b);function T(e,t){return o.createElement("span",{key:t.data.target.sys.id},"type: ",t.nodeType," id: ",t.data.target.sys.id)}t.h=function(e,t){return void 0===t&&(t={}),e?E(e,{renderNode:a(a({},M),t.renderNode),renderMark:a(a({},C),t.renderMark),renderText:t.renderText}):null}},20549:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCKS=void 0,function(e){e.DOCUMENT="document",e.PARAGRAPH="paragraph",e.HEADING_1="heading-1",e.HEADING_2="heading-2",e.HEADING_3="heading-3",e.HEADING_4="heading-4",e.HEADING_5="heading-5",e.HEADING_6="heading-6",e.OL_LIST="ordered-list",e.UL_LIST="unordered-list",e.LIST_ITEM="list-item",e.HR="hr",e.QUOTE="blockquote",e.EMBEDDED_ENTRY="embedded-entry-block",e.EMBEDDED_ASSET="embedded-asset-block",e.TABLE="table",e.TABLE_ROW="table-row",e.TABLE_CELL="table-cell",e.TABLE_HEADER_CELL="table-header-cell"}(t.BLOCKS||(t.BLOCKS={}))},51928:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20549),i={nodeType:r.BLOCKS.DOCUMENT,data:{},content:[{nodeType:r.BLOCKS.PARAGRAPH,data:{},content:[{nodeType:"text",value:"",marks:[],data:{}}]}]};t.default=i},86061:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isText=t.isBlock=t.isInline=void 0;var r=n(20549),i=n(7845);function o(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){if(t===e[r[n]])return!0}return!1}t.isInline=function(e){return o(i.INLINES,e.nodeType)},t.isBlock=function(e){return o(r.BLOCKS,e.nodeType)},t.isText=function(e){return"text"===e.nodeType}},86437:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.helpers=t.EMPTY_DOCUMENT=t.MARKS=t.INLINES=t.BLOCKS=void 0;var l=n(20549);Object.defineProperty(t,"BLOCKS",{enumerable:!0,get:function(){return l.BLOCKS}});var u=n(7845);Object.defineProperty(t,"INLINES",{enumerable:!0,get:function(){return u.INLINES}});var c=n(31376);Object.defineProperty(t,"MARKS",{enumerable:!0,get:function(){return s(c).default}}),o(n(97951),t),o(n(80167),t),o(n(11911),t);var d=n(51928);Object.defineProperty(t,"EMPTY_DOCUMENT",{enumerable:!0,get:function(){return s(d).default}});var h=a(n(86061));t.helpers=h},7845:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INLINES=void 0,function(e){e.HYPERLINK="hyperlink",e.ENTRY_HYPERLINK="entry-hyperlink",e.ASSET_HYPERLINK="asset-hyperlink",e.EMBEDDED_ENTRY="embedded-entry-inline"}(t.INLINES||(t.INLINES={}))},31376:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOLD="bold",e.ITALIC="italic",e.UNDERLINE="underline",e.CODE="code"}(n||(n={})),t.default=n},11911:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},97951:function(e,t,n){"use strict";var r,i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.V1_NODE_TYPES=t.TEXT_CONTAINERS=t.HEADINGS=t.CONTAINERS=t.VOID_BLOCKS=t.TABLE_BLOCKS=t.LIST_ITEM_BLOCKS=t.TOP_LEVEL_BLOCKS=void 0;var o=n(20549),a=n(7845);t.TOP_LEVEL_BLOCKS=[o.BLOCKS.PARAGRAPH,o.BLOCKS.HEADING_1,o.BLOCKS.HEADING_2,o.BLOCKS.HEADING_3,o.BLOCKS.HEADING_4,o.BLOCKS.HEADING_5,o.BLOCKS.HEADING_6,o.BLOCKS.OL_LIST,o.BLOCKS.UL_LIST,o.BLOCKS.HR,o.BLOCKS.QUOTE,o.BLOCKS.EMBEDDED_ENTRY,o.BLOCKS.EMBEDDED_ASSET,o.BLOCKS.TABLE],t.LIST_ITEM_BLOCKS=[o.BLOCKS.PARAGRAPH,o.BLOCKS.HEADING_1,o.BLOCKS.HEADING_2,o.BLOCKS.HEADING_3,o.BLOCKS.HEADING_4,o.BLOCKS.HEADING_5,o.BLOCKS.HEADING_6,o.BLOCKS.OL_LIST,o.BLOCKS.UL_LIST,o.BLOCKS.HR,o.BLOCKS.QUOTE,o.BLOCKS.EMBEDDED_ENTRY,o.BLOCKS.EMBEDDED_ASSET],t.TABLE_BLOCKS=[o.BLOCKS.TABLE,o.BLOCKS.TABLE_ROW,o.BLOCKS.TABLE_CELL,o.BLOCKS.TABLE_HEADER_CELL],t.VOID_BLOCKS=[o.BLOCKS.HR,o.BLOCKS.EMBEDDED_ENTRY,o.BLOCKS.EMBEDDED_ASSET],t.CONTAINERS=((r={})[o.BLOCKS.OL_LIST]=[o.BLOCKS.LIST_ITEM],r[o.BLOCKS.UL_LIST]=[o.BLOCKS.LIST_ITEM],r[o.BLOCKS.LIST_ITEM]=t.LIST_ITEM_BLOCKS,r[o.BLOCKS.QUOTE]=[o.BLOCKS.PARAGRAPH],r[o.BLOCKS.TABLE]=[o.BLOCKS.TABLE_ROW],r[o.BLOCKS.TABLE_ROW]=[o.BLOCKS.TABLE_CELL,o.BLOCKS.TABLE_HEADER_CELL],r[o.BLOCKS.TABLE_CELL]=[o.BLOCKS.PARAGRAPH],r[o.BLOCKS.TABLE_HEADER_CELL]=[o.BLOCKS.PARAGRAPH],r),t.HEADINGS=[o.BLOCKS.HEADING_1,o.BLOCKS.HEADING_2,o.BLOCKS.HEADING_3,o.BLOCKS.HEADING_4,o.BLOCKS.HEADING_5,o.BLOCKS.HEADING_6],t.TEXT_CONTAINERS=i([o.BLOCKS.PARAGRAPH],t.HEADINGS,!0),t.V1_NODE_TYPES=[o.BLOCKS.DOCUMENT,o.BLOCKS.PARAGRAPH,o.BLOCKS.HEADING_1,o.BLOCKS.HEADING_2,o.BLOCKS.HEADING_3,o.BLOCKS.HEADING_4,o.BLOCKS.HEADING_5,o.BLOCKS.HEADING_6,o.BLOCKS.OL_LIST,o.BLOCKS.UL_LIST,o.BLOCKS.LIST_ITEM,o.BLOCKS.HR,o.BLOCKS.QUOTE,o.BLOCKS.EMBEDDED_ENTRY,o.BLOCKS.EMBEDDED_ASSET,a.INLINES.HYPERLINK,a.INLINES.ENTRY_HYPERLINK,a.INLINES.ASSET_HYPERLINK,a.INLINES.EMBEDDED_ENTRY,"text"]},80167:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51906:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,O(w);else{var t=r(c);null!==t&&L(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var o=f;try{for(b(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&i(u),b(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&L(x,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,D=!1,A=null,E=-1,M=5,C=-1;function T(){return!(t.unstable_now()-C<M)}function P(){if(null!==A){var e=t.unstable_now();C=e;var n=!0;try{n=A(!0,e)}finally{n?S():(D=!1,A=null)}}else D=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,k=R.port2;R.port1.onmessage=P,S=function(){k.postMessage(null)}}else S=function(){v(P,0)};function O(e){A=e,D||(D=!0,S())}function L(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(y(E),E=-1):g=!0,L(x,o-a))):(e.sortIndex=s,n(u,e),m||p||(m=!0,O(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},45431:function(e,t,n){"use strict";e.exports=n(51906)},85490:function(e,t,n){"use strict";n.d(t,{useDrag:function(){return ee},useWheel:function(){return te}});const r={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function i(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function o(e,t,n,r=.15){return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-i(t-e,n-t,r)+t:e>n?+i(e-n,n-t,r)+n:e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c(e){return e?e[0].toUpperCase()+e.slice(1):""}const d=["enter","leave"];function h(e,t="",n=!1){const r=u[e],i=r&&r[t]||t;return"on"+c(e)+c(i)+(function(e=!1,t){return e&&!d.includes(t)}(n,i)?"Capture":"")}const f=["gotpointercapture","lostpointercapture"];function p(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=f.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function m(e){return"touches"in e}function g(e){return m(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function v(e){return m(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function y(e){return function(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((e=>e.identifier))}function _(e){const t=v(e);return m(e)?t.identifier:t.pointerId}function b(e){const t=v(e);return[t.clientX,t.clientY]}function x(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function w(e,...t){return"function"===typeof e?e(...t):e}function S(){}function D(...e){return 0===e.length?S:1===e.length?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function A(e,t){return Object.assign({},t,e||{})}class E{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?w(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:i}=this;t.args=this.args;let a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);r.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[s,l]=t._movement,[u,c]=n.threshold,{_step:d,values:h}=t;if(n.hasCustomTransform?(!1===d[0]&&(d[0]=Math.abs(s)>=u&&h[0]),!1===d[1]&&(d[1]=Math.abs(l)>=c&&h[1])):(!1===d[0]&&(d[0]=Math.abs(s)>=u&&Math.sign(s)*u),!1===d[1]&&(d[1]=Math.abs(l)>=c&&Math.sign(l)*c)),t.intentional=!1!==d[0]||!1!==d[1],!t.intentional)return;const f=[0,0];if(n.hasCustomTransform){const[e,t]=h;f[0]=!1!==d[0]?e-d[0]:0,f[1]=!1!==d[1]?t-d[1]:0}else f[0]=!1!==d[0]?s-d[0]:0,f[1]=!1!==d[1]?l-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const p=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=w(n.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[g,v]=t.offset,[[y,_],[b,x]]=t._bounds;t.overflow=[g<y?-1:g>_?1:0,v<b?-1:v>x?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const S=t._active&&n.rubberband||[0,0];if(t.offset=function(e,[t,n],[r,i]){const[[a,s],[l,u]]=e;return[o(t,a,s,r),o(n,l,u,i)]}(t._bounds,t.offset,S),t.delta=r.sub(t.offset,p),this.computeMovement(),m&&(!t.last||a>32)){t.delta=r.sub(t.offset,p);const e=t.delta.map(Math.abs);r.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[e[0]/a,e[1]/a])}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(l(l(l({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class M extends E{constructor(...e){super(...e),a(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=r.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=r.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"===typeof n.axisThreshold?n.axisThreshold[g(e)]:n.axisThreshold;t.axis=function([e,t],n){const r=Math.abs(e),i=Math.abs(t);return r>i&&r>n?"x":i>r&&i>n?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const C=e=>e,T={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>l(l({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return r.toVector(e)}},from:e=>"function"===typeof e?e:null!=e?r.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||C},threshold:e=>r.toVector(e,0)};const P=l(l({},T),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=0)=>e,bounds(e={}){if("function"===typeof e)return t=>P.bounds(e(t));if("current"in e)return()=>e.current;if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),R={ArrowRight:(e=1)=>[10*e,0],ArrowLeft:(e=1)=>[-10*e,0],ArrowUp:(e=1)=>[0,-10*e],ArrowDown:(e=1)=>[0,10*e]};const k="undefined"!==typeof window&&window.document&&window.document.createElement;function O(){return k&&"ontouchstart"in window||k&&window.navigator.maxTouchPoints>1}const L={isBrowser:k,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:O(),touchscreen:O(),pointer:k&&"onpointerdown"in window,pointerLock:k&&"exitPointerLock"in window.document},F={mouse:0,touch:0,pen:8},I=l(l({},P),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&L.pointerLock,L.touch&&n?"touch":this.pointerLock?"mouse":L.pointer&&!i?"pointer":L.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"===typeof n?n:n||void 0===n&&e?250:void 0,L.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1}={}}){return this.pointerButtons=r,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:i=3,axis:o}){const a=r.toVector(e,n?i:o?1:0);return this.filterTaps=n,this.tapsThreshold=i,a},swipe({velocity:e=.5,distance:t=50,duration:n=250}={}){return{velocity:this.transform(r.toVector(e)),distance:this.transform(r.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?l(l({},F),e):F});l(l({},T),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!L.touch&&L.gesture)return"gesture";if(L.touch&&r)return"touch";if(L.touchscreen){if(L.pointer)return"pointer";if(L.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=e=>{const t=A(w(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=A(w(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof n&&"function"!==typeof r?[i(),o()]:e=>[i(e),o(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return r.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e});l(l({},P),{},{mouseOnly:(e=!0)=>e});const N=P;l(l({},P),{},{mouseOnly:(e=!0)=>e});const B=new Map,j=new Map;function z(e){B.set(e.key,e.engine),j.set(e.key,e.resolver)}const U={key:"drag",engine:class extends M{constructor(...e){super(...e),a(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=P.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=_(e),n._pointerActive=!0,this.computeValues(b(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==g(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;if(t.type===e.type&&e.timeStamp===t.timeStamp)return;const i=_(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;const o=b(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=r.sub(o,t._values),this.computeValues(o)),r.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(a){0}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=_(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,o]=t._distance;if(t.tap=i<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t.direction,[i,o]=t.velocity,[a,s]=t.movement,[l,u]=n.swipe.velocity,[c,d]=n.swipe.distance,h=n.swipe.duration;t.elapsedTime<h&&(Math.abs(i)>l&&Math.abs(a)>c&&(t.swipe[0]=e),Math.abs(o)>u&&Math.abs(s)>d&&(t.swipe[1]=r))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=R[e.key];if(t){const n=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(i),n._keyboardActive=!0,r.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in R&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:I},H={key:"wheel",engine:class extends M{constructor(...e){super(...e),a(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=x(e),r.addTo(t._movement,t._delta);const[n,i]=t.overflow,[o,a]=t._delta,[s,l]=t._direction;(n<0&&o>0&&s<0||n>0&&o<0&&s>0)&&(t._movement[0]=t._movementBound[0]),(i<0&&a>0&&l<0||i>0&&a<0&&l>0)&&(t._movement[1]=t._movementBound[1]),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:N};var G=n(67294);function V(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const W={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(L.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},Z=["target","eventOptions","window","enabled","transform"];function $(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=$(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}class q{constructor(e,t){a(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){const o=this._listeners,a=function(e,t=""){const n=u[e];return e+(n&&n[t]||t)}(t,n),s=l(l({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(a,r,s);const c=()=>{e.removeEventListener(a,r,s),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class Y{constructor(){a(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class K{constructor(e){a(this,"gestures",new Set),a(this,"_targetEventStore",new q(this)),a(this,"gestureEventStores",{}),a(this,"gestureTimeoutStores",{}),a(this,"handlers",{}),a(this,"config",{}),a(this,"pointerIds",new Set),a(this,"touchIds",new Set),a(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&X(e,"drag");t.wheel&&X(e,"wheel");t.scroll&&X(e,"scroll");t.move&&X(e,"move");t.pinch&&X(e,"pinch");t.hover&&X(e,"hover")}(this,e)}setEventIds(e){return m(e)?(this.touchIds=new Set(y(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){const n=e,{target:r,eventOptions:i,window:o,enabled:a,transform:s}=n,u=V(n,Z),c={shared:$({target:r,eventOptions:i,window:o,enabled:a,transform:s},W)};if(t){const e=j.get(t);c[t]=$(l({shared:c.shared},u),e)}else for(const d in u){const e=j.get(d);e&&(c[d]=$(l({shared:c.shared},u[d]),e))}return c}(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!t.target||(r=t.target(),r)){if(t.enabled){for(const t of this.gestures){const i=this.config[t],o=Q(n,i.eventOptions,!!r);if(i.enabled){new(B.get(t))(this,e,t).bind(o)}}const i=Q(n,t.eventOptions,!!r);for(const t in this.nativeHandlers)i(t,"",(n=>this.nativeHandlers[t](l(l({},this.state.shared),{},{event:n,args:e}))),void 0,!0)}for(const e in n)n[e]=D(...n[e]);if(!r)return n;for(const e in n){const{device:t,capture:i,passive:o}=p(e);this._targetEventStore.add(r,t,"",n[e],{capture:i,passive:o})}}}}function X(e,t){e.gestures.add(t),e.gestureEventStores[t]=new q(e,t),e.gestureTimeoutStores[t]=new Y}const Q=(e,t,n)=>(r,i,o,a={},s=!1)=>{var l,u;const c=null!==(l=a.capture)&&void 0!==l?l:t.capture,d=null!==(u=a.passive)&&void 0!==u?u:t.passive;let f=s?r:h(r,i,c);n&&d&&(f+="Passive"),e[f]=e[f]||[],e[f].push(o)};function J(e,t={},n,r){const i=G.useMemo((()=>new K(e)),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),G.useEffect(i.effect.bind(i)),G.useEffect((()=>i.clean.bind(i)),[]),void 0===t.target)return i.bind.bind(i)}function ee(e,t){return z(U),J({drag:e},t||{},"drag")}function te(e,t){return z(H),J({wheel:e},t||{},"wheel")}},1052:function(e){"use strict";e.exports=function(e,t){if(null===e||"undefined"===typeof e)throw new TypeError("expected first argument to be an object.");if("undefined"===typeof t||"undefined"===typeof Symbol)return e;if("function"!==typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),i=arguments.length,o=0;++o<i;)for(var a=Object(arguments[o]),s=Object.getOwnPropertySymbols(a),l=0;l<s.length;l++){var u=s[l];n.call(a,u)&&(r[u]=a[u])}return r}},58363:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t}))}return!0}},86010:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})},20296:function(e){function t(e,t,n){var r,i,o,a,s;function l(){var u=Date.now()-a;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var u=function(){o=this,i=arguments,a=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(o,i),o=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}t.debounce=t,e.exports=t},36919:function(e,t,n){"use strict";var r=n(86104);function i(e,t){for(var n in t)o(t,n)&&(e[n]=t[n])}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){r(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var o=arguments[n];r(o)&&i(e,o)}return e}},86104:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},52561:function(e){"use strict";e.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},43200:function(e){function t(e){return e?Array.isArray(e)?e.join("."):e:""}e.exports=function(e,n,r,i,o){if(null===(a=e)||"object"!==typeof a&&"function"!==typeof a||!n)return e;var a;if(n=t(n),r&&(n+="."+t(r)),i&&(n+="."+t(i)),o&&(n+="."+t(o)),n in e)return e[n];for(var s=n.split("."),l=s.length,u=-1;e&&++u<l;){for(var c=s[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+s[++u];e=e[c]}return e}},8679:function(e,t,n){"use strict";var r=n(59864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=c(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=h(n,v);try{u(t,v,y)}catch(_){}}}}return t}},51833:function(e,t,n){"use strict";var r=n(55299);e.exports=function(e){return r(e)||"function"===typeof e||Array.isArray(e)}},55299:function(e,t,n){"use strict";var r=n(47798);function i(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==i(e)&&("function"===typeof(t=e.constructor)&&(!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},47798:function(e){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},18552:function(e,t,n){var r=n(10852)(n(55639),"DataView");e.exports=r},1989:function(e,t,n){var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},38407:function(e,t,n){var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},57071:function(e,t,n){var r=n(10852)(n(55639),"Map");e.exports=r},83369:function(e,t,n){var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},53818:function(e,t,n){var r=n(10852)(n(55639),"Promise");e.exports=r},58525:function(e,t,n){var r=n(10852)(n(55639),"Set");e.exports=r},88668:function(e,t,n){var r=n(83369),i=n(90619),o=n(72385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},46384:function(e,t,n){var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),l=n(34309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},11149:function(e,t,n){var r=n(55639).Uint8Array;e.exports=r},70577:function(e,t,n){var r=n(10852)(n(55639),"WeakMap");e.exports=r},34963:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},14636:function(e,t,n){var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),l=n(36719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),d=!n&&!c&&a(e),h=!n&&!c&&!d&&l(e),f=n||c||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!u.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},29932:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},62663:function(e){e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},82908:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},44286:function(e){e.exports=function(e){return e.split("")}},49029:function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},18470:function(e,t,n){var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},89465:function(e,t,n){var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},28483:function(e,t,n){var r=n(25063)();e.exports=r},47816:function(e,t,n){var r=n(28483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},97786:function(e,t,n){var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},68866:function(e,t,n){var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:function(e,t,n){var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},78565:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},13:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},90939:function(e,t,n){var r=n(2492),i=n(37005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},2492:function(e,t,n){var r=n(46384),i=n(67114),o=n(18351),a=n(16096),s=n(64160),l=n(1469),u=n(44144),c=n(36719),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),_=l(t),b=y?h:s(e),x=_?h:s(t),w=(b=b==d?f:b)==f,S=(x=x==d?f:x)==f,D=b==x;if(D&&u(e)){if(!u(t))return!1;y=!0,w=!1}if(D&&!w)return v||(v=new r),y||c(e)?i(e,t,n,m,g,v):o(e,t,b,n,m,g,v);if(!(1&n)){var A=w&&p.call(e,"__wrapped__"),E=S&&p.call(t,"__wrapped__");if(A||E){var M=A?e.value():e,C=E?t.value():t;return v||(v=new r),g(M,C,n,m,v)}}return!!D&&(v||(v=new r),a(e,t,n,m,g,v))}},2958:function(e,t,n){var r=n(46384),i=n(90939);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],d=e[c],h=u[1];if(l&&u[2]){if(void 0===d&&!(c in e))return!1}else{var f=new r;if(o)var p=o(d,h,c,e,t,f);if(!(void 0===p?i(h,d,3,o,f):p))return!1}}return!0}},28458:function(e,t,n){var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,h=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},38749:function(e,t,n){var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},67206:function(e,t,n){var r=n(91573),i=n(16432),o=n(6557),a=n(1469),s=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},280:function(e,t,n){var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},91573:function(e,t,n){var r=n(2958),i=n(1499),o=n(42634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:function(e,t,n){var r=n(90939),i=n(27361),o=n(79095),a=n(15403),s=n(89162),l=n(42634),u=n(40327);e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},40371:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:function(e,t,n){var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},18674:function(e){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},14259:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},22545:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:function(e,t,n){var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},7518:function(e){e.exports=function(e){return function(t){return e(t)}}},74757:function(e){e.exports=function(e,t){return e.has(t)}},71811:function(e,t,n){var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},40180:function(e,t,n){var r=n(14259);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},14429:function(e,t,n){var r=n(55639)["__core-js_shared__"];e.exports=r},25063:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},98805:function(e,t,n){var r=n(40180),i=n(62689),o=n(83140),a=n(79833);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},35393:function(e,t,n){var r=n(62663),i=n(53816),o=n(58748),a=RegExp("['\u2019]","g");e.exports=function(e){return function(t){return r(o(i(t).replace(a,"")),e,"")}}},69389:function(e,t,n){var r=n(18674)({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});e.exports=r},38777:function(e,t,n){var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},67114:function(e,t,n){var r=n(88668),i=n(82908),o=n(74757);e.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,d=t.length;if(c!=d&&!(u&&d>c))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var v=e[p],y=t[p];if(a)var _=u?a(y,v,p,t,e,l):a(v,y,p,e,t,l);if(void 0!==_){if(_)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||s(v,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},18351:function(e,t,n){var r=n(62705),i=n(11149),o=n(77813),a=n(67114),s=n(68776),l=n(21814),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=a(f(e),f(t),r,u,d,h);return h.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},16096:function(e,t,n){var r=n(58234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var d=c;d--;){var h=u[d];if(!(l?h in t:i.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<c;){var v=e[h=u[d]],y=t[h];if(o)var _=l?o(y,v,h,t,e,s):o(v,y,h,e,t,s);if(!(void 0===_?v===y||a(v,y,n,o,s):_)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,x=t.constructor;b==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(e),s.delete(t),m}},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:function(e,t,n){var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},45050:function(e,t,n){var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:function(e,t,n){var r=n(89162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},10852:function(e,t,n){var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},89607:function(e,t,n){var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:function(e,t,n){var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},64160:function(e,t,n){var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),l=n(44239),u=n(80346),c="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=u(r),g=u(i),v=u(o),y=u(a),_=u(s),b=l;(r&&b(new r(new ArrayBuffer(1)))!=p||i&&b(new i)!=c||o&&b(o.resolve())!=d||a&&b(new a)!=h||s&&b(new s)!=f)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return p;case g:return c;case v:return d;case y:return h;case _:return f}return t}),e.exports=b},47801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},222:function(e,t,n){var r=n(71811),i=n(35694),o=n(1469),a=n(65776),s=n(41780),l=n(40327);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,d=!1;++u<c;){var h=l(t[u]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&s(c)&&a(h,c)&&(o(e)||i(e))}},62689:function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},93157:function(e){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},51789:function(e,t,n){var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:function(e,t,n){var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:function(e,t,n){var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:function(e,t,n){var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},65776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},15403:function(e,t,n){var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},37019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:function(e,t,n){var r=n(14429),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},25726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:function(e,t,n){var r=n(13218);e.exports=function(e){return e===e&&!r(e)}},27040:function(e){e.exports=function(){this.__data__=[],this.size=0}},14125:function(e,t,n){var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},82117:function(e,t,n){var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:function(e,t,n){var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:function(e,t,n){var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:function(e,t,n){var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:function(e,t,n){var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:function(e,t,n){var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:function(e,t,n){var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:function(e,t,n){var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},68776:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},24523:function(e,t,n){var r=n(88306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},94536:function(e,t,n){var r=n(10852)(Object,"create");e.exports=r},86916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},31167:function(e,t,n){e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},55639:function(e,t,n){var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},90619:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:function(e){e.exports=function(e){return this.__data__.has(e)}},21814:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},37465:function(e,t,n){var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:function(e){e.exports=function(e){return this.__data__.get(e)}},44758:function(e){e.exports=function(e){return this.__data__.has(e)}},34309:function(e,t,n){var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},83140:function(e,t,n){var r=n(44286),i=n(62689),o=n(676);e.exports=function(e){return i(e)?o(e):r(e)}},55514:function(e,t,n){var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:function(e,t,n){var r=n(33448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},80346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},676:function(e){var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+r+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+s+("(?:\\u200d(?:"+[i,o,a].join("|")+")"+l+s+")*"),c="(?:"+[i+n+"?",n,o,a,t].join("|")+")",d=RegExp(r+"(?="+r+")|"+c+u,"g");e.exports=function(e){return e.match(d)||[]}},2757:function(e){var t="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+i+"]",a="\\d+",s="[\\u2700-\\u27bf]",l="["+n+"]",u="[^\\ud800-\\udfff"+i+a+t+n+r+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+r+"]",f="(?:"+l+"|"+u+")",p="(?:"+h+"|"+u+")",m="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",g="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",_=y+v+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",c,d].join("|")+")"+y+v+")*"),b="(?:"+[s,c,d].join("|")+")"+_,x=RegExp([h+"?"+l+"+"+m+"(?="+[o,h,"$"].join("|")+")",p+"+"+g+"(?="+[o,h+f,"$"].join("|")+")",h+"?"+f+"+"+m,h+"+"+g,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,b].join("|"),"g");e.exports=function(e){return e.match(x)||[]}},68929:function(e,t,n){var r=n(48403),i=n(35393)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},48403:function(e,t,n){var r=n(79833),i=n(11700);e.exports=function(e){return i(r(e).toLowerCase())}},53816:function(e,t,n){var r=n(69389),i=n(79833),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(o,r).replace(a,"")}},77813:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},27361:function(e,t,n){var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},18721:function(e,t,n){var r=n(78565),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},79095:function(e,t,n){var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:function(e){e.exports=function(e){return e}},35694:function(e,t,n){var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:function(e){var t=Array.isArray;e.exports=t},98612:function(e,t,n){var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},44144:function(e,t,n){e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},23560:function(e,t,n){var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:function(e,t,n){var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:function(e,t,n){var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},67523:function(e,t,n){var r=n(89465),i=n(47816),o=n(67206);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,t(e,i,o),e)})),n}},66604:function(e,t,n){var r=n(89465),i=n(47816),o=n(67206);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},88306:function(e,t,n){var r=n(83369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},39601:function(e,t,n){var r=n(40371),i=n(79152),o=n(15403),a=n(40327);e.exports=function(e){return o(e)?r(a(e)):i(e)}},11865:function(e,t,n){var r=n(35393)((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));e.exports=r},70479:function(e){e.exports=function(){return[]}},95062:function(e){e.exports=function(){return!1}},79833:function(e,t,n){var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},11700:function(e,t,n){var r=n(98805)("toUpperCase");e.exports=r},58748:function(e,t,n){var r=n(49029),i=n(93157),o=n(79833),a=n(2757);e.exports=function(e,t,n){return e=o(e),void 0===(t=n?void 0:t)?i(e)?a(e):r(e):e.match(t)||[]}},34529:function(e,t,n){"use strict";var r=n(51833),i=n(89386),o=n(43200),a=n(41086);e.exports=function(e,t,n){if(!r(e))throw new TypeError("expected an object");if("string"!==typeof t||null==n)return i.apply(null,arguments);if("string"===typeof n)return a(e,t,n),e;var s=o(e,t);return r(n)&&r(s)&&(n=i({},s,n)),a(e,t,n),e}},89386:function(e,t,n){"use strict";var r=n(51833),i=n(52561);function o(e,t){for(var n=arguments.length,r=0;++r<n;){var o=arguments[r];s(o)&&i(o,a,e)}return e}function a(e,t){if(function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}(t)){var n=this[t];s(e)&&s(n)?o(n,e):this[t]=e}}function s(e){return r(e)&&!Array.isArray(e)}e.exports=o},41726:function(e,t,n){"use strict";n.d(t,{U:function(){return i},v:function(){return o}});var r=n(19608),i=function(e){var t=r.ZP.timeline(),n=r.ZP.utils.selector(e),i=n(".content__image-container"),o=n(".content__image"),a=n(".content__title"),s=n(".content__back-arrow-container"),l=n(".content__content");o&&(t.set(i,{autoAlpha:0}),t.set(o,{scale:1.25,autoAlpha:1})),t.set([a,l],{y:20,autoAlpha:0}),s&&t.set(s,{y:20,autoAlpha:0}),o&&(t.to(i,{autoAlpha:1,duration:.8,ease:"power2.out"}),t.to(o,{scale:1,duration:1.2,ease:"power2.out"},"<")),t.to([a,l],{y:0,autoAlpha:1,duration:.8,ease:"power2.out"},"-=0.4"),s&&t.to(s,{y:0,autoAlpha:1,duration:.8,ease:"power2.out"},"-=0.4")},o=function(e,t){var n=r.ZP.timeline({onComplete:t}),i=r.ZP.utils.selector(e),o=i(".content__image-container"),a=i(".content__title"),s=i(".content__content"),l=i(".content__back-arrow-container");o&&n.to(o,{autoAlpha:0,duration:.4,ease:"power2.in"}),n.to([a,s],{y:-20,autoAlpha:0,duration:.5,ease:"power2.in"},"<"),l&&n.to(l,{y:-20,autoAlpha:0,duration:.5,ease:"power2.in"},"<")}},33627:function(e,t,n){"use strict";n.d(t,{$w:function(){return u},ZJ:function(){return l},pf:function(){return c}});var r=n(19608),i=n(62079),o=n.n(i),a=n(60577),s=n(41055),l=function(e,t){a.h.getState().dotHoverTl&&a.h.getState().dotHoverTl.kill();var n=r.ZP.timeline();a.h.setState({dotHoverTl:n});var i=r.ZP.utils.selector(e),o=i(".dot-hover__circle-outline"),s=i(".dot-hover__image-container"),l=i(".dot-hover__image"),u=i(".dot-hover__image-full"),c=i(".dot-hover__copy-container");n.set(e,{x:t.position.x,y:t.position.y,autoAlpha:0}),n.set(o,{scale:0}),n.set(s,{scale:0}),n.set(u,{autoAlpha:0}),n.set(l,{autoAlpha:1,scale:2}),n.set(c,{x:"-10",autoAlpha:0}),n.to(e,{autoAlpha:1,duration:.5}),n.to(o,{scale:1,duration:.5,ease:"power2.out"},"<"),n.to(c,{x:"0",autoAlpha:1,duration:.5,ease:"power2.out"},"<"),n.to(s,{scale:1,duration:.5,ease:"power2.out"},"-=0.1"),n.to(l,{scale:1,duration:.5,ease:"power2.out"},"<")},u=function(e,t){if(a.h.getState().dotHoverTl&&a.h.getState().dotHoverTl.kill(),!a.h.getState().dotHoverTransitionTl){var n=r.ZP.timeline({onComplete:t});a.h.setState({dotHoverTl:n});var i=r.ZP.utils.selector(e),o=i(".dot-hover__circle-outline"),s=i(".dot-hover__image-container"),l=i(".dot-hover__image"),u=i(".dot-hover__copy-container");n.to(e,{autoAlpha:0,duration:.5,ease:"power2.in"}),n.to(o,{scale:0,duration:.5,ease:"power2.in"},"<"),n.to(s,{scale:0,duration:.5,ease:"power2.in"},"<"),n.to(l,{scale:2,duration:.5,ease:"power2.in"},"<"),n.to(u,{x:"-10",autoAlpha:0,duration:.5,ease:"power2.in"},"<")}},c=function(e,t){var n=t.noThumbnail,i=t.type,l=t.video;a.h.getState().dotHoverTransitionTl&&a.h.getState().dotHoverTransitionTl.kill(),a.h.getState().dotHoverTl&&a.h.getState().dotHoverTl.kill(),r.ZP.registerPlugin(o());var u=r.ZP.timeline({onComplete:function(){setTimeout((function(){return a.h.setState({dotHoverTransitionTl:null})}),200),e()}});a.h.setState({dotHoverTransitionTl:u});var c=s.h.getState().dotHoverRef,d=a.h.getState().flipContainer,h=r.ZP.utils.selector(c),f=h(".dot-hover__circle-outline"),p=h(".dot-hover__image-container"),m=h(".dot-hover__image"),g=h(".dot-hover__image-full"),v=h(".dot-hover__copy-container"),y=r.ZP.utils.selector(d),_=y(".flip__hero-container"),b=y(".flip__background");if(_[0].innerHTML&&(_[0].innerHTML=""),n||"timeline"===i)u.set(d,{autoAlpha:1}),u.to(c,{autoAlpha:0,duration:.5,ease:"power2.in"}),u.to(f,{scale:0,duration:.5,ease:"power2.in"},"<"),u.to(p,{scale:0,duration:.5,ease:"power2.in"},"<"),u.to(m,{scale:2,duration:.5,ease:"power2.in"},"<"),u.to(v,{x:"-10",autoAlpha:0,duration:.5,ease:"power2.in"},"<"),u.to(b,{autoAlpha:1,duration:.8});else if("video"===i&&l){var x=o().getState(p),w=document.createElement("video"),S=document.createElement("div");S.className="flip__video-container",w.src=l,w.className="flip__video",_[0].appendChild(S),S.appendChild(p[0]),S.appendChild(w),p[0].classList.add("flip__content-image-container--video");var D=o().from(x,{duration:1.2,ease:"power2.in",scale:!0});u.set(d,{autoAlpha:1}),u.set(m,{autoAlpha:0}),u.set(g,{autoAlpha:1}),u.to(b,{autoAlpha:1,duration:.8}),u.to(v,{x:"-10",autoAlpha:0,duration:.5,ease:"power2.in"},"<"),u.to(f,{scale:3,autoAlpha:0,duration:.25,ease:"power2.in"},"<"),u.add(D,"<"),u.to(p[0],{width:"100%",borderRadius:"0%",duration:.8})}else{var A=o().getState(p);_[0].appendChild(p[0]),p[0].classList.add("flip__content-image-container");var E=o().from(A,{duration:1.2,ease:"power2.in",scale:!0});u.set(d,{autoAlpha:1}),u.set(m,{autoAlpha:0}),u.set(g,{autoAlpha:1}),u.to(b,{autoAlpha:1,duration:.8}),u.to(v,{x:"-10",autoAlpha:0,duration:.5,ease:"power2.in"},"<"),u.to(f,{scale:3,autoAlpha:0,duration:.25,ease:"power2.in"},"<"),u.add(E,"<"),u.to(p[0],{scale:1,onComplete:function(){r.ZP.set(this.targets(),{clearProps:"all"})}})}}},11930:function(e,t,n){"use strict";n.d(t,{ZQ:function(){return u},b6:function(){return p},kT:function(){return h},kp:function(){return d},um:function(){return c},xW:function(){return f}});var r=n(50029),i=n(87794),o=n.n(i),a=n(19608),s=n(78336),l=n.n(s),u=function(e){var t=a.ZP.utils.selector(e),n=a.ZP.timeline();n.set([t(".header__clock"),t(".header__globe")],{autoAlpha:0}),n.set(t(".header__globe"),{x:"+=142",y:0}),n.set(t(".header__clock"),{x:"+=78",y:0}),n.to([t(".header__clock"),t(".header__globe")],{x:0,autoAlpha:.5,duration:2.25,ease:"power2.out",onComplete:function(){a.ZP.set(this.targets(),{clearProps:"all"})}},"+=0.5")},c=function(e){var t=a.ZP.utils.selector(e);a.ZP.timeline().to([t(".header__clock"),t(".header__globe")],{y:"-=30",autoAlpha:0,duration:.5,ease:"power2.out",onStart:function(){this.targets().forEach((function(e){e.style.transition="none"}))}})},d=function(e,t){var n=t.hamburgerVisible,r=t.viewIconsVisible,i=t.isMobile;a.ZP.registerPlugin(l());var o=a.ZP.utils.selector(e),s=a.ZP.timeline(),c=new(l())(o(".header__wim"),{type:"chars"}).chars,d=new(l())(o(".header__share"),{type:"chars"}).chars;s.set([c,d,o(".header__globe, .header__clock, .header__hamburger")],{autoAlpha:0}),s.set([e,o(".header__wim, .header__share, .header__right")],{autoAlpha:1,y:0,scale:1}),i?(s.set(e,{scaleX:0,autoAlpha:1}),s.to(e,{scaleX:1,duration:1.2,delay:.5,ease:"power2.out"}),s.to(c,{autoAlpha:1,duration:1.7,stagger:.05,ease:"power2.out"},"-=0.3"),s.to(o(".header__hamburger"),{autoAlpha:1,duration:1.7,ease:"power2.out"},"<")):(s.addLabel("initial"),s.to(o(".header__hamburger"),{autoAlpha:1,duration:1.7,ease:"power2.out"}),s.to(c,{autoAlpha:1,duration:1.7,stagger:.05,ease:"power2.out",onStart:function(){n&&function(e,t){var n=a.ZP.utils.selector(e),r=a.ZP.timeline(),i=n(".header__hamburger");r.to(i,{autoAlpha:1,duration:1.7,ease:"power2.out",onStart:function(){t&&u(e)}})}(e,r)}},"<"),s.to(d,{autoAlpha:1,duration:1.7,stagger:.05,ease:"power2.out"},"-=1"))},h=function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.ZP.timeline(),e.next=3,n.to(t,{autoAlpha:0,y:"-=8",duration:.7,ease:"power2.out"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.ZP.timeline(),r=a.ZP.utils.selector(t),n.set(r(".header__mobile-close"),{autoAlpha:0,scale:0}),n.to(r(".header__hamburger"),{autoAlpha:0,duration:.5,ease:"power2.out",scale:0}),n.to(r(".header__mobile-close, .header__mobile-search"),{autoAlpha:1,duration:.5,ease:"power2.out",scale:1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.ZP.timeline(),r=a.ZP.utils.selector(t),n.to(r(".header__mobile-close, .header__mobile-search"),{autoAlpha:0,duration:.5,ease:"power2.out",scale:0}),n.to(r(".header__hamburger"),{autoAlpha:1,duration:.5,ease:"power2.out",scale:1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},19910:function(e,t,n){"use strict";n.d(t,{W:function(){return u},t:function(){return c}});var r=n(50029),i=n(87794),o=n.n(i),a=n(19608),s=n(78336),l=n.n(s),u=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,i,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.ZP.registerPlugin(l()),n=a.ZP.timeline(),r=a.ZP.utils.selector(t),i=r(".js-homepage-menu__container"),s=r(".menu__dot"),u=r(".menu__link-copy"),c=new(l())(r(".js-homepage-menu__path-copy"),{type:"chars"}).chars,n.set(s,{scale:0}),n.set(u,{autoAlpha:0}),n.set(c,{autoAlpha:0}),n.to(i,{autoAlpha:1,duration:.8,ease:"power2.out"}),n.to(s,{scale:1,duration:.8,ease:"power2.out"}),n.addLabel("dotsFinished"),n.to(u,{autoAlpha:1,duration:1.8,ease:"power2.out"},"dotsFinished-=0.3"),n.to(c,{autoAlpha:1,duration:1.7,stagger:.05,ease:"power2.out"});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(o().mark((function e(t,n,r){var i,s,l,u,c,d,h,f,p,m,g,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.ZP.timeline({onComplete:function(){r&&setTimeout((function(){return r()}),1e3)}}),s=a.ZP.utils.selector(t),l=s("[data-menu-li]"),u=l.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.menuLi)!==n})),c=u.map((function(e){return e.querySelector(".menu__dot")})),d=u.map((function(e){return e.querySelector(".menu__link-copy")})),h=l.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.menuLi)===n})),f=h[0].querySelector(".menu__dot"),p=h[0].querySelector(".menu__link-copy"),m=s('[data-circle="'.concat(n,'"]')),g=m[0].querySelector("p"),v="solutions"!==n&&"explore"!==n,i.addLabel("initial"),i.to(d,{autoAlpha:0,duration:.7,ease:"power2.out"}),i.to(c,{scale:0,duration:.7,ease:"power2.in"},"<"),i.to(p,{autoAlpha:0,duration:.7,ease:"power2.out"},"+=0.5"),i.to(f,{scale:0,duration:.7,ease:"power2.in"},"<"),v&&i.to(t,{backgroundColor:"rgba(0, 0, 0, 1)",duration:.8,ease:"power2.out"},"<"),i.to(m,{autoAlpha:0,duration:.7,scale:1.02,ease:"power2.out"},"initial"),i.to(g,{autoAlpha:0,duration:.7,y:"-20",ease:"power2.out"},"<"),i.set(s(".js-homepage-menu__path-copy"),{autoAlpha:0,duration:0},"initial");case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},98367:function(e,t,n){"use strict";n.d(t,{iI:function(){return O},JI:function(){return k},c5:function(){return N},kh:function(){return B},dH:function(){return L},_f:function(){return F},hM:function(){return P},hj:function(){return R},BL:function(){return T},KB:function(){return C},cQ:function(){return I}});var r=n(19608),i=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function o(e){var t=e.nodeType,n="";if(1===t||9===t||11===t){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===t||4===t)return e.nodeValue;return n}var a,s,l,u=/(?:\r|\n|\t\t)/g,c=/(?:\s\s+)/g,d=function(e){return s.getComputedStyle(e)},h=Array.isArray,f=[].slice,p=function(e,t){var n;return h(e)?e:"string"===(n=typeof e)&&!t&&e?f.call(a.querySelectorAll(e),0):e&&"object"===n&&"length"in e?f.call(e,0):e?[e]:[]},m=function(e){return"absolute"===e.position||!0===e.absolute},g=function(e,t){for(var n,r=t.length;--r>-1;)if(n=t[r],e.substr(0,n.length)===n)return n.length},v=function(e,t){void 0===e&&(e="");var n=~e.indexOf("++"),r=1;return n&&(e=e.split("++").join("")),function(){return"<"+t+" style='position:relative;display:inline-block;'"+(e?" class='"+e+(n?r++:"")+"'>":">")}},y=function e(t,n,r){var i=t.nodeType;if(1===i||9===i||11===i)for(t=t.firstChild;t;t=t.nextSibling)e(t,n,r);else 3!==i&&4!==i||(t.nodeValue=t.nodeValue.split(n).join(r))},_=function(e,t){for(var n=t.length;--n>-1;)e.push(t[n])},b=function(e,t,n){for(var r;e&&e!==t;){if(r=e._next||e.nextSibling)return r.textContent.charAt(0)===n;e=e.parentNode||e._parent}},x=function e(t){var n,r,i=p(t.childNodes),o=i.length;for(n=0;n<o;n++)(r=i[n])._isSplit?e(r):n&&r.previousSibling&&3===r.previousSibling.nodeType?(r.previousSibling.nodeValue+=3===r.nodeType?r.nodeValue:r.firstChild.nodeValue,t.removeChild(r)):3!==r.nodeType&&(t.insertBefore(r.firstChild,r),t.removeChild(r))},w=function(e,t){return parseFloat(t[e])||0},S=function(e,t,n,r,i,o,s){var l,u,c,h,f,p,g,v,S,D,A,E,M=d(e),C=w("paddingLeft",M),T=-999,P=w("borderBottomWidth",M)+w("borderTopWidth",M),R=w("borderLeftWidth",M)+w("borderRightWidth",M),k=w("paddingTop",M)+w("paddingBottom",M),O=w("paddingLeft",M)+w("paddingRight",M),L=w("fontSize",M)*(t.lineThreshold||.2),F=M.textAlign,I=[],N=[],B=[],j=t.wordDelimiter||" ",z=t.tag?t.tag:t.span?"span":"div",U=t.type||t.split||"chars,words,lines",H=i&&~U.indexOf("lines")?[]:null,G=~U.indexOf("words"),V=~U.indexOf("chars"),W=m(t),Z=t.linesClass,$=~(Z||"").indexOf("++"),q=[],Y="flex"===M.display,K=e.style.display;for($&&(Z=Z.split("++").join("")),Y&&(e.style.display="block"),c=(u=e.getElementsByTagName("*")).length,f=[],l=0;l<c;l++)f[l]=u[l];if(H||W)for(l=0;l<c;l++)((p=(h=f[l]).parentNode===e)||W||V&&!G)&&(E=h.offsetTop,H&&p&&Math.abs(E-T)>L&&("BR"!==h.nodeName||0===l)&&(g=[],H.push(g),T=E),W&&(h._x=h.offsetLeft,h._y=E,h._w=h.offsetWidth,h._h=h.offsetHeight),H&&((h._isSplit&&p||!V&&p||G&&p||!G&&h.parentNode.parentNode===e&&!h.parentNode._isSplit)&&(g.push(h),h._x-=C,b(h,e,j)&&(h._wordEnd=!0)),"BR"===h.nodeName&&(h.nextSibling&&"BR"===h.nextSibling.nodeName||0===l)&&H.push([])));for(l=0;l<c;l++)if(p=(h=f[l]).parentNode===e,"BR"!==h.nodeName)if(W&&(S=h.style,G||p||(h._x+=h.parentNode._x,h._y+=h.parentNode._y),S.left=h._x+"px",S.top=h._y+"px",S.position="absolute",S.display="block",S.width=h._w+1+"px",S.height=h._h+"px"),!G&&V)if(h._isSplit)for(h._next=u=h.nextSibling,h.parentNode.appendChild(h);u&&3===u.nodeType&&" "===u.textContent;)h._next=u.nextSibling,h.parentNode.appendChild(u),u=u.nextSibling;else h.parentNode._isSplit?(h._parent=h.parentNode,!h.previousSibling&&h.firstChild&&(h.firstChild._isFirst=!0),h.nextSibling&&" "===h.nextSibling.textContent&&!h.nextSibling.nextSibling&&q.push(h.nextSibling),h._next=h.nextSibling&&h.nextSibling._isFirst?null:h.nextSibling,h.parentNode.removeChild(h),f.splice(l--,1),c--):p||(E=!h.nextSibling&&b(h.parentNode,e,j),h.parentNode._parent&&h.parentNode._parent.appendChild(h),E&&h.parentNode.appendChild(a.createTextNode(" ")),"span"===z&&(h.style.display="inline"),I.push(h));else h.parentNode._isSplit&&!h._isSplit&&""!==h.innerHTML?N.push(h):V&&!h._isSplit&&("span"===z&&(h.style.display="inline"),I.push(h));else H||W?(h.parentNode&&h.parentNode.removeChild(h),f.splice(l--,1),c--):G||e.appendChild(h);for(l=q.length;--l>-1;)q[l].parentNode.removeChild(q[l]);if(H){for(W&&(D=a.createElement(z),e.appendChild(D),A=D.offsetWidth+"px",E=D.offsetParent===e?0:e.offsetLeft,e.removeChild(D)),S=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(v=" "===j&&(!W||!G&&!V),l=0;l<H.length;l++){for(g=H[l],(D=a.createElement(z)).style.cssText="display:block;text-align:"+F+";position:"+(W?"absolute;":"relative;"),Z&&(D.className=Z+($?l+1:"")),B.push(D),c=g.length,u=0;u<c;u++)"BR"!==g[u].nodeName&&(h=g[u],D.appendChild(h),v&&h._wordEnd&&D.appendChild(a.createTextNode(" ")),W&&(0===u&&(D.style.top=h._y+"px",D.style.left=C+E+"px"),h.style.top="0px",E&&(h.style.left=h._x-E+"px")));0===c?D.innerHTML="&nbsp;":G||V||(x(D),y(D,String.fromCharCode(160)," ")),W&&(D.style.width=A,D.style.height=h._h+"px"),e.appendChild(D)}e.style.cssText=S}W&&(s>e.clientHeight&&(e.style.height=s-k+"px",e.clientHeight<s&&(e.style.height=s+P+"px")),o>e.clientWidth&&(e.style.width=o-O+"px",e.clientWidth<o&&(e.style.width=o+R+"px"))),Y&&(K?e.style.display=K:e.style.removeProperty("display")),_(n,I),G&&_(r,N),_(i,B)},D=function(e,t,n,r){var s,l,d,h,f,p,v,_,b=t.tag?t.tag:t.span?"span":"div",x=~(t.type||t.split||"chars,words,lines").indexOf("chars"),w=m(t),S=t.wordDelimiter||" ",D=" "!==S?"":w?"&#173; ":" ",A="</"+b+">",E=1,M=t.specialChars?"function"===typeof t.specialChars?t.specialChars:g:null,C=a.createElement("div"),T=e.parentNode;for(T.insertBefore(C,e),C.textContent=e.nodeValue,T.removeChild(e),v=-1!==(s=o(e=C)).indexOf("<"),!1!==t.reduceWhiteSpace&&(s=s.replace(c," ").replace(u,"")),v&&(s=s.split("<").join("{{LT}}")),f=s.length,l=(" "===s.charAt(0)?D:"")+n(),d=0;d<f;d++)if(p=s.charAt(d),M&&(_=M(s.substr(d),t.specialChars)))p=s.substr(d,_||1),l+=x&&" "!==p?r()+p+"</"+b+">":p,d+=_-1;else if(p===S&&s.charAt(d-1)!==S&&d){for(l+=E?A:"",E=0;s.charAt(d+1)===S;)l+=D,d++;d===f-1?l+=D:")"!==s.charAt(d+1)&&(l+=D+n(),E=1)}else"{"===p&&"{{LT}}"===s.substr(d,6)?(l+=x?r()+"{{LT}}</"+b+">":"{{LT}}",d+=5):p.charCodeAt(0)>=55296&&p.charCodeAt(0)<=56319||s.charCodeAt(d+1)>=65024&&s.charCodeAt(d+1)<=65039?(h=((s.substr(d,12).split(i)||[])[1]||"").length||2,l+=x&&" "!==p?r()+s.substr(d,h)+"</"+b+">":s.substr(d,h),d+=h-1):l+=x&&" "!==p?r()+p+"</"+b+">":p;e.outerHTML=l+(E?A:""),v&&y(T,"{{LT}}","<")},A=function e(t,n,r,i){var o,a,s=p(t.childNodes),l=s.length,u=m(n);if(3!==t.nodeType||l>1){for(n.absolute=!1,o=0;o<l;o++)(a=s[o])._next=a._isFirst=a._parent=a._wordEnd=null,(3!==a.nodeType||/\S+/.test(a.nodeValue))&&(u&&3!==a.nodeType&&"inline"===d(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,e(a,n,r,i));return n.absolute=u,void(t._isSplit=!0)}D(t,n,r,i)},E=function(){function e(e,t){l||(a=document,s=window,l=1),this.elements=p(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)}var t=e.prototype;return t.split=function(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t,n,r,i=this.elements.length,o=e.tag?e.tag:e.span?"span":"div",a=v(e.wordsClass,o),s=v(e.charsClass,o);--i>-1;)r=this.elements[i],this._originals[i]=r.innerHTML,t=r.clientHeight,n=r.clientWidth,A(r,e,a,s),S(r,e,this.chars,this.words,this.lines,n,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},t.revert=function(){var e=this._originals;if(!e)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(t,n){return t.innerHTML=e[n]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},e.create=function(t,n){return new e(t,n)},e}();E.version="3.10.2";var M=n(60577),C=function(e,t){var n=t.onComplete,i=t.fadeBackground,o=void 0!==i&&i,a=r.p8.utils.selector(e)(".js-indexPage-content"),s=r.p8.timeline({onComplete:function(){return null===n||void 0===n?void 0:n()}}),l=o?e:a;return s.to(l,{duration:1.2,autoAlpha:0,ease:"power1.in"}),s},T=function(e){var t,n=null===(t=M.h.getState().router)||void 0===t?void 0:t.pathname,i=/^\/solutions/.test(n),o="/"===n||i||"/search"===n,a=r.p8.utils.selector(e)(".content__back-arrow-container"),s=r.p8.timeline();return o?(s.set(a,{autoAlpha:0,y:"20"}),s.to(e,{autoAlpha:1,ease:"power1.in"}),s.to(a,{autoAlpha:1,y:"0",duration:.8,ease:"power2.out"})):(s.set(e,{autoAlpha:1}),a&&s.to(a,{autoAlpha:1,y:"0",duration:.8,ease:"power2.out"})),s},P=function(e){var t=r.p8.utils.selector(e)(".js-accordion__trigger");window.scrollTo(0,0);var n=r.p8.timeline({delay:.05});return t.forEach((function(e,t){var i=r.p8.utils.selector(e)(".js-accordion__title"),o=new E(i,{type:"chars"}).chars,a=.22*t;n.set(o,{opacity:0},0).to(e,{duration:1.3,autoAlpha:1,ease:"power1.in"},a).to(o,{autoAlpha:1,duration:1.7,stagger:.05,ease:"power2.in"},a)})),n},R=function(e){var t=r.p8.timeline({delay:.1});return t.to(e,{duration:.9,opacity:0}),t},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?0:n,o=r.p8.utils.selector(e),a=o(".js-accordion__grid"),s=o(".js-accordion__grid-thumbnail"),l=r.p8.timeline({delay:i});return r.p8.set(s,{scale:.8,autoAlpha:0}),l.to(a,{duration:1,autoAlpha:1,rotateZ:.01,ease:"power1.in"},0).to(s,{duration:.85,autoAlpha:1,stagger:.12,ease:"power1.in"},0).to(s,{duration:.85,scale:1,rotateZ:.01,stagger:.12,ease:"power1.inOut"},0),l.timeScale(1.4),l},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?0:n,o=r.p8.utils.selector(e),a=o(".js-accordion__grid"),s=o(".js-accordion__grid-thumbnail"),l=r.p8.timeline({delay:i});return l.to(a,{duration:1,autoAlpha:0,rotateZ:.01,ease:"power1.in"},0).to(s,{duration:.85,scale:.8,autoAlpha:0,rotateZ:.01,stagger:.12,ease:"power1.inOut"},0),l.timeScale(1.4),l},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?0:n,o=t.cb,a=void 0===o?function(){}:o,s=t.instant,l=void 0!==s&&s,u=r.p8.utils.selector(e),c=u(".js-indexPage__type-selector"),d=u(".js-root-clear"),h=20,f=l?0:.7,p=r.p8.timeline({delay:i});return p.to(d,{duration:f,y:-h,autoAlpha:0,ease:"power1.inOut"}).fromTo(c,{y:h,autoAlpha:0},{duration:f,y:0,autoAlpha:1,stagger:.05,ease:"power1.inOut"},.2).call(a),p},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasClear,i=void 0===n||n,o=r.p8.utils.selector(e),a=o(".js-indexPage__type-selector"),s=o(".js-root-clear"),l=20,u=.7,c=r.p8.timeline();return c.to(a,{duration:u,y:-l,autoAlpha:0,stagger:.05,ease:"power1.inOut"}),i&&c.fromTo(s,{y:l,autoAlpha:0},{duration:u,y:0,autoAlpha:1,ease:"power1.inOut"},.2),c},I=function(e){var t=r.p8.utils.selector(e)(".js-singularity-filter");r.p8.timeline({onComplete:function(){F(e)}}).to(t,{duration:.7,y:-20,autoAlpha:0,ease:"power1.inOut"})},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?.05:n,o=r.p8.utils.selector(e),a=o(".js-accordion__groupList").slice(0,6),s=o(".js-accordion__groupList").slice(0,o(".js-accordion__groupList").length),l=r.p8.timeline({delay:i});return l.set(s,{autoAlpha:1}),a.forEach((function(e,t){var n=r.p8.utils.selector(e),i=n(".js-accordion__groupList-image"),o=n(".js-accordion__groupList-name"),a=n(".js-accordion__groupList-entry").slice(0,40),s=n(".js-accordion__groupList-entry").slice(40,n(".js-accordion__groupList-entry").length),u=.2*t;l.to(e,{autoAlpha:1,ease:"power1.in"},u).fromTo(i,{scale:.6,autoAlpha:0},{scale:1,autoAlpha:1,ease:"power1.inOut"},u+.5).fromTo(o,{autoAlpha:0},{autoAlpha:1,ease:"power1.in"},u+.5).fromTo(a,{autoAlpha:0},{autoAlpha:1,stagger:.06,ease:"power1.in"},u).set(s,{autoAlpha:1})})),l},B=function(e,t){var n=r.p8.utils.selector(e)(".js-accordion__groupList"),i=r.p8.timeline({delay:.05,onComplete:function(){t&&t()}});return i.to(n,{autoAlpha:0,ease:"power1.in"},0),i}},53026:function(e,t,n){"use strict";n.d(t,{I:function(){return i},Z:function(){return o}});var r=n(19608),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=(r.p8.utils.selector(e),r.p8.timeline({onStart:n,onComplete:i}));return o.to(e,{duration:t,autoAlpha:1,ease:"power1.in"},.2).fromTo(e,{y:130},{duration:t,y:0,ease:"power2.inOut"},.2),o},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=(r.p8.utils.selector(e),r.p8.timeline({onStart:n,onComplete:i}));return o.to(e,{duration:t,autoAlpha:0,ease:"power1.in"},0).to(e,{duration:1.1*t,y:130,ease:"power2.inOut"},0),o}},66771:function(e,t,n){"use strict";n.d(t,{BW:function(){return s},Hw:function(){return u},VT:function(){return d},_0:function(){return c},kn:function(){return l},pU:function(){return h}});var r=n(19608),i=n(62079),o=n.n(i),a=n(60577),s=function(e){var t=r.ZP.timeline(),n=r.ZP.utils.selector(e),i=n(".js-search__title-container"),o=n(".js-search__content-container"),a=n(".js-search__filter-container"),s=n(".js-search__subtitle"),l=a[0].querySelectorAll("label"),u=n(".js-search-item__image-container"),c=n(".js-search-item__image"),d=n(".js-search-item__copy-container");t.set([i,o],{autoAlpha:0,y:20}),t.set(l,{autoAlpha:0,y:20}),t.set(u,{scale:0}),t.set(d,{autoAlpha:0,x:-20}),t.set(c,{scale:1.5}),t.set(a,{autoAlpha:1}),t.to([i,o],{duration:.7,autoAlpha:1,y:0,ease:"power2.out"}),t.to(l,{duration:.7,y:0,autoAlpha:1,stagger:.05,ease:"power1.inOut"}),t.to(s,{duration:.7,autoAlpha:1,ease:"power2.out"},"-=0.3"),t.to([u,c],{duration:1.2,scale:1,ease:"power2.out"},"<"),t.to(d,{duration:1.2,x:0,autoAlpha:1,ease:"power2.out"},"<")},l=function(e,t,n){var i=n.noThumbnail,s=n.timeline,l=n.video;a.h.getState().dotHoverTransitionTl&&a.h.getState().dotHoverTransitionTl.kill(),a.h.getState().dotHoverTl&&a.h.getState().dotHoverTl.kill(),r.ZP.registerPlugin(o());var u=r.ZP.timeline({onComplete:function(){a.h.setState({dotHoverTransitionTl:null}),t()}});a.h.setState({dotHoverTransitionTl:u});var c=r.ZP.utils.selector(e),d=c(".js-search__title-container"),h=c(".js-search__search-input"),f=c(".js-search-item__container"),p=c(".js-search__filter-container"),m=c(".js-search__subtitle"),g=p[0].querySelectorAll("label, button"),v=c('[data-selected="true"]'),y=v[0].querySelector(".js-search-item__image-container"),_=v[0].querySelector(".js-search-item__image"),b=v[0].querySelector(".js-search-item__overlay"),x=a.h.getState().flipContainer,w=r.ZP.utils.selector(x),S=w(".flip__hero-container"),D=w(".flip__background");if(S[0].innerHTML&&(S[0].innerHTML=""),u.set(x,{autoAlpha:1}),u.to([d,h],{duration:.7,autoAlpha:0,y:-20,ease:"power2.out"}),u.to(g,{duration:.7,autoAlpha:0,y:-20,ease:"power2.out",stagger:.05},"<"),u.to(m,{duration:.5,autoAlpha:0,y:-20,ease:"power2.out"},"<"),l){var A=o().getState(y),E=document.createElement("video"),M=document.createElement("div");M.className="flip__video-container",E.src=l,E.className="flip__video",S[0].appendChild(M),M.appendChild(y),M.appendChild(E),y.classList.add("flip__content-image-container--video"),u.to(_,{duration:.7,scale:1,ease:"power2.out"},"<"),u.to(b,{duration:.4,autoAlpha:0,ease:"power2.out"},"<");var C=o().from(A,{duration:1.2,ease:"power2.in",scale:!0});u.to(D,{autoAlpha:1,duration:.8}),u.add(C,"<"),u.to(y,{width:"100%",borderRadius:"0%",duration:.8})}else if(!i&&!s){u.to(_,{duration:.7,scale:1,ease:"power2.out"},"<"),u.to(b,{duration:.4,autoAlpha:0,ease:"power2.out"},"<");var T=o().getState(y);S[0].appendChild(y),y.classList.add("flip__content-image-container");var P=o().from(T,{duration:1.2,ease:"power2.in",scale:!0});u.set(x,{autoAlpha:1}),u.to(D,{autoAlpha:1,duration:.8}),u.add(P,"<")}u.to(f,{duration:.5,autoAlpha:0,y:-20,ease:"power2.out",stagger:.1},"<")},u=function(e){var t=r.ZP.utils.selector(e)(".js-search-item__image");r.ZP.to(t,{duration:.7,scale:1.1,ease:"power2.out"})},c=function(e){var t=r.ZP.utils.selector(e)(".js-search-item__image");r.ZP.to(t,{duration:.7,scale:1,ease:"power2.out"})},d=function(e){var t=r.ZP.timeline(),n=r.ZP.utils.selector(e)(".js-search__clear-button");t.set(n,{autoAlpha:0,y:12}),t.to(n,{autoAlpha:1,y:0,duration:.5,ease:"power2.out"})},h=function(e){var t=r.ZP.timeline(),n=r.ZP.utils.selector(e)(".js-search__clear-button");t.to(n,{autoAlpha:0,y:-12,duration:.5,ease:"power2.in"})}},80130:function(e,t,n){"use strict";n.d(t,{I:function(){return i},Z:function(){return o}});var r=n(19608),i=function(e){var t=r.p8.utils.selector(e),n=t(".js-solutionIndex__bottom"),i=t(".js-solutionMap__back");r.p8.timeline().set(n,{y:20}).to(n,{autoAlpha:1,y:0,duration:1,ease:"power2.out"}).to(i,{autoAlpha:1,y:0,ease:"power2.inOut"},"-=0.5")},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=r.p8.utils.selector(e),i=n(".js-solutionMap__back"),o=n(".js-solutionIndex__bottom"),a=r.p8.timeline({onComplete:t});a.to(o,{opacity:0,autoAlpha:0,y:20,duration:1,ease:"power2.out"}).to(i,{autoAlpha:0,duration:1,ease:"power2.out"},0)}},89343:function(e,t,n){"use strict";n.d(t,{Bs:function(){return f},E6:function(){return m},RW:function(){return g},UX:function(){return _},Zo:function(){return y},_8:function(){return v},eL:function(){return p}});var r=n(19608),i=n(62079),o=n.n(i),a=n(68809),s=n.n(a),l=n(22373),u=n.n(l),c=n(11930),d=n(60577),h=n(41055),f=function(e,t){var n,i=e.container,a=e.wrapper,l=e.inner,c=t.prevRoute,h=t.responsiveVersion,f=t.cb,p="mobile"===h,m=d.h.getState().flipContainer,g="/timeline/[slug]/overview"===c,v=d.h.getState().timelineEnterTl;v&&v.kill();var y=r.ZP.timeline({onComplete:function(){f(),d.h.setState({timelineEnterTl:null}),n&&setTimeout((function(){return n.scrollTrigger.refresh()}),100)}});d.h.setState({timelineEnterTl:y});var _=r.ZP.utils.selector(i);r.ZP.registerPlugin(o(),s(),u());var b=_(".timeline__timeline-container"),x=_(".timeline__title-container"),w=_(".timeline-item__container"),S=_(".timeline-item__image"),D=_(".timeline__image-mask"),A=_(".timeline__outer-circle"),E=_(".timeline-item__right"),M=_(".timeline__back-arrow-container");if(p||(n=u().create({wrapper:a,content:l}),d.h.setState({activeScrollSmoother:n})),g){var C=[b,x,M];w.forEach((function(e){e.classList.remove("timeline-item__container--initial")})),y.set(C,{autoAlpha:0}),y.to(C,{autoAlpha:1,duration:1.5})}else{y.set([x,M],{autoAlpha:0,y:"20"}),y.set(S,{autoAlpha:0,scale:1.5}),y.set(D,{autoAlpha:0,scale:0}),y.set(A,{autoAlpha:0,scale:0}),y.set(E,{x:-20,autoAlpha:0}),"/"===c&&y.to(m,{autoAlpha:0,duration:.5}),y.set(b,{autoAlpha:1}),y.to(D,{autoAlpha:1,scale:1,duration:.8,ease:"power2.out"}),y.to(S,{autoAlpha:1,scale:1,duration:.8,ease:"power2.out"},"<");var T=o().batch("imageBatch");T.add({getState:function(){return o().getState(w)},setState:function(e){e.states[0].targets.forEach((function(e){e.classList.remove("timeline-item__container--initial")}))},animate:function(e){e.states.forEach((function(e){o().from(e,{duration:1.2,scale:!0,ease:"power2.in"})}))}}),y.add((function(){return T.run()}),"+=0.8"),y.to(A,{autoAlpha:1,scale:1,duration:.5,ease:"power2.out"},"+=1.5"),y.to(E,{x:0,autoAlpha:1,duration:.5,ease:"power2.out",onComplete:function(){n&&n.scrollTrigger.refresh()}}),y.to(x,{autoAlpha:1,y:0,duration:.5,ease:"power2.out"}),y.to(M,{autoAlpha:1,y:0,duration:.5,ease:"power2.out"})}},p=function(e,t,n){var i=n.toPath,o=r.ZP.utils.selector(e),a=(o(".timeline__timeline-container"),o(".timeline__title-container")),s=(o(".timeline-item__container"),o(".timeline-item__left"),o(".timeline-item__image")),l=o(".timeline__image-mask"),u=o(".timeline__outer-circle"),c=o(".timeline-item__right"),d=o(".timeline__back-arrow-container"),h=r.ZP.timeline({onComplete:t});h.to(a,{autoAlpha:0,y:"20"}),h.to(d,{autoAlpha:0,y:"20"},"<"),h.to(u,{autoAlpha:0,scale:0},"<"),h.to(c,{x:-20,autoAlpha:0},"<"),h.to(s,{autoAlpha:0,scale:1.5}),h.to(l,{autoAlpha:0,scale:0},"<"),"/"===i&&h.to(e,{autoAlpha:0,duration:1,ease:"linear",onComplete:function(){e.style.overflow="hidden",e.style.height="100%"}})},m=function(e,t){var n,i=r.ZP.timeline(),o=r.ZP.utils.selector(e),a=null!==(n=null===t||void 0===t?void 0:t.ignoreImage)&&void 0!==n&&n,s=(o(".timeline__image-container"),o(".timeline__image-mask")),l=o(".timeline__outer-circle"),u=o(".timeline-item__right"),c=o(".timeline__read-more-container"),d=o(".timeline__read-more");i.set(d,{autoAlpha:0,y:8}),a||(i.to(s,{duration:.5,scale:2.25,ease:"power2.inOut"}),i.to(l,{width:"225%",height:"225%",duration:.5,ease:"power2.inOut"},"<")),i.to(e,{duration:.5,height:"+=50",ease:"power2.inOut"},"<"),i.to(u,{duration:.5,x:"+=50",ease:"power2.inOut"},"<"),i.to(c,{duration:.5,height:40,ease:"power2.inOut"},"<"),i.to(d,{duration:.8,y:0,autoAlpha:1,ease:"power2.out"})},g=function(e,t){var n,i=r.ZP.timeline(),o=r.ZP.utils.selector(e),a=null!==(n=null===t||void 0===t?void 0:t.ignoreImage)&&void 0!==n&&n,s=o(".timeline__outer-circle"),l=(o(".timeline__image-container"),o(".timeline__image-mask")),u=o(".timeline-item__right"),c=o(".timeline__read-more-container"),d=o(".timeline__read-more");a||(i.to(l,{duration:.5,scale:1,ease:"power2.inOut"}),i.to(s,{width:"100%",height:"100%",duration:.5,ease:"power2.inOut"},"<")),i.to(e,{duration:.5,height:"-=50",ease:"power2.inOut"},"<"),i.to(u,{duration:.5,x:"-=50",ease:"power2.inOut"},"<"),i.to(c,{duration:.5,height:0,ease:"power2.inOut"},"<"),i.to(d,{duration:.5,y:10,autoAlpha:0,ease:"power2.inOut"},"<")},v=function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.mobile)&&void 0!==t&&t;if(!1===d.h.getState().dotTimelineModalOpen){d.h.setState({dotTimelineModalOpen:!0}),r.ZP.registerPlugin(o());var i=h.h.getState().dotTimelineContainerRef,a=r.ZP.timeline(),s=r.ZP.utils.selector(i),l=s(".timeline__timeline-container"),u=s(".timeline__modal-container"),f=s('[data-active="active-timeline-item"] .timeline__image-mask'),p=s('[data-active="active-timeline-item"] .timeline__outer-circle'),m=s(".timeline__modal-image-container"),g=s(".timeline__modal-close"),v=s(".timeline__modal-copy-container"),y=s(".timeline__modal-nav-arrow-container");if(document.querySelector("body").style.overflow="hidden",n){u[0].scrollTop=0;var _=d.h.getState().headerRef;(0,c.xW)(_),a.set([g,v,y],{autoAlpha:0,y:15}),a.to(u,{autoAlpha:1}),a.to([g,v,y],{duration:.5,autoAlpha:1,y:0,ease:"power2.inOut"})}else{var b=o().getState(f[0]),x=o().getState(p[0]);a.set(u,{autoAlpha:1}),m[0].append(f[0]),m[0].append(p[0]);var w=r.ZP.delayedCall(.01,(function(){return o().from(b,{duration:.7,ease:"power2.in",scale:!0})})),S=r.ZP.delayedCall(.01,(function(){return o().from(x,{duration:.7,ease:"power2.in",scale:!0})}));a.set(f,{scale:1}),a.set(p,{width:"100%",height:"100%"}),a.set([g,v,y],{autoAlpha:0,y:15}),a.add(w),a.add(S),a.to(l,{duration:.5,autoAlpha:0,ease:"power2.out"},"<"),a.to(u,{duration:.5,autoAlpha:1,ease:"power2.out"}),a.to([g,v,y],{duration:.5,autoAlpha:1,y:0,ease:"power2.inOut"})}}},y=function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.mobile)&&void 0!==t&&t;if(!0===d.h.getState().dotTimelineModalOpen){d.h.setState({dotTimelineModalOpen:!1});var i=h.h.getState().dotTimelineContainerRef,a=r.ZP.timeline(),s=r.ZP.utils.selector(i),l=s(".timeline__timeline-container"),u=s(".timeline__modal-container"),f=s(".timeline-item__right"),p=s(".timeline__modal-container .timeline__image-mask"),m=s(".timeline__modal-container .timeline__outer-circle"),g=s('[data-active="active-timeline-item"] .timeline__image-container');if(n){var v=d.h.getState().headerRef;(0,c.b6)(v),a.to(u,{duration:.5,autoAlpha:0,y:0,ease:"power2.inOut",onComplete:function(){document.querySelector("body").style.overflow="initial"}})}else{document.querySelector("body").style.overflow="initial";var y=o().getState(p[0]),_=o().getState(m[0]);g[0].append(p[0]),g[0].append(m[0]);var b=r.ZP.delayedCall(.01,(function(){return o().from(y,{duration:.7,ease:"power2.in",scale:!0})})),x=r.ZP.delayedCall(.01,(function(){return o().from(_,{duration:.7,ease:"power2.in",scale:!0})}));a.set(p,{scale:2.25}),a.set(m,{width:"225%",height:"225%"}),a.add(b),a.add(x),a.set(l,{autoAlpha:1}),a.set(f,{autoAlpha:0}),a.to(u,{duration:.5,autoAlpha:0,ease:"power2.inOut"}),a.to(f,{duration:.5,autoAlpha:1,ease:"power2.inOut"},"+=1")}}},_=function(e,t,n,i){var o,a=null!==(o=null===i||void 0===i?void 0:i.mobile)&&void 0!==o&&o,s=h.h.getState().dotTimelineContainerRef,l=r.ZP.timeline(),u=r.ZP.utils.selector(s),c=u(".timeline__modal-container"),d=u(".timeline__modal-container .timeline__image-mask"),f=u(".timeline__modal-container .timeline__outer-circle"),p=u(".timeline__modal-grid"),m=u(".timeline__modal-image-container"),g=u(".timeline-item__container")[t],v=r.ZP.utils.selector(g),y=v(".timeline__image-mask"),_=v(".timeline__outer-circle"),b=u('[data-active="active-timeline-item"]'),x=u('[data-active="active-timeline-item"] .timeline__image-container');a?(l.to(p,{autoAlpha:0,y:"down"===e?-25:25,duration:.5,ease:"power2.inOut",onComplete:function(){n(),c[0].scrollTop=0}}),l.set(p,{y:"down"===e?25:-25}),l.to(p,{autoAlpha:1,y:0,duration:.4,ease:"power2.in"})):(l.set([y,_],{autoAlpha:0}),l.to(c,{autoAlpha:0,y:"down"===e?-25:25,duration:.5,ease:"power2.inOut",onComplete:function(){b[0].dataset.active="",g.dataset.active="active-timeline-item",x[0].append(d[0]),x[0].append(f[0]),m[0].append(y[0]),m[0].append(_[0])}}),l.to([y,_],{autoAlpha:0,y:"down"===e?25:-25,clearProps:"scale",duration:0,onComplete:function(){n()}}),l.set(c,{y:"down"===e?25:-25}),l.to([y,_,c],{autoAlpha:1,y:0,duration:.4,ease:"power2.in"}),l.set([d[0],f[0]],{autoAlpha:1,y:0}))}},24186:function(e,t,n){"use strict";n(67294);var r=n(25675),i=n.n(r),o=n(86010),a=n(71647),s=n.n(a),l=n(49568),u=n(85893);t.Z=function(e){var t=e.data,n=t.bulletTitle,r=t.description,a=t.externalUrl,c=t.thumbnail;return(0,u.jsxs)("div",{className:(0,o.Z)(s().container,(null===c||void 0===c?void 0:c.url)&&s()["container--with-thumbnail"]),children:[(null===c||void 0===c?void 0:c.url)&&(0,u.jsx)("div",{className:s().imageContainer,children:(0,u.jsx)(i(),{src:"".concat(c.url,"?w=250&h=250&q=70&fit=thumb"),alt:n,layout:"fill",objectFit:"cover"})}),(0,u.jsxs)("div",{className:s().copyContainer,children:[(0,u.jsx)("h3",{className:s().title,children:n}),(0,u.jsx)("p",{className:s().copy,children:r}),a&&(0,u.jsxs)("a",{href:a,className:s().externalLink,target:"_blank",rel:"noopener noreferrer",children:[(0,u.jsxs)("span",{"aria-hidden":!0,children:["Learn More ",(0,u.jsx)(l.dL,{})]}),(0,u.jsxs)("span",{className:"sr-only",children:["Learn More about ",n]})]})]})]})}},3384:function(e,t,n){"use strict";n(67294),n(25675),n(49568),n(85893)},49568:function(e,t,n){"use strict";n.d(t,{ol:function(){return i},D1:function(){return s},UZ:function(){return l},SU:function(){return u},x8:function(){return c},UW:function(){return d},dL:function(){return h},bA:function(){return f},TH:function(){return p},pr:function(){return m},LY:function(){return g},Pz:function(){return v},HN:function(){return y},EZ:function(){return _},EE:function(){return b},Od:function(){return x}});n(67294);var r=n(85893);var i=function(){return(0,r.jsxs)("svg",{width:"10",height:"18",viewBox:"0 0 10 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"m1.25 17 8-8-8-8",stroke:"currentColor"}),(0,r.jsx)("circle",{cx:"1",cy:"9",r:"1",fill:"currentColor"})]})},o=n(87451),a=n.n(o);var s=function(){return(0,r.jsx)("div",{className:a().container,children:(0,r.jsxs)("svg",{width:"40",height:"40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:a().container,children:[(0,r.jsx)("title",{children:"Back"}),(0,r.jsx)("circle",{cx:"20",cy:"20",r:"19.5",stroke:"currentColor"}),(0,r.jsx)("path",{d:"m21.75 12-8 8 8 8",stroke:"currentColor"}),(0,r.jsx)("circle",{cx:"22",cy:"20",r:"1",transform:"rotate(-180 22 20)",fill:"currentColor"})]})})};var l=function(){return(0,r.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:"Clear"}),(0,r.jsxs)("g",{opacity:".5",fill:"currentColor",children:[(0,r.jsx)("path",{d:"m1.05 10.743 9.193-9.192.707.707-9.193 9.192z"}),(0,r.jsx)("path",{d:"m1.757 1.55 9.193 9.192-.707.707L1.05 2.257z"})]})]})};var u=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:"Timeline"}),(0,r.jsxs)("g",{stroke:"currentColor",children:[(0,r.jsx)("circle",{cx:"10",cy:"10",r:"9.5"}),(0,r.jsx)("path",{d:"M10 5v5.5l4 3.5"})]})]})};var c=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:"Close"}),(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:"1",y:"0.195312",width:"10",height:"1",transform:"rotate(45 1 0.195312)",fill:"currentColor"}),(0,r.jsx)("rect",{x:"0.292969",y:"19.0713",width:"10",height:"1",transform:"rotate(-45 0.292969 19.0713)",fill:"currentColor"}),(0,r.jsx)("rect",{x:"13",y:"12",width:"10",height:"1",transform:"rotate(45 13 12)",fill:"currentColor"}),(0,r.jsx)("rect",{x:"12",y:"7.2666",width:"10",height:"1",transform:"rotate(-45 12 7.2666)",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor"})]})]})};var d=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_526_19205)",children:[(0,r.jsx)("path",{d:"M2.19678 5.5L9.98534 13.2886L17.774 5.50006",stroke:"currentColor"}),(0,r.jsx)("path",{d:"M0.5 14.5V19.5H19.5V14.5",stroke:"currentColor"}),(0,r.jsx)("circle",{cx:"10",cy:"6",r:"1",transform:"rotate(-180 10 6)",fill:"currentColor"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_526_19205",children:(0,r.jsx)("rect",{width:"20",height:"20",fill:"currentColor"})})})]})};var h=function(){return(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M18.015 9.007V1.993H12M8.194 2H2v16h16v-5.5M17.717 2.354l-6.364 6.364",stroke:"currentColor"})})};var f=function(){return(0,r.jsxs)("svg",{width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M11 .5c2.79 0 5.334 1.684 7.246 3.488a22.408 22.408 0 0 1 3.183 3.76A.472.472 0 0 1 21.5 8a.47.47 0 0 1-.071.253 22.413 22.413 0 0 1-3.183 3.759C16.334 13.816 13.791 15.5 11 15.5c-2.79 0-5.334-1.684-7.246-3.488A22.404 22.404 0 0 1 .57 8.252.47.47 0 0 1 .5 8c0-.096.027-.185.071-.253a22.415 22.415 0 0 1 3.183-3.759C5.666 2.184 8.209.5 11 .5Z",stroke:"currentColor"}),(0,r.jsx)("circle",{cx:"11",cy:"8",r:"1",fill:"currentColor"})]})};var p=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:"Globe"}),(0,r.jsx)("circle",{cx:"10",cy:"10",r:"9.5",stroke:"currentColor"}),(0,r.jsx)("path",{clipRule:"evenodd",d:"M4.96 2.903c-.49 1.156-.823 3.324 0 4.718.824 1.395 2.057 1.974 3.003 2.42.946.447 1.1 1.207 1.616 1.207s1.015-.41 1.015.443-.818 1.594 0 2.583c.819.989 2.21.643 1.105 2.272-1.105 1.628 0 1.998 0 1.998s3.325-3.946 3.791-4.969c.467-1.023.66-2.327-.626-2.979-1.287-.652-2.244-1.095-3.554 0C10 11.691 9.895 9.475 8.587 8.772c-1.308-.703-.83-1.897 0-2 .346-.042 1.108 1.064 1.413.85.305-.215 0-.46 0-1.192 0-.733-.121-.697.594-1.247.716-.55.716-1.846 0-2.28-.715-.433-3.642-1.571-3.642-1.571S5.45 1.747 4.96 2.903Z",stroke:"currentColor"})]})};var m=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:"Menu"}),(0,r.jsx)("path",{fill:"currentColor",d:"M5 1h15v1H5z"}),(0,r.jsx)("circle",{cx:"1",cy:"1.5",r:"1",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"19",cy:"18.5",r:"1",fill:"currentColor"}),(0,r.jsx)("path",{fill:"currentColor",d:"M0 9.5h20v1H0zM0 18h15v1H0z"})]})};var g=function(){return(0,r.jsx)("svg",{width:"10",height:"9",viewBox:"0 0 10 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("circle",{cx:"5",cy:"4.5",r:"4.5",fill:"currentColor"})})};function v(){return(0,r.jsx)("svg",{width:"59",height:"50",viewBox:"0 0 59 50",children:(0,r.jsxs)("g",{id:"Photo-Icon",transform:"translate(0.5 0.5)",opacity:"0.6",children:[(0,r.jsx)("path",{d:"M7.63807 48.6132L22.7936 33.4577Q22.8632 33.3881 22.945 33.3334Q23.0268 33.2788 23.1177 33.2411Q23.2086 33.2034 23.3051 33.1843Q23.4016 33.1651 23.5 33.1651Q23.5984 33.1651 23.6949 33.1843Q23.7914 33.2034 23.8823 33.2411Q23.9732 33.2788 24.055 33.3334Q24.1368 33.3881 24.2064 33.4577L37.6464 46.8977L42.8083 41.7358Q42.9488 41.5953 43.1324 41.5193Q43.316 41.4432 43.5147 41.4432Q43.7134 41.4432 43.897 41.5193Q44.0806 41.5953 44.2211 41.7358L50.7113 48.226C55.2465 43.1084 58 36.3758 58 29C58 12.9837 45.0163 0 29 0C12.9837 0 0 12.9837 0 29C0 36.5633 2.89533 43.4503 7.63807 48.6132Z",transform:"matrix(1 0 0 1 0 -1.129763E-12)",id:"Combined-Shape",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeWidth:"1"}),(0,r.jsx)("path",{d:"M5 10C7.76142 10 10 7.76142 10 5C10 2.23858 7.76142 0 5 0C2.23858 0 0 2.23858 0 5C0 7.76142 2.23858 10 5 10Z",transform:"translate(31 19)",id:"Oval",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeWidth:"1"})]})})}var y=function(){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"17.414",cy:"17.414",r:"1",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"14.5",cy:"14.5",r:"1",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"7",cy:"7",r:"6.5",stroke:"currentColor"})]})};var _=function(){return(0,r.jsxs)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m4.796 4.272 2.386.796-2.386.796L4 8.25l-.796-2.386-2.386-.796 2.386-.796L4 1.886l.796 2.386Z",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"10.25",cy:"2.75",r:"2.25",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"10.25",cy:"2.75",r:"1.25",fill:"#010101"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 7v.854c0 .48.282.901.707 1.146-.426.244-.707.666-.707 1.146V11h3.111v-.854c0-.48-.281-.901-.706-1.146.425-.244.707-.666.707-1.146V7H7.75Z",fill:"currentColor"})]})};var b=function(){return(0,r.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"6",cy:"6.5",r:"5",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"6",cy:"6.5",r:"4",fill:"#010101"}),(0,r.jsx)("circle",{cx:"6",cy:"6.5",r:"2.5",fill:"currentColor"})]})};var x=function(){return(0,r.jsx)("svg",{width:"9",height:"11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M1 1.603 7.75 5.5 1 9.397V1.603Z",fill:"currentColor",stroke:"currentColor"})})}},63941:function(e,t,n){"use strict";n.d(t,{xE:function(){return d},wg:function(){return F},Ff:function(){return g},hq:function(){return k},RW:function(){return Z},Of:function(){return _e},EU:function(){return we},tx:function(){return Ce},lm:function(){return Ae},Px:function(){return de},mI:function(){return C},NY:function(){return B},Sy:function(){return U},Hg:function(){return _},nU:function(){return re}});var r=n(67294),i=n(86010),o=n(41664),a=n.n(o),s=n(37706),l=n.n(s),u=n(49568),c=n(85893);var d=function(e){var t=e.backLink,n=e.backExitFn,r=e.circleImage;return(0,c.jsx)(a(),{href:t,children:(0,c.jsx)("a",{className:(0,i.Z)(l().backArrowContainer,r&&l()["backArrowContainer--circle-image"],"content__back-arrow-container","hide-fouc"),onClick:function(e){return n(e)},onKeyDown:function(e){return n(e)},children:(0,c.jsx)(u.D1,{})})})},h=n(11163),f=n(52481),p=n.n(f),m=n(77843);var g=function(e){var t=e.speciesFn,n=e.habitatFn,r=e.anthroFn,o=e.finalScreen,s=e.getQuery,l=(0,m.mv)("currentCategory"),u=((0,m.mv)("currentView"),(0,h.useRouter)());return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(p().filterButton,"species"!==l&&"all"!==l&&o&&p().notSelected),onClick:t,children:[(0,c.jsx)("span",{className:(0,i.Z)(p().circle,p()["circle--blue"]),"aria-hidden":!0}),"Species"]}),(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(p().filterButton,"habitat"!==l&&"all"!==l&&o&&p().notSelected),onClick:n,children:[(0,c.jsx)("span",{className:(0,i.Z)(p().circle,p()["circle--green"]),"aria-hidden":!0}),"Habitat"]}),(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(p().filterButton,"anthro"!==l&&"all"!==l&&o&&p().notSelected),onClick:r,children:[(0,c.jsx)("span",{className:(0,i.Z)(p().circle,p()["circle--brown"]),"aria-hidden":!0}),"Anthro"]}),(0,c.jsx)(a(),{href:"",children:(0,c.jsxs)("a",{onClick:function(e){e.preventDefault(),u.push({pathname:"/site-index",query:s()})},className:(0,i.Z)(p().filterButton),children:["Index",(0,c.jsx)("img",{src:"/images/misc/footer-index-icon.svg",className:(0,i.Z)(p().indexIcon),"aria-hidden":!0})]})})]})},v=n(66264),y=n.n(v);var _=function(e){var t=e.timelineFn,n=e.singularityFn,r=e.videoFn,o=e.memoryFn,s=e.finalScreen,l=e.getQuery,d=(0,m.mv)("currentType"),f=(0,h.useRouter)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(y().filterButton,"timeline"!==d&&"all"!==d&&s&&y().notSelected),onClick:t,children:[(0,c.jsx)("div",{className:y().iconContainer,children:(0,c.jsx)(u.EE,{})}),"Timeline"]}),(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(y().filterButton,"singularity"!==d&&"all"!==d&&s&&y().notSelected),onClick:n,children:[(0,c.jsx)("div",{className:y().iconContainer,children:(0,c.jsx)(u.EZ,{})}),"Account"]}),(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(y().filterButton,"video"!==d&&"all"!==d&&s&&y().notSelected),onClick:r,children:[(0,c.jsx)("div",{className:y().iconContainer,children:(0,c.jsx)(u.Od,{})}),"Video"]}),(0,c.jsxs)("button",{type:"button",className:(0,i.Z)(y().filterButton,"memory"!==d&&"all"!==d&&s&&y().notSelected),onClick:o,children:[(0,c.jsx)("div",{className:y().iconContainer,children:(0,c.jsx)(u.LY,{})}),"Memory"]}),(0,c.jsx)(a(),{href:"/site-index",children:(0,c.jsxs)("a",{onClick:function(e){e.preventDefault(),f.push({pathname:"/site-index",query:l()})},className:(0,i.Z)(y().filterButton),children:["Index",(0,c.jsx)("img",{src:"/images/misc/footer-index-icon.svg",className:(0,i.Z)(y().indexIcon),"aria-hidden":!0})]})})]})},b=n(59499),x=n(13541),w=n(19608),S=n(80130),D=n(15606),A=n.n(D);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=r.memo((function(e){var t=e.categoryData,n=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,m.s6)("solutionsOverviewHoverData"),d=(0,m.s6)("setSolutionsOverviewHoverData"),h="mobile"===(0,m.s6)("responsiveVersion"),f=(0,m.s6)("router"),p=(0,m.ic)("solutionPageRef"),g=(0,r.useState)(u),v=g[0],y=g[1],_=(0,r.useState)(u),b=_[0],D=_[1],E=b.isLeft;return(0,x.bt)((function(){var e;if(null===l||void 0===l||null===(e=l.current)||void 0===e||e.kill(),u){h||(document.body.style.cursor="pointer"),window.clearTimeout(s.current);var r=u.position.x>.5*window.innerWidth,i=r?u.position.x:window.innerWidth-u.position.x;i-=75,y(u),D(M(M({},t.find((function(e){return e.slug===u.slug}))),{},{isLeft:r})),l.current=function(e,t,n){var r=w.ZP.timeline(),i=w.ZP.utils.selector(e)(".solutionsOverviewHover__content"),o=t?-10:10;return r.set(i,{x:0,maxWidth:"".concat(n,"px")}).to(e,{duration:.4,opacity:1}).to(i,{duration:.4,x:o},0),r}(n.current,r,i)}else{document.body.style.cursor="default",l.current=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=w.ZP.timeline({onComplete:t}),r=w.ZP.utils.selector(e)(".solutionsOverviewHover__content");return n.to(e,{duration:.4,opacity:0}).to(r,{duration:.4,x:0},0),n}(n.current);var o=1e3*l.current.duration();s.current=setTimeout((function(){y(!1),D(!1)}),o)}return function(){window.clearTimeout(s.current)}}),[u]),(0,x.bt)((function(){o.current=w.p8.quickSetter(n.current,"x","px"),a.current=w.p8.quickSetter(n.current,"y","px")}),[]),(0,x.xQ)((function(){v&&(o.current(v.position.x),a.current(v.position.y))})),(0,c.jsx)("div",{ref:n,className:(0,i.Z)([A().solutionsOverviewHover,h&&A()["solutionsOverviewHover--mobile"]]),children:(0,c.jsxs)("div",{className:(0,i.Z)(A().solutionsOverviewHover__content,E?A()["solutionsOverviewHover__content--left"]:A()["solutionsOverviewHover__content--right"],"solutionsOverviewHover__content"),children:[(0,c.jsx)("div",{className:A().solutionOverviewHover__title,style:{color:null===b||void 0===b?void 0:b.titleColor},children:null===b||void 0===b?void 0:b.title}),(0,c.jsx)("div",{className:A().solutionOverviewHover__subTitle,onClick:function(){h&&null!==u&&void 0!==u&&u.slug&&((0,S.Z)(p,(function(){f.push("/solutions/".concat(null===u||void 0===u?void 0:u.slug))})),d(!1))},children:h?"Read more":null===b||void 0===b?void 0:b.subTitle})]})})})),T=n(33627),P=n(18971),R=n.n(P),k=r.memo((function(){var e,t,n,o,a,s,l,u,d,h,f,p,g,v=(0,m.mv)("currentView"),y=(0,r.useRef)(),_=(0,m.s6)("dotHoverData"),b="mobile"===(0,m.s6)("responsiveVersion"),w=(0,m.s6)("dotHoverTransitionTl"),S=(0,r.useState)(_),D=S[0],A=S[1],E=(0,r.useState)(!1),M=E[0],C=E[1],P=(0,r.useState)(null),k=P[0],O=P[1],L=(0,r.useState)(!1),F=(L[0],L[1]),I=(0,m.ic)("setDotHoverRef"),N=(0,r.useRef)(),B=null!==D&&void 0!==D&&null!==(e=D.data)&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url?"".concat(null===D||void 0===D||null===(n=D.data.image)||void 0===n?void 0:n.url,"?w=60&h=60&q=40&fit=fill"):"/images/placeholders/missingDot.png";return(0,r.useEffect)((function(){y.current&&I(y.current)}),[y.current]),(0,x.bt)((function(){var e,t,n,r;_?(b||(document.body.style.cursor="pointer"),window.clearTimeout(N.current),_.isLeft=_.position.x>.5*window.innerWidth,A(_),(0,T.ZJ)(y.current,_),C(!0),!w&&null!==D&&void 0!==D&&null!==(e=D.data)&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url&&O(null===D||void 0===D||null===(n=D.data)||void 0===n||null===(r=n.image)||void 0===r?void 0:r.url)):(M&&(document.body.style.cursor="default",(0,T.$w)(y.current,(function(){return C(!1)}))),N.current=setTimeout((function(){A(!1)}),700));return function(){window.clearTimeout(N.current)}}),[_,D]),(0,c.jsx)("div",{ref:y,className:(0,i.Z)(R().globeHover),children:(0,c.jsxs)("div",{className:(0,i.Z)(R().globeHover__content,null!==D&&void 0!==D&&D.isLeft?R()["globeHover__content--left"]:R()["globeHover__content--right"]),children:[(0,c.jsxs)("div",{className:(0,i.Z)(R().circleContainer,"timeline"===v&&R()["circleContainer--timeline"]),children:[(0,c.jsx)("div",{className:(0,i.Z)(R().circleOutline,"dot-hover__circle-outline","timeline"===v&&R()["circleOutline--timeline"]),"aria-hidden":!0}),(0,c.jsx)("div",{className:(0,i.Z)(R().imageContainer,"dot-hover__image-container","timeline"===v&&R()["imageContainer--timeline"]),children:B&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{src:w?"".concat(k,"?h=600&fit=thumb"):B,alt:null===D||void 0===D||null===(o=D.data)||void 0===o?void 0:o.title,className:(0,i.Z)(R().image,"dot-hover__image")}),(0,c.jsx)("img",{src:"".concat(k,"?h=600&fit=thumb"),alt:null===D||void 0===D||null===(a=D.data)||void 0===a?void 0:a.title,className:(0,i.Z)(R().image,R()["image--full-size"],"dot-hover__image-full"),onLoad:function(){return F(!0)}})]})})]}),(0,c.jsxs)("div",{className:(0,i.Z)(R().copyContainer,"dot-hover__copy-container"),children:[(null===D||void 0===D||null===(s=D.data)||void 0===s?void 0:s.subType)&&(0,c.jsx)("p",{className:R().subtype,children:null===D||void 0===D||null===(l=D.data)||void 0===l?void 0:l.subType}),(null===D||void 0===D||null===(u=D.data)||void 0===u?void 0:u.title)&&(0,c.jsx)("h2",{className:R().title,children:null===D||void 0===D||null===(d=D.data)||void 0===d?void 0:d.title}),((null===D||void 0===D||null===(h=D.data)||void 0===h?void 0:h.displayYear)||(null===D||void 0===D||null===(f=D.data)||void 0===f?void 0:f.timeSpan))&&(0,c.jsx)("p",{className:R().year,children:(null===D||void 0===D||null===(p=D.data)||void 0===p?void 0:p.displayYear)||(null===D||void 0===D||null===(g=D.data)||void 0===g?void 0:g.timeSpan)})]})]})})})),O=n(28832),L=n.n(O),F=r.memo((function(){var e,t,n,o,a,s,l,u,d,h,f=(0,r.useRef)(),p=(0,m.s6)("bestPracticesHoverData"),g=(0,m.s6)("dotHoverTransitionTl"),v=(0,m.s6)("windowBounds"),y=(0,m.mv)("currentView"),_=(0,r.useState)(p),b=_[0],w=_[1],S=(0,r.useState)(!1),D=S[0],A=S[1],E=(0,r.useState)(null),M=E[0],C=E[1],P=(0,r.useState)(!1),R=(P[0],P[1]),k=(0,m.ic)("setDotHoverRef"),O=(null===b||void 0===b||null===(e=b.position)||void 0===e?void 0:e.x)>.5*v.width,F=(0,r.useRef)(),I=null!==b&&void 0!==b&&null!==(t=b.data)&&void 0!==t&&null!==(n=t.image)&&void 0!==n&&n.url?"".concat(null===b||void 0===b||null===(o=b.data.image)||void 0===o?void 0:o.url,"?w=60&h=60&q=70&fit=fill"):"/images/placeholders/missingDot.png";return(0,r.useEffect)((function(){f.current&&k(f.current)}),[f.current]),(0,x.bt)((function(){var e,t,n,r;p?(document.body.style.cursor="pointer",window.clearTimeout(F.current),w(p),(0,T.ZJ)(f.current,p),A(!0),!g&&null!==b&&void 0!==b&&null!==(e=b.data)&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url&&C(null===b||void 0===b||null===(n=b.data)||void 0===n||null===(r=n.image)||void 0===r?void 0:r.url)):(document.body.style.cursor="default",D&&(0,T.$w)(f.current,(function(){return A(!1)})),F.current=setTimeout((function(){w(!1)}),700));return function(){window.clearTimeout(F.current)}}),[p,b]),(0,c.jsx)("div",{ref:f,className:(0,i.Z)(L().globeHover),children:(0,c.jsxs)("div",{className:(0,i.Z)(L().globeHover__content,O&&L()["is--left"]),children:[(0,c.jsxs)("div",{className:(0,i.Z)(L().circleContainer,"timeline"===y&&L()["circleContainer--timeline"]),children:[(0,c.jsx)("div",{className:(0,i.Z)(L().circleOutline,"dot-hover__circle-outline","timeline"===y&&L()["circleOutline--timeline"]),"aria-hidden":!0}),(0,c.jsx)("div",{className:(0,i.Z)(L().imageContainer,"dot-hover__image-container","timeline"===y&&L()["imageContainer--timeline"]),children:I&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{src:g?"".concat(M,"?h=600&fit=thumb"):I,alt:null===b||void 0===b||null===(a=b.data)||void 0===a?void 0:a.title,className:(0,i.Z)(L().image,"dot-hover__image")}),(0,c.jsx)("img",{src:"".concat(M,"?h=600&fit=thumb"),alt:null===b||void 0===b||null===(s=b.data)||void 0===s?void 0:s.title,className:(0,i.Z)(L().image,L()["image--full-size"],"dot-hover__image-full"),onLoad:function(){return R(!0)}})]})})]}),(0,c.jsxs)("div",{className:(0,i.Z)(L().copyContainer,"dot-hover__copy-container"),children:[(0,c.jsx)("p",{className:L().subtype,children:"BEST PRACTICE"}),(null===b||void 0===b||null===(l=b.data)||void 0===l?void 0:l.title)&&(0,c.jsx)("h2",{className:L().title,children:null===b||void 0===b||null===(u=b.data)||void 0===u?void 0:u.title}),(null===b||void 0===b||null===(d=b.data)||void 0===d?void 0:d.displayYear)&&(0,c.jsx)("p",{className:L().year,children:null===b||void 0===b||null===(h=b.data)||void 0===h?void 0:h.displayYear})]})]})})})),I=n(94435),N=n.n(I),B=r.memo((function(){var e,t,n,o,a=(0,r.useRef)(),s=(0,m.s6)("timelineBubbleHoverData"),l="mobile"===(0,m.s6)("responsiveVersion"),u=(0,r.useState)(s),d=u[0],h=u[1],f=!!s,p=(0,r.useRef)();return(0,x.bt)((function(){return s?(l||(document.body.style.cursor="pointer"),window.clearTimeout(p.current),h(s),w.p8.set(a.current,{x:s.position.x,y:s.position.y})):(document.body.style.cursor="default",p.current=setTimeout((function(){h(!1)}),700)),function(){window.clearTimeout(p.current)}}),[s]),(0,c.jsx)("div",{ref:a,className:(0,i.Z)(N().timelineHover,f&&N()["is--Active"]),children:(0,c.jsxs)("div",{className:N().timelineHover__content,children:[(null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.title)&&(0,c.jsx)("h2",{className:N().title,children:null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.title}),(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.displayYear)&&(0,c.jsx)("p",{className:N().year,children:null===d||void 0===d||null===(o=d.data)||void 0===o?void 0:o.displayYear})]})})})),j=n(26843),z=n.n(j),U=r.memo((function(){var e,t,n,o,a,s,l,u,d=(0,r.useRef)(),h=(0,m.s6)("timelineStatisticHoverData"),f="mobile"===(0,m.s6)("responsiveVersion"),p=(0,r.useState)(h),g=p[0],v=p[1],y=!!h,_=(0,r.useRef)();return(0,x.bt)((function(){return h?(f||(document.body.style.cursor="pointer"),window.clearTimeout(_.current),v(h),w.p8.set(d.current,{x:h.position.x,y:h.position.y})):_.current=setTimeout((function(){v(!1)}),700),function(){window.clearTimeout(_.current)}}),[h]),(0,c.jsx)("div",{ref:d,className:(0,i.Z)(z().timelineStatisticHover,y&&z()["is--Active"]),children:(0,c.jsxs)("div",{className:z().timelineStatisticHover__content,children:[(null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.people)&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:z().number,children:null===g||void 0===g||null===(t=g.data)||void 0===t?void 0:t.people})," people"]}),(null===g||void 0===g||null===(n=g.data)||void 0===n?void 0:n.co2)&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:z().number,children:null===g||void 0===g||null===(o=g.data)||void 0===o?void 0:o.co2})," PPM CO2"]}),(null===g||void 0===g||null===(a=g.data)||void 0===a?void 0:a.wild)&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{className:z().number,children:[null===g||void 0===g||null===(s=g.data)||void 0===s?void 0:s.wild,"%"]}),"% wild"]}),(null===g||void 0===g||null===(l=g.data)||void 0===l?void 0:l.warmer)&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{className:z().number,children:[null===g||void 0===g||null===(u=g.data)||void 0===u?void 0:u.warmer,"\xb0"]})," warmer"]})]})})})),H=(n(24186),n(3384),n(25675)),G=n.n(H),V=n(47877),W=n.n(V);var Z=function(e){var t,n,r,o=e.data,a=e.whatIf;return null!==(t=o.video)&&void 0!==t&&t.url?(0,c.jsx)("div",{className:(0,i.Z)(W().container,a&&W()["container--what-if"]),children:(0,c.jsx)("video",{className:W().video,src:o.video.url,poster:null===(r=o.image)||void 0===r?void 0:r.url,controls:!0})}):(0,c.jsxs)("div",{className:(0,i.Z)(W().container,a&&W()["container--what-if"]),children:[(null===o||void 0===o||null===(n=o.image)||void 0===n?void 0:n.url)&&(0,c.jsx)(G(),{src:"".concat(o.image.url,"?w=1000&h=646&q=70"),alt:o.image.title,width:o.image.width,height:o.image.height,priority:!0}),(null===o||void 0===o?void 0:o.textOverlay)&&(0,c.jsx)("h2",{className:W().textOverlay,children:o.textOverlay}),(0,c.jsx)("div",{className:W().gradient,"aria-hidden":!0})]})},$=n(73935),q=n(38891),Y=n(50029),K=n(87794),X=n.n(K),Q=n(98483),J=n.n(Q),ee=r.memo((function(e){var t=e.data,n=e.setModalActive,i=e.lifeCycle,o=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),l=(0,r.useRef)(),d=(0,r.useRef)(),h=function(){var e=window.innerWidth/window.innerHeight,t=s.current.videoWidth/s.current.videoHeight;t>e?w.p8.set(a.current,{width:.8*window.innerWidth,height:.8*window.innerWidth/t}):w.p8.set(a.current,{height:.8*window.innerHeight,width:.8*window.innerHeight*t})},f=function(e){"Escape"===e.code&&n(!1)},p=function(){var e=(0,Y.Z)(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=s.current)||void 0===t?void 0:t.play();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,x.bt)((function(){return function(){var e;null===(e=d.current)||void 0===e||e.kill(),d.current=w.p8.timeline({onStart:p}),d.current.set([a.current,l.current],{scale:.9}).to(o.current,{autoAlpha:1,ease:"power1.inOut"}).to(a.current,{scale:1,autoAlpha:1,ease:"power1.inOut"}).to(l.current,{autoAlpha:1,scale:1,ease:"power1.inOut"},"+=1")}(),window.addEventListener("resize",h),window.addEventListener("keydown",f),function(){window.removeEventListener("resize",h),window.removeEventListener("keydown",f)}}),[]),(0,x.bt)((function(){var e;"leave"===i&&(null===(e=s.current)||void 0===e||e.pause(),function(){var e;null===(e=d.current)||void 0===e||e.kill(),d.current=w.p8.timeline(),d.current.to([o.current,l.current],{autoAlpha:0,ease:"power1.inOut"}).to(a.current,{scale:.9,autoAlpha:0,ease:"power1.inOut"},0)}())}),[i]),(0,c.jsx)("div",{ref:o,className:J().root,onClick:function(e){e.currentTarget===e.target&&(e.stopPropagation(),n(!1))},children:(0,c.jsxs)("div",{ref:a,className:J().video__wrapper,children:[(0,c.jsx)("div",{ref:l,className:J().close,children:(0,c.jsx)("button",{type:"button",className:"u-reset-btn",onClick:function(){return n(!1)},children:(0,c.jsx)(u.x8,{})})}),(0,c.jsx)("video",{ref:s,controls:!0,preload:"auto",onLoadedMetadata:h,playsInline:!0,children:(0,c.jsx)("source",{src:t.video.url})})]})})})),te=n(64534),ne=n.n(te),re=r.memo((function(e){var t,n,o,a=e.data,s=(0,r.useState)(!1),l=s[0],d=s[1],h=(0,q.Yz)(l,1200),f=h.stage,p=h.shouldMount,m=function(){d(!0)};return null!==a&&void 0!==a&&null!==(t=a.video)&&void 0!==t&&t.url||null!==a&&void 0!==a&&null!==(n=a.poster)&&void 0!==n&&n.url?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:ne().root,children:[(0,c.jsx)("h2",{children:a.title}),(0,c.jsxs)("div",{className:ne().video__container,children:[null!==a&&void 0!==a&&null!==(o=a.video)&&void 0!==o&&o.url?(0,c.jsxs)("button",{"aria-label":"Play video",type:"button",className:ne().thumbnail,onClick:m,onKeyDown:function(e){"Enter"===e.code&&m()},children:[(0,c.jsx)(G(),{src:"".concat(a.poster.url,"?w=250&q=80&fit=fill"),layout:"fill",objectFit:"cover",alt:a.title}),(0,c.jsxs)("div",{className:ne().thumbnail__icon,children:[(0,c.jsx)("div",{className:ne().thumbnail__stroke}),(0,c.jsx)(u.Od,{})]})]}):(0,c.jsx)("div",{className:(0,i.Z)(ne().thumbnail,ne()["thumbnail--no-video"]),children:(0,c.jsx)(G(),{src:"".concat(a.poster.url,"?w=250&q=80&fit=fill"),layout:"fill",objectFit:"cover",alt:a.title})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:ne().description,children:a.description}),a.caption&&(0,c.jsx)("p",{className:ne().caption,children:a.caption})]})]})]}),p&&$.createPortal((0,c.jsx)(ee,{data:a,setModalActive:d,lifeCycle:f}),document.querySelector(".js-portals")||void 0)]}):null})),ie=n(5224),oe=n.n(ie),ae=n(41726),se=n(86767),le=n(18557),ue=n.n(le),ce=r.memo((function(e){var t=e.data,n=e.isActive,o=e.id,s=e.setActiveIndex,l=e.containerRef,d=(0,r.useRef)(),f=(0,r.useRef)(),p=(0,r.useRef)(),m=(0,r.useRef)(),g=(0,h.useRouter)(),v=function(e,t){e.preventDefault();var n=document.querySelector(".js-content-container");l.current?(0,ae.v)(l.current,(function(){return g.push(t)})):n&&(0,ae.v)(n,(function(){return g.push(t)}))},y=(0,r.useMemo)((function(){return t.solutionPagesCollection.items.map((function(e,n){return(0,c.jsx)("div",{className:(0,i.Z)(ue().link__single,"js-solutionListBlock-link"),children:(0,c.jsx)(a(),{href:"/solutions/".concat(t.slug,"/").concat(e.slug),children:(0,c.jsx)("a",{onClick:function(n){return v(n,"/solutions/".concat(t.slug,"/").concat(e.slug))},children:(0,se.Z)(e.title)})})},e.i)}))}),[v]);return(0,x.bt)((function(){var e;null===(e=m.current)||void 0===e||e.kill();var t=w.p8.utils.selector(p.current)(".js-solutionListBlock-link");n?(m.current=w.p8.timeline(),m.current.set(t,{y:10}).to(p.current,{duration:1,height:"auto",ease:"power2.inOut"},.1).to(t,{duration:.8,autoAlpha:1,stagger:.1,ease:"power1.inOut"},.5).to(f.current,{duration:1,rotate:-90,ease:"power2.inOut"},.1),m.current.timeScale(1.4)):(m.current=w.p8.timeline(),m.current.to(p.current,{duration:1,height:0,ease:"power2.inOut",delay:.1}).to(t,{duration:.5,autoAlpha:0,stagger:-.1,ease:"power1.inOut"},0).to(f.current,{rotate:90,ease:"power2.inOut"},0),m.current.timeScale(1.4))}),[n]),(0,c.jsxs)("div",{className:ue().root,children:[(0,c.jsxs)("button",{ref:d,type:"button",className:(0,i.Z)("u-reset-btn",ue().trigger),onClick:function(){s(!n&&o)},children:[(0,c.jsxs)("div",{className:ue().info,children:[(0,c.jsx)("h3",{style:{color:t.titleColor},children:t.title}),(0,c.jsx)("div",{className:ue().description,children:t.subTitle})]}),(0,c.jsx)("div",{ref:f,className:(0,i.Z)(ue().arrowContainer),children:(0,c.jsx)(u.ol,{})})]}),(0,c.jsx)("div",{ref:p,className:ue().links__wrapper,children:(0,c.jsx)("div",{className:ue().links__container,children:y})})]})})),de=r.memo((function(e){var t=e.data,n=e.containerRef,i=(0,r.useState)(!1),o=i[0],a=i[1],s=(0,r.useMemo)((function(){return t.entriesCollection.items.map((function(e,t){return(0,c.jsx)(ce,{id:t,data:e,isActive:o===t,setActiveIndex:a,containerRef:n},t)}))}),[o]);return(0,c.jsx)("div",{className:oe().root,children:s})})),he=n(86437),fe=n(74129),pe=n(33645),me=n.n(pe);function ge(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t,n=new Map,r=ge(e.assets.block);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.set(i.sys.id,i)}}catch(o){r.e(o)}finally{r.f()}return{renderNode:(0,b.Z)({},he.BLOCKS.EMBEDDED_ASSET,(function(e,t){var r=e.data,i=n.get(r.target.sys.id);return(0,c.jsx)("div",{className:me().imageContainer,children:(0,c.jsx)(G(),{className:me().image,src:"".concat(i.url,"?w=1000&q=70"),alt:null===i||void 0===i?void 0:i.title,width:i.width,height:i.height,priority:!0})})}))}}var _e=function(e){var t=e.data,n=e.whatIf,r=(t.author,t.paragraphText);return t.type,(0,c.jsx)("div",{className:(0,i.Z)(me().container,n&&me()["container--what-if"]),children:(null===r||void 0===r?void 0:r.json)&&(0,fe.h)(r.json,(null===r||void 0===r?void 0:r.links)&&ye(r.links))})},be=n(88987),xe=n.n(be);var we=function(e){var t=e.children,n=e.handleChange,r=e.name,i=e.value;return(0,c.jsxs)("label",{className:xe().checkboxLabel,children:[(0,c.jsxs)("div",{className:xe().checkboxContainer,children:[(0,c.jsx)("input",{id:i,className:xe().checkbox,type:"radio",name:r,value:i,onChange:n}),(0,c.jsx)("span",{className:xe().checkmark,"aria-hidden":!0})]}),(0,c.jsx)("p",{className:xe().checkboxCopy,children:t})]})},Se=n(48717),De=n.n(Se),Ae=r.memo((function(e){var t=e.href,n=void 0===t?"/":t,r=e.rootRef,o=e.leaveFn,s=void 0===o?void 0:o,l=e.onClick,d=void 0===l?void 0:l,h=(0,m.s6)("router"),f=function(e){e.preventDefault(),s&&s(r.current,(function(){return h.push(n)})),d&&d()};return(0,c.jsx)("div",{className:(0,i.Z)(De().root,"js-solutionMap__back"),children:(0,c.jsx)(a(),{href:n,children:(0,c.jsx)("a",{onClick:f,onKeyDown:f,children:(0,c.jsx)(u.D1,{})})})})})),Ee=n(34147),Me=n.n(Ee),Ce=r.memo((function(e){var t=e.data,n=e.onNextClick,r=(0,h.useRouter)(),i="/solutions/".concat(r.query.solution,"/").concat(t.slug);return(0,c.jsxs)("div",{className:Me().root,children:[(0,c.jsx)("h5",{children:"Next solution"}),(0,c.jsx)(a(),{href:i,children:(0,c.jsxs)("a",{className:Me().link,onClick:function(e){e.preventDefault(),n(i)},children:[(null===t||void 0===t?void 0:t.image)&&(0,c.jsxs)("div",{className:Me().image,children:[(0,c.jsx)(G(),{src:"".concat(t.image.url,"?w=900&q=70&fit=fill"),alt:t.image.title,width:t.image.width,height:t.image.height,layout:"fill",objectFit:"cover",priority:!0}),(0,c.jsx)("div",{className:Me().gradient,"aria-hidden":!0})]}),(0,c.jsxs)("div",{className:Me().title,children:[(0,c.jsx)("div",{children:(0,se.Z)(t.title)}),(0,c.jsx)("div",{className:Me().arrowContainer,children:(0,c.jsx)(u.ol,{})})]})]})})]})}))},40843:function(e,t,n){"use strict";n.d(t,{AJ:function(){return i.AJ},EI:function(){return i.EI},NY:function(){return r.NY},Sy:function(){return r.Sy},Xz:function(){return o.Xz},hq:function(){return r.hq},iY:function(){return i.iY},jN:function(){return i.jN},jX:function(){return i.jX},k2:function(){return i.k2},kp:function(){return i.kp},lm:function(){return r.lm},mI:function(){return r.mI},p2:function(){return o.p2},tx:function(){return r.tx},w1:function(){return o.w1},wg:function(){return r.wg}});var r=n(63941),i=n(79307),o=n(62509)},79307:function(e,t,n){"use strict";n.d(t,{jX:function(){return v},kp:function(){return P},Iu:function(){return U},Ff:function(){return B},yL:function(){return M},hf:function(){return V},FD:function(){return ee},e7:function(){return re},k2:function(){return le},T2:function(){return Xe},jN:function(){return It},EI:function(){return kt},yI:function(){return Te},AJ:function(){return ze},jq:function(){return Ge},iY:function(){return $e},xI:function(){return Ht}});var r=n(67294),i=n(41664),o=n.n(i),a=n(38891),s=n(19608),l=function(e,t){var n=s.ZP.timeline({delay:t});return n.set(e,{autoAlpha:0,y:"15"}),n.to(e,{autoAlpha:1,y:0,duration:1,ease:"power2.out"}),n},u=function(e){var t=s.ZP.timeline();return t.to(e,{autoAlpha:0,y:"-=15",duration:.7,ease:"power2.out"}),t},c=function(e,t){var n=s.ZP.timeline({delay:t});return n.set(e,{autoAlpha:0,y:"15"}),n.to(e,{autoAlpha:1,y:"0",duration:.7,ease:"power2.out"}),n},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=s.ZP.timeline({onComplete:t});return n.to(e,{autoAlpha:0,y:"-=15",duration:.7,ease:"power2.out"}),n},h=n(49568),f=n(77843),p=n(54522),m=n.n(p),g=n(85893);var v=function(){var e=(0,f.mv)("currentView"),t=(0,f.s6)("menuOpen"),n="desktop"===(0,f.s6)("responsiveVersion"),i=(0,r.useState)(!1),s=i[0],c=i[1],d=(0,f.ic)("setGlobeFooterRef"),p=(0,r.useRef)(null),v=(0,f.rm)().isTransitioning,y=(0,a.Yz)("globe"===e&&!v,1e3),_=y.stage,b=y.shouldMount,x=(0,a.Yz)("timeline"===e&&!v,1e3),w=x.stage,S=x.shouldMount;return(0,r.useEffect)((function(){d(p.current)}),[p.current]),(0,r.useEffect)((function(){s||"globe"!==e&&"timeline"!==e||t?s&&t&&(c(!1),u(p.current)):(c(!0),l(p.current,1.75))}),[e,t]),(0,g.jsxs)(g.Fragment,{children:[n&&(0,g.jsx)(M,{}),(0,g.jsx)("div",{className:m().container,ref:p,children:(0,g.jsxs)("div",{className:m().inner,children:[b&&(0,g.jsx)(U,{lifeCycle:_}),S&&(0,g.jsx)(B,{lifeCycle:w}),(0,g.jsx)("div",{className:m().right,children:(0,g.jsx)(o(),{href:"/solutions",children:(0,g.jsxs)("a",{className:m().solutionsLink,children:["Solutions"," ",(0,g.jsx)("div",{className:m().arrowContainer,children:(0,g.jsx)(h.ol,{})})]})})})]})})]})},y=n(25675),_=n.n(y),b=n(78336),x=n.n(b),w=n(59252),S=n(86010),D=n(76828),A=n.n(D);function E(e){var t=e.state,n=e.lifeCycle,i=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,r.useRef)(),p=(0,r.useRef)(),m=(0,f.fq)().storyTypeData.find((function(e){return e.name===t})),v=m.name,y=m.image,b=(0,w.Z)(m.descriptionDesktop),D=(0,f.mv)("setCurrentType");return(0,r.useEffect)((function(){var e;null===(e=p.current)||void 0===e||e.kill();var t=new(x())(o.current,{type:"chars"}).chars,r=new(x())(a.current,{type:"lines"}).lines.map((function(e){return new(x())(e,{type:"chars,words"}).chars}));"enter"===n?p.current=function(e){var t=e.charsByLine,n=e.titleChars,r=e.rootRef,i=e.outlineRef,o=e.imageRef,a=e.imageInnerRef,l=e.backRef,u=s.ZP.timeline(),c=s.ZP.timeline({delay:.1});return t.forEach((function(e,t){s.ZP.set(e,{opacity:0}),u.to(e,{autoAlpha:1,duration:2,stagger:.03,ease:"power2.out"},.1*t)})),c.set([n],{opacity:0}).set(r.current,{opacity:1}).add(u,0).to(n,{autoAlpha:1,duration:2,stagger:.03,ease:"power2.out"},0).to([i.current,o.current,a.current],{scale:1,duration:.7,ease:"power2.out"},.4).to(l.current,{autoAlpha:1,y:0,ease:"power2.inOut"},.5),c}({charsByLine:r,titleChars:t,rootRef:i,outlineRef:u,imageRef:l,imageInnerRef:c,backRef:d}):"leave"===n&&(p.current=function(e){var t=e.charsByLine,n=e.titleChars,r=(e.rootRef,e.outlineRef),i=e.imageRef,o=e.imageInnerRef,a=e.backRef,l=s.ZP.timeline(),u=s.ZP.timeline();t.forEach((function(e,t){l.to(e,{autoAlpha:0,duration:1.9,stagger:.01,ease:"power2.out"},.1*t)})),l.to(n,{autoAlpha:0,duration:1.9,stagger:.01,ease:"power2.out"},0),l.duration(1.5),u.add(l,0).addLabel("image",.3).to([r.current,i.current],{scale:0,duration:.5,ease:"power2.in"},"image").to([o.current],{scale:2,duration:.5,ease:"power2.in"},"image").to(a.current,{autoAlpha:0,duration:1,ease:"power2.out"},"image")}({charsByLine:r,titleChars:t,rootRef:i,outlineRef:u,imageRef:l,imageInnerRef:c,backRef:d}))}),[n]),(0,r.useEffect)((function(){return function(){var e;null===(e=p.current)||void 0===e||e.kill()}}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{ref:d,type:"button",className:(0,S.Z)("u-reset-btn",A().root__clearFilter),onClick:function(){return D("all")},children:(0,g.jsx)(h.D1,{})}),(0,g.jsxs)("div",{ref:i,className:A().root,children:[(0,g.jsxs)("div",{className:A()["root__circle-container"],children:[(0,g.jsx)("div",{ref:u,className:A()["root__circle-outline"]}),(0,g.jsx)("div",{ref:l,className:A().root__image,children:(0,g.jsx)("div",{ref:c,className:A()["root__image-inner"],children:(0,g.jsx)(_(),{src:"".concat(null===y||void 0===y?void 0:y.url,"?w=200&fit=thumb&q=80"),layout:"fill"})})})]}),(0,g.jsx)("div",{ref:o,className:A().root__title,children:v}),(0,g.jsx)("div",{ref:a,className:A().root__description,dangerouslySetInnerHTML:{__html:b}})]})]})}var M=r.memo((function(){var e=(0,f.mv)("currentType"),t=(0,f.mv)("currentView"),n="all"===e?1500:50,r=(0,a.Ir)(e,n,"out-in");return(0,g.jsx)(g.Fragment,{children:r((function(e,n){return(0,g.jsx)(g.Fragment,{children:"all"!==e&&"globe"===t&&(0,g.jsx)(E,{state:e,lifeCycle:n})})}))})})),C=n(10461),T=n.n(C);var P=function(){var e=(0,f.mv)("currentView"),t=(0,f.rm)().actions.setCurrentTransition,n=(0,f.s6)("menuOpen"),i=(0,r.useRef)(null),o=(0,r.useState)(!1),a=o[0],s=o[1],u=(0,f.ic)("setGlobeFooterRef");return(0,r.useEffect)((function(){u(i.current)}),[i.current]),(0,r.useEffect)((function(){a||"intro"===e||!1===e||(s(!0),l(i.current,1.75))}),[e,n]),(0,g.jsxs)("div",{className:T().container,ref:i,children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(T().button,T().viewButton,"globe"===e&&T().viewButtonSelected,"header__globe"),onClick:function(){"globe"!==e&&t("timeline=>globe:start")},children:(0,g.jsx)(h.TH,{})}),(0,g.jsx)("button",{type:"button",className:(0,S.Z)(T().button,T().viewButton,"timeline"===e&&T().viewButtonSelected,"header__clock"),onClick:function(){"timeline"!==e&&t("globe=>timeline:start")},children:(0,g.jsx)(h.SU,{})})]})},R=n(50029),k=n(87794),O=n.n(k),L=n(11163),F=n(17712),I=n.n(F),N=n(63941);var B=function(e){var t=e.lifeCycle,n=(0,r.useRef)(),i=(0,r.useRef)(null),a=(0,r.useRef)(null),s=(0,r.useRef)(null),p=(0,r.useRef)(null),m=(0,r.useRef)(null),v=(0,r.useRef)(null),y=(0,r.useRef)(),_=(0,r.useRef)(),b=(0,r.useRef)(),x=(0,L.useRouter)(),w=(0,f.mv)("setCurrentCategory"),D=(0,f.mv)("currentType"),A=(0,f.mv)("setCurrentType"),E=(0,f.mv)("setHomepageFilterPersistentFlow"),M=(0,f.mv)("homepageFilterPersistentFlow"),C=(0,r.useState)(!1),T=C[0],P=C[1],k=(0,f.rm)().currentTransition,F=(0,r.useRef)([]),B=(0,r.useRef)(M),j=function(){E(B.current)},z=function(){var e={};return F.current[0]&&(e.v=F.current[0]),F.current[1]&&(e.a=F.current[1]),F.current[2]&&(e.f=F.current[2]),e},U=function(e){e.preventDefault(),x.push({pathname:"/site-index"})},H=function(e){F.current.push(e),B.current=[e,!1],j(),"categories"===e?(y.current=d(a.current),_.current=c(s.current,.5)):"types"===e&&(y.current=d(a.current),_.current=c(m.current,.5))},G=function(e){F.current[1]=e,B.current[1]=e,j(),w(e),y.current=d(s.current),_.current=c(p.current,.5)},V=function(){var e=(0,R.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.current=F.current.slice(0,1),B.current[1]=!1,j(),y.current=d(p.current,(function(){w("all"),A("all")})),_.current=c(s.current,.5);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){F.current[2]=e,A(e)},Z=function(e){F.current[1]=e,B.current[1]=e,j(),A(e),y.current=d(m.current),_.current=c(v.current,.5)},$=function(){var e=(0,R.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.current=F.current.slice(0,1),B.current[1]=!1,j(),y.current=d(v.current,(function(){w("all"),A("all")})),_.current=c(m.current,.5);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){F.current[2]=e,w(e)};return(0,r.useEffect)((function(){var e=function(){var e=(0,R.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["globe=>timeline:start","timeline=>globe:start"].includes(k)&&(B.current=[!1,!1],j(),T&&(y.current=d([i.current,a.current,s.current,p.current,m.current,v.current]),_.current=c([a.current],.7)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[k]),(0,r.useEffect)((function(){"leave"===t?b.current=u(n.current):"from"===t&&(b.current=l(n.current))}),[t]),(0,r.useEffect)((function(){return M[1]?(y.current=d(i.current),"categories"===M[0]&&G(M[1]),"types"===M[0]&&Z(M[1])):M[0]&&(y.current=d(i.current),H(M[0])),function(){var e,t,n;null===(e=y.current)||void 0===e||e.kill(),null===(t=_.current)||void 0===t||t.kill(),null===(n=b.current)||void 0===n||n.kill()}}),[]),(0,g.jsxs)("div",{className:I().left,ref:n,children:[(0,g.jsx)("div",{className:(0,S.Z)(I().leftInner),ref:i,"data-footer-container":"explore",children:(0,g.jsx)("button",{type:"button",className:I().filterButton,onClick:function(){y.current=d(i.current),_.current=c(a.current,.5),P(!0)},children:"Explore"})}),(0,g.jsxs)("div",{className:(0,S.Z)(I().leftInner,I().catType),ref:a,"data-footer-container":"catType",children:[(0,g.jsx)("button",{type:"button",className:I().filterButton,onClick:function(){return H("categories")},children:"Category"}),(0,g.jsx)("span",{className:I().separator,"aria-hidden":!0}),(0,g.jsx)("button",{type:"button",className:I().filterButton,onClick:function(){return H("types")},children:"Type"}),(0,g.jsx)(o(),{href:"/site-index",children:(0,g.jsxs)("a",{onClick:U,onKeyDown:U,className:(0,S.Z)(I().filterButton),children:["Index",(0,g.jsx)("img",{src:"/images/misc/footer-index-icon.svg",className:(0,S.Z)(I().indexIcon),"aria-hidden":!0})]})})]}),(0,g.jsxs)("div",{className:(0,S.Z)(I().leftInner,I().categories,"globe-footer__categories"),ref:s,"data-footer-container":"categories",children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(I().filterButton,I().clearButton),onClick:function(){F.current=[],B.current=[!1,!1],j(),y.current=d(s.current),_.current=c(a.current,.5)},children:(0,g.jsx)(h.UZ,{})}),(0,g.jsx)("div",{className:(0,S.Z)(I().filterButton,I().notAButton),children:"Category"}),(0,g.jsx)("span",{className:I().separator,"aria-hidden":!0}),(0,g.jsx)(N.Ff,{speciesFn:function(){return G("species")},habitatFn:function(){return G("habitat")},anthroFn:function(){return G("anthro")},getQuery:z})]}),(0,g.jsxs)("div",{className:(0,S.Z)(I().leftInner,I().categories,"globe-footer__categories"),ref:p,"data-footer-container":"categories",children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(I().filterButton,I().clearButton),onClick:V,children:(0,g.jsx)(h.UZ,{})}),(0,g.jsx)("div",{className:(0,S.Z)(I().filterButton,I().notAButton),children:D}),(0,g.jsx)("span",{className:I().separator,"aria-hidden":!0}),(0,g.jsx)(N.Hg,{timelineFn:function(){return W("timeline")},singularityFn:function(){return W("singularity")},videoFn:function(){return W("video")},memoryFn:function(){return W("memory")},finalScreen:!0,getQuery:z})]}),(0,g.jsxs)("div",{className:(0,S.Z)(I().leftInner,I().categories,"globe-footer__categories"),ref:m,"data-footer-container":"categories",children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(I().filterButton,I().clearButton),onClick:function(){F.current=[],B.current=[!1,!1],j(),y.current=d(m.current),_.current=c(a.current,.5)},children:(0,g.jsx)(h.UZ,{})}),(0,g.jsx)("div",{className:(0,S.Z)(I().filterButton,I().notAButton),children:"Type"}),(0,g.jsx)("span",{className:I().separator,"aria-hidden":!0}),(0,g.jsx)(N.Hg,{timelineFn:function(){return Z("timeline")},singularityFn:function(){return Z("singularity")},videoFn:function(){return Z("video")},memoryFn:function(){return Z("memory")},getQuery:z})]}),(0,g.jsxs)("div",{className:(0,S.Z)(I().leftInner,I().categories,"globe-footer__categories"),ref:v,"data-footer-container":"categories",children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(I().filterButton,I().clearButton),onClick:$,children:(0,g.jsx)(h.UZ,{})}),(0,g.jsx)("div",{className:(0,S.Z)(I().filterButton,I().notAButton),children:D}),(0,g.jsx)("span",{className:I().separator,"aria-hidden":!0}),(0,g.jsx)(N.Ff,{speciesFn:function(){return q("species")},habitatFn:function(){return q("habitat")},anthroFn:function(){return q("anthro")},finalScreen:!0,getQuery:z})]})]})},j=n(40490),z=n.n(j);var U=function(e){var t=e.lifeCycle,n=(0,r.useRef)(),i=(0,r.useRef)(null),o=(0,r.useRef)(),a=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,f.mv)("currentCategory"),p=(0,f.mv)("currentType"),m=(0,f.mv)("setCurrentCategory"),v=function(e){m(e)};return(0,r.useEffect)((function(){return function(){var e,t;null===(e=a.current)||void 0===e||e.kill(),null===(t=c.current)||void 0===t||t.kill()}}),[]),(0,r.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.kill(),a.current="all"!==d?s.p8.to(o.current,{duration:.5,width:24,marginRight:0,opacity:1,x:0,ease:"power2.inOut"}):s.p8.to(o.current,{duration:.5,width:0,marginRight:0,opacity:0,x:-10,ease:"power2.inOut"})}),[d]),(0,r.useEffect)((function(){"leave"===t?c.current=u(n.current):"from"===t&&(c.current=l(n.current))}),[t]),(0,g.jsx)("div",{className:z().left,ref:n,children:(0,g.jsxs)("div",{className:(0,S.Z)(z().leftInner,z().categories,"globe-footer__categories"),ref:i,"data-footer-container":"categories",children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(z().filterButton,z().clearButton),onClick:function(){m("all")},ref:o,children:(0,g.jsx)("div",{children:(0,g.jsx)(h.UZ,{})})}),(0,g.jsx)(N.Ff,{speciesFn:function(){return v("species")},habitatFn:function(){return v("habitat")},anthroFn:function(){return v("anthro")},getQuery:function(){var e={};return"all"===d&&"all"===p||("all"!==d&&"all"===p?(e.v="categories",e.a=d):"all"===d&&"all"!==p?(e.v="types",e.a=p):"all"!==d&&"all"!==p&&(e.v="types",e.a=p,e.f=d)),e},finalScreen:!0})]})})},H=n(23178),G=n.n(H);var V=function(e){var t,n,r,i,a,s,l,u,c,d,h,p,m,v,y,_,b,x,w,D=e.data,A=e.fallback,E=e.title,M=e.topMargin,C=(0,f.s6)("exitFn"),T=function(e,t){C&&(e.preventDefault(),C(t))},P=function(e,t){return"Dot"!==e&&"ContentDotTimeline"!==e?null:("Dot"===e?n="content":"ContentDotTimeline"===e&&(n="timeline"),"/".concat(n,"/").concat(t));var n},R=function(e,t,n){return null!==n&&void 0!==n&&n.url?"video":"ContentDotTimeline"===t?"timeline":e};if((null===(t=D[0])||void 0===t||null===(n=t.internalPage)||void 0===n||!n.__typename||null===(r=D[0])||void 0===r||null===(i=r.internalPage)||void 0===i||!i.slug)&&(null===(a=D[0])||void 0===a||!a.slug))return null;var k,O=(k=D,A?k.map((function(e){var t,n,r,i,o;return{title:e.title,slug:P(e.__typename,e.slug),imageUrl:(null===e||void 0===e||null===(t=e.dotImage)||void 0===t?void 0:t.url)||(null===e||void 0===e||null===(n=e.headerImage)||void 0===n?void 0:n.url)||"/images/placeholders/missingDot.png",time:e.timeSpan||e.displayYear,category:R(null===(r=e.storyTypeCollection)||void 0===r||null===(i=r.items)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.name,e.__typename,null===e||void 0===e?void 0:e.headerVideo)}})):k.map((function(e){var t,n,r,i,o,a,s;return{bulletTitle:e.bulletTitle,title:e.title,slug:P(e.internalPage.__typename,e.internalPage.slug),imageUrl:null===(t=e.thumbnail)||void 0===t?void 0:t.url,time:(null===(n=e.internalPage)||void 0===n?void 0:n.timeSpan)||(null===(r=e.internalPage)||void 0===r?void 0:r.displayYear),category:R(null===e||void 0===e||null===(i=e.internalPage)||void 0===i||null===(o=i.storyTypeCollection)||void 0===o||null===(a=o.items[0])||void 0===a?void 0:a.name,e.internalPage.__typename,null===(s=e.internalPage)||void 0===s?void 0:s.headerVideo)}})));return(0,g.jsxs)("div",{className:(0,S.Z)(G().container,"content__explore-more"),children:[(0,g.jsx)("h2",{className:(0,S.Z)(G().header,M&&G()["header--top-margin"]),children:null!==E&&void 0!==E?E:"Explore More"}),(0,g.jsxs)("div",{className:G().grid,children:[O[0].slug&&(0,g.jsx)(o(),{href:O[0].slug,children:(0,g.jsxs)("a",{className:G().firstBox,onKeyDown:function(e){return T(e,O[0].slug)},onClick:function(e){return T(e,O[0].slug)},children:[(null===(s=O[0])||void 0===s?void 0:s.imageUrl)&&(0,g.jsx)("div",{className:G().largeImageContainer,children:(0,g.jsx)("img",{className:G().image,src:"".concat(O[0].imageUrl,"?w=300&h=300&q=70&fit=fill"),alt:O[0].title,layout:"fill",objectFit:"cover"})}),(0,g.jsxs)("div",{className:G().copyContainer,children:[(0,g.jsx)("p",{className:G().category,children:O[0].category}),(0,g.jsx)("h3",{className:G().title,children:(null===(l=O[0])||void 0===l?void 0:l.bulletTitle)||O[0].title}),(0,g.jsx)("p",{className:G().timeSpan,children:O[0].time})]})]})}),(null===(u=O[1])||void 0===u?void 0:u.slug)&&(0,g.jsx)(o(),{href:O[1].slug,children:(0,g.jsxs)("a",{className:G().secondBox,onKeyDown:function(e){return T(e,O[1].slug)},onClick:function(e){return T(e,O[1].slug)},children:[(null===(c=O[1])||void 0===c?void 0:c.imageUrl)&&(0,g.jsx)("div",{className:G().smallImageContainer,children:(0,g.jsx)("img",{className:G().image,src:"".concat(null===(d=O[1])||void 0===d?void 0:d.imageUrl,"?w=150&h=150&q=70&fit=fill"),alt:null===(h=O[1])||void 0===h?void 0:h.title,layout:"fill",objectFit:"cover"})}),(0,g.jsxs)("div",{className:G().copyContainer,children:[(0,g.jsx)("p",{className:G().category,children:O[1].category}),(0,g.jsx)("h3",{className:G().title,children:(null===(p=O[1])||void 0===p?void 0:p.bulletTitle)||(null===(m=O[1])||void 0===m?void 0:m.title)}),(0,g.jsx)("p",{className:G().timeSpan,children:O[1].time})]})]})}),(null===(v=O[2])||void 0===v?void 0:v.slug)&&(0,g.jsx)(o(),{href:O[2].slug,children:(0,g.jsxs)("a",{className:G().thirdBox,onKeyDown:function(e){return T(e,O[2].slug)},onClick:function(e){return T(e,O[2].slug)},children:[(0,g.jsx)("div",{className:G().thirdImageSpacer,"aria-hidden":!0}),(null===(y=O[2])||void 0===y?void 0:y.imageUrl)&&(0,g.jsx)("div",{className:G().smallImageContainer,children:(0,g.jsx)("img",{className:G().image,src:"".concat(null===(_=O[2])||void 0===_?void 0:_.imageUrl,"?w=150&h=150&q=70&fit=fill"),alt:null===(b=O[2])||void 0===b?void 0:b.title,layout:"fill",objectFit:"cover"})}),(0,g.jsxs)("div",{className:G().copyContainer,children:[(0,g.jsx)("p",{className:G().category,children:O[2].category}),(0,g.jsx)("h3",{className:G().title,children:(null===(x=O[2])||void 0===x?void 0:x.bulletTitle)||(null===(w=O[2])||void 0===w?void 0:w.title)}),(0,g.jsx)("p",{className:G().timeSpan,children:O[2].time})]})]})})]})]})},W=n(59499),Z=n(74129),$=n(86437),q=n(47558),Y=n.n(q),K=n(24186);n(3384);function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){var t,n=new Map,r=X(e.assets.block);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.set(i.sys.id,i)}}catch(o){r.e(o)}finally{r.f()}return{renderNode:(0,W.Z)({},$.BLOCKS.EMBEDDED_ASSET,(function(e,t){var r=e.data,i=n.get(r.target.sys.id);return(0,g.jsx)("img",{src:i.url,alt:""})}))}}var ee=function(e){var t=e.blocks;return(0,g.jsx)(g.Fragment,{children:t.map((function(e,t){var n=e.title,r=e.listItemsCollection,i=e.paragraphText,o=e.type,a=e.credits,s=e.references;return r&&"ThumbnailGrid"===o?(0,g.jsx)(V,{data:r.items,title:n,topMargin:!0}):(0,g.jsxs)("div",{className:(0,S.Z)(Y().block),children:[n&&(0,g.jsx)("h2",{className:Y().title,children:n}),i&&i.json&&(0,g.jsx)("div",{className:Y().paragraphBlockContainer,children:(0,g.jsxs)("div",{className:Y().paragraphInner,children:[(0,Z.h)(i.json,J(i.links)),((null===a||void 0===a?void 0:a.json)||(null===s||void 0===s?void 0:s.json))&&(0,g.jsxs)("div",{className:Y().citationContainer,children:[(null===s||void 0===s?void 0:s.json)&&(0,g.jsx)("cite",{children:(0,Z.h)(s.json)}),(null===a||void 0===a?void 0:a.json)&&(0,g.jsx)("cite",{children:(0,Z.h)(a.json)})]})]})}),r&&"ThumbnailGrid"!==o&&r.items.map((function(e){return(0,g.jsx)(K.Z,{data:e},e.bulletTitle)}))]},t)}))})},te=n(30744),ne=n.n(te);var re=function(e){var t=e.active,n=e.alt,r=e.copy,i=e.slug,o=e.src;return(0,g.jsxs)("div",{className:(0,S.Z)(ne().circleImageContainer,"js-menu-circle__image-container"),"data-circle":i,"aria-hidden":!t,children:[(0,g.jsx)(_(),{src:o,alt:n,layout:"fill",objectFit:"cover",priority:!0}),(0,g.jsx)("div",{className:ne().overlay}),(0,g.jsx)("p",{className:ne().circleCopy,children:r})]})},ie=n(13541),oe=n(54245),ae=n(36292),se=n(89343);function le(){var e=(0,r.useRef)(),t=(0,f.s6)("setRouter"),n=(0,f.s6)("setPrevRouter"),i=(0,f.s6)("solutionsOverviewHoverData"),o=(0,f.s6)("setIsIntroVisible"),a=(0,f.s6)("activeScrollSmoother"),l=(0,f.s6)("setActiveScrollSmoother"),u=(0,f.s6)("dotTimelineModalOpen"),c=(0,f.s6)("setMobileGlobeCategoryOverlay"),d=(0,f.ic)("setDotTimelineContainerRef"),h=(0,f.mv)("currentView"),p=(0,f.mv)("setCurrentView"),m=(0,f.mv)("setIsRafActive"),g=(0,f.mv)("setCurrentCategory"),v=(0,f.mv)("setCurrentType"),y=(0,f.mv)("setHomepageFilterPersistentFlow"),_=(0,L.useRouter)(),b=(0,oe.Z)(_),x=(0,f.rm)().actions.setCurrentTransition,w=["/","/solutions","/solutions/[solution]"];return(0,r.useEffect)((function(){t(_),n(b);var r,i=null===b||void 0===b?void 0:b.pathname,a=null===_||void 0===_?void 0:_.pathname,l=w.includes(i),u="/solutions"===a||"/solutions/[solution]"===a,c=void 0===(null===b||void 0===b?void 0:b.pathname),d=!!h;if("/"===i&&"/solutions"===a&&"globe"===h?x("globe=>solution:start"):"/"===i&&"/solutions"===a&&"timeline"===h?x("timeline=>solution:start"):null!==i&&void 0!==i&&i.includes("/solutions")&&"/"===a&&"solution"===h?x("solution=>globe:start"):"/"===i&&"/solutions/[solution]"===a&&"globe"===h?x("globe=>solution:start"):"/"===i&&"/solutions/[solution]"===a&&"timeline"===h?x("timeline=>solution:start"):w.includes(a)&&c?(p("intro"),o(!0)):!u||l||d?"/"!==a||l||d?"/"===a&&!l&&d&&"solution"===h?x("solution=>globe:start"):u&&!l&&d&&"globe"===h&&x("globe=>solution:start"):p("globe"):p("solution"),"/solutions/overview"===i&&"/solutions"===a&&x("deeplink=>solution:start"),c&&!w.includes(a)&&s.ZP.delayedCall(1,(function(){_.prefetch("/"),ae.Z.startLoad(!1)}),!1),"homepage"===h&&"/"!==a&&"/solutions"!==a&&(p("globe"),x("homepage=>globe:start")),!w.includes(a)&&w.includes(i))null===(r=e.current)||void 0===r||r.kill(),e.current=s.ZP.delayedCall(1,m,[!1]);else if(w.includes(a)&&!w.includes(i)){var f;null===(f=e.current)||void 0===f||f.kill(),m(!0)}var S=document,D=S.body,A=S.documentElement;w.includes(a)?(D.classList.add("u-is--webgl"),A.classList.add("u-is--webgl")):(D.classList.remove("u-is--webgl"),A.classList.remove("u-is--webgl")),["/content/[slug]","/timeline/[slug]","/site-index"].includes(a)||"/"!==i||(g("all"),v("all"),y([!1,!1]))}),[_]),(0,r.useEffect)((function(){u&&((0,se.Zo)(),d(!1)),a&&(a.scrollTrigger.refresh(),a.scrollTrigger.kill(),l(null)),c(!1)}),[_.pathname]),(0,ie.bt)((function(){i&&_.prefetch("/solutions".concat(i.slug))}),[i]),!1}var ue=n(94542),ce=n(5730),de=n(60076),he=n(17922),fe=n(4821),pe=n(24642);var me=function(e,t,n){if(!(0,pe.Z)(n))return!1;var r=typeof t;return!!("number"==r?(0,he.Z)(n)&&(0,fe.Z)(t,n.length):"string"==r&&t in n)&&(0,de.Z)(n[t],e)},ge=n(535),ve=1/0;var ye=function(e){return e?(e=(0,ge.Z)(e))===ve||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0},_e=parseFloat,be=Math.min,xe=Math.random;var we=function(e,t,n){if(n&&"boolean"!=typeof n&&me(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ye(e),void 0===t?(t=e,e=0):t=ye(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=xe();return be(e+i*(t-e+_e("1e-"+((i+"").length-1))),t)}return(0,ce.Z)(e,t)},Se=n(63881),De=n.n(Se),Ae={y1:"6"},Ee={y1:"-9"},Me={y1:"3"},Ce={y1:"6"};var Te=function(e){var t=e.muted,n=(0,r.useRef)(null),i=(0,r.useRef)(),o=function(){n.current&&(n.current.kill(),n.current=null)},a=function e(){var t=we(.15,.4);n.current=ue.ZP.timeline({onComplete:e}).to("#audio-left",{attr:{y1:we(12)},duration:t},"together").to("#audio-left-center",{attr:{y1:we(12)},duration:t},"together").to("#audio-center",{attr:{y1:we(12)},duration:t},"together").to("#audio-right",{attr:{y1:we(12)},duration:t},"together")};return(0,r.useEffect)((function(){t?function(){o();var e=.2,t=.65,r=ue.Ll.easeOut;n.current=ue.ZP.timeline({onComplete:o}).to("#audio-left",{attr:{y1:12},duration:e},"first").to("#audio-left-center",{attr:{y1:12},duration:e},"first").to("#audio-center",{attr:{y1:12},duration:e},"first").to("#audio-right",{attr:{y1:12},duration:e},"first").delay(.4).to("#audio-left",{attr:{y1:Ae.y1},duration:t,delay:.1,ease:r},"second").to("#audio-left-center",{attr:{y1:Ee.y1},duration:t,delay:.15,ease:r},"second").to("#audio-center",{attr:{y1:Me.y1},duration:t,delay:.2,ease:r},"second").to("#audio-right",{attr:{y1:Ce.y1},duration:t,delay:.3,ease:r},"second")}():a()}),[t]),(0,r.useEffect)((function(){return function(){o()}}),[]),(0,g.jsx)("svg",{className:(0,S.Z)(De().container,t&&De()["container--muted"]),width:"20px",height:"20px",viewBox:"0 0 20 20",children:(0,g.jsxs)("g",{id:"audio-icon",transform:"translate(1.000000, 1.000000)",children:[(0,g.jsxs)("g",{ref:i,transform:"translate(5.000000, 0.000000)",stroke:"currentColor",children:[(0,g.jsx)("line",{id:"audio-left",x1:"0",y1:Ae.y1,x2:"0",y2:"14"}),(0,g.jsx)("line",{id:"audio-left-center",x1:"4",y1:Ee.y1,x2:"4",y2:"14"}),(0,g.jsx)("line",{id:"audio-center",x1:"8",y1:Me.y1,x2:"8",y2:"14"}),(0,g.jsx)("line",{id:"audio-right",x1:"12",y1:Ce.y1,x2:"12",y2:"14"})]}),(0,g.jsx)("line",{className:(0,S.Z)(De().strikethrough,t&&De()["strikethrough--muted"]),x1:"2",y1:"15",x2:"18.5",y2:"4.5",stroke:"currentColor"})]})})},Pe=n(85490),Re=n(14943),ke=function(){return Re.Z.Date.now()},Oe=Math.max,Le=Math.min;var Fe=function(e,t,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function p(e){return u=e,s=setTimeout(g,t),c?f(e):a}function m(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=o}function g(){var e=ke();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?Le(n,o-(e-u)):n}(e))}function v(e){return s=void 0,h&&r?f(e):(r=i=void 0,a)}function y(){var e=ke(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return p(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=(0,ge.Z)(t)||0,(0,pe.Z)(n)&&(c=!!n.leading,o=(d="maxWait"in n)?Oe((0,ge.Z)(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:v(ke())},y},Ie=n(44475),Ne=n(36965);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze=r.memo((function(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useRef)(),i=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(0),l=(0,r.useRef)(!1),u=(0,r.useCallback)(Fe((function(){l.current=!1}),1e3),[]),c=(0,f.mv)("refValues").timeline,d=(0,f.rm)().currentTransition,h=function(){l.current=!0,u()},p=function(){i.current.style.width="".concat(100*c.selection.smooth,"%");var e=(1-c.center.smooth)*n.current.clientWidth-c.selection.smooth*n.current.clientWidth*.5;o.current(e)},m=(0,Pe.useDrag)((function(e){e.first&&(a.current=c.center.static);var t=e.movement[0]/n.current.clientWidth;c.center.static=a.current-t,h()}),{event:{passive:!1}}),v=(0,Pe.useWheel)((function(e){Ie.Z.emit("webgl:gestures:wheel",e)}),{event:{passive:!1}});return(0,ie.bt)((function(){var r=s.p8.timeline({delay:.7});r.set([e.current,t.current],{autoAlpha:0,y:"20"}),r.to(n.current,{autoAlpha:1,duration:.7,ease:"power2.out"}),r.to([e.current,t.current],{autoAlpha:1,y:0,duration:.7,ease:"power2.out"}),o.current=s.p8.quickSetter(i.current,"x","px")}),[]),(0,ie.bt)((function(){"timeline=>globe:start"===d&&(s.p8.to(n.current,{autoAlpha:0}),s.p8.to([e.current,t.current],{autoAlpha:0,y:"-20"}))}),[d]),(0,r.useEffect)((function(){return Ie.Z.on("webgl:gestures:drag",h),Ie.Z.on("webgl:gestures:wheel",h),window.addEventListener("resize",p),function(){Ie.Z.off("webgl:gestures:drag",h),Ie.Z.off("webgl:gestures:wheel",h),window.removeEventListener("resize",p)}}),[]),(0,ie.xQ)((function(){l.current&&p()})),(0,g.jsx)("div",{className:Ne.container,children:(0,g.jsxs)("div",{className:Ne.inner,children:[(0,g.jsxs)("p",{className:Ne.year,ref:e,children:[(0,g.jsx)("span",{children:"5 billion"})," ",(0,g.jsx)("span",{children:"BCE"})]}),(0,g.jsxs)("div",je(je({ref:n},v()),{},{className:Ne.timelineBottomBar,children:[(0,g.jsx)("span",{className:Ne.background}),(0,g.jsx)("div",je(je({ref:i},m()),{},{className:Ne.timelineBottomBar__controller,children:(0,g.jsx)("div",{className:Ne.filler})}))]})),(0,g.jsxs)("p",{className:Ne.year,ref:t,children:[(0,g.jsx)("span",{children:"2020"})," ",(0,g.jsx)("span",{children:"CE"})]})]})})})),Ue=n(38755),He=n.n(Ue);var Ge=function(e){var t,n,i=e.data,o=e.initial,a=e.selectedDot,s=e.setSelectedDot,l=(0,r.useRef)(null),u=(0,r.useState)(!1),c=u[0],d=u[1],h=(0,f.dz)().width,p=null!==i&&void 0!==i&&null!==(t=i.headerImage)&&void 0!==t&&t.url?"".concat(null===i||void 0===i||null===(n=i.headerImage)||void 0===n?void 0:n.url,"?w=250&h=250&q=70&fit=fill"):"/images/placeholders/missingDot.png",m=function(){h<901&&(s(i.slug),setTimeout((function(){return(0,se._8)({mobile:!0})}),150)),s(c?null:i.slug)};return(0,r.useEffect)((function(){a!==i.slug&&c&&h>900?((0,se.RW)(l.current),d(!1)):a===i.slug&&!c&&h>900&&((0,se.E6)(l.current),d(!0))}),[a]),(0,g.jsxs)("div",{className:(0,S.Z)(He().container,"timeline-item__container",o&&"timeline-item__container--initial"),ref:l,"data-active":c&&"active-timeline-item",children:[(0,g.jsx)("button",{type:"button",className:(0,S.Z)(He().left,"timeline-item__left",c&&He()["left--expanded"]),onClick:function(){return m()},children:(0,g.jsxs)("div",{className:"timeline__image-container",children:[(0,g.jsx)("div",{className:"timeline__image-mask",children:(0,g.jsx)("img",{className:"timeline__image",src:p,alt:i.title})}),(0,g.jsx)("span",{className:"timeline__outer-circle","aria-hidden":!0})]})}),(0,g.jsxs)("div",{className:(0,S.Z)(He().right,"timeline-item__right"),children:[(0,g.jsxs)("button",{type:"button",onClick:function(){return m()},className:(0,S.Z)(He().copyButton,"timeline__copy-button"),children:[(0,g.jsx)("h2",{className:He().title,children:i.title}),(0,g.jsx)("p",{className:He().timeSpan,children:i.displayYear})]}),(0,g.jsx)("div",{className:(0,S.Z)(He().readMoreContainer,"timeline__read-more-container"),children:(0,g.jsx)("button",{type:"button",className:(0,S.Z)(He().readMore,"timeline__read-more"),onClick:function(){(0,se._8)()},children:"Read More"})})]})]})},Ve=n(6522);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e=r.memo((function(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useRef)(),i=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(0),l=(0,r.useRef)(!1),u=(0,r.useCallback)(Fe((function(){l.current=!1}),1e3),[]),c=(0,f.mv)("refValues").timeline,d=(0,f.s6)("setTimelineBubbleHoverData"),h=(0,f.s6)("setMobileTimelineDotHover"),p=(0,f.rm)().currentTransition,m=function(){l.current=!0,u()},v=function(){var e=(1-c.center.smooth)*n.current.clientHeight;o.current(e)},y=(0,Pe.useDrag)((function(e){e.first&&(a.current=c.center.static,d(!1),h(!1));var t=e.movement[1]/n.current.clientHeight;c.center.static=a.current-t,m()}),{event:{passive:!1}});return(0,ie.bt)((function(){o.current=s.p8.quickSetter(i.current,"y","px")}),[]),(0,r.useEffect)((function(){return e.current=function(e){var t=s.ZP.utils.selector(e),n=t(".js-timelineSidebar__year"),r=t(".js-timelineSidebar__timeline"),i=t(".js-timelineSidebar__controller"),o=s.ZP.timeline();return o.to(n[0],{autoAlpha:1}).fromTo(r,{scaleY:0,autoAlpha:0},{duration:1.3,scale:1,autoAlpha:1,ease:"power1.inOut"}).to(n[1],{autoAlpha:1}).fromTo(i,{scale:0,autoAlpha:0},{scale:1,autoAlpha:1,ease:"power2.inOut"},"-=0.5"),o}(t.current),Ie.Z.on("webgl:gestures:drag",m),Ie.Z.on("webgl:gestures:wheel",m),window.addEventListener("resize",v),function(){var t;null===(t=e.current)||void 0===t||t.kill(),Ie.Z.off("webgl:gestures:drag",m),Ie.Z.off("webgl:gestures:wheel",m),window.removeEventListener("resize",v)}}),[]),(0,ie.bt)((function(){"timeline=>globe:start"===p&&(e.current=function(e){var t=s.ZP.utils.selector(e)(".js-timelineSidebar__controller"),n=s.ZP.timeline();return n.to(e,{duration:1.4,autoAlpha:0}).to(t,{autoAlpha:0,scale:0,ease:"power1.in"},0),n}(t.current))}),[p]),(0,ie.xQ)((function(){l.current&&v()})),(0,g.jsxs)("div",{ref:t,className:Ve.container,children:[(0,g.jsxs)("div",{className:(0,S.Z)(Ve.yearContainer,"js-timelineSidebar__year"),children:[(0,g.jsx)("p",{className:Ve.year,children:"2020"}),(0,g.jsx)("p",{className:Ve.era,children:"CE"})]}),(0,g.jsx)("div",{className:Ve.inner,children:(0,g.jsx)("div",{ref:n,className:(0,S.Z)(Ve.container__timeline,"js-timelineSidebar__timeline"),children:(0,g.jsx)("div",Ze(Ze({},y()),{},{ref:i,className:(0,S.Z)(Ve.container__controller,"js-timelineSidebar__controller")}))})}),(0,g.jsxs)("div",{className:(0,S.Z)(Ve.yearContainer,"js-timelineSidebar__year"),children:[(0,g.jsx)("p",{className:Ve.year,children:"5 Billion"}),(0,g.jsx)("p",{className:Ve.era,children:"BCE"})]})]})})),qe=n(66771),Ye=n(28633),Ke=n.n(Ye);var Xe=function(e){var t,n,i,a,s=e.data,l=e.searchInput,u=(0,f.s6)("exitFn"),c=(0,r.useRef)(null),d=(0,r.useState)(!1),h=d[0],p=d[1],m=s.displayYear,v=s.filterType,y=s.image,_=s.title,b=s.slug,x=s.timeSpan,w=s.type,D=s.video,A=(s.yearString,null!==D&&void 0!==D&&D.url?"h=250":"w=250&h=250"),E=null!==s&&void 0!==s&&null!==(t=s.image)&&void 0!==t&&t.url?"".concat(null===s||void 0===s||null===(n=s.image)||void 0===n?void 0:n.url,"?").concat(A,"&q=70&fit=thumb"):"/images/placeholders/missingDot.png",M="timeline"===w?"/timeline/".concat(b):"/content/".concat(b),C="video"===v?v:w,T=function(e){e.preventDefault(),p(!0);var t={timeline:"timeline"===v,video:(null===D||void 0===D?void 0:D.url)||null,noThumbnail:!y};setTimeout((function(){u(M,t)}),100)};return(0,g.jsx)("li",{className:(0,S.Z)(Ke().container,"js-search-item__container"),ref:c,onMouseEnter:function(){return(0,qe.Hw)(c.current)},onMouseLeave:function(){return(0,qe._0)(c.current)},"data-selected":h,children:(0,g.jsx)(o(),{href:M,children:(0,g.jsxs)("a",{className:Ke().linkContainer,onClick:T,onKeyDown:T,children:[(0,g.jsx)("div",{className:Ke().imageContainerContainer,children:(0,g.jsxs)("div",{className:(0,S.Z)(Ke().imageContainer,"js-search-item__image-container"),children:[(0,g.jsx)("img",{src:E,alt:_,className:(0,S.Z)(Ke().image,"js-search-item__image")}),(0,g.jsx)("span",{className:(0,S.Z)(Ke().overlay,"js-search-item__overlay"),"aria-hidden":!0})]})}),(0,g.jsxs)("div",{className:(0,S.Z)(Ke().copyContainer,"js-search-item__copy-container"),children:[(0,g.jsx)("p",{className:Ke().type,children:C}),(0,g.jsx)("h3",{className:Ke().title,children:(i=_,a=l,i.split(new RegExp("(".concat(a,")"),"gi")).map((function(e,t){return(0,g.jsx)("span",{className:e.toLowerCase()===a.toLowerCase()?Ke().highlight:"",children:e},t)})))}),(0,g.jsx)("p",{className:Ke().year,children:m||x})]})]})})})},Qe=function(e,t){var n=t.delay,r=void 0===n?0:n,i=t.isBestPractices,o=void 0!==i&&i,a=s.p8.utils.selector(e),l=a(".js-solutionMap__bottom"),u=a(".js-solutionMap__categories span"),c=a(".js-solutionMap__back"),d=a(".js-solutionMap__toggle-2021"),h=a(".js-solutionMap__toggle-2100"),f=a(".js-solutionMap__toggle-line"),p=a(".js-solutionMap__toggle-bullet"),m=a(".js-solutionMap-takeAction"),g=a(".js-solutionListBlock-link"),v=s.p8.timeline({delay:r}),y=s.p8.timeline();return y.set(f,{scaleX:0}).set(p,{scale:0}).to(d,{autoAlpha:1}).to(f,{scaleX:1,autoAlpha:1}).to(h,{autoAlpha:1}).to(p,{scale:1}),o?v.set([l,c],{y:20,autoAlpha:0}).to(l,{duration:1,autoAlpha:1,y:0,ease:"power2.out"}).to(g,{autoAlpha:0,y:10,stagger:-.1,ease:"power1.inOut"},"-=1").to(c,{autoAlpha:1,y:0,ease:"power2.inOut"},"-=0.5").add(y,"-=1"):v.set([l,c],{y:20}).set(u,{x:-10}).to(l,{duration:1,autoAlpha:1,y:0,ease:"power2.out"}).to(u,{duration:1.3,autoAlpha:1,x:0,stagger:.1,ease:"power2.inOut"},"-=1").to(c,{autoAlpha:1,y:0,ease:"power2.inOut"},"-=0.5").to(m,{autoAlpha:1,y:0,ease:"power2.inOut"}).add(y,"-=1"),v},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=s.p8.utils.selector(e),r=n(".js-solutionMap__bottom"),i=(n(".js-solutionMap__categories span"),n(".js-solutionMap__back")),o=n(".js-solutionMap__toggle-2021"),a=n(".js-solutionMap__toggle-2100"),l=n(".js-solutionMap__toggle-line"),u=n(".js-solutionMap__toggle-bullet"),c=n(".js-solutionMap-takeAction"),d=s.p8.timeline({onComplete:t});return d.to(r,{opacity:0,autoAlpha:0,y:20,duration:1,ease:"power2.out"}).to([i,o,a,l,u,c],{autoAlpha:0,duration:1,ease:"power2.out"},0),d},et=n(27812),tt=n(67020),nt=n(71262),rt=n(79546);var it=function(e,t){return e&&e.length?(0,tt.Z)(e,(0,rt.Z)(t,2),nt.Z):void 0},ot=n(27339),at=n.n(ot),st=n(76792),lt=n.n(st),ut=r.memo((function(e){var t=e.data,n=(0,r.useRef)(!0),i=(0,r.useRef)(),o=(0,r.useRef)(!0),a=(0,r.useRef)(),l=(0,f.P)("setCurrentMap"),u=(0,f.P)("setSelectedYear"),c=(0,f.P)("currentMap"),d=(0,f.P)("currentView"),h=(0,f.ic)("solutionMapRef"),p=t.greenprintsCollection.items,m=function(e){n.current&&(l({type:"map",slug:e}),u(2021),n.current=!1,i.current=s.p8.delayedCall(3,(function(){n.current=!0})))};return(0,r.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.kill(),o.current||("map"===d?a.current=function(e){var t=s.p8.utils.selector(e)(".js-solutionMap__categories span"),n=s.p8.timeline();return n.to(t,{duration:1.3,autoAlpha:1,stagger:.1,ease:"power2.inOut"}),n}(h):"bestPractices"===d&&(a.current=function(e){var t=s.p8.utils.selector(e)(".js-solutionMap__categories span"),n=s.p8.timeline();return n.to(t,{autoAlpha:0,duration:1,stagger:-.1,ease:"power2.out"},0),n}(h))),o.current=!1}),[d]),(0,g.jsxs)("div",{className:(0,S.Z)(lt().categories,"js-solutionMap__categories","map"===d&&lt()["is--active"]),children:[(0,g.jsx)("button",{className:(0,S.Z)(lt().categories__single,"default"===(null===c||void 0===c?void 0:c.slug)&&lt()["is--active"],"u-reset-btn"),onClick:function(){return m("default")},type:"button",children:(0,g.jsx)("span",{children:"overview"})}),p.map((function(e,t){return(0,g.jsxs)("button",{onClick:function(){return m(e.shortTitle)},className:(0,S.Z)(lt().categories__single,(null===c||void 0===c?void 0:c.slug)===e.shortTitle&&lt()["is--active"],"u-reset-btn"),type:"button",children:[(0,g.jsx)("span",{className:lt().icon,style:{backgroundColor:e.iconColor}}),(0,g.jsx)("span",{children:e.shortTitle})]},t)}))]})})),ct=n(75486),dt=n(13781),ht=n.n(dt);function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=r.memo((function(e){var t=e.type,n=void 0===t?"desktop":t,i=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(!0),l=(0,r.useRef)(),u="mobile"===n,c=(0,f.P)("selectedYear"),d=(0,f.P)("setSelectedYear"),h=function(e){a.current&&e!==c&&(d(e),a.current=!1,l.current=s.p8.delayedCall(2,(function(){a.current=!0})))},p=(0,Pe.useDrag)((function(e){e.movement[0]>20&&h(2100),e.movement[0]<-20&&h(2021)}),{swipe:{distance:[5,5],duration:3e3,velocity:[0,0]}});return(0,r.useEffect)((function(){var e=2021===c?0:o.current.clientWidth-10,t=(0,ct.Z)(.01*o.current.clientWidth,.5,1);s.p8.to(i.current,{duration:t,x:e,ease:"power2.inOut"})}),[c]),(0,r.useEffect)((function(){return function(){var e;null===(e=l.current)||void 0===e||e.kill()}}),[]),(0,g.jsxs)("div",pt(pt({},p()),{},{className:(0,S.Z)(ht().root,u?ht()["root--mobile"]:ht()["root--desktop"]),children:[(0,g.jsx)("button",{className:(0,S.Z)(ht().number,"js-solutionMap__toggle-2021","u-reset-btn"),onClick:function(){return h(2021)},type:"button",children:"2021"}),(0,g.jsx)("div",{ref:o,className:(0,S.Z)(ht().line,"js-solutionMap__toggle-line"),onClick:function(){return h(2021===c?2100:2021)},children:(0,g.jsx)("div",{ref:i,className:(0,S.Z)(ht().bullet,"js-solutionMap__toggle-bullet")})}),(0,g.jsx)("button",{className:(0,S.Z)(ht().number,"js-solutionMap__toggle-2100","u-reset-btn"),onClick:function(){return h(2100)},type:"button",children:"2100"})]}))}));var gt=r.memo((function(e){var t=e.data,n=t.title,i=t.titleColor,a=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,f.s6)("router"),h=(0,f.s6)("viewportBounds"),p="mobile"===(0,f.s6)("responsiveVersion"),m=(0,f.P)("currentMap"),v=(0,f.P)("selectedYear"),y="map"===(0,f.P)("currentView"),_=(0,r.useRef)(),b=(0,r.useRef)(),x=t.greenprintsCollection.items,w=t.defaultGreenprintMap,D=(0,r.useMemo)((function(){return x.map((function(e,t){return(0,g.jsx)("p",{className:(0,S.Z)(at().dialogue__single,(null===m||void 0===m?void 0:m.slug)===e.shortTitle&&2021===v&&at()["is--active"]),children:e.startDialogue},t)}))}),[m,v]),A=(0,r.useMemo)((function(){return x.map((function(e,t){return(0,g.jsx)("p",{className:(0,S.Z)(at().dialogue__single,(null===m||void 0===m?void 0:m.slug)===e.shortTitle&&2100===v&&at()["is--active"]),children:e.endDialogue},t)}))}),[m,v]),E=(0,r.useMemo)((function(){return t.solutionPagesCollection.items.map((function(e){return(0,g.jsx)(o(),{href:"".concat(null===d||void 0===d?void 0:d.asPath,"/").concat(e.slug),children:(0,g.jsx)("a",{className:at().solutionMap__link,children:(t=e.title,t.charAt(0).toUpperCase()+t.slice(1))})},e.slug);var t}))}),[d]);return(0,r.useEffect)((function(){var e;if(null===(e=_.current)||void 0===e||e.kill(),!p)if(y){var t=c.current.querySelectorAll("a");_.current=s.p8.timeline(),_.current.to(t,{autoAlpha:0,y:10,stagger:-.1,ease:"power1.inOut"}).to([l.current,u.current],{autoAlpha:1})}else{var n=c.current.querySelectorAll("a");_.current=s.p8.timeline(),_.current.set(n,{y:10,autoAlpha:0}).to([l.current,u.current],{autoAlpha:0}).to(n,{autoAlpha:1,y:0,stagger:.1,ease:"power1.inOut"})}}),[y,p]),(0,ie.bt)((function(){var e;null===(e=b.current)||void 0===e||e.kill(),setTimeout((function(){var e=0;if(y){var t=[].concat((0,et.Z)(l.current.querySelectorAll("p")),(0,et.Z)(u.current.querySelectorAll("p")));e=it(t,(function(e){return e.clientHeight})).clientHeight}else e=c.current.clientHeight;if(p){var n=[l.current.querySelector("p"),u.current.querySelector("p")];e=it(n,(function(e){return e.clientHeight})).clientHeight}else if(y){var r=[].concat((0,et.Z)(l.current.querySelectorAll("p")),(0,et.Z)(u.current.querySelectorAll("p")));e=it(r,(function(e){return e.clientHeight})).clientHeight}else e=c.current.clientHeight;b.current=s.p8.to(a.current,{duration:1.2,height:e,ease:"power2.inOut"})}),100)}),[h,y]),(0,g.jsxs)("div",{className:(0,S.Z)(at().root,"js-solutionMap__bottom",p&&at()["is--mobile"]),children:[(0,g.jsxs)("div",{className:at().topContent,children:[(0,g.jsx)("h2",{style:{color:i},children:n}),(0,g.jsxs)("div",{ref:a,className:at().below__wrapper,children:[(0,g.jsxs)("div",{ref:l,className:at().dialogue__start,children:[(0,g.jsx)("p",{className:(0,S.Z)(at().dialogue__single,"default"===(null===m||void 0===m?void 0:m.slug)&&2021===v&&at()["is--active"]),children:w.startDialogue}),D]}),(0,g.jsxs)("div",{ref:u,className:at().dialogue__end,children:[(0,g.jsx)("p",{className:(0,S.Z)(at().dialogue__single,"default"===(null===m||void 0===m?void 0:m.slug)&&2100===v&&at()["is--active"]),children:w.endDialogue}),A]}),(0,g.jsx)("div",{ref:c,className:at().solutionMap__links,children:E})]})]}),!p&&(0,g.jsx)(ut,{data:t}),p&&(0,g.jsx)(mt,{type:"mobile"})]})})),vt=n(33465),yt=n.n(vt),_t=r.memo((function(){var e=(0,f.P)("setCurrentView"),t=(0,f.P)("currentView"),n=(0,r.useRef)(!0),i=(0,r.useRef)(),o=(0,r.useRef)(),a="mobile"===(0,f.s6)("responsiveVersion");return(0,r.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.kill(),n.current||("map"===t?o.current=s.p8.to(i.current,{y:0,autoAlpha:1}):"bestPractices"===t&&(o.current=s.p8.to(i.current,{y:20,autoAlpha:0}))),n.current=!1}),[t]),(0,g.jsx)("button",{ref:i,className:(0,S.Z)(yt().root,"u-reset-btn","js-solutionMap-takeAction",a&&yt()["is--mobile"]),type:"button",onClick:function(){e("bestPractices")},children:(0,g.jsxs)("div",{className:yt().solutionsLink,children:["Take Action"," ",(0,g.jsx)("div",{className:yt().arrowContainer,children:(0,g.jsx)(h.ol,{})})]})})})),bt=n(10542),xt=n.n(bt),wt=n(86767),St=n(79960),Dt=n.n(St),At=n(53026),Et=r.memo((function(e){var t=e.data,n=e.setStage,i=e.lifeCycle,a=(0,r.useRef)(),s=(0,r.useMemo)((function(){return t}),[]),l=s.solutionPagesCollection.items,u=(0,f.s6)("router"),c=(0,r.useMemo)((function(){return l.map((function(e){return(0,g.jsxs)("div",{className:Dt().links__single,children:[(0,g.jsx)("div",{className:Dt()["links__single-bullet"],style:{backgroundColor:t.titleColor}}),(0,g.jsx)(o(),{href:"".concat(null===u||void 0===u?void 0:u.asPath,"/").concat(e.slug),children:(0,g.jsxs)("a",{children:[(0,wt.Z)(e.title),"  "]})})]},e.slug)}))}),[]);return(0,ie.bt)((function(){"enter"===i?(0,At.I)(a.current):(0,At.Z)(a.current)}),[i]),(0,g.jsx)("div",{ref:a,className:Dt().root,children:(0,g.jsx)("div",{className:Dt().wrapper,children:(0,g.jsxs)("div",{className:Dt().inner,children:[(0,g.jsx)("h2",{style:{color:t.titleColor},children:s.title}),(0,g.jsxs)("div",{children:[c,(0,g.jsxs)("div",{className:Dt().links__single,children:[(0,g.jsx)("div",{className:Dt()["links__single-bullet"],style:{backgroundColor:t.titleColor}}),(0,g.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),n("practices")},children:"Best Practices"})]})]})]})})})})),Mt=n(65184),Ct=n.n(Mt),Tt=r.memo((function(e){var t=e.data,n=e.isActive,i=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useMemo)((function(){return t}),[]).defaultGreenprintMap.dotsCollection.items;console.log({isActive:n});var l=(0,r.useMemo)((function(){return s.map((function(e){var t,n,r=e.storyTypeCollection.items[0].name,i=null!==e&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url?"".concat(null===(n=e.image)||void 0===n?void 0:n.url,"?w=160&h=160&q=70&fit=fill"):"/images/placeholders/missingDot.png",a="timeline"===r?"/timeline/".concat(e.slug):"/content/".concat(e.slug);return(0,g.jsx)(o(),{href:a,children:(0,g.jsx)("a",{children:(0,g.jsxs)("div",{className:Ct().entries__single,children:[(0,g.jsx)("div",{className:Ct()["entries__single-image"],children:(0,g.jsx)(_(),{src:i,layout:"fill",objectFit:"cover"})}),(0,g.jsxs)("div",{className:Ct()["entries__single-content"],children:[(0,g.jsx)("h3",{children:e.title}),(0,g.jsx)("div",{className:Ct()["entries__single-label"],children:e.displayYear})]})]})})},e.slug)}))}),[s]);return(0,ie.bt)((function(){n?(0,At.I)(i.current):(0,At.Z)(i.current,void 0,void 0,(function(){a.current.scrollTop=0}))}),[n]),(0,g.jsx)("div",{ref:i,className:Ct().root,children:(0,g.jsxs)("div",{ref:a,className:Ct().wrapper,children:[(0,g.jsx)("div",{className:Ct().topImage,style:{backgroundImage:"linear-gradient(to bottom,  rgba(0,0,0, 0.3) 75%,rgba(0,0,0,1) 100%), url(".concat(t.image.url,"?w=500&h=400&q=70&fit=fill)")}}),(0,g.jsxs)("div",{className:Ct().inner,children:[(0,g.jsx)("h2",{children:"Best Practices"}),(0,g.jsx)("div",{className:Ct().entries,children:l})]})]})})})),Pt=r.memo((function(e){var t=e.data,n=(0,f.P)("currentView"),i=(0,f.P)("setCurrentView"),o="bestPractices"===n,s=(0,f.mv)("setIsRafActive"),l=(0,f.s6)("prevRouter"),u=(0,r.useState)("overview"),c=u[0],d=u[1];(0,ie.bt)((function(){"/content/[slug]"===(null===l||void 0===l?void 0:l.pathname)&&d("practices")}),[l]),(0,ie.bt)((function(){s(!o)}),[o]);var p=(0,a.Yz)(o,900),m=p.stage,v=p.shouldMount;return(0,g.jsx)(g.Fragment,{children:v&&(0,g.jsxs)("div",{className:xt().root,children:[(0,g.jsx)("div",{className:(0,S.Z)(xt().backArrowContainer,"timeline__back-arrow-container"),onClick:function(){"practices"===c?d("overview"):i("map")},children:(0,g.jsx)(h.D1,{})}),(0,g.jsx)(Et,{data:t,setStage:d,lifeCycle:m}),(0,g.jsx)(Tt,{data:t,isActive:"practices"===c})]})})})),Rt=n(40843),kt=r.memo((function(e){var t=e.data,n=(0,r.useRef)(),i=(0,r.useRef)(!0),o=(0,r.useRef)(),a=(0,f.ic)("setSolutionMapRef"),s=(0,f.mv)("currentView"),l=(0,f.s6)("router"),u=((0,f.s6)("prevRouter"),(0,f.s6)("setExitFn")),c="mobile"===(0,f.s6)("responsiveVersion"),d="map"===(0,f.P)("currentView"),h=(0,f.P)("setCurrentView"),p=(0,f.P)("currentView");return(0,r.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.kill(),"solution"===s&&("map"===p?o.current=Qe(n.current,{delay:i.current?1:0,isBestPractices:!1}):"bestPractices"===p&&(o.current=Qe(n.current,{delay:i.current?1:.5,isBestPractices:!0}))),i.current=!1}),[s]),(0,r.useEffect)((function(){l&&u((function(e){return Je(n.current,(function(){return l.push(e)}))}))}),[l]),(0,g.jsxs)(g.Fragment,{children:[!c&&(0,g.jsx)(Rt.wg,{}),(0,g.jsxs)("div",{ref:function(e){n.current=e,a(e)},children:[!c&&(0,g.jsx)(mt,{type:"desktop"}),(0,g.jsx)(Rt.lm,{rootRef:n,href:"/solutions",leaveFn:d&&Je,onClick:!d&&function(){h("map")}}),(0,g.jsx)(gt,{data:t}),(0,g.jsx)(_t,{}),c&&(0,g.jsx)(Pt,{data:t})]})]})})),Ot=n(80130),Lt=n(64990),Ft=n.n(Lt);function It(e){var t=e.pageData,n=(0,r.useRef)(),i=(0,f.mv)("currentView"),a=(0,f.ic)("setSolutionPageRef"),s=(0,f.s6)("setExitFn"),l=(0,f.s6)("router");return(0,r.useEffect)((function(){"solution"===i&&(0,Ot.I)(n.current)}),[i]),(0,r.useEffect)((function(){l&&s((function(e){return(0,Ot.Z)(n.current,(function(){return l.push(e)}))}))}),[l]),(0,g.jsxs)("div",{ref:function(e){n.current=e,a(e)},children:[(0,g.jsx)(Rt.lm,{rootRef:n,href:"/",leaveFn:Ot.Z}),(0,g.jsxs)("div",{className:(0,S.Z)(Ft().overview__container,"js-solutionIndex__bottom"),children:[(0,g.jsx)("h2",{children:t.title}),(0,g.jsx)("div",{className:Ft().overview__description,children:t.description}),(0,g.jsx)(o(),{href:"/solutions/overview",children:(0,g.jsxs)("a",{className:Ft().overview__button,children:[(0,g.jsx)("div",{children:"See Overview"}),(0,g.jsx)("div",{className:Ft().eyeContainer,children:(0,g.jsx)(h.bA,{})})]})})]})]})}var Nt=n(55162),Bt=n(92922),jt=n.n(Bt);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=function(e){var t=e.setFiles,n=e.files,r=(0,Nt.uI)({accept:"image/jpeg, image/jpg, image/png",maxFiles:1,maxSize:209715200,onDrop:function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),i=r.getRootProps,o=r.getInputProps,a=(r.fileRejections.map((function(e){var t=e.errors;return 0===t.length?null:t.map((function(e){return(0,g.jsx)("li",{children:e.message},e.code)}))})),function(e){t([].concat((0,et.Z)(n.slice(0,e)),(0,et.Z)(n.slice(e+1))))});return(0,g.jsx)("div",Ut(Ut({className:jt().container},i()),{},{children:n.length?(0,g.jsx)("div",{className:jt().previewContainer,children:n.map((function(e,t){return(0,g.jsxs)("div",{className:jt().imageContainer,children:[(0,g.jsx)("img",{src:e.preview,alt:"".concat(e.name)}),(0,g.jsx)("button",{className:jt().deleteButton,onClick:function(){return a(t)},onKeyDown:function(){return a(t)},type:"button",children:(0,g.jsx)(h.x8,{})})]},e.name)}))}):(0,g.jsxs)("div",{className:jt().copyContainer,children:[(0,g.jsx)("input",Ut({},o())),(0,g.jsx)(h.Pz,{}),(0,g.jsx)("p",{children:"Drop an optional image here or"}),(0,g.jsxs)("button",{type:"button",className:jt().browseButton,children:["Browse ",(0,g.jsx)(h.dL,{})]}),(0,g.jsx)("p",{children:"JPG, PNG"})]})}))}},96029:function(e,t,n){"use strict";n.d(t,{Ln:function(){return g},OO:function(){return _},yA:function(){return D},sU:function(){return R},wW:function(){return M}});var r=n(59499),i=n(4730),o=n(67294),a=n(86010),s=n(45495),l=n.n(s),u=n(63941),c=n(79307),d=n(85893),h=["blocks","whatIf"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.blocks,n=e.whatIf,r=(0,i.Z)(e,h);return(0,d.jsx)("div",{className:(0,a.Z)(l().container,n&&l()["container--what-if"]),children:t.map((function(e,t){return"ImageVideoBlock"===e.__typename?(0,d.jsx)(u.RW,p({data:e,whatIf:n},r),t):"ParagraphBlock"===e.__typename?(0,d.jsx)(u.Of,p({data:e,whatIf:n},r),t):"ListBlock"===e.__typename?(0,d.jsx)(c.FD,p({blocks:[e]},r),t):"VideoBlock"===e.__typename?(0,d.jsx)(u.nU,p({data:e},r),t):"SolutionsListBlock"===e.__typename?(0,d.jsx)(u.Px,p({data:e},r),t):null}))})}var g=o.memo(m),v=n(6562),y=n.n(v),_=o.forwardRef((function(e,t){var n=e.children,r=e.inactive,i=e.standardGrid,o=e.fullWidth,s=e.transparentBg;return(0,d.jsx)("div",{ref:t,className:(0,a.Z)(y().container,s&&y()["container--transparent-bg"],r&&y()["container--inactive"],"js-content-container"),children:(0,d.jsx)("div",{className:(0,a.Z)(!o&&y().inner,i&&y().standardGrid,o&&y().fullWidth,"content-container__inner"),children:n})})})),b=n(25675),x=n.n(b),w=n(23831),S=n.n(w);var D=function(e){var t=e.video,n=e.image,r=e.enterFn,i=e.backLink,o=e.backExitFn,s=e.circleImage;return(0,d.jsxs)("div",{className:(0,a.Z)(S().heroContainer,(null===t||void 0===t?void 0:t.url)&&S()["heroContainer--video"],!(null!==t&&void 0!==t&&t.url)&&!(null!==n&&void 0!==n&&n.url)&&S()["heroContainer--no-header-asset"]),children:[i&&(0,d.jsx)(u.xE,{backLink:i,backExitFn:o,circleImage:s}),(null===t||void 0===t?void 0:t.url)&&(0,d.jsx)("div",{className:(0,a.Z)(S().videoContainer,"content__video-container"),children:(0,d.jsx)("video",{className:S().video,src:t.url,controls:!0})}),(null===n||void 0===n?void 0:n.url)&&s&&(0,d.jsxs)("div",{className:(0,a.Z)(S().blurryBackground,"content__blurry-background",!r&&"hide-fouc"),"aria-hidden":"true",children:[" ",(0,d.jsx)(x(),{src:"".concat(null===n||void 0===n?void 0:n.url,"?h=600&fit=thumb"),alt:null===n||void 0===n?void 0:n.title,layout:"fill"})]}),(null===n||void 0===n?void 0:n.url)&&!(null!==t&&void 0!==t&&t.url)&&s&&(0,d.jsx)("div",{className:(0,a.Z)(S().imageContainer,"content__image-container hide-fouc"),children:(0,d.jsx)(x(),{src:"".concat(null===n||void 0===n?void 0:n.url,"?h=600&fit=thumb"),alt:null===n||void 0===n?void 0:n.title,layout:"fill",objectFit:"cover",className:"content__image hide-fouc",onLoad:function(){r&&r()}})}),(null===n||void 0===n?void 0:n.url)&&!s&&(0,d.jsx)("div",{className:(0,a.Z)(S().fullWidthImageContainer,"content__image-container hide-fouc"),children:(0,d.jsx)(x(),{src:"".concat(null===n||void 0===n?void 0:n.url,"?h=600&fit=thumb"),alt:null===n||void 0===n?void 0:n.title,layout:"fill",objectFit:"cover",className:"content__image hide-fouc",onLoad:function(){r&&r()}})}),(0,d.jsx)("div",{className:(0,a.Z)(S().bottomGradient,s&&S()["bottomGradient--circle-image"]),"aria-hidden":!0})]})},A=n(48372),E=n.n(A);var M=function(e){var t=e.title,n=e.year,r=e.location,i=e.color,o=e.contributor;return(0,d.jsxs)("div",{className:(0,a.Z)(E().titleContainer,"content__title","hide-fouc"),children:[(0,d.jsx)("h1",{style:{color:i},children:t}),((null===o||void 0===o?void 0:o.name)||(null===o||void 0===o?void 0:o.first_name)&&(null===o||void 0===o?void 0:o.last_name))&&(0,d.jsxs)("p",{className:E().contributor,children:["Personal memory by ",(null===o||void 0===o?void 0:o.name)||"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name)]}),(0,d.jsxs)("p",{className:E().year,children:[n&&n,n&&r&&" \u2022 ",r&&r]})]})},C=n(74129),T=n(99900),P=n.n(T);var R=function(e){var t=e.paragraphText,n=e.references,r=e.credits;return(0,d.jsxs)("div",{className:(0,a.Z)(P().contentContainer,"content__content","hide-fouc"),children:[(null===t||void 0===t?void 0:t.json)&&(0,C.h)(t.json),((null===r||void 0===r?void 0:r.json)||(null===n||void 0===n?void 0:n.json))&&(0,d.jsxs)("div",{className:P().citationContainer,children:[(null===n||void 0===n?void 0:n.json)&&(0,d.jsx)("cite",{children:(0,C.h)(n.json)}),(null===r||void 0===r?void 0:r.json)&&(0,d.jsx)("cite",{children:(0,C.h)(r.json)})]})]})}},62509:function(e,t,n){"use strict";n.d(t,{Xz:function(){return xr},w1:function(){return bl},p2:function(){return Fr},kE:function(){return As},if:function(){return zr}});n(96029),n(65929);var r=n(67294),i=n(95135),o=n.n(i),a=n(27812),s=n(87462),l=n(99477),u=n(32576);function c(e){let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const d="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;var h=n(76525),f=n.n(h),p=n(45431);function m(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}const g=[];function v(e,t,n=!1,r={}){for(const o of g)if(m(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!n)throw o.promise}const i={keys:t,equal:r.equal,promise:e(...t).then((e=>i.response=e)).then((()=>{r.lifespan&&r.lifespan>0&&setTimeout((()=>{const e=g.indexOf(i);-1!==e&&g.splice(e,1)}),r.lifespan)})).catch((e=>i.error=e))};if(g.push(i),!n)throw i.promise}const y=(e,t,n)=>v(e,t,!1,n);const _=e=>e&&e.isOrthographicCamera,b="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;function x(e){const t=r.useRef(e);return b((()=>{t.current=e}),[e]),t}function w({set:e}){return b((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class S extends r.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}S.getDerivedStateFromError=()=>({error:!0});const D="__default";function A(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}const E=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},M={obj:e=>e===Object(e)&&!M.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!==typeof t||!!e!==!!t)return!1;if(M.str(e)||M.num(e))return e===t;const o=M.obj(e);if(o&&"reference"===r)return e===t;const a=M.arr(e);if(a&&"reference"===n)return e===t;if((a||o)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;for(s in i?t:e)if(e[s]!==t[s])return!1;if(M.und(s)){if(a&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function C(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function T(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}function P(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const R=/-\d+$/;function k(e,t,n){if(M.str(n)){if(R.test(n)){const t=n.replace(R,""),{target:r,key:i}=P(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=P(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function O(e,t,n){var r,i;if(M.str(n)){const{target:r,key:i}=P(e,n),o=t.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function L(e,{children:t,key:n,ref:r,...i},{children:o,key:a,ref:s,...l}={},u=!1){var c;const d=null!=(c=null==e?void 0:e.__r3f)?c:{},h=Object.entries(i),f=[];if(u){const e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||h.unshift([e[t],D+"remove"])}h.forEach((([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(M.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return f.push([t,n,!0,[]]);let i=[];t.includes("-")&&(i=t.split("-")),f.push([t,n,!1,i])}));const p={...i};return d.memoizedProps&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:f}}function F(e,t){var n,r;const i=null!=(n=e.__r3f)?n:{},o=i.root,a=null!=(r=null==o||null==o.getState?void 0:o.getState())?r:{},{memoized:s,changes:u}=(c=t)&&c.memoized&&c.changes?t:L(e,t);var c;const d=i.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=s),u.forEach((([t,n,r,o])=>{let u=e,c=u[t];if(o.length&&(c=o.reduce(((e,t)=>e[t]),e),!c||!c.set)){const[n,...r]=o.reverse();u=r.reverse().reduce(((e,t)=>e[t]),e),t=n}var d;if(n===D+"remove")if(c&&c.constructor)n=new c.constructor(...null!=(d=s.args)?d:[]);else if(u.constructor){var h;const e=new u.constructor(...null!=(h=u.__r3f.memoizedProps.args)?h:[]);n=e[c],e.dispose&&e.dispose()}else n=0;if(r)n?i.handlers[t]=n:delete i.handlers[t],i.eventCount=Object.keys(i.handlers).length;else if(c&&c.set&&(c.copy||c instanceof l.Layers)){if(Array.isArray(n))c.fromArray?c.fromArray(n):c.set(...n);else if(c.copy&&n&&n.constructor&&c.constructor.name===n.constructor.name)c.copy(n);else if(void 0!==n){const e=c instanceof l.Color;!e&&c.setScalar?c.setScalar(n):c instanceof l.Layers&&n instanceof l.Layers?c.mask=n.mask:c.set(n);!0||a.linear||!e||c.convertSRGBToLinear()}}else u[t]=n,!a.linear&&u[t]instanceof l.Texture&&(u[t].encoding=l.sRGBEncoding);I(e)})),i.parent&&a.internal&&e.raycast&&d!==i.eventCount){const t=a.internal.interaction.indexOf(e);t>-1&&a.internal.interaction.splice(t,1),i.eventCount&&a.internal.interaction.push(e)}return u.length&&e.parent&&N(e),e}function I(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function N(e){null==e.onUpdate||e.onUpdate(e)}function B(e,t){e.manual||(_(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function j(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function z(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function U(e){const t=new l.Vector3;function n(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function r(t){const{internal:n}=e.getState();Array.from(n.hovered.values()).forEach((e=>{if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(j(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}))}function i(e,t){t.forEach((t=>{var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:o=>{switch(o){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return t=>{const{internal:n}=e.getState();"pointerId"in t&&!n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),r([]))}}return a=>{const{onPointerMissed:s,internal:l}=e.getState();l.lastEvent.current=a;const u="onPointerMove"===o,c="onClick"===o||"onContextMenu"===o||"onDoubleClick"===o,d=function(t,n){const r=e.getState(),i=new Set,o=[],a=n?n(r.internal.interaction):r.internal.interaction;a.forEach((e=>{const t=E(e);t&&(t.raycaster.camera=void 0)})),r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=a.flatMap((e=>{const n=E(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=E(e.object),r=E(t.object);return n&&r?r.events.priority-n.events.priority||e.distance-t.distance:0})).filter((e=>{const t=j(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())o.push(e.intersection);return o}(a,u?n:void 0),h=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===o&&(l.initialClick=[a.offsetX,a.offsetY],l.initialHits=d.map((e=>e.eventObject))),c&&!d.length&&h<=2&&(i(a,l.interaction),s&&s(a)),u&&r(d),function(n,i,o,a){const{raycaster:s,pointer:l,camera:u,internal:c}=e.getState();if(n.length){const e=t.set(l.x,l.y,0).unproject(u),d={stopped:!1};for(const t of n){const h=e=>{var n,r;return null!=(n=null==(r=c.capturedMap.get(e))?void 0:r.has(t.eventObject))&&n},f=e=>{const n={intersection:t,target:i.target};c.capturedMap.has(e)?c.capturedMap.get(e).set(t.eventObject,n):c.capturedMap.set(e,new Map([[t.eventObject,n]])),i.target.setPointerCapture(e)},p=e=>{const n=c.capturedMap.get(e);n&&z(c.capturedMap,t.eventObject,n,e)};let m={};for(let e in i){let t=i[e];"function"!==typeof t&&(m[e]=t)}let g={...t,...m,pointer:l,intersections:n,stopped:d.stopped,delta:o,unprojectedPoint:e,ray:s.ray,camera:u,stopPropagation:()=>{const e="pointerId"in i&&c.capturedMap.get(i.pointerId);(!e||e.has(t.eventObject))&&(g.stopped=d.stopped=!0,c.hovered.size&&Array.from(c.hovered.values()).find((e=>e.eventObject===t.eventObject)))&&r([...n.slice(0,n.indexOf(t)),t])},target:{hasPointerCapture:h,setPointerCapture:f,releasePointerCapture:p},currentTarget:{hasPointerCapture:h,setPointerCapture:f,releasePointerCapture:p},nativeEvent:i};if(a(g),!0===d.stopped)break}}}(d,a,h,(e=>{const t=e.eventObject,n=t.__r3f,r=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(u){if(r.onPointerOver||r.onPointerEnter||r.onPointerOut||r.onPointerLeave){const t=j(e),n=l.hovered.get(t);n?n.stopped&&e.stopPropagation():(l.hovered.set(t,e),null==r.onPointerOver||r.onPointerOver(e),null==r.onPointerEnter||r.onPointerEnter(e))}null==r.onPointerMove||r.onPointerMove(e)}else{const n=r[o];n?c&&!l.initialHits.includes(t)||(i(a,l.interaction.filter((e=>!l.initialHits.includes(e)))),n(e)):c&&l.initialHits.includes(t)&&i(a,l.interaction.filter((e=>!l.initialHits.includes(e))))}}))}}}}let H={};const G=e=>!(null==e||!e.render),V=r.createContext(null),W=(e,t)=>{const n=function(e){const t="function"===typeof e?c(e):e,n=(e=t.getState,n=Object.is)=>{const[,i]=(0,r.useReducer)((e=>e+1),0),o=t.getState(),a=(0,r.useRef)(o),s=(0,r.useRef)(e),l=(0,r.useRef)(n),u=(0,r.useRef)(!1),c=(0,r.useRef)();let h;void 0===c.current&&(c.current=e(o));let f=!1;(a.current!==o||s.current!==e||l.current!==n||u.current)&&(h=e(o),f=!n(c.current,h)),d((()=>{f&&(c.current=h),a.current=o,s.current=e,l.current=n,u.current=!1}));const p=(0,r.useRef)(o);d((()=>{const e=()=>{try{const e=t.getState(),n=s.current(e);l.current(c.current,n)||(a.current=e,c.current=n,i())}catch(e){u.current=!0,i()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n}),[]);const m=f?h:c.current;return(0,r.useDebugValue)(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}(((n,i)=>{const o=new l.Vector3,a=new l.Vector3,s=new l.Vector3;function u(e=i().camera,t=a,n=i().size){const{width:r,height:u}=n,c=r/u;t instanceof l.Vector3?s.copy(t):s.set(...t);const d=e.getWorldPosition(o).distanceTo(s);if(_(e))return{width:r/e.zoom,height:u/e.zoom,factor:1,distance:d,aspect:c};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,i=n*(r/u);return{width:i,height:n,factor:r/i,distance:d,aspect:c}}}let c;const d=e=>n((t=>({performance:{...t.performance,current:e}}))),h=new l.Vector2;return{set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(t=1)=>e(i(),t),advance:(e,n)=>t(e,n,i()),legacy:!1,linear:!1,flat:!1,scene:T(new l.Scene),controls:null,clock:new l.Clock,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();c&&clearTimeout(c),e.performance.current!==e.performance.min&&d(e.performance.min),c=setTimeout((()=>d(i().performance.max)),e.performance.debounce)}},size:{width:0,height:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:e=>n((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,r)=>{const o=i().camera,s={width:e,height:t,updateStyle:r};n((e=>({size:s,viewport:{...e.viewport,...u(o,a,s)}})))},setDpr:e=>n((t=>{const n=A(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:(e="always")=>{const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}}})),i=n.getState();let o=i.size,a=i.viewport.dpr,s=i.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:r,gl:i,set:l}=n.getState();t===o&&r.dpr===a||(o=t,a=r.dpr,B(e,t),i.setPixelRatio(r.dpr),i.setSize(t.width,t.height,t.updateStyle)),e!==s&&(s=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),n.subscribe((t=>e(t))),n};let Z,$=[],q=[],Y=[];function K(e,t){for(Z=0;Z<e.length;Z++)e[Z](t)}let X,Q;function J(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),X=t.internal.subscribers,Z=0;Z<X.length;Z++)Q=X[Z],Q.ref.current(Q.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function ee(){const e=r.useContext(V);if(!e)throw"R3F hooks can only be used within the Canvas component!";return e}function te(e=(e=>e),t){return ee()(e,t)}function ne(e,t=0){const n=ee(),r=n.getState().internal.subscribe,i=x(e);return b((()=>r(i,t,n)),[t,r,n]),null}function re(e,t){return function(n,...r){const i=new n;return e&&e(i),Promise.all(r.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,C(e.scene)),n(e)}),t,(t=>r(`Could not load ${e}: ${t.message}`))))))))}}function ie(e,t,n,r){const i=Array.isArray(t)?t:[t],o=y(re(n,r),[e,...i],{equal:M.equ});return Array.isArray(t)?o:o[0]}ie.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{v(e,t,!0,n)})(re(n),[e,...r])},ie.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)g.splice(0,g.length);else{const t=g.find((t=>m(e,t.keys,t.equal)));if(t){const e=g.indexOf(t);-1!==e&&g.splice(e,1)}}})([e,...Array.isArray(t)?t:[t]])};const oe=new Map,{invalidate:ae,advance:se}=function(e){let t,n,r,i=!1;function o(a){if(n=requestAnimationFrame(o),i=!0,t=0,$.length&&K($,a),e.forEach((e=>{var n;r=e.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(n=r.gl.xr)&&n.isPresenting||(t+=J(a,r))})),q.length&&K(q,a),0===t)return Y.length&&K(Y,a),i=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n,r=1){var a;if(!n)return e.forEach((e=>t(e.store.getState())),r);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(o)))},advance:function(t,n=!0,r,i){n&&K($,t),r?J(t,r,i):e.forEach((e=>J(t,e.store.getState()))),n&&K(q,t)}}}(oe),{reconciler:le,applyProps:ue}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let o,a=`${e[0].toUpperCase()}${e.slice(1)}`;if(void 0===n&&(a.endsWith("Geometry")?n="geometry":a.endsWith("Material")&&(n="material")),"primitive"===e){if(void 0===r.object)throw"Primitives without 'object' are invalid!";o=T(r.object,{type:e,root:i,attach:n,primitive:!0})}else{const r=H[a];if(!r)throw`${a} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`;if(!Array.isArray(t))throw"The args prop must be an array!";o=T(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return"inject"!==a&&F(o,r),o}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?k(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||T(t,{}),t.__r3f.parent=e,N(t),I(t))}function i(e,t,n){let r=!1;if(t){var i,o;if(null!=(i=t.__r3f)&&i.attach)k(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const i=e.children.filter((e=>e!==t)),o=i.indexOf(n);e.children=[...i.slice(0,o),t,...i.slice(o)],r=!0}r||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||T(t,{}),t.__r3f.parent=e,N(t),I(t)}}function o(e,t,n=!1){e&&[...e].forEach((e=>a(t,e,n)))}function a(e,t,n){if(t){var r,i,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)O(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{z(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}const u=null==(a=t.__r3f)?void 0:a.primitive,c=void 0===n?null!==t.dispose&&!u:n;var l;if(!u)o(null==(l=t.__r3f)?void 0:l.objects,t,c),o(t.children,t,c);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,u||delete t.__r3f),c&&t.dispose&&"Scene"!==t.type&&(0,p.unstable_scheduleCallback)(p.unstable_IdlePriority,(()=>{try{t.dispose()}catch(e){}})),I(e)}}return{reconciler:f()({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMicrotask:!0,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{const n=e.getState().scene;n.__r3f.root=e,r(n,t)},removeChildFromContainer:(e,t)=>a(e.getState().scene,t),insertInContainerBefore:(e,t,n)=>i(e.getState().scene,t,n),getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;return!!(null!=(t=null==e?void 0:e.__r3f)?t:{}).handlers},prepareUpdate(e,t,n,r){if(e.__r3f.primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...o}=r,{args:a=[],children:s,...l}=n;if(!Array.isArray(t))throw"The args prop must be an array!";if(t.some(((e,t)=>e!==a[t])))return[!0];const u=L(e,o,l,!0);return u.changes.length?[!1,u]:null}},commitUpdate(e,[t,i],o,s,l,u){t?function(e,t,i,o){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const u=n(t,i,e.__r3f.root);"primitive"!==t&&e.children&&(e.children.forEach((e=>r(u,e))),e.children=[]),e.__r3f.objects.forEach((e=>r(u,e))),e.__r3f.objects=[],a(l,e),r(l,u),u.raycast&&u.__r3f.eventCount&&u.__r3f.root.getState().internal.interaction.push(u);[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=u,e.ref&&("function"===typeof e.ref?e.ref(u):e.ref.current=u))}))}(e,o,l,u):F(e,i)},commitMount(e,t,n,r){var i;const o=null!=(i=e.__r3f)?i:{};e.raycast&&o.handlers&&o.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,shouldDeprioritizeSubtree:()=>!1,prepareForCommit:()=>null,preparePortalMount:e=>T(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,detachDeletedInstance:()=>{},hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=null==e?void 0:e.__r3f)?t:{};n&&r&&O(r,e,n),e.isObject3D&&(e.visible=!1),I(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=null==e?void 0:e.__r3f)?n:{};r&&i&&k(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),I(e)},createTextInstance:()=>{},hideTextInstance:()=>{throw new Error("Text is not allowed in the R3F tree.")},unhideTextInstance:()=>{},getCurrentEventPriority:()=>t?t():u.DefaultEventPriority,now:"undefined"!==typeof performance&&M.fun(performance.now)?performance.now:M.fun(Date.now)?Date.now:void 0,scheduleTimeout:M.fun(setTimeout)?setTimeout:void 0,cancelTimeout:M.fun(clearTimeout)?clearTimeout:void 0,setTimeout:M.fun(setTimeout)?setTimeout:void 0,clearTimeout:M.fun(clearTimeout)?clearTimeout:void 0}),applyProps:F}}(0,(function(){var e,t;switch(null==(e=window)||null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return u.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return u.ContinuousEventPriority;default:return u.DefaultEventPriority}})),ce={objects:"shallow",strict:!1},de=(e,t)=>{const n="function"===typeof e?e(t):e;return G(n)?n:new l.WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function he(e){let t=oe.get(e),n=null==t?void 0:t.fiber,i=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const o="function"===typeof reportError?reportError:console.error,a=i||W(ae,se),s=n||le.createContainer(a,u.ConcurrentRoot,null,!1,null,"",o,null);let c;t||oe.set(e,{fiber:s,store:a});let d=!1;return{configure(t={}){var n,r,i,o;let{gl:s,size:u,events:h,onCreated:f,shadows:p=!1,linear:m=!1,flat:g=!1,legacy:v=!1,orthographic:y=!1,frameloop:_="always",dpr:b=[1,2],performance:x,raycaster:w,camera:S,onPointerMissed:D}=t,E=a.getState(),C=E.gl;E.gl||E.set({gl:C=de(s,e)});let T=E.raycaster;T||E.set({raycaster:T=new l.Raycaster});const{params:P,...R}=w||{};if(M.equ(R,T,ce)||ue(T,{...R}),M.equ(P,T.params,ce)||ue(T,{params:{...T.params,...P}}),!E.camera){const e=S instanceof l.Camera,t=e?S:y?new l.OrthographicCamera(0,0,0,0,.1,1e3):new l.PerspectiveCamera(75,0,.1,1e3);e||(t.position.z=5,S&&ue(t,S),null!=S&&S.rotation||t.lookAt(0,0,0)),E.set({camera:t})}if(!E.xr){const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&se(e,!0,n,t)},t=()=>{const t=a.getState().gl;t.xr.enabled=t.xr.isPresenting,t.xr.setAnimationLoop(t.xr.isPresenting?e:null)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};C.xr&&n.connect(),E.set({xr:n})}if(C.shadowMap){const e=M.boo(p);if(e&&C.shadowMap.enabled!==p||!M.equ(p,C.shadowMap,ce)){const t=C.shadowMap.enabled;C.shadowMap.enabled=!!p,e?C.shadowMap.type=l.PCFSoftShadowMap:Object.assign(C.shadowMap,p),t!==C.shadowMap.enabled&&(C.shadowMap.needsUpdate=!0)}}(function(e,t,n){const r=n.pop(),i=n.reduce(((e,t)=>e[t]),e);i[r]=t})(l,v,["ColorManagement","legacyMode"]);const k=m?l.LinearEncoding:l.sRGBEncoding,O=g?l.NoToneMapping:l.ACESFilmicToneMapping;return C.outputEncoding!==k&&(C.outputEncoding=k),C.toneMapping!==O&&(C.toneMapping=O),E.legacy!==v&&E.set((()=>({legacy:v}))),E.linear!==m&&E.set((()=>({linear:m}))),E.flat!==g&&E.set((()=>({flat:g}))),!s||M.fun(s)||G(s)||M.equ(s,C,ce)||ue(C,s),h&&!E.events.handlers&&E.set({events:h(a)}),b&&E.viewport.dpr!==A(b)&&E.setDpr(b),u=u||{width:null!=(n=null==(r=e.parentElement)?void 0:r.clientWidth)?n:0,height:null!=(i=null==(o=e.parentElement)?void 0:o.clientHeight)?i:0},M.equ(u,E.size,ce)||E.setSize(u.width,u.height,u.updateStyle),E.frameloop!==_&&E.setFrameloop(_),E.onPointerMissed||E.set({onPointerMissed:D}),x&&!M.equ(x,E.performance,ce)&&E.set((e=>({performance:{...e.performance,...x}}))),c=f,d=!0,this},render(t){return d||this.configure(),le.updateContainer(r.createElement(fe,{store:a,children:t,onCreated:c,rootElement:e}),s,null,(()=>{})),a},unmount(){pe(e)}}}function fe({store:e,children:t,onCreated:n,rootElement:i}){return b((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(i)}),[]),r.createElement(V.Provider,{value:e},t)}function pe(e,t){const n=oe.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),le.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,a;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(i),oe.delete(e),t&&t(e)}catch(s){}}),500)}))}}le.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version});r.unstable_act;var me=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}};const ge=r.forwardRef((({makeDefault:e,...t},n)=>{const i=te((({set:e})=>e)),o=te((({camera:e})=>e)),a=te((({size:e})=>e)),l=r.useRef();return r.useLayoutEffect((()=>{const{current:e}=l;e&&!t.manual&&(e.aspect=a.width/a.height,e.updateProjectionMatrix())}),[a,t]),r.useLayoutEffect((()=>{if(e&&l.current){const e=o;return i((()=>({camera:l.current}))),()=>i((()=>({camera:e})))}}),[l,e,i]),r.createElement("perspectiveCamera",(0,s.Z)({ref:me([l,n])},t))}));var ve=n(19608),ye=n(77843),_e=JSON.parse('{"y":{"nS":{"X":{"x":0,"y":0,"z":20}},"mf":{"F":{"x":0,"y":1,"z":80}},"yK":{"L":{"g":0.0005,"a":0.002}},"DV":{"U":{"shiftX":-0.17,"shiftY":-0.2599,"scalePosition":1.495}}}}'),be=n(85893),xe=r.memo((function(){var e=(0,r.useRef)(),t=(0,ye.rm)(),n=t.refTransitionTimeline,i=t.currentTransition,o=(0,ye.mv)("currentView"),s=(0,ye.mv)("isRafActive"),l=((0,ye.mv)("setIsRafActive"),(0,r.useMemo)((function(){return"intro"===o?[0,_e.y.mf.F.y,_e.y.nS.X.z+_e.y.mf.F.z]:[0,_e.y.nS.X.y,_e.y.nS.X.z]}),[]));return(0,r.useEffect)((function(){if(["intro=>globe:start","intro=>solution:start","intro=>homepage:start"].includes(i)){var t=ve.p8.timeline();t.to(e.current.position,{duration:4,y:_e.y.nS.X.y,z:_e.y.nS.X.z,ease:"power2.inOut"}),n.current.add(t,0)}}),[i]),ne((function(e){s&&e.gl.render(e.scene,e.camera)}),100),(0,be.jsx)(ge,{ref:e,position:(0,a.Z)(l),near:1,far:30,fov:15,makeDefault:!0,name:"mainCamera"})})),we=n(85490),Se=n(44475);function De(){return(0,we.useDrag)((function(e){e.first&&Se.Z.emit("webgl:gestures:drag-start",!0),e.last&&Se.Z.emit("webgl:gestures:drag-end",!1),Se.Z.emit("webgl:gestures:drag",e)}),{target:document.querySelector("canvas"),filterTaps:!0}),(0,we.useWheel)((function(e){Se.Z.emit("webgl:gestures:wheel",e)}),{target:document.querySelector("canvas"),event:{passive:!1}}),null}var Ae=n(36292);function Ee(){var e=(0,ye.s6)("setWebglStatus"),t=(0,ye.fq)(),n=te().gl;return(0,r.useEffect)((function(){var r=[];t.timelineHighlights.bubbles.forEach((function(e){var t;null!==e&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url&&r.push({key:e.sys.id,type:"texture",path:"".concat(e.image.url,"?w=140&h=140&q=70&fit=fill")})})),t.solutionOverviewData.forEach((function(e){var t;null!==e&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url&&r.push({key:e.slug,type:"texture",path:"".concat(e.image.url,"?w=140&h=140&q=70&fit=fill")})})),t.storyTypeData.forEach((function(e){r.push({key:"globe-story-".concat(e.name),type:"texture",path:"".concat(e.image.url,"?w=100&h=100&q=70&fit=fill")})}));Ae.Z.startLoad(!1,r,(function(){Ae.Z.get("timelineDotStroke").anisotropy=n.capabilities.getMaxAnisotropy(),e("loaded")}))}),[]),!1}var Me=n(20296),Ce=n.n(Me);function Te(e){let{debounce:t,scroll:n,polyfill:i,offsetSize:o}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e;const a=i||("undefined"===typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),c=t?"number"===typeof t?t:t.scroll:null,d=t?"number"===typeof t?t:t.resize:null,h=(0,r.useRef)(!1);(0,r.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[f,p,m]=(0,r.useMemo)((()=>{const e=()=>{if(!u.current.element)return;const{left:e,top:t,width:n,height:r,bottom:i,right:a,x:s,y:c}=u.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:r,bottom:i,right:a,x:s,y:c};u.current.element instanceof HTMLElement&&o&&(d.height=u.current.element.offsetHeight,d.width=u.current.element.offsetWidth),Object.freeze(d),h.current&&!ke(u.current.lastBounds,d)&&l(u.current.lastBounds=d)};return[e,d?Ce()(e,d):e,c?Ce()(e,c):e]}),[l,o,c,d]);function g(){u.current.scrollContainers&&(u.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",m,!0))),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function v(){u.current.element&&(u.current.resizeObserver=new a(m),u.current.resizeObserver.observe(u.current.element),n&&u.current.scrollContainers&&u.current.scrollContainers.forEach((e=>e.addEventListener("scroll",m,{capture:!0,passive:!0}))))}var y,_,b;return y=m,_=Boolean(n),(0,r.useEffect)((()=>{if(_){const e=y;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[y,_]),b=p,(0,r.useEffect)((()=>{const e=b;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[b]),(0,r.useEffect)((()=>{g(),v()}),[n,m,p]),(0,r.useEffect)((()=>g),[]),[e=>{e&&e!==u.current.element&&(g(),u.current.element=e,u.current.scrollContainers=Pe(e),v())},s,f]}function Pe(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...Pe(e.parentElement)]}const Re=["x","y","top","bottom","left","right","width","height"],ke=(e,t)=>Re.every((n=>e[n]===t[n])),Oe={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Le(e){const{handlePointer:t}=U(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Oe).reduce(((e,n)=>({...e,[n]:t(n)})),{}),connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((([e,n])=>{const[r,i]=Oe[e];t.addEventListener(r,n,{passive:i})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=Oe[e];n.connected.removeEventListener(r,t)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}const Fe=r.forwardRef((function({children:e,fallback:t,resize:n,style:i,gl:o,events:a=Le,shadows:u,linear:c,flat:d,legacy:h,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:v,camera:y,onPointerMissed:_,onCreated:D,...A},E){r.useMemo((()=>{return e=l,void(H={...H,...e});var e}),[]);const[M,{width:C,height:T}]=Te({scroll:!0,debounce:{scroll:50,resize:0},...n}),P=r.useRef(null),R=r.useRef(null),[k,O]=r.useState(null);r.useImperativeHandle(E,(()=>P.current));const L=x(_),[F,I]=r.useState(!1),[N,B]=r.useState(!1);if(F)throw F;if(N)throw N;const j=r.useRef(null);return C>0&&T>0&&k&&(j.current||(j.current=he(k)),j.current.configure({gl:o,events:a,shadows:u,linear:c,flat:d,legacy:h,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:v,camera:y,size:{width:C,height:T},onPointerMissed:(...e)=>null==L.current?void 0:L.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(R.current),null==D||D(e)}}),j.current.render(r.createElement(S,{set:B},r.createElement(r.Suspense,{fallback:r.createElement(w,{set:I})},e)))),b((()=>{O(P.current)}),[]),r.useEffect((()=>{if(k)return()=>pe(k)}),[k]),r.createElement("div",(0,s.Z)({ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...i}},A),r.createElement("div",{ref:M,style:{width:"100%",height:"100%"}},r.createElement("canvas",{ref:P,style:{display:"block"}},t)))}));var Ie=n(49194),Ne=n(67882);function Be(){var e=function(...e){const t=r.useRef([]);return t.current=e.map((e=>r.useContext(e))),r.useMemo((()=>({children:n})=>e.reduceRight(((e,n,i)=>r.createElement(n.Provider,{value:t.current[i],children:e})),n)),[])}(Ie.Z,Ne.Z);return(0,be.jsx)(Fe,{gl:{alpha:!1,antialias:!1},dpr:[1,1.6],children:(0,be.jsxs)(e,{children:[(0,be.jsx)(Ee,{}),(0,be.jsx)(xe,{}),(0,be.jsx)(ze,{})]})})}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.position.z,n=l.MathUtils.degToRad(e.fov),r=2*Math.tan(n/2)*t,i=r*e.aspect;return{width:i,height:r}}function ze(){var e=te(),t=e.size,n=e.camera,i=(0,ye.s6)("webglStatus"),o=(0,ye.mv)("setViewportBounds"),a=(0,ye.mv)("setDefaultViewportBounds"),s=(0,ye.mv)("currentView");return(0,r.useEffect)((function(){var e=je(n);o(e);var t=je(n,_e.y.nS.X.z);a(t)}),[t,n,s]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(De,{}),void 0!==i&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(br,{}),(0,be.jsx)(yr,{})]})]})}var Ue=n(13541),He=new l.Vector3;function Ge(e){var t=e.ref,n=e.group,i=e.vectorHelpers,o=e.instances,a=e.obj,s=e.updateDotsPositions,u=e.uniforms,c=e.timelineValues,d=e.forceLookAt,h=e.isMobile,f=(0,ye.rm)(),p=f.currentTransition,m=f.refTransitionTimeline,g=(0,ye.mv)("setCurrentCategory"),v=(0,ye.mv)("setCurrentType"),y=(0,ye.mv)("currentType"),_=(0,ye.mv)("currentCategory"),b="all"!==y&&"all"!==_,x=function(){ve.p8.delayedCall(1,(function(){g("all"),v("all")}))},w=function(e){s(!0);var r=e?"timelinePosition":"globePosition",d=e?"globePosition":"timelinePosition",f={progress:0},p=ve.p8.timeline({onComplete:function(){h&&e&&(n.current.visible=!1)},onUpdate:function(){for(var n=0;n<o.length;n++){var s=1;He.lerpVectors(i[n][r],i[n][d],f.progress),a.current.position.copy(He),s=e?l.MathUtils.lerp(i[n].scale,1,f.progress):l.MathUtils.lerp(1,i[n].scale,f.progress),a.current.scale.set(s,s,1),a.current.getWorldPosition(He),t.current.setMatrixAt(n,a.current.matrix)}t.current.instanceMatrix.needsUpdate=!0}});if(e){var m=b?.2:0;p.fromTo(f,{progress:0},{duration:3,progress:1,delay:m,ease:"power3.inOut",immediateRender:!1},0).to(u.uTransitionMixPosition,{duration:4.5,value:0,delay:m,ease:"power3.inOut"},0),c.selection.smooth<.5?p.to(u.uOpacity,{duration:.9,value:0},.2).fromTo(n.current.position,{x:2},{duration:.8,x:0,ease:"power1.out",immediateRender:!1},1).to(u.uOpacity,{duration:.8,value:1},1.6):p.to(n.current.position,{duration:3,x:0,ease:"power1.inOut",immediateRender:!1},0),h&&p.to(u.uOpacity,{duration:1,value:0,ease:"power2.in"},0)}else h&&(u.uOpacity.value=0,n.current.visible=!0),p.fromTo(f,{progress:0},{duration:3,progress:1,ease:"power3.inOut",immediateRender:!1},0).to(u.uTransitionMixPosition,{duration:3,value:1},0).to(u.uOpacity,{duration:3,value:1,ease:"power2.in"},0);return p},S=function(e){var t=ve.p8.timeline({onStart:function(){e&&!h&&(n.current.visible=!0)},onComplete:function(){!e&&(n.current.visible=!1)}}),r=e?0:1;return t.to(u.uNormalShiftProgress,{duration:1.5,value:r,ease:"power2.inOut"}).to(u.uOpacity,{duration:1.5,value:1,ease:"power2.inOut"},0),t},D=function(){var e=ve.p8.timeline();return e.fromTo(u.uNormalShiftProgress,{value:1},{duration:2,value:0,ease:"power2.inOut"}),e},A=function(){var e=ve.p8.timeline({onComplete:function(){!function(){for(var e=0;e<o.length;e++)a.current.position.copy(i[e].globePosition),a.current.scale.set(1,1,1),a.current.getWorldPosition(He),t.current.setMatrixAt(e,a.current.matrix);t.current.instanceMatrix.needsUpdate=!0}(),h&&(n.current.visible=!1)}});return e.to(u.uOpacity,{duration:1,value:0,ease:"power2.in"},0).to(u.uTransitionMixPosition,{duration:4.5,value:0,ease:"power3.inOut"},0).set(n.current.position,{x:0,y:0,immediateRender:!1}),e};(0,r.useEffect)((function(){return Se.Z.on("webgl:transition:globe-rotation",d),function(){Se.Z.off("webgl:transition:globe-rotation",d)}}),[]),(0,Ue.bt)((function(){var e=m.current;"globe=>timeline:start"===p?(x(),setTimeout((function(){return e.add(w(!1),"globe:end-=2.4")}))):"timeline=>globe:start"===p?(x(),setTimeout((function(){return e.add(w(!0),0)}))):"globe=>solution:start"===p||"homepage=>solution:start"===p?setTimeout((function(){return e.add(S(!1),0).addLabel("dots:end")}),0):"solution=>globe:start"===p?setTimeout((function(){return e.add(S(!0),2)})):"intro=>globe:start"===p?setTimeout((function(){return e.add(D(),"intro:rotation:end-=2")}),100):"intro=>homepage:start"===p?u.uNormalShiftProgress.value=1:"homepage=>globe:start"===p?e.add(D(),.5):"intro=>solution:start"===p?n.current.visible=!1:"timeline=>solution:start"===p&&(x(),setTimeout((function(){return e.add(A(),0)}),50))}),[p])}var Ve=n(33627);var We=new l.Matrix4,Ze=new l.Vector3,$e=new l.Vector4,qe=new l.Color,Ye={memory:0,timeline:1,success:2,disaster:3,extinction:3,video:4,history:5},Ke=1,Xe=1.8;function Qe(e){var t=e.data,n=e.color,i=t.items.length,o=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useMemo)((function(){return t.items.map((function(){return{globePosition:Ze.clone(),timelinePosition:Ze.clone(),scale:0}}))}),[]),d=(0,ye.fq)(),h=(0,ye.mv)("currentType"),f=(0,ye.mv)("currentCategory"),p=(0,ye.mv)("priorityZoomThreshold"),m=(0,ye.mv)("currentView"),g=(0,ye.mv)("viewportBounds"),v=(0,ye.mv)("refValues").timeline,y=(0,ye.mv)("refValues").globe,_=(0,ye.mv)("isRafActive"),b="mobile"===(0,ye.s6)("responsiveVersion"),x=(0,ye.rm)().isTransitioning,w="globe"===m?t.filters.subType:t.filters.type,S=["all",w].includes(h)&&["all",t.filters.category].includes(f),D=w===h||t.filters.category===f,A=(0,r.useRef)("globe"===m?Ke:Xe),E=(0,Ae.W)("globeDotIcons"),M=(0,r.useMemo)((function(){var e=t.items.filter((function(e){return"object"===typeof e.latLong})).map((function(e,t){var n=e.globeViewConfig,r=e.timelineViewConfig,i=n.position,o=Ye[e.subType],a=t;return e.isGlobeFilterOnly?r.selectionPosition=-1:r.selectionPosition=Math.random()>.25?Math.random()*Math.pow(.6,2)+.1:1,c[t].globePosition.copy(n.position),{data:e,globePosition:i,uvIndex:o,timelineViewConfig:r,instanceId:a}}));return e}),[]),C=(0,r.useMemo)((function(){return{vertexShader:"#define GLSLIFY 1\nattribute vec3 aColor;\nattribute float aFilterDelay;\nattribute float aPriority;\nattribute float aUvIndex;\n\nuniform vec4 uGlobeZoomPriority;\nuniform float uTransitionMixPosition;\nuniform float uGlobeZoom;\nuniform float uProgressType;\nuniform float uProgressCategory;\nuniform float uNormalShiftProgress;\nuniform float uGlobeMaxDelay;\n\nvarying vec2 vUv;\nvarying vec3 vColor;\n\nconst float Z_LIMIT = 1.0;\n\nvoid main(){\n  vec3 globePos = position;\n  vec3 timelinePos = position;\n  float finalScale = 1.0;\n\n  if(uTransitionMixPosition < 1.0) {\n    /* GLOBE:WORLD POS */\n    vec4 mv = modelMatrix * instanceMatrix * vec4(globePos, 1.0);\n    vec3 finalNormal = normal;\n\n    /* GLOBE: TRANSITION NORMAL SHIFT */\n    float normalizedNormalShiftProgress = smoothstep(0.0 + aFilterDelay, 1.0 + aFilterDelay, uNormalShiftProgress * (1.0 + uGlobeMaxDelay));\n\n    /* GLOBE:FILTERING SCALE */\n    float progressType = smoothstep(0.0 + aFilterDelay, 1.0 + aFilterDelay, uProgressType * (1.0 + uGlobeMaxDelay));\n    float progressCategory = smoothstep(0.0 + aFilterDelay, 1.0 + aFilterDelay, uProgressCategory * (1.0 + uGlobeMaxDelay));\n    float filterScale = progressType * progressCategory;\n\n    /* GLOBE:SCALE BY DEPTH */\n    float zDepth = Z_LIMIT + uGlobeZoom;\n    if(mv.z < zDepth){finalScale = smoothstep(zDepth - 0.5, zDepth, mv.z);}\n\n    /* GLOBE:SCALE BY PRIORITY */\n    int priorityIndex = int(aPriority);\n    finalScale = finalScale * uGlobeZoomPriority[priorityIndex];\n\n    /* GLOBE: SCALING */\n    finalScale = finalScale * filterScale * (1.0 - normalizedNormalShiftProgress);\n\n    globePos = globePos * finalScale + finalNormal * (1.0 - filterScale) + (finalNormal * normalizedNormalShiftProgress);\n  }\n  if(uTransitionMixPosition > 0.0) {\n    /* GLOBE: SCALING */\n    float progressType = smoothstep(0.0 + aFilterDelay, 1.0 + aFilterDelay, uProgressType * (1.0 + uGlobeMaxDelay));\n    float progressCategory = smoothstep(0.0 + aFilterDelay, 1.0 + aFilterDelay, uProgressCategory * (1.0 + uGlobeMaxDelay));\n    float filterScale = progressType * progressCategory;\n    finalScale = filterScale;\n    timelinePos = timelinePos * finalScale;\n  }\n\n  /* TOTAL: MIX GLOBE AND TIMELINE */\n  vec3 finalPos = mix(globePos, timelinePos, uTransitionMixPosition);\n\n  /* TOTAL:FINAL POS */\n  gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(finalPos, 1.0);\n\n  vUv = vec2((uv.x * 0.166) + (0.166 * aUvIndex), uv.y);\n  vColor = aColor;\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uMap;\nuniform float uOpacity;\n\nvarying vec2 vUv;\nvarying vec3 vColor;\n\nvoid main(){\n  vec4 txt = texture2D(uMap, vUv);\n  vec4 final = txt;\n\n  final.rgb *= vColor;\n  final.a *= uOpacity;\n\n  gl_FragColor = final;\n}\n",uniforms:{uMap:{value:E},uGlobeZoom:{value:0},uProgressType:{value:1},uProgressCategory:{value:1},uGlobeZoomPriority:{value:$e.clone().set(1,0,0)},uTransitionMixPosition:{value:"timeline"===m?1:0},uOpacity:{value:1},uNormalShiftProgress:{value:0},uGlobeMaxDelay:{value:.5}}}}),[]),T=function(e,t){var n=A.current;if(b)e.data.priority>2&&(n=0);else{if(t<1)n*=1-l.MathUtils.smoothstep(v.selection.smooth,t-.05,t+.05);e.data.priority>2&&(n=0)}return n},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!b||e){for(var t=0;t<M.length;t++){var n=M[t].globePosition;s.current.position.copy(n),s.current.getWorldPosition(Ze),s.current.scale.set(1,1,1),Ze.z>0&&s.current.lookAt(Ze.x,Ze.y,10),o.current.setMatrixAt(t,s.current.matrix)}o.current.instanceMatrix.needsUpdate=!0}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(A.current=Xe,b)for(var t=0;t<M.length;t++){var n=M[t],r=n.timelineViewConfig,i=r.normalizedProgress,l=r.randomY,u=r.randomZ,d=r.randomX,h=r.selectionPosition,f=d*(.5*v.mobile.width),p=-4*u,m=-(1-i)*v.mobile.height+l,y=T(n,h);s.current.position.set(f,m,p),s.current.scale.set(y,y,1),s.current.getWorldPosition(Ze),e||o.current.setMatrixAt(t,s.current.matrix),e&&(c[t].timelinePosition.set(f,m,p),c[t].scale=y)}else for(var _=0;_<M.length;_++){var x=M[_],w=x.timelineViewConfig,S=w.normalizedProgress,D=w.randomY,E=w.randomZ,C=w.randomX,P=w.selectionPosition,R=v.width.smooth,k=(.02*C+S)*R-.5*R,O=1.5*-(1-.9*v.selection.smooth)+2*E,L=D*g.height*.22,F=T(x,P);s.current.position.set(k,L,O),s.current.scale.set(F,F,1),s.current.getWorldPosition(Ze),s.current.lookAt(Ze.x,Ze.y,10),e||o.current.setMatrixAt(_,s.current.matrix),e&&(c[_].timelinePosition.set(k,L,O),c[_].scale=F)}e||(o.current.instanceMatrix.needsUpdate=!0),b?a.current.position.y=v.globalGroupPosition.y:a.current.position.x=v.globalGroupPosition.x},k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"globe"!==m&&"intro"!==m&&"homepage"!==m||P(e),("timeline"===m||e)&&R(e)},O=function(e){var t=e.instances,n=e.isVisibleByFilter,r=e.isForceVisibilityOnGlobe,i=(0,ye.mv)("currentView"),o=(0,ye.mv)("priorityZoomThreshold"),a=(0,ye.mv)("refValues").globe,s=(0,ye.s6)("router"),l=(0,ye.s6)("setDotHoverData"),u=(0,ye.s6)("dotHoverData"),c=(0,ye.s6)("timelineBubbleHoverData"),d=(0,ye.s6)("dotHoverTransitionTl"),h="mobile"===(0,ye.s6)("responsiveVersion"),f=(0,ye.s6)("globeBubbleHoverData"),p="globe"===i;return{onPointerEnter:function(e){if(!d&&n&&["globe","timeline"].includes(i)&&!(e.point.z<0+a.zoom.smooth&&p)&&!c){var s=(null===e||void 0===e?void 0:e.intersections.map((function(e){return e.object.name})))||[];(null===s||void 0===s?void 0:s.includes("globe-bubble-hit-area"))&&f||(e.stopPropagation(),t[e.instanceId].data.priority>o&&p&&!r||l({position:{x:e.clientX,y:e.clientY},data:t[e.instanceId].data}))}},onPointerLeave:function(e){d||!1!==u&&l(!1)},onClick:function(e){if(["globe","timeline"].includes(i)&&!h&&!f&&n&&!(e.point.z<0+a.zoom.smooth&&p)&&(!(t[e.instanceId].data.priority>o&&p)||r)){e.stopPropagation();var l=t[e.instanceId].data,u=l.headerVideo,c=l.image,m=l.slug,g=l.type,v=!c;"timeline"!==g||d?d||(0,Ve.pf)((function(){return s.push("/content/".concat(m))}),{noThumbnail:v,type:g,video:null===u||void 0===u?void 0:u.url}):(0,Ve.pf)((function(){return s.push("/timeline/".concat(m))}),{noThumbnail:v,type:g})}}}}({instances:M,isVisibleByFilter:S,isForceVisibilityOnGlobe:D}),L=O.onPointerEnter,F=O.onPointerLeave,I=O.onClick;return Ge({ref:o,group:a,vectorHelpers:c,instances:M,obj:s,updateDotsPositions:k,uniforms:C.uniforms,timelineValues:v,forceLookAt:function(){for(var e=0;e<M.length;e++)o.current.getMatrixAt(e,We),Ze.setFromMatrixPosition(We),s.current.position.copy(Ze),Ze.setFromMatrixScale(We),s.current.scale.copy(Ze),s.current.getWorldPosition(Ze),Ze.z>0&&s.current.lookAt(Ze.x,Ze.y,10),o.current.setMatrixAt(e,s.current.matrix);o.current.instanceMatrix.needsUpdate=!0},isMobile:b}),(0,r.useEffect)((function(){u.current.setAttribute("aPriority",function(e){var t=e.map((function(e){return e.isGlobeFilterOnly?4:e.priority-1}));return new l.InstancedBufferAttribute(new Float32Array(t),1)}(t.items)),u.current.setAttribute("aColor",function(e){for(var t=e.data,n=e.defaultColor,r=e.storyTypeData,i=[],o=function(e){var o=t.items[e],a=r.find((function(e){return e.name===o.subType})),s=n;a.useColorOverride&&(s=a.colorOverride);var l=qe.set(s).convertLinearToSRGB();i.push(l.r,l.g,l.b)},a=0;a<t.items.length;a++)o(a);return new l.InstancedBufferAttribute(new Float32Array(i),3)}({data:t,defaultColor:n,storyTypeData:d.storyTypeData})),u.current.setAttribute("aFilterDelay",function(e){for(var t=[],n=0;n<e;n++)t.push(l.MathUtils.randFloat(0,.5));return new l.InstancedBufferAttribute(new Float32Array(t),1)}(i)),u.current.setAttribute("aUvIndex",function(e){var t=e.map((function(e){return e.uvIndex}));return new l.InstancedBufferAttribute(new Float32Array(t),1)}(M)),k(!1),b&&(a.current.visible=!1)}),[]),(0,r.useEffect)((function(){var e=["all",w].includes(h)?1:0,n=["all",t.filters.category].includes(f)?1:0;ve.p8.to(C.uniforms.uProgressType,{duration:1.5,value:e,ease:"power1.Out"}),ve.p8.to(C.uniforms.uProgressCategory,{duration:1.5,value:n,ease:"power1.Out"})}),[h,f]),(0,r.useEffect)((function(){var e=$e.clone();D?e.set(1,1,1,1):p<=1?e.set(1,0,0,0):p<=2?e.set(1,1,0,0):e.set(1,1,1,0),ve.p8.to(C.uniforms.uGlobeZoomPriority.value,{x:e.x,y:e.y,z:e.z,w:e.w})}),[p,D]),ne((function(){C.uniforms.uGlobeZoom.value=y.zoom.smooth,!x&&_&&k(!1)}),10),(0,be.jsxs)("group",{ref:a,children:[(0,be.jsx)("object3D",{ref:s})," ",(0,be.jsxs)("instancedMesh",{ref:o,scale:[1,1,1],args:[null,null,M.length],onPointerEnter:L,onPointerLeave:F,onClick:I,name:"dots-instance",children:[(0,be.jsx)("planeBufferGeometry",{ref:u,args:[.04,.04,1,1]}),(0,be.jsx)("shaderMaterial",{args:[C],transparent:!0,depthWrite:!1})]})]})}function Je(e){var t=e.uniforms,n=e.pointsRef,r=(0,ye.rm)(),i=r.currentTransition,o=r.refTransitionTimeline,a=function(e){var r=e?0:1,i=e?4:3.5,o=ve.p8.timeline({onStart:function(){n.current.visible=!0},onComplete:function(){n.current.visible=e}});return o.to(t.uGlobeTransitionNormalShift,{duration:i,value:r,ease:"power2.inOut"}),o},s=function(e){var n=e?0:1,r=ve.p8.timeline();return r.to(t.uProgress,{duration:2,value:n,ease:"power1.inOut"},0).to(t.uMixGlobeMap,{duration:2,value:n,ease:"power1.inOut"},0),r};(0,Ue.bt)((function(){var e=o.current;"globe=>timeline:start"===i?setTimeout((function(){e.add(a(!1),"globe:end-=3")})):"timeline=>globe:start"===i?setTimeout((function(){e.add(a(!0),0)})):"globe=>solution:start"===i||"homepage=>solution:start"===i?setTimeout((function(){e.add(s(!1),1).addLabel("points:end")})):"solution=>globe:start"===i?setTimeout((function(){e.add(s(!0),.5)})):"intro=>globe:start"===i||"intro=>homepage:start"===i?setTimeout((function(){e.add(function(){var e=ve.p8.timeline({onUpdate:function(){n.current.updateMatrix()}});return t.uProgressIntroSolution.value=1,t.uGlobalOpacity.value=1,e.to(t.uProgressIntroGlobe,{duration:7,value:1,ease:"power1.inOut"},0),e}(),.5)})):"timeline=>solution:start"===i?setTimeout((function(){return e.add(function(){var e=ve.p8.timeline({onStart:function(){n.current.visible=!0}});t.uGlobalOpacity.value=0,t.uGlobeTransitionNormalShift.value=.4;var r=s();return r.timeScale(.8),e.to(t.uGlobalOpacity,{duration:3,value:1,ease:"power2.inOut"}).to(t.uGlobeTransitionNormalShift,{duration:3,value:0,ease:"power2.inOut"},0).add(r,.8),e}(),.5)}),50):"intro=>solution:start"===i&&setTimeout((function(){return e.add(function(){var e=ve.p8.timeline({onStart:function(){n.current.visible=!0}});return t.uProgressIntroGlobe.value=1,t.uGlobalOpacity.value=1,t.uGlobeTransitionNormalShift.value=0,t.uMixGlobeMap.value=1,t.uProgress.value=1,e.to(t.uProgressIntroSolution,{duration:7.2,value:1,ease:"power1.inOut"},0),e}(),.5)}),50)}),[i])}var et=512,tt=117,nt=et*tt,rt=et;function it(){var e=(0,Ae.W)("FboGlobe"),t=(0,Ae.W)("FboFlatMap"),n=(0,r.useRef)(),i=(0,r.useRef)(),o=(0,ye.mv)("currentView"),a=(0,ye.mv)("responsiveGlobeScale"),s=(0,ye.mv)("refValues").globe,l=(0,ye.mv)("isRafActive"),u=(0,ye.s6)("responsiveVersion"),c=(0,r.useMemo)((function(){for(var e=[],t=[],n=0,r=0;r<nt;r++){var i=(0+r)%(rt+1);0===i&&(n+=1);var o=n;e.push(i/et,o/tt,0),t.push(.9*Math.random())}return{positions:new Float32Array(e),delays:new Float32Array(t)}}),[]),d=(0,r.useMemo)((function(){return{vertexShader:"precision highp float;\n#define GLSLIFY 1\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nattribute float aDelay;\n\nuniform sampler2D uStartPoint;\nuniform sampler2D uEndPoint;\nuniform float uGlobeZoom;\nuniform float uProgress;\nuniform float uGlobeTransitionNormalShift;\nuniform float uMaxDelay;\nuniform float uProgressIntroGlobe;\nuniform float uProgressIntroSolution;\nuniform float uTime;\nuniform float uMixGlobeMap;\nuniform float uResponsiveGlobeScale;\nuniform float uPointSize;\n\nvarying float vDepth;\nvarying float vTransitionScale;\nvarying float vIntroProgress;\n\nvoid main(){\n  vec2 newUv = vec2(position.x, position.y);\n  vec3 posGlobe = texture2D(uStartPoint, newUv).rgb;\n  vec3 posMap = texture2D(uEndPoint, newUv).rgb;\n  posGlobe.x *= -1.0; // INVERT X POS FOR MATCH ENTRIES\n\n  if(\n    posGlobe.x > -0.1 && posGlobe.x < 0.1\n    && posGlobe.y > -0.1 && posGlobe.y < 0.1\n    && posGlobe.z > -0.1 && posGlobe.z < 0.1\n  ){\n    posGlobe = vec3(999.0); // trim out weird points on globe > temporary depends on the asset?\n  }\n\n  float normalizedProgress = smoothstep(0.0 + aDelay, 1.0 + aDelay, uProgress * (1.0 + uMaxDelay));\n  vec3 nor = normalize(posGlobe);\n\n  float t = uTime * 0.002;\n\n  float normalizedIntroProgress = 1.0;\n\n  /** INTRO>GLOBE TRANSITION */\n  if(uProgressIntroGlobe < 1.0){\n      vec3 introPos = posGlobe;\n      float normalizedYGlobe = smoothstep(20.0, -10.0, introPos.y);\n      normalizedIntroProgress = smoothstep(0.0 + aDelay * 2.0 + normalizedYGlobe * 1.0, 1.0 + aDelay * 2.0 + normalizedYGlobe * 1.0, uProgressIntroGlobe * (1.0 + uMaxDelay * 2.0 + normalizedYGlobe * 1.0));\n      introPos.y -= normalizedYGlobe * 5.0;\n      introPos.x *= 1.0 + pow(normalizedYGlobe, 3.0) * 5.0;\n      introPos.z *= 1.0 + pow(normalizedYGlobe, 3.0) * 5.0;\n\n      posGlobe = mix(introPos, posGlobe, normalizedIntroProgress);\n      posGlobe.x += (sin(aDelay * 90.0) + cos(sin(aDelay * 90.0))) * 1.3 * (1.0 - normalizedIntroProgress);\n      posGlobe.y -= (sin(aDelay * 130.0) + cos(sin(aDelay * 130.0))) * 1.4 * (1.0 - normalizedIntroProgress);\n      posGlobe.z += (sin(aDelay * 120.0) + cos(sin(aDelay * 150.0))) * 1.3 * (1.0 - normalizedIntroProgress);\n  }\n\n    if(uProgressIntroSolution < 1.0){\n      vec3 introPos = posMap;\n      float normalizedYMap = smoothstep(14.0, -9.0, introPos.y);\n      normalizedIntroProgress = smoothstep(0.0 + aDelay * 0.8 + normalizedYMap * 1.0, 1.0 + aDelay * 0.8 + normalizedYMap * 1.0, uProgressIntroSolution * (1.0 + uMaxDelay * 0.8 + normalizedYMap * 1.0));\n      introPos.y -= normalizedYMap * 5.0;\n      introPos.x *= 1.0 + pow(normalizedYMap, 3.0) * 5.0;\n      introPos.z *= 1.0 + pow(normalizedYMap, 3.0) * 5.0;\n\n      posMap = mix(introPos, posMap, normalizedIntroProgress);\n      posMap.x += (sin(aDelay * 90.0) + cos(sin(aDelay * 90.0))) * 1.3 * (1.0 - normalizedIntroProgress);\n      posMap.y -= (sin(aDelay * 130.0) + cos(sin(aDelay * 130.0))) * 1.4 * (1.0 - normalizedIntroProgress);\n      posMap.z += (sin(aDelay * 120.0) + cos(sin(aDelay * 150.0))) * 1.3 * (1.0 - normalizedIntroProgress);\n  }\n\n  vec3 pos = mix(posGlobe, posMap, normalizedProgress);\n  pos *= 0.29;\n\n  /** MOVE ON NORMALS DURING TRANSITIONS */\n  float transitionScale = smoothstep(0.0 + aDelay, 1.0 + aDelay, uGlobeTransitionNormalShift * (1.0 + uMaxDelay));\n  pos *= 1.0 + transitionScale;\n\n  if(uProgress > 0.0 && uProgress < 1.0){\n    pos *= 1.0 + ((snoise(posGlobe * 30.0) + 1.0) * 0.5) * sin(normalizedProgress * 3.14) * 0.2;\n  }\n\n  /** WORLD POS FOR FRAGMENT */\n  vec4 mv = modelMatrix * vec4(pos, 1.0);\n\n  gl_PointSize = uPointSize;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n\n  vDepth = mix(smoothstep((-1.4 * uResponsiveGlobeScale) + uGlobeZoom, 0.0 + uGlobeZoom, mv.z / uResponsiveGlobeScale) * 0.85 + 0.15, 1.0, uMixGlobeMap);\n  vTransitionScale = transitionScale;\n  vIntroProgress = normalizedIntroProgress;\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform float uGlobalOpacity;\n\nvarying float vDepth;\nvarying float vTransitionScale;\nvarying float vIntroProgress;\n\nvoid main(){\n  vec3 color = vec3(0.6) * vDepth;\n  float alpha = (1.0 - vTransitionScale) * vIntroProgress * vDepth * uGlobalOpacity;\n  gl_FragColor = vec4(color, alpha * 0.8);\n}\n",uniforms:{uStartPoint:{value:e},uEndPoint:{value:t},uGlobeZoom:{value:s.zoom.smooth},uProgress:{value:"solution"===o?1:0},uGlobeTransitionNormalShift:{value:["globe","solution","intro"].includes(o)?0:1},uMaxDelay:{value:.9},uProgressIntroGlobe:{value:"intro"===o?0:1},uProgressIntroSolution:{value:"intro"===o?0:1},uMixGlobeMap:{value:"solution"===o?1:0},uTime:{value:0},uPointSize:{value:u?1:.1},uResponsiveGlobeScale:{value:a},uGlobalOpacity:{value:1}}}}),[]);return Je({uniforms:d.uniforms,pointsRef:i}),(0,Ue.bt)((function(){d.uniforms.uResponsiveGlobeScale.value=a}),[a]),ne((function(e){l&&(d.uniforms.uGlobeZoom.value=s.zoom.smooth,d.uniforms.uTime.value=e.clock.elapsedTime)})),(0,be.jsxs)("points",{ref:i,position:[0,0,0],frustumCulled:!1,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},children:[(0,be.jsxs)("bufferGeometry",{ref:n,children:[(0,be.jsx)("bufferAttribute",{attach:"attributes-position",count:c.positions.length/3,array:c.positions,itemSize:3}),(0,be.jsx)("bufferAttribute",{attach:"attributes-aDelay",count:c.positions.length/1,array:c.delays,itemSize:1})]}),(0,be.jsx)("shaderMaterial",{args:[d],transparent:!0})]})}var ot=JSON.parse('{"species":"#5155a3","habitat":"#4b6f4d","anthro":"#bc9977"}'),at=[ot.species,ot.habitat,ot.anthro];function st(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,ye.mv)("viewportBounds"),i=(0,ye.mv)("currentView"),o=(0,ye.mv)("refValues").timeline,a=(0,ye.mv)("isRafActive"),s="mobile"===(0,ye.s6)("responsiveVersion"),u=(0,ye.rm)(),c=u.currentTransition,d=u.isTransitioning,h=u.refTransitionTimeline,f=(0,r.useMemo)((function(){return{vertexShader:"#define GLSLIFY 1\nattribute vec3 aShift;\nattribute float aColorIndex;\nattribute float aDelay;\n\nuniform float uWidth;\nuniform float uHeight;\nuniform float uScale;\nuniform float uTime;\nuniform bool uIsMobile;\n\nvarying vec2 vUv;\nvarying float vDepth;\nvarying float vColorIndex;\n\nvoid main(){\n  vec3 newPos = position;\n\n  if(uIsMobile){\n    // newPos = position * (1.0 - (uScale)) * (1.0 + smoothstep(-8.0, 8.0, aShift.z));\n    newPos *= uScale;\n    newPos.y -= (aShift.y) * uHeight;\n    newPos.x += (aShift.x);\n  }else {\n    newPos = position * (1.0 - (uScale)) * (1.0 + smoothstep(-8.0, 8.0, aShift.z));\n    newPos = (newPos + aShift * vec3(uWidth, uHeight, 1.0));\n  }\n\n  float t = uTime;\n  newPos.x += (sin(t + 5.0 + aDelay * 4.0) + cos(0.2 * t + sin(2.1 * t + aDelay * 8.0))) * 0.14;\n  newPos.y += (sin(t * 1.2 + aDelay * 8.0) + cos(0.3 * t + sin(2.2 * t + aDelay * 3.0))) * 0.1;\n  newPos.z += (sin(t * 0.8 + aDelay * 12.0) + cos(0.18 * t + sin(1.4 * t + aDelay * 5.0))) * 0.05;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPos, 1.0);\n\n  vUv = uv;\n  vColorIndex = aColorIndex;\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform vec3 uColors[3];\n\nvarying vec2 vUv;\nvarying float vDepth;\nvarying float vColorIndex;\n\nvoid main(){\n  // vec2 uv = vec2(gl_PointCoord.x,   gl_PointCoord.y);\n  float c = distance(vec2(0.5), vUv);\n  c = 1.0 - smoothstep(0.0, 0.5, c);\n\n  int index = int(vColorIndex);\n  gl_FragColor = vec4(uColors[index], c * 0.4);\n}\n",uniforms:{uWidth:{value:1},uHeight:{value:1},uScale:{value:1},uColors:{value:at.map((function(e){return new l.Color(e).convertLinearToSRGB()}))},uTime:{value:0},uIsMobile:{value:s}}}}),[]);return(0,Ue.bt)((function(){e.current.visible=!1}),[]),(0,r.useEffect)((function(){f.uniforms.uHeight.value=s?o.mobile.height:.5*n.height}),[n]),(0,r.useEffect)((function(){for(var e=[],n=[],r=[],i=0;i<80;i++){var a=s?(2*Math.random()-1)*(.5*o.mobile.width):1.2*(Math.random()-.5),u=s?Math.random():2*Math.random()-1,c=16*Math.random()-8;e.push(a,u,c),n.push(Math.floor(3*Math.random())),r.push(5*Math.random())}t.current.setAttribute("aShift",new l.InstancedBufferAttribute(new Float32Array(e),3)),t.current.setAttribute("aColorIndex",new l.InstancedBufferAttribute(new Float32Array(n),1)),t.current.setAttribute("aDelay",new l.InstancedBufferAttribute(new Float32Array(r),1))}),[]),(0,r.useEffect)((function(){if("timeline=>globe:start"===c||"timeline=>solution:start"===c){var t=s?0:1,n=ve.p8.timeline({onComplete:function(){e.current.visible=!0}});n.to(f.uniforms.uScale,{duration:1,value:t,ease:"power2.inOut"}),h.current.add(n,0)}else"globe=>timeline:end"===c&&(e.current.visible=!0,s&&(f.uniforms.uScale.value=0,ve.p8.to(f.uniforms.uScale,{duration:2,value:1,ease:"power2.inOut"})))}),[c]),ne((function(t){a&&(d||"timeline"===i&&(s?(f.uniforms.uTime.value=.14*t.clock.elapsedTime,e.current.position.y=o.globalGroupPosition.y):(f.uniforms.uWidth.value=o.width.smooth,f.uniforms.uScale.value=o.selection.smooth,f.uniforms.uTime.value=.14*t.clock.elapsedTime,e.current.position.x=o.globalGroupPosition.x)))}),10),(0,be.jsxs)("instancedMesh",{ref:e,scale:[1.1,1.1,1.1],args:[null,null,80],children:[(0,be.jsx)("planeBufferGeometry",{ref:t,args:[.2,.2,1,1]}),(0,be.jsx)("shaderMaterial",{args:[f],transparent:!0,depthWrite:!1})]})}var lt=n(54245),ut=new l.Vector3;function ct(e){var t=e.groupRef,n=e.strokeRef,i=e.imageRef,o=e.hoverScale,a=e.colors,s=e.data,l=(0,r.useRef)(),u=(0,ye.mv)("currentView"),c=(0,ye.s6)("setTimelineBubbleHoverData"),d=(0,ye.s6)("windowBounds"),h=(0,ye.s6)("router"),f="mobile"===(0,ye.s6)("responsiveVersion"),p=(0,ye.s6)("mobileTimelineDotHover"),m=(0,ye.s6)("setMobileTimelineDotHover"),g=(0,ye.s6)("timelineBubbleHoverData"),v=(0,lt.Z)(g),y=(0,lt.Z)(p),_=te().camera,b=function(){var e;null===(e=l.current)||void 0===e||e.kill();var r=n.current.material.color,o=ve.p8.timeline();o.to(t.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"},0).to(i.current.scale,{duration:.4,x:1,y:1,ease:"power2.out",onUpdate:function(){return i.current.updateMatrix()}},0).to(r,{duration:.4,r:a.base.r,g:a.base.g,b:a.base.b,ease:"power2.out"},0),l.current=o},x=function(e){if("timeline"===u){e.stopPropagation(),function(){var e;null===(e=l.current)||void 0===e||e.kill();var r=n.current.material.color,s=ve.p8.timeline();s.to(t.current.scale,{duration:.4,x:o,y:o,ease:"power2.out"},0).to(i.current.scale,{duration:.4,x:1.1,y:1.1,ease:"power2.out",onUpdate:function(){return i.current.updateMatrix()}},0).to(r,{duration:.4,r:a.hover.r,g:a.hover.g,b:a.hover.b,ease:"power2.out"},0),l.current=s}(),n.current.getWorldPosition(ut),ut.project(_);var r=ut.x*d.width*.5+.5*d.width,h=-ut.y*d.height*.5+.5*d.height;c({data:s,position:{x:r,y:h}})}};return(0,Ue.bt)((function(){var e,t=!1===!!g||y===s.slug,n=(null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.slug)===s.slug||y===s.slug;f&&t&&n&&b()}),[g,p]),{onPointerEnter:x,onPointerLeave:function(e){e.stopPropagation(),b(),c(!1),m(!1)},onClick:function(e){"timeline"===u&&(!f&&h.push("/content/".concat(s.slug)),p!==s.slug&&f?(x(e),m(s.slug)):p===s.slug&&f&&(m(!1),h.push("/content/".concat(s.slug))))}}}function dt(e){var t=e.strokeRef,n=e.imageRef,i=e.groupRef,o=e.wrapperRef,a=(0,ye.rm)(),s=a.currentTransition,l=a.refTransitionTimeline;return(0,r.useEffect)((function(){"globe=>timeline:end"===s?(t.current.material.opacity=0,n.current.material.opacity=0,i.current.scale.set(.2,.2,1),o.current.visible=!0,ve.p8.timeline({delay:.3*Math.random()}).to(t.current.material,{duration:1.1,opacity:1,ease:"power1.easeIn"},0).to(n.current.material,{duration:1.1,opacity:1,ease:"power1.easeIn"},0).to(i.current.scale,{duration:.86,x:1,y:1,ease:"back.out(3)"},0)):"timeline=>globe:start"!==s&&"timeline=>solution:start"!==s||l.current.add(function(){var e=ve.p8.timeline({onComplete:function(){o.current.visible=!1}});return t.current.material.opacity=1,n.current.material.opacity=1,e.to(t.current.material,{duration:.7,opacity:0,ease:"power1.easeIn"},.3).to(n.current.material,{duration:.7,opacity:0,ease:"power1.easeIn"},.3),e}(),0)}),[s]),!1}var ht=n(82064),ft=.39,pt=.28,mt=1.15,gt=1.4,vt={default:{top:.4,bottom:-.7},future:{top:.95,bottom:-.55}},yt={default:{top:0,bottom:0},future:{top:-1,bottom:1}},_t={default:{top:6579300,bottom:6579300},future:{top:ot.habitat,bottom:14311739}},bt=(new Date).getFullYear(),xt=r.memo((function(e){var t=e.data,n=ht.zoomPriorityLevels,i=t.timelineConfig,o=t.yearString>bt,a="top"===i.position,s=a||o,u=null!==t&&void 0!==t&&t.image?t.sys.id:"missingDot",c=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)(),f=(0,r.useRef)(),p=(0,Ae.W)(u),m=(0,Ae.W)("timelineDotMask"),g=(0,Ae.W)("timelineDotStroke"),v=(0,ye.mv)("refValues").timeline,y=(0,ye.mv)("defaultViewportBounds"),_=(0,ye.mv)("isRafActive"),b="mobile"===(0,ye.s6)("responsiveVersion"),x=s?mt:gt,w=s?ft:pt,S=t.timelineConfig.normalizedProgress,D=n[i.zoomPriority-1],A=(0,r.useMemo)((function(){return 1*Math.random()-.5}),[]),E=Math.floor(100*(A+.5)),M=(0,r.useMemo)((function(){return{current:new l.Color(6579300),base:new l.Color(6579300),hover:new l.Color(_t[o?"future":"default"][a?"top":"bottom"])}}),[]),C=ct({groupRef:h,strokeRef:c,imageRef:d,hoverScale:x,colors:M,data:t}),T=C.onPointerEnter,P=C.onPointerLeave,R=C.onClick;return dt({strokeRef:c,imageRef:d,groupRef:h,wrapperRef:f}),(0,Ue.bt)((function(){if(b){var e=-(1-S)*v.mobile.height;f.current.scale.set(.4,.4,1),f.current.position.y=e,f.current.position.x=yt[o?"future":"default"][a?"top":"bottom"]*(.38*v.mobile.width)}else f.current.position.y=vt[o?"future":"default"][a?"top":"bottom"],f.current.position.z=A}),[b,y]),ne((function(){if(_)if(b)f.current.scale.set(.4,.4,1);else{var e=(1-l.MathUtils.smoothstep(v.selection.smooth,D[0],D[1]))*w*l.MathUtils.lerp(1,.8,v.selection.smooth),t=S*v.width.smooth-.5*v.width.smooth;f.current.position.x=t,f.current.scale.set(e,e,1)}}),10),(0,be.jsx)("group",{ref:f,visible:!1,children:(0,be.jsxs)("group",{ref:h,children:[(0,be.jsxs)("mesh",{ref:c,scale:[1.3,1.3,1.3],matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},renderOrder:E+1,onPointerEnter:T,onPointerLeave:P,onClick:R,children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{map:g,color:M.current,alphaMap:g,alphaTest:.05,transparent:!0,opacity:1})]}),(0,be.jsxs)("mesh",{matrixAutoUpdate:!1,ref:d,onUpdate:function(e){return e.updateMatrix()},renderOrder:E+2,children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{map:p,alphaMap:m,alphaTest:.05,transparent:!0})]})]})})})),wt=new l.Vector3;function St(e){var t=e.imageRef,n=e.groupRef,i=e.wrapperRef,o=(0,ye.rm)(),a=o.currentTransition,s=o.refTransitionTimeline;return(0,r.useEffect)((function(){"globe=>timeline:end"===a?(t.current.material.opacity=0,n.current.scale.set(.2,.2,1),i.current.visible=!0,ve.p8.timeline({delay:.3*Math.random()}).to(t.current.material,{duration:1.1,opacity:1,ease:"power1.easeIn"},0).to(n.current.scale,{duration:.86,x:1,y:1,ease:"back.out(3)"},0)):"timeline=>globe:start"!==a&&"timeline=>solution:start"!==a||s.current.add((t.current.material.opacity=1,void ve.p8.timeline({onComplete:function(){i.current.visible=!1}}).to(t.current.material,{duration:.7,opacity:0,ease:"power1.easeIn"},.3)),0)}),[a]),!1}var Dt={default:{top:1.5,bottom:1.5},future:{top:1.45,bottom:-.05}},At={default:{top:16773546,bottom:16773546},future:{top:ot.habitat,bottom:14311739}},Et=(new Date).getFullYear(),Mt=r.memo((function(e){var t=e.data,n=ht.zoomPriorityLevels,i=t.timelineConfig,o=t.yearString>Et,a="top"===i.position,s=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,Ae.W)("statisticIcon"),h=(0,r.useMemo)((function(){return{current:new l.Color(16773546),base:new l.Color(16773546),hover:new l.Color(At[o?"future":"default"][a?"top":"bottom"])}}),[]),f=(0,ye.mv)("refValues").timeline,p=(0,ye.mv)("isRafActive"),m=Dt[o?"future":"default"][a?"top":"bottom"],g=n[i.zoomPriority-1],v=function(e){var t=e.imageRef,n=e.groupRef,r=e.colors,i=e.hoverScale,o=e.data,a=(0,ye.mv)("currentView"),s=(0,ye.s6)("setTimelineStatisticHoverData"),l=(0,ye.s6)("windowBounds"),u=te().camera;return{onPointerEnter:function(e){if("timeline"===a){e.stopPropagation();var c=t.current.material.color;ve.p8.to(n.current.scale,{duration:.4,x:i,y:i,ease:"power2.out"}),ve.p8.to(c,{duration:.4,r:r.hover.r,g:r.hover.g,b:r.hover.b,ease:"power2.out"}),n.current.getWorldPosition(wt),wt.project(u);var d=wt.x*l.width*.5+.5*l.width,h=-wt.y*l.height*.5+.5*l.height;s({data:o,position:{x:d,y:h}})}},onPointerLeave:function(e){e.stopPropagation();var i=t.current.material.color;ve.p8.to(n.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"}),ve.p8.to(i,{duration:.4,r:r.base.r,g:r.base.g,b:r.base.b,ease:"power2.out"}),s(!1)}}}({imageRef:c,groupRef:u,colors:h,hoverScale:1.2,data:t}),y=v.onPointerEnter,_=v.onPointerLeave;return St({imageRef:c,groupRef:u,wrapperRef:s}),ne((function(){if(p){var e=.2*(1-l.MathUtils.smoothstep(f.selection.smooth,g[0],g[1]))*l.MathUtils.lerp(1,.8,f.selection.smooth),n=t.timelineConfig.normalizedProgress*f.width.smooth-.5*f.width.smooth;s.current.position.x=n,s.current.scale.set(e,e,1)}}),10),(0,be.jsx)("group",{ref:s,"position-y":m,visible:!1,children:(0,be.jsx)("group",{ref:u,onPointerEnter:y,onPointerLeave:_,children:(0,be.jsxs)("mesh",{matrixAutoUpdate:!1,ref:c,onUpdate:function(e){return e.updateMatrix()},renderOrder:2,children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{color:h.current,map:d,transparent:!0})]})})})}));n(83454);function Ct(){var e,t=0,n=[],r=0,i=0;var o=h((function(e){i||s(1,e)})),a=h((function(e){i||s(-1,e)}));function s(n,r){i++;var o=0;try{r===m&&f();var a=n>0&&d(r);a?a.call(r,h((function(e){o++,s(1,e)})),h((function(e){o++,s(-1,e)}))):(t=n,e=r,l())}catch(u){t||o||s(-1,u)}}function l(){r||(setTimeout(u,0),r=1)}function u(){var e=n;r=0,n=[],e.forEach(c)}function c(e){e()}function d(e){var t=e&&(p(e)||"object"===typeof e)&&e.then;return p(t)&&t}function h(e){var t=0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];t++||e.apply(this,n)}}function f(){throw new TypeError("Chaining cycle detected")}var p=function(e){return"function"===typeof e},m={then:function(r,i){var o=Ct();return n.push((function(){var n=t>0?r:i;if(p(n))try{var a=n(e);a===o&&f();var s=d(a);s?s.call(a,o.resolve,o.reject):o.resolve(a)}catch(l){o.reject(l)}else o[t>0?"resolve":"reject"](e)})),t&&l(),o},resolve:o,reject:a};return m}function Tt(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{then:n.then.bind(n),resolve:e,reject:t}}Ct.all=Tt.all=function(e){var t=0,n=[],r=Pt();return 0===e.length?r.resolve([]):e.forEach((function(i,o){var a=Pt();a.resolve(i),a.then((function(i){t++,n[o]=i,t===e.length&&r.resolve(n)}),r.reject)})),r};var Pt="function"===typeof Promise?Tt:Ct;function Rt(){var e=Object.create(null);function t(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var u=r.getTransferables;if(void 0===u&&(u=null),!e[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+a+">.init",l),u&&(u=n("<"+a+">.getTransferables",u));var c=null;"function"===typeof l?c=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:c,getTransferables:u},i(c)}catch(d){d&&d.noLog||console.error(d),i(d)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&t(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"===typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"===typeof a.then?a.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(a)}catch(l){n(l)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(l){console.error(l),n(l)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:i,success:!1,error:s.stack})}}))}var kt=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return kt=function(){return e},e},Ot=0,Lt=0,Ft=!1,It=Object.create(null),Nt=Object.create(null),Bt=Object.create(null);function jt(e){if((!e||"function"!==typeof e.init)&&!Ft)throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!kt())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"===typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Pt.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++Ot,a=e.name||o,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=Ut(i,"registerModule",l.workerModuleData);var n=function(){s=null,Nt[i].delete(n)};(Nt[i]||(Nt[i]=new Set)).add(n)}return s.then((function(t){if(t.isCallable)return Ut(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(Ft=!0,e=jt({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+zt(e)+"\n)}"}),Ft=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:zt(n),getTransferables:r&&zt(r)},l}function zt(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Ut(e,t,n){var r=Pt(),i=++Lt;return Bt[i]=function(e){e.success?r.resolve(e.result):r.reject(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=It[e];if(!t){var n=zt(Rt);(t=It[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=Bt[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete Bt[n],r(t)}}return t}(e).postMessage({messageId:i,action:t,data:n}),r}var Ht=jt({name:"Thenable",dependencies:[Pt],init:function(e){return e}});function Gt(){var e=function(e){function t(e,t,n,r,i,o,a,s){var l=1-a;s.x=l*l*e+2*l*a*n+a*a*i,s.y=l*l*t+2*l*a*r+a*a*o}function n(e,t,n,r,i,o,a,s,l,u){var c=1-l;u.x=c*c*c*e+3*c*c*l*n+3*c*l*l*i+l*l*l*a,u.y=c*c*c*t+3*c*c*l*r+3*c*l*l*o+l*l*l*s}function r(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":l[0]===o&&l[1]===a||t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function i(e,i,o){void 0===o&&(o=16);var a={x:0,y:0};r(e,(function(e,r,s,l,u,c,d,h,f){switch(e){case"L":i(r,s,l,u);break;case"Q":for(var p=r,m=s,g=1;g<o;g++)t(r,s,c,d,l,u,g/(o-1),a),i(p,m,a.x,a.y),p=a.x,m=a.y;break;case"C":for(var v=r,y=s,_=1;_<o;_++)n(r,s,c,d,h,f,l,u,_/(o-1),a),i(v,y,a.x,a.y),v=a.x,y=a.y}}))}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var n=e.getContext?e.getContext("webgl",s):e,r=a.get(n);if(!r){var i="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},l={},u={},c=-1,d=[];function h(e){var t=o[e];if(!t&&!(t=o[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function f(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function p(e,t,r,o){if(!l[e]){var a={},s={},u=n.createProgram();n.attachShader(u,f(t,n.VERTEX_SHADER)),n.attachShader(u,f(r,n.FRAGMENT_SHADER)),n.linkProgram(u),l[e]={program:u,transaction:function(e){n.useProgram(u),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-->0;)r[i]=arguments[i+2];var o=s[t]||(s[t]=n.getUniformLocation(u,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,o,s){var l=a[e];l||(l=a[e]={buf:n.createBuffer(),loc:n.getAttribLocation(u,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,o):h("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),l.data=s)}})}}}l[e].transaction(o)}function m(e,t){c++;try{n.activeTexture(n.TEXTURE0+c);var r=u[e];r||(r=u[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,c)}finally{c--}}function g(e,t,r){var i=n.createFramebuffer();d.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,d[--d.length-1]||null)}}function v(){o={},l={},u={},c=-1,d.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){v(),e.preventDefault()}),!1),a.set(n,r={gl:n,isWebGL2:i,getExtension:h,withProgram:p,withTexture:m,withTextureFramebuffer:g,handleContextLoss:v})}t(r)}function u(e,t,n,r,i,a,s,u){void 0===s&&(s=15),void 0===u&&(u=null),l(e,(function(e){var l=e.gl,c=e.withProgram;(0,e.withTexture)("copy",(function(e,d){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,i,a,0,l.RGBA,l.UNSIGNED_BYTE,t),c("copy",o,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),l.bindFramebuffer(l.FRAMEBUFFER,u||null),l.disable(l.BLEND),l.colorMask(8&s,4&s,2&s,1&s),l.viewport(n,r,i,a),l.scissor(n,r,i,a),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var c=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:u,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;l(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,u(a,s,0,0,r,i)}))}});function d(e,t,n,r,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=r[2]-r[0],u=r[3]-r[1],c=[];i(n,(function(e,t,n,r){c.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),c.sort((function(e,t){return e.maxX-t.maxX}));for(var d=0;d<e;d++)for(var h=0;h<t;h++){var f=g(r[0]+l*(d+.5)/e,r[1]+u*(h+.5)/t),m=Math.pow(1-Math.abs(f)/o,a)/2;f<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[h*e+d]=m}return s;function g(e,t){for(var n=1/0,r=1/0,i=c.length;i--;){var o=c[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=p(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=c.length;r--;){var i=c[r];if(i.maxX<=e)break;i.y1>t!==i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function h(e,t,n,r,i,o,a,s,l,u){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),f(e,t,n,r,i,o,a,null,s,l,u)}function f(e,t,n,r,i,o,a,s,l,c,h){void 0===o&&(o=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0);for(var f=d(e,t,n,r,i,o),p=new Uint8Array(4*f.length),m=0;m<f.length;m++)p[4*m+h]=f[m];u(a,p,l,c,e,t,1<<3-h,s)}function p(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,u=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,c=e-(n+u*a),d=t-(r+u*s);return c*c+d*d}var m=Object.freeze({__proto__:null,generate:d,generateIntoCanvas:h,generateIntoFramebuffer:f}),g=new Float32Array([0,0,2,0,0,2]),v=null,y=!1,_={},b=new WeakMap;function x(e){if(!y&&!A(e))throw new Error("WebGL generation not supported")}function w(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=v)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");a=v=s.getContext("webgl",{depth:!1})}x(a);var u=new Uint8Array(e*t*4);l(a,(function(a){var s=a.gl,l=a.withTexture,c=a.withTextureFramebuffer;l("readable",(function(a,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),c(a,l,(function(a){D(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,u)}))}))}));for(var c=new Uint8Array(e*t),d=0,h=0;d<u.length;d+=4)c[h++]=u[d];return c}function S(e,t,n,r,i,o,a,s,l,u){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),D(e,t,n,r,i,o,a,null,s,l,u)}function D(e,t,n,r,a,s,u,c,d,h,f){void 0===s&&(s=1),void 0===d&&(d=0),void 0===h&&(h=0),void 0===f&&(f=0),x(u);var p=[];i(n,(function(e,t,n,r){p.push(e,t,n,r)})),p=new Float32Array(p),l(u,(function(n){var i=n.gl,l=n.isWebGL2,u=n.getExtension,m=n.withProgram,v=n.withTexture,y=n.withTextureFramebuffer,_=n.handleContextLoss;if(v("rawDistances",(function(n,v){e===n._lastWidth&&t===n._lastHeight||i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n._lastWidth=e,n._lastHeight=t,0,i.RGBA,i.UNSIGNED_BYTE,null),m("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(o){var c=o.setAttribute,d=o.setUniform,h=!l&&u("ANGLE_instanced_arrays"),f=!l&&u("EXT_blend_minmax");c("aUV",2,i.STATIC_DRAW,0,g),c("aLineSegment",4,i.DYNAMIC_DRAW,1,p),d.apply(void 0,["4f","uGlyphBounds"].concat(r)),d("1f","uMaxDistance",a),d("1f","uExponent",s),y(n,v,(function(n){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,e,t),i.scissor(0,0,e,t),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,l?i.MAX:f.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),l?i.drawArraysInstanced(i.TRIANGLES,0,3,p.length/4):h.drawArraysInstancedANGLE(i.TRIANGLES,0,3,p.length/4)}))})),m("post",o,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(n){n.setAttribute("aUV",2,i.STATIC_DRAW,0,g),n.setUniform("1i","tex",v),i.bindFramebuffer(i.FRAMEBUFFER,c),i.disable(i.BLEND),i.colorMask(0===f,1===f,2===f,3===f),i.viewport(d,h,e,t),i.scissor(d,h,e,t),i.drawArrays(i.TRIANGLES,0,3)}))})),i.isContextLost())throw _(),new Error("webgl context lost")}))}function A(e){var t=e&&e!==v?e.canvas||e:_,n=b.get(t);if(void 0===n){y=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=w(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})),n||(r="bad trial run results",console.info(i,o))}catch(a){n=!1,r=a.message}r&&console.warn("WebGL SDF generation not supported:",r),y=!1,b.set(t,n)}return n}var E=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:S,generateIntoFramebuffer:D,isSupported:A});return e.forEachPathCommand=r,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return w.apply(E,arguments)}catch(a){return console.info("WebGL SDF generation failed, falling back to JS",a),d.apply(m,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,u){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0);try{return S.apply(E,arguments)}catch(c){return console.info("WebGL SDF generation failed, falling back to JS",c),h.apply(m,arguments)}},e.javascript=m,e.pathToLineSegments=i,e.webgl=E,e.webglUtils=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}var Vt=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,u=null;function c(e){return function(){if(!u){u=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,u.set(r+=o,n[e]);for(var s=0;s<a;s++)u.set(++r,n[e])}))}};for(var r in t)e(r)}}(),u.get(e.codePointAt(0))||n.L}var d,h,f,p="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",m="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function g(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),u=l[0],c=l[1];u=String.fromCodePoint(r+=parseInt(u,36)),c=String.fromCodePoint(r+=parseInt(c,36)),i.set(u,c),t&&o.set(c,u)}})),{map:i,reverseMap:o}}function v(){if(!d){var e=g(p,!0),t=e.map,n=e.reverseMap;d=t,h=n,f=g(m,!1).map}}function y(e){return v(),d.get(e)||null}function _(e){return v(),h.get(e)||null}function b(e){return v(),f.get(e)||null}var x=n.L,w=n.R,S=n.EN,D=n.ES,A=n.ET,E=n.AN,M=n.CS,C=n.B,T=n.S,P=n.ON,R=n.BN,k=n.NSM,O=n.AL,L=n.LRO,F=n.RLO,I=n.LRE,N=n.RLE,B=n.PDF,j=n.LRI,z=n.RLI,U=n.FSI,H=n.PDI;var G;function V(e){return function(){if(!G){var e=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),G=t}}(),G.get(e)||null}function W(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var u=t.levels.slice(a,s+1),d=s;d>=a&&c(e[d])&l;d--)u[d]=i.level;for(var h=i.level,f=1/0,p=0;p<u.length;p++){var m=u[p];m>h&&(h=m),m<f&&(f=1|m)}for(var g=h;g>=f;g--)for(var v=0;v<u.length;v++)if(u[v]>=g){for(var y=v;v+1<u.length&&u[v+1]>=g;)v++;v>y&&o.push([y+n,v+n])}}})),o}function Z(e,t,n,r){for(var i=W(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=_,e.getBidiCharType=c,e.getBidiCharTypeName=function(e){return r[c(e)]},e.getCanonicalBracket=b,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=c(e[r]);var u=new Map;function d(e,t){var r=n[e];n[e]=t,u.set(r,u.get(r)-1),r&a&&u.set(a,u.get(a)-1),u.set(t,(u.get(t)||0)+1),t&a&&u.set(a,(u.get(a)||0)+1)}for(var h=new Uint8Array(e.length),f=new Map,p=[],m=null,g=0;g<e.length;g++)m||p.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Ut(g,!1)}),n[g]&C&&(m.end=g,m=null);for(var v=N|I|F|L|i|H|B|C,G=function(e){return e+(1&e?1:2)},V=function(e){return e+(1&e?2:1)},W=0;W<p.length;W++){var Z=[{_level:(m=p[W]).level,_override:0,_isolate:0}],$=void 0,q=0,Y=0,K=0;u.clear();for(var X=m.start;X<=m.end;X++){var Q=n[X];if($=Z[Z.length-1],u.set(Q,(u.get(Q)||0)+1),Q&a&&u.set(a,(u.get(a)||0)+1),Q&v)if(Q&(N|I)){h[X]=$._level;var J=(Q===N?V:G)($._level);J<=125&&!q&&!Y?Z.push({_level:J,_override:0,_isolate:0}):q||Y++}else if(Q&(F|L)){h[X]=$._level;var ee=(Q===F?V:G)($._level);ee<=125&&!q&&!Y?Z.push({_level:ee,_override:Q&F?w:x,_isolate:0}):q||Y++}else if(Q&i){Q&U&&(Q=1===Ut(X+1,!0)?z:j),h[X]=$._level,$._override&&d(X,$._override);var te=(Q===z?V:G)($._level);te<=125&&0===q&&0===Y?(K++,Z.push({_level:te,_override:0,_isolate:1,_isolInitIndex:X})):q++}else if(Q&H){if(q>0)q--;else if(K>0){for(Y=0;!Z[Z.length-1]._isolate;)Z.pop();var ne=Z[Z.length-1]._isolInitIndex;null!=ne&&(f.set(ne,X),f.set(X,ne)),Z.pop(),K--}$=Z[Z.length-1],h[X]=$._level,$._override&&d(X,$._override)}else Q&B?(0===q&&(Y>0?Y--:!$._isolate&&Z.length>1&&(Z.pop(),$=Z[Z.length-1])),h[X]=$._level):Q&C&&(h[X]=m.level);else h[X]=$._level,$._override&&Q!==R&&d(X,$._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var ae=n[oe];if(!(ae&s)){var se=h[oe],le=ae&i,ue=ae===H;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:ue,_endsWithIsolInit:le})}}for(var ce=[],de=0;de<re.length;de++){var he=re[de];if(!he._startsWithPDI||he._startsWithPDI&&!f.has(he._start)){for(var fe=[ie=he],pe=void 0;ie&&ie._endsWithIsolInit&&null!=(pe=f.get(ie._end));)for(var me=de+1;me<re.length;me++)if(re[me]._start===pe){fe.push(ie=re[me]);break}for(var ge=[],ve=0;ve<fe.length;ve++)for(var ye=fe[ve],_e=ye._start;_e<=ye._end;_e++)ge.push(_e);for(var be=h[ge[0]],xe=m.level,we=ge[0]-1;we>=0;we--)if(!(n[we]&s)){xe=h[we];break}var Se=ge[ge.length-1],De=h[Se],Ae=m.level;if(!(n[Se]&i))for(var Ee=Se+1;Ee<=m.end;Ee++)if(!(n[Ee]&s)){Ae=h[Ee];break}ce.push({_seqIndices:ge,_sosType:Math.max(xe,be)%2?w:x,_eosType:Math.max(Ae,De)%2?w:x})}}for(var Me=0;Me<ce.length;Me++){var Ce=ce[Me],Te=Ce._seqIndices,Pe=Ce._sosType,Re=Ce._eosType;if(u.get(k))for(var ke=0;ke<Te.length;ke++){var Oe=Te[ke];if(n[Oe]&k){for(var Le=Pe,Fe=ke-1;Fe>=0;Fe--)if(!(n[Te[Fe]]&s)){Le=n[Te[Fe]];break}d(Oe,Le&(i|H)?P:Le)}}if(u.get(S))for(var Ie=0;Ie<Te.length;Ie++){var Ne=Te[Ie];if(n[Ne]&S)for(var Be=Ie-1;Be>=-1;Be--){var je=-1===Be?Pe:n[Te[Be]];if(je&o){je===O&&d(Ne,E);break}}}if(u.get(O))for(var ze=0;ze<Te.length;ze++){var Ue=Te[ze];n[Ue]&O&&d(Ue,w)}if(u.get(D)||u.get(M))for(var He=1;He<Te.length-1;He++){var Ge=Te[He];if(n[Ge]&(D|M)){for(var Ve=0,We=0,Ze=He-1;Ze>=0&&(Ve=n[Te[Ze]])&s;Ze--);for(var $e=He+1;$e<Te.length&&(We=n[Te[$e]])&s;$e++);Ve===We&&(n[Ge]===D?Ve===S:Ve&(S|E))&&d(Ge,Ve)}}if(u.get(S))for(var qe=0;qe<Te.length;qe++){var Ye=Te[qe];if(n[Ye]&S){for(var Ke=qe-1;Ke>=0&&n[Te[Ke]]&(A|s);Ke--)d(Te[Ke],S);for(var Xe=qe+1;Xe<Te.length&&n[Te[Xe]]&(A|s);Xe++)d(Te[Xe],S)}}if(u.get(A)||u.get(D)||u.get(M))for(var Qe=0;Qe<Te.length;Qe++){var Je=Te[Qe];if(n[Je]&(A|D|M)){d(Je,P);for(var et=Qe-1;et>=0&&n[Te[et]]&s;et--)d(Te[et],P);for(var tt=Qe+1;tt<Te.length&&n[Te[tt]]&s;tt++)d(Te[tt],P)}}if(u.get(S))for(var nt=0,rt=Pe;nt<Te.length;nt++){var it=Te[nt],ot=n[it];ot&S?rt===x&&d(it,x):ot&o&&(rt=ot)}if(u.get(a)){for(var at=w|S|E,st=at|x,lt=[],ut=[],ct=0;ct<Te.length;ct++)if(n[Te[ct]]&a){var dt=e[Te[ct]],ht=void 0;if(null!==y(dt)){if(!(ut.length<63))break;ut.push({char:dt,seqIndex:ct})}else if(null!==(ht=_(dt)))for(var ft=ut.length-1;ft>=0;ft--){var pt=ut[ft].char;if(pt===ht||pt===_(b(dt))||y(b(pt))===dt){lt.push([ut[ft].seqIndex,ct]),ut.length=ft;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var gt=lt[mt],vt=gt[0],yt=gt[1],_t=!1,bt=0,xt=vt+1;xt<yt;xt++){var wt=Te[xt];if(n[wt]&st){_t=!0;var St=n[wt]&at?w:x;if(St===Gt(wt)){bt=St;break}}}if(_t&&!bt){bt=Pe;for(var Dt=vt-1;Dt>=0;Dt--){var At=Te[Dt];if(n[At]&st){var Et=n[At]&at?w:x;bt=Et!==Gt(At)?Et:Gt(At);break}}}if(bt){if(n[Te[vt]]=n[Te[yt]]=bt,bt!==Gt(Te[vt]))for(var Mt=vt+1;Mt<Te.length;Mt++)if(!(n[Te[Mt]]&s)){c(e[Te[Mt]])&k&&(n[Te[Mt]]=bt);break}if(bt!==Gt(Te[yt]))for(var Ct=yt+1;Ct<Te.length;Ct++)if(!(n[Te[Ct]]&s)){c(e[Te[Ct]])&k&&(n[Te[Ct]]=bt);break}}}for(var Tt=0;Tt<Te.length;Tt++)if(n[Te[Tt]]&a){for(var Pt=Tt,Rt=Tt,kt=Pe,Ot=Tt-1;Ot>=0;Ot--){if(!(n[Te[Ot]]&s)){kt=n[Te[Ot]]&at?w:x;break}Pt=Ot}for(var Lt=Re,Ft=Tt+1;Ft<Te.length;Ft++){if(!(n[Te[Ft]]&(a|s))){Lt=n[Te[Ft]]&at?w:x;break}Rt=Ft}for(var It=Pt;It<=Rt;It++)n[Te[It]]=kt===Lt?kt:Gt(Te[It]);Tt=Rt}}}for(var Nt=m.start;Nt<=m.end;Nt++){var Bt=h[Nt],jt=n[Nt];if(1&Bt?jt&(x|S|E)&&h[Nt]++:jt&w?h[Nt]++:jt&(E|S)&&(h[Nt]+=2),jt&s&&(h[Nt]=0===Nt?m.level:h[Nt-1]),Nt===m.end||c(e[Nt])&(T|C))for(var zt=Nt;zt>=0&&c(e[zt])&l;zt--)h[zt]=m.level}}return{levels:h,paragraphs:p};function Ut(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(w|O))return 1;if(a&(C|x)||r&&a===H)return 0;if(a&i){var s=Ht(o);o=-1===s?e.length:s}}return 0}function Ht(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&C)break;if(a&H){if(0===--r)return o}else a&i&&r++}return-1}function Gt(e){return 1&h[e]?w:x}},e.getMirroredCharacter=V,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=V(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=W,e.getReorderedIndices=Z,e.getReorderedString=function(e,t,n,r){var i=Z(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?V(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e};const Wt=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Zt(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=l.ShaderChunk[t];return n?Zt(n):e}))}const $t=[];for(let wl=0;wl<256;wl++)$t[wl]=(wl<16?"0":"")+wl.toString(16);const qt=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e},Yt=Date.now(),Kt=new WeakMap,Xt=new Map;let Qt=1e10;function Jt(e,t){const n=function(e){const t=JSON.stringify(e,tn);let n=rn.get(t);null==n&&rn.set(t,n=++nn);return n}(t);let r=Kt.get(e);if(r||Kt.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(r){e.onBeforeCompile.call(this,r);const o=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let a=Xt[o];if(!a){const e=function({vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:s,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:c,fragmentColorTransform:d,customRewriter:h,timeUniform:f}=n;i=i||"",o=o||"",a=a||"",l=l||"",u=u||"",c=c||"",(s||h)&&(e=Zt(e));(d||h)&&(t=Zt(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(h){let n=h({vertexShader:e,fragmentShader:t});e=n.vertexShader,t=n.fragmentShader}if(d){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),c=`${d}\n${e.join("\n")}\n${c}`}if(f){const e=`\nuniform float ${f};\n`;i=e+i,l=e+l}s&&(i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${s}\n}\n`,o=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${o}\n`,e=(e=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`)));return e=en(e,r,i,o,a),t=en(t,r,l,u,c),{vertexShader:e,fragmentShader:t}}(r,t,n);a=Xt[o]=e}r.vertexShader=a.vertexShader,r.fragmentShader=a.fragmentShader,qt(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-Yt}}),this[i]&&this[i](r)},a=function(){return s(t.chained?e:e.clone())},s=function(r){const i=Object.create(r,u);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:Qt++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return($t[255&e]+$t[e>>8&255]+$t[e>>16&255]+$t[e>>24&255]+"-"+$t[255&t]+$t[t>>8&255]+"-"+$t[t>>16&15|64]+$t[t>>24&255]+"-"+$t[63&n|128]+$t[n>>8&255]+"-"+$t[n>>16&255]+$t[n>>24&255]+$t[255&r]+$t[r>>8&255]+$t[r>>16&255]+$t[r>>24&255]).toUpperCase()}(),i.uniforms=qt({},r.uniforms,t.uniforms),i.defines=qt({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=qt({},r.extensions,t.extensions),i._listeners=void 0,i},u={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>o,set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(qt(this.extensions,t.extensions),qt(this.defines,t.defines),qt(this.uniforms,l.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=Jt(e.isDerivedMaterial?e.getDepthMaterial():new l.MeshDepthMaterial({depthPacking:l.RGBADepthPacking}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=Jt(e.isDerivedMaterial?e.getDistanceMaterial():new l.MeshDistanceMaterial,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=a,new a}function en(e,t,n,r,i){return(r||i||n)&&(e=e.replace(Wt,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function tn(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}let nn=0;const rn=new Map;l.DoubleSide;const on=()=>(self.performance||Date).now(),an=Gt();let sn;const ln=function(){const e=[];let t=0;function n(){const r=on();for(;e.length&&on()-r<5;)e.shift()();t=e.length?setTimeout(n,0):0}return(...r)=>{const i=Pt();return e.push((()=>{const e=on();try{an.webgl.generateIntoCanvas(...r),i.resolve({timing:on()-e})}catch(t){i.reject(t)}})),t||(t=setTimeout(n,0)),i}}(),un=function(){const e={};let t=0;return function(n,r,i,o,a,s,l,u,c,d){const h="TroikaTextSDFGenerator_JS_"+t++%4;let f=e[h];return f||(f=e[h]={workerModule:jt({name:h,workerId:h,dependencies:[Gt,on],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,r,i,o,a,s).then((({textureData:e,timing:t})=>{const i=on(),o=new Uint8Array(4*e.length);for(let n=0;n<e.length;n++)o[4*n+d]=e[n];return an.webglUtils.renderImageData(l,o,u,c,n,r,1<<3-d),t+=on()-i,0===--f.requests&&(f.idleTimer=setTimeout((()=>{!function(e){Nt[e]&&Nt[e].forEach((function(e){e()})),It[e]&&(It[e].terminate(),delete It[e])}(h)}),2e3)),{timing:t}}))}}();const cn=an.webglUtils.resizeWebGLCanvasWithoutClearing;const dn=jt({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(r,i);i+=4,a.push(t._readFont(r,l))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},u=0;u<o;u++){var c=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var d=r.readUint(e,n);n+=4;var h=r.readUint(e,n);n+=4,l[c]={offset:d,length:h}}for(u=0;u<a.length;u++){var f=a[u];l[f]&&(s[f.trim()]=t[f.trim()].parse(e,l[f].offset,l[f].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var l=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var u=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,l==n)return u}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},l=n;a.readFixed(e,n),n+=4;var u=a.readUshort(e,n);n+=2;var c=a.readUshort(e,n);n+=2;var d=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+u),s.featureList=t._lctf.readFeatureList(e,l+c),s.lookupList=t._lctf.readLookupList(e,l+d,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var u=i.readUshort(e,n);n+=2;var c=t._lctf.readLookupTable(e,o+u,r);a.push(c)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=a.ltype,u=0;u<s;u++){var c=i.readUshort(e,n);n+=2;var d=r(e,l,o+c,a);a.tabs.push(d)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(a+l),i.push(a+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var u=r.readUshort(e,n);for(n+=2,l=0;l<u;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2;var c=t._lctf.readFeatureTable(e,i+u);c.tag=l.trim(),o.push(c)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+u)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,o.default=t._lctf.readLangSysTable(e,i+a);var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var u=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[u.trim()]=t._lctf.readLangSysTable(e,i+c)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var u=[];for(s=0;s<l.length-1;s++)u.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var c=u[0],d=[];n=t.CFF.readIndex(e,n,d);var h=[];for(s=0;s<d.length-1;s++)h.push(i.readASCII(e,n+d[s],d[s+1]-d[s]));if(n+=d[d.length-1],t.CFF.readSubrs(e,n,c),c.CharStrings){n=c.CharStrings,d=[],n=t.CFF.readIndex(e,n,d);var f=[];for(s=0;s<d.length-1;s++)f.push(i.readBytes(e,n+d[s],d[s+1]-d[s]));c.CharStrings=f}if(c.ROS){n=c.FDArray;var p=[];for(n=t.CFF.readIndex(e,n,p),c.FDArray=[],s=0;s<p.length-1;s++){var m=t.CFF.readDict(e,n+p[s],n+p[s+1]);t.CFF._readFDict(e,m,h),c.FDArray.push(m)}n+=p[p.length-1],n=c.FDSelect,c.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var v=i.readUshort(e,n);for(n+=2,s=0;s<v+1;s++)c.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return c.Encoding&&(c.Encoding=t.CFF.readEncoding(e,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=t.CFF.readCharset(e,c.charset,c.CharStrings.length)),t.CFF._readFDict(e,c,h),c},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var u=0;for(1==a?(u=e[n],n++):(u=i.readUshort(e,n),n+=2),s=0;s<=u;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,u=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(u=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(u=o-139,s=1),247<=o&&o<=250&&(u=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(u=256*-(o-251)-a-108,s=2),255==o&&(u=i.readInt(e,n+1)/65535,s=5),r.val=null!=u?u:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var u=1,c=null,d=null;s<=20&&(c=s,u=1),12==s&&(c=100*s+l,u=2),19!=s&&20!=s||(c=s,u=2),21<=s&&s<=27&&(c=s,u=1),28==s&&(d=o.readShort(e,n+1),u=3),29<=s&&s<=31&&(c=s,u=1),32<=s&&s<=246&&(d=s-139,u=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(d=256*-(s-251)-l-108,u=2),255==s&&(d=o.readInt(e,n+1)/65535,u=5),a.push(null!=d?d:"o"+c),n+=u}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var u=1,c=null,d=null;if(28==s&&(d=i.readShort(e,n+1),u=3),29==s&&(d=i.readInt(e,n+1),u=5),32<=s&&s<=246&&(d=s-139,u=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(d=256*-(s-251)-l-108,u=2),255==s)throw d=i.readInt(e,n+1)/65535,u=5,"unknown number";if(30==s){var h=[];for(u=1;;){var f=e[n+u];u++;var p=f>>4,m=15&f;if(15!=p&&h.push(p),15!=m&&h.push(m),15==m)break}for(var g="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<h.length;y++)g+=v[h[y]];d=parseFloat(g)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2)),null!=c?(o[c]=1==a.length?a[0]:a,a=[]):a.push(d),n+=u}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var u=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var d=i.readUint(e,n);n+=4;var h="p"+u+"e"+c,f=s.indexOf(d);if(-1==f){var p;f=o.tables.length,s.push(d);var m=i.readUshort(e,d);0==m?p=t.cmap.parse0(e,d):4==m?p=t.cmap.parse4(e,d):6==m?p=t.cmap.parse6(e,d):12==m?p=t.cmap.parse12(e,d):console.debug("unknown format: "+m,u,c,d),o.tables.push(p)}if(null!=o[h])throw"multiple tables for one platform+encoding";o[h]=f}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var u=0;u<l;u++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=r.readUint(e,s+0),u=r.readUint(e,s+4),c=r.readUint(e,s+8);i.groups.push([l,u,c])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;a.instructions=r.readBytes(i,o,l),o+=l;var u=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<u;s++){var c=i[o];if(o++,a.flags.push(c),0!=(8&c)){var d=i[o];o++;for(var h=0;h<d;h++)a.flags.push(c),s++}}for(a.xs=[],s=0;s<u;s++){var f=0!=(2&a.flags[s]),p=0!=(16&a.flags[s]);f?(a.xs.push(p?i[o]:-i[o]),o++):p?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<u;s++)f=0!=(4&a.flags[s]),p=0!=(32&a.flags[s]),f?(a.ys.push(p?i[o]:-i[o]),o++):p?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,g=0;for(s=0;s<u;s++)m+=a.xs[s],g+=a.ys[s],a.xs[s]=m,a.ys[s]=g}else{var v;a.parts=[];do{v=r.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=r.readUshort(i,o),o+=2,1&v){var _=r.readShort(i,o);o+=2;var b=r.readShort(i,o);o+=2}else _=r.readInt8(i,o),o++,b=r.readInt8(i,o),o++;2&v?(y.m.tx=_,y.m.ty=b):(y.p1=_,y.p2=b),8&v?(y.m.a=y.m.d=r.readF2dot14(i,o),o+=2):64&v?(y.m.a=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2):128&v&&(y.m.a=r.readF2dot14(i,o),o+=2,y.m.b=r.readF2dot14(i,o),o+=2,y.m.c=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2)}while(32&v);if(256&v){var x=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<x;s++)a.instr.push(i[o]),o++}}return a},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+a)}if(1==n&&1==s.fmt){var u=o.readUshort(e,r);r+=2;var c=t._lctf.numOfOnes(u);0!=u&&(s.pos=t.GPOS.readValueRecord(e,r,u))}else if(2==n&&s.fmt>=1&&s.fmt<=2){u=o.readUshort(e,r),r+=2;var d=o.readUshort(e,r);r+=2,c=t._lctf.numOfOnes(u);var h=t._lctf.numOfOnes(d);if(1==s.fmt){s.pairsets=[];var f=o.readUshort(e,r);r+=2;for(var p=0;p<f;p++){var m=a+o.readUshort(e,r);r+=2;var g=o.readUshort(e,m);m+=2;for(var v=[],y=0;y<g;y++){var _=o.readUshort(e,m);m+=2,0!=u&&(A=t.GPOS.readValueRecord(e,m,u),m+=2*c),0!=d&&(E=t.GPOS.readValueRecord(e,m,d),m+=2*h),v.push({gid2:_,val1:A,val2:E})}s.pairsets.push(v)}}if(2==s.fmt){var b=o.readUshort(e,r);r+=2;var x=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);r+=2;var S=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+b),s.classDef2=t._lctf.readClassDef(e,a+x),s.matrix=[],p=0;p<w;p++){var D=[];for(y=0;y<S;y++){var A=null,E=null;0!=u&&(A=t.GPOS.readValueRecord(e,r,u),r+=2*c),0!=d&&(E=t.GPOS.readValueRecord(e,r,d),r+=2*h),D.push({val1:A,val2:E})}s.matrix.push(D)}}}else{if(9==n&&1==s.fmt){var M=o.readUshort(e,r);r+=2;var C=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=M;else if(i.ltype!=M)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+C)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var u=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,u),r+=2*s.newg.length}}else if(4==n){s.vals=[],u=o.readUshort(e,r),r+=2;for(var c=0;c<u;c++){var d=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+d))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var h=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+h),s.scset=[];var f=o.readUshort(e,r);for(r+=2,c=0;c<f;c++){var p=o.readUshort(e,r);r+=2,s.scset.push(0==p?null:t.GSUB.readSubClassSet(e,a+p))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(c=0;c<3;c++){u=o.readUshort(e,r),r+=2;for(var m=[],g=0;g<u;g++)m.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*g)));r+=2*u,0==c&&(s.backCvg=m),1==c&&(s.inptCvg=m),2==c&&(s.ahedCvg=m)}u=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,u)}}else{if(7==n&&1==s.fmt){var v=o.readUshort(e,r);r+=2;var y=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=v;else if(i.ltype!=v)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+y)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},u=0;u<s;u++){n+=2,r=o.readUshort(e,n),n+=2;var c=o.readUshort(e,n);n+=2;var d=c>>>8;if(0!=(d&=15))throw"unknown kern table format: "+d;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(e,n),n+=4;var u=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var l=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var c=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var d=r.rval[r.rval.length-1];d.glyph2.push(u),d.vals.push(c),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var u=0;u<l;u++)a.push(o.readUshort(e,n+(u<<1))<<1);if(1==s)for(u=0;u<l;u++)a.push(o.readUint(e,n+(u<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=n+=2,c=0;c<a;c++){var d=i.readUshort(e,n);n+=2;var h=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var v,y=l[p],_=u+12*a+g;if(0==d)v=i.readUnicode(e,_,m/2);else if(3==d&&0==h)v=i.readUnicode(e,_,m/2);else if(0==h)v=i.readASCII(e,_,m);else if(1==h)v=i.readUnicode(e,_,m/2);else if(3==h)v=i.readUnicode(e,_,m/2);else{if(1!=d)throw"unknown encoding "+h+", platformID: "+d;v=i.readASCII(e,_,m),console.debug("reading unknown MAC encoding "+h+" as ASCII")}var b="p"+d+","+f.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==y?y:p]=v,o[b]._lang=f}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){s=x;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,l=a==o?i:a+1,u=1&e.flags[a],c=1&e.flags[s],d=1&e.flags[l],h=e.xs[a],f=e.ys[a];if(a==i)if(u){if(!c){t.U.P.moveTo(n,h,f);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else c?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+h)/2,(e.ys[s]+f)/2);u?c&&t.U.P.lineTo(n,h,f):d?t.U.P.qcurveTo(n,h,f,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,h,f,(h+e.xs[l])/2,(f+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var u=o.crds[l],c=o.crds[l+1];r.crds.push(u*s.a+c*s.b+s.tx),r.crds.push(u*s.c+c*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=0,o=!1;if(e.GPOS)for(var a=e.GPOS,s=a.lookupList,l=a.featureList,u=[],c=0;c<l.length;c++){var d=l[c];if("kern"==d.tag){o=!0;for(var h=0;h<d.tab.length;h++)if(!u[d.tab[h]]){u[d.tab[h]]=!0;for(var f=s[d.tab[h]],p=0;p<f.tabs.length;p++)if(null!=f.tabs[p]){var m,g=f.tabs[p];if(!g.coverage||-1!=(m=t._lctf.coverageIndex(g.coverage,n)))if(1==f.ltype);else if(2==f.ltype){var v;if(1==g.fmt){var y=g.pairsets[m];for(c=0;c<y.length;c++)y[c].gid2==r&&(v=y[c])}else if(2==g.fmt){var _=t.U._getGlyphClass(n,g.classDef1),b=t.U._getGlyphClass(r,g.classDef2);v=g.matrix[_][b]}v&&v.val1&&v.val1[2]&&(i+=v.val1[2]),v&&v.val2&&v.val2[0]&&(i+=v.val2[0])}}}}}if(e.kern&&!o){var x=e.kern.glyph1.indexOf(n);if(-1!=x){var w=e.kern.rval[x].glyph2.indexOf(r);-1!=w&&(i+=e.kern.rval[x].vals[w])}}return i},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,l=r.tabs[a];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var u=l.vals[s],c=0;c<u.length;c++){var d=u[c],h=d.chain.length;if(!(h>o)){for(var f=!0,p=0,m=0;m<h;m++){for(;-1==e[n+p+(1+m)];)p++;d.chain[m]!=e[n+p+(1+m)]&&(f=!1)}if(f){for(e[n]=d.nglyph,m=0;m<h+p;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var g=t._lctf.getInterval(l.cDef,e[n]),v=l.cDef[g+2],y=l.scset[v],_=0;_<y.length;_++){var b=y[_],x=b.input;if(!(x.length>o)){for(f=!0,m=0;m<x.length;m++){var w=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==g&&l.cDef[w+2]!=x[m]){f=!1;break}}if(f){var S=b.substLookupRecords;for(c=0;c<S.length;c+=2)S[c],S[c+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var D=l.lookupRec;for(_=0;_<D.length;_+=2){g=D[_];var A=i[D[_+1]];t.U._applySubs(e,n+g,A,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,u=t.U.glyphToPath(e,s),c=0;c<u.crds.length;c+=2)i.crds.push(u.crds[c]+o),i.crds.push(u.crds[c+1]);for(r&&i.cmds.push(r),c=0;c<u.cmds.length;c++)i.cmds.push(u.cmds[c]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,u=n.width,c=n.open,d=0,h=n.x,f=n.y,p=0,m=0,g=0,v=0,y=0,_=0,b=0,x=0,w=0,S=0,D={val:0,size:0};d<e.length;){t.CFF.getCharString(e,d,D);var A=D.val;if(d+=D.size,"o1"==A||"o18"==A)a.length%2!=0&&!l&&(u=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==A||"o23"==A)a.length%2!=0&&!l&&(u=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==A)a.length>1&&!l&&(u=a.shift()+i.nominalWidthX,l=!0),c&&t.U.P.closePath(o),f+=a.pop(),t.U.P.moveTo(o,h,f),c=!0;else if("o5"==A)for(;a.length>0;)h+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,h,f);else if("o6"==A||"o7"==A)for(var E=a.length,M="o6"==A,C=0;C<E;C++){var T=a.shift();M?h+=T:f+=T,M=!M,t.U.P.lineTo(o,h,f)}else if("o8"==A||"o24"==A){E=a.length;for(var P=0;P+6<=E;)p=h+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),h=g+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,m,g,v,h,f),P+=6;"o24"==A&&(h+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,h,f))}else{if("o11"==A)break;if("o1234"==A||"o1235"==A||"o1236"==A||"o1237"==A)"o1234"==A&&(m=f,g=(p=h+a.shift())+a.shift(),S=v=m+a.shift(),_=v,x=f,h=(b=(y=(w=g+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,g,v,w,S),t.U.P.curveTo(o,y,_,b,x,h,f)),"o1235"==A&&(p=h+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),w=g+a.shift(),S=v+a.shift(),y=w+a.shift(),_=S+a.shift(),b=y+a.shift(),x=_+a.shift(),h=b+a.shift(),f=x+a.shift(),a.shift(),t.U.P.curveTo(o,p,m,g,v,w,S),t.U.P.curveTo(o,y,_,b,x,h,f)),"o1236"==A&&(p=h+a.shift(),m=f+a.shift(),g=p+a.shift(),S=v=m+a.shift(),_=v,b=(y=(w=g+a.shift())+a.shift())+a.shift(),x=_+a.shift(),h=b+a.shift(),t.U.P.curveTo(o,p,m,g,v,w,S),t.U.P.curveTo(o,y,_,b,x,h,f)),"o1237"==A&&(p=h+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),w=g+a.shift(),S=v+a.shift(),y=w+a.shift(),_=S+a.shift(),b=y+a.shift(),x=_+a.shift(),Math.abs(b-h)>Math.abs(x-f)?h=b+a.shift():f=x+a.shift(),t.U.P.curveTo(o,p,m,g,v,w,S),t.U.P.curveTo(o,y,_,b,x,h,f));else if("o14"==A){if(a.length>0&&!l&&(u=a.shift()+r.nominalWidthX,l=!0),4==a.length){var R=a.shift(),k=a.shift(),O=a.shift(),L=a.shift(),F=t.CFF.glyphBySE(r,O),I=t.CFF.glyphBySE(r,L);t.U._drawCFF(r.CharStrings[F],n,r,i,o),n.x=R,n.y=k,t.U._drawCFF(r.CharStrings[I],n,r,i,o)}c&&(t.U.P.closePath(o),c=!1)}else if("o19"==A||"o20"==A)a.length%2!=0&&!l&&(u=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,d+=s+7>>3;else if("o21"==A)a.length>2&&!l&&(u=a.shift()+i.nominalWidthX,l=!0),f+=a.pop(),h+=a.pop(),c&&t.U.P.closePath(o),t.U.P.moveTo(o,h,f),c=!0;else if("o22"==A)a.length>1&&!l&&(u=a.shift()+i.nominalWidthX,l=!0),h+=a.pop(),c&&t.U.P.closePath(o),t.U.P.moveTo(o,h,f),c=!0;else if("o25"==A){for(;a.length>6;)h+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,h,f);p=h+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),h=g+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,m,g,v,h,f)}else if("o26"==A)for(a.length%2&&(h+=a.shift());a.length>0;)p=h,m=f+a.shift(),h=g=p+a.shift(),f=(v=m+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,g,v,h,f);else if("o27"==A)for(a.length%2&&(f+=a.shift());a.length>0;)m=f,g=(p=h+a.shift())+a.shift(),v=m+a.shift(),h=g+a.shift(),f=v,t.U.P.curveTo(o,p,m,g,v,h,f);else if("o10"==A||"o29"==A){var N="o10"==A?i:r;if(0==a.length)console.debug("error: empty stack");else{var B=a.pop(),j=N.Subrs[B+N.Bias];n.x=h,n.y=f,n.nStems=s,n.haveWidth=l,n.width=u,n.open=c,t.U._drawCFF(j,n,r,i,o),h=n.x,f=n.y,s=n.nStems,l=n.haveWidth,u=n.width,c=n.open}}else if("o30"==A||"o31"==A){var z=a.length,U=(P=0,"o31"==A);for(P+=z-(E=-3&z);P<E;)U?(m=f,g=(p=h+a.shift())+a.shift(),f=(v=m+a.shift())+a.shift(),E-P==5?(h=g+a.shift(),P++):h=g,U=!1):(p=h,m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),h=g+a.shift(),E-P==5?(f=v+a.shift(),P++):f=v,U=!0),t.U.P.curveTo(o,p,m,g,v,h,f),P+=4}else{if("o"==(A+"").charAt(0))throw console.debug("Unknown operation: "+A,e),A;a.push(A)}}}n.x=h,n.y=f,n.nStems=s,n.haveWidth=l,n.width=u,n.open=c};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},l=s(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var d=s(o,0)[0],h=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var u=15-t;for(o=0;o<i;++o)if(e[o])for(var c=o<<4|e[o],d=t-e[o],f=l[e[o]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)s[h[f]>>>u]=c}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=h[l[e[o]-1]++]>>>15-e[o]);return s},g=new t(288);for(f=0;f<144;++f)g[f]=8;for(f=144;f<256;++f)g[f]=9;for(f=256;f<280;++f)g[f]=7;for(f=280;f<288;++f)g[f]=8;var v=new t(32);for(f=0;f<32;++f)v[f]=5;var y=m(g,9,1),_=m(v,5,1),b=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},x=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},w=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(e,t,n){var r=new Error(t||S[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,D),!n)throw r;return r},A=function(e,s,l){var c=e.length;if(!c||l&&!l.l&&c<5)return s||new t(0);var h=!s||l,f=!l||l.i;l||(l={}),s||(s=new t(3*c));var p,g=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},v=l.f||0,S=l.p||0,A=l.b||0,E=l.l,M=l.d,C=l.m,T=l.n,P=8*c;do{if(!E){l.f=v=x(e,S,1);var R=x(e,S+1,3);if(S+=3,!R){var k=e[(G=((p=S)/8|0)+(7&p&&1)+4)-4]|e[G-3]<<8,O=G+k;if(O>c){f&&D(0);break}h&&g(A+k),s.set(e.subarray(G,O),A),l.b=A+=k,l.p=S=8*O;continue}if(1==R)E=y,M=_,C=9,T=5;else if(2==R){var L=x(e,S,31)+257,F=x(e,S+10,15)+4,I=L+x(e,S+5,31)+1;S+=14;for(var N=new t(I),B=new t(19),j=0;j<F;++j)B[a[j]]=x(e,S+3*j,7);S+=3*F;var z=b(B),U=(1<<z)-1,H=m(B,z,1);for(j=0;j<I;){var G,V=H[x(e,S,U)];if(S+=15&V,(G=V>>>4)<16)N[j++]=G;else{var W=0,Z=0;for(16==G?(Z=3+x(e,S,3),S+=2,W=N[j-1]):17==G?(Z=3+x(e,S,7),S+=3):18==G&&(Z=11+x(e,S,127),S+=7);Z--;)N[j++]=W}}var $=N.subarray(0,L),q=N.subarray(L);C=b($),T=b(q),E=m($,C,1),M=m(q,T,1)}else D(1);if(S>P){f&&D(0);break}}h&&g(A+131072);for(var Y=(1<<C)-1,K=(1<<T)-1,X=S;;X=S){var Q=(W=E[w(e,S)&Y])>>>4;if((S+=15&W)>P){f&&D(0);break}if(W||D(2),Q<256)s[A++]=Q;else{if(256==Q){X=S,E=null;break}var J=Q-254;if(Q>264){var ee=i[j=Q-257];J=x(e,S,(1<<ee)-1)+u[j],S+=ee}var te=M[w(e,S)&K],ne=te>>>4;if(te||D(3),S+=15&te,q=d[ne],ne>3&&(ee=o[ne],q+=w(e,S)&(1<<ee)-1,S+=ee),S>P){f&&D(0);break}h&&g(A+131072);for(var re=A+J;A<re;A+=4)s[A]=s[A-q],s[A+1]=s[A+1-q],s[A+2]=s[A+2-q],s[A+3]=s[A+3-q];A=re}}l.l=E,l.p=X,l.b=A,E&&(v=1,l.m=C,l.d=M,l.n=T)}while(!v);return A==s.length?s:function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);return a.set(e.subarray(i,o)),a}(s,0,A)},E=new t(0),M="undefined"!=typeof TextDecoder&&new TextDecoder;try{M.decode(E,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function o(e){v.setUint16(y,e),y+=2}function a(e){v.setUint32(y,e),y+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var u=16*Math.pow(2,l),c=16*s.numTables-u,d=12,h=[],f=0;f<s.numTables;f++)h.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),d+=16;var p,m=new Uint8Array(12+16*h.length+h.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,v=new DataView(g),y=0;return a(s.flavor),o(s.numTables),o(u),o(l),o(c),h.forEach((function(e){a(e.tag),a(e.origChecksum),a(d),a(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)})),h.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),A(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var o=0;(d=t.outOffset+t.origLength)%4!=0&&(o=4-d%4),m.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),p=d+o})),g.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function o(e){if(!i){const e={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[o,a]=r.split("+");o=parseInt(o,36),a=a?parseInt(a,36):0,i.set(n+=o,e[t]);for(let s=a;s--;)i.set(++n,e[t])}))}}return i.get(e)||32}const a=[null,"isol","init","fina","medi"];function s(e){const t=new Uint8Array(e.length);let n=32,r=1,i=-1;for(let a=0;a<e.length;a++){const s=e.codePointAt(a);let l=0|o(s),u=1;8&l||(21&n?22&l?(u=3,1!==r&&3!==r||t[i]++):33&l&&(2!==r&&4!==r||t[i]--):34&n&&(2!==r&&4!==r||t[i]--),r=t[a]=u,n=l,i=a,s>65535&&a++)}return t}function l(t){const r=Object.create(null),i={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph(o,l,u,c){let d=0;const h=1/i.unitsPerEm*l,f=function(t,n){const r=[];for(let o=0;o<n.length;o++){const i=n.codePointAt(o);i>65535&&o++,r.push(e.U.codeToGlyph(t,i))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let l;const u=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,c=[];o.forEach((i=>{if(u.test(i.tag))for(let o=0;o<i.tab.length;o++){if(c[i.tab[o]])continue;c[i.tab[o]]=!0;const u=t[i.tab[o]],d=/^(isol|init|fina|medi)$/.test(i.tag);d&&!l&&(l=s(n));for(let n=0;n<r.length;n++)l&&d&&a[l[n]]!==i.tag||e.U._applySubs(r,n,u,t)}}))}return r}(t,o);let p=0,m=-1;return f.forEach(((i,a)=>{if(-1!==i){let o=r[i];if(!o){const{cmds:a,crds:s}=e.U.glyphToPath(t,i);let l,u,c,d,h="",f=0;for(let e=0,t=a.length;e<t;e++){const t=n[a[e]];h+=a[e];for(let e=1;e<=t;e++)h+=(e>1?",":"")+s[f++]}if(s.length){l=u=1/0,c=d=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],n=s[e+1];t<l&&(l=t),n<u&&(u=n),t>c&&(c=t),n>d&&(d=n)}}else l=c=u=d=0;o=r[i]={index:i,advanceWidth:t.hmtx.aWidth[i],xMin:l,yMin:u,xMax:c,yMax:d,path:h,pathCommandCount:a.length}}-1!==m&&(d+=e.U.getPairAdjustment(t,m,i)*h),c.call(null,o,d,p),o.advanceWidth&&(d+=o.advanceWidth*h),u&&(d+=u*l),m=i}p+=o.codePointAt(p)>65535?2:1})),d}};return i}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return l(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())}),hn={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},fn=new l.Color;let pn=!1;function mn(){return(self.performance||Date).now()}const gn=Object.create(null);function vn(e,t){pn=!0,e=_n({},e);const n=mn();if(e.font=function(e){bn||(bn="undefined"===typeof document?{}:document.createElement("a"));return bn.href=e,bn.href}(e.font||hn.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||hn.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!==typeof r&&(r=fn.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:r,sdfExponent:i}=hn,{sdfGlyphSize:o}=e,a=r/o*4;let s=gn[o];if(!s){const e=document.createElement("canvas");e.width=r,e.height=256*o/a,s=gn[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:e,sdfTexture:new l.Texture(e,void 0,void 0,void 0,l.LinearFilter,l.LinearFilter),contextLost:!1,glyphsByFont:new Map},s.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(yn(t,e,!0))}))})),Pt.all(n).then((()=>{xn(e),e.sdfTexture.needsUpdate=!0}))}))}(s)}const{sdfTexture:u,sdfCanvas:c}=s;let d=s.glyphsByFont.get(e.font);d||s.glyphsByFont.set(e.font,d=new Map),Sn(e).then((l=>{const{glyphIds:h,glyphPositions:f,fontSize:p,unitsPerEm:m,timings:g}=l,v=[],y=new Float32Array(4*h.length),_=p/m;let b=0,x=0;const w=mn();h.forEach(((e,t)=>{let n=d.get(e);if(!n){const{path:t,pathBounds:r}=l.glyphData[e],i=Math.max(r[2]-r[0],r[3]-r[1])/o*(hn.sdfMargin*o+.5),a=s.glyphCount++,u=[r[0]-i,r[1]-i,r[2]+i,r[3]+i];d.set(e,n={path:t,atlasIndex:a,sdfViewBox:u}),v.push(n)}const{sdfViewBox:r}=n,i=f[x++],a=f[x++];y[b++]=i+r[0]*_,y[b++]=a+r[1]*_,y[b++]=i+r[2]*_,y[b++]=a+r[3]*_,h[t]=n.atlasIndex})),g.quads=(g.quads||0)+(mn()-w);const S=mn();g.sdf={};const D=c.height,A=Math.ceil(s.glyphCount/a),E=Math.pow(2,Math.ceil(Math.log2(A*o)));E>D&&(console.info(`Increasing SDF texture size ${D}->${E}`),cn(c,r,E),u.dispose()),Pt.all(v.map((t=>yn(t,s,e.gpuAccelerateSDF).then((({timing:e})=>{g.sdf[t.atlasIndex]=e}))))).then((()=>{v.length&&!s.contextLost&&(xn(s),u.needsUpdate=!0),g.sdfTotal=mn()-S,g.total=mn()-n,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:o,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:h,glyphColors:l.glyphColors,caretPositions:l.caretPositions,caretHeight:l.caretHeight,chunkedBounds:l.chunkedBounds,ascender:l.ascender,descender:l.descender,lineHeight:l.lineHeight,topBaseline:l.topBaseline,blockBounds:l.blockBounds,visibleBounds:l.visibleBounds,timings:l.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),l.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[e,t,n,r]=l.blockBounds;return[n-e,r-t]}}))}))})),Pt.all([]).then((()=>{var e;s.contextLost||(e=c)._warm||(an.webgl.isSupported(e),e._warm=!0)}))}function yn({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=hn,u=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(t/4);return function(e,t,n,r,i,o,a,s,l,u,c=!0){return c?ln(e,t,n,r,i,o,a,s,l,u).then(null,(c=>(sn||(console.warn("WebGL SDF generation failed, falling back to JS",c),sn=!0),un(e,t,n,r,i,o,a,s,l,u)))):un(e,t,n,r,i,o,a,s,l,u)}(r,r,e,n,u,l,i,c%(s/r)*r,Math.floor(c/(s/r))*r,t%4,a)}function _n(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let bn;function xn(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const wn=jt({name:"Typesetter",dependencies:[hn,dn,function(e,t,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(t,n){t||(t=r);let o=i[t];o?o.pending?o.pending.push(n):n(o):(i[t]={pending:[n]},function(t,n){!function i(){const o=e=>{console.error(`Failure loading font ${t}${t===r?"":"; trying fallback"}`,e),t!==r&&(t=r,i())};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)o(new Error(r.statusText));else if(r.status>0)try{const t=e(r.response);n(t)}catch(t){o(t)}},r.onerror=o,r.send()}catch(a){o(a)}}()}(t,(e=>{let n=i[t].pending;i[t]=e,n.forEach((t=>t(e)))})))}function u({text:e="",font:n=r,sdfGlyphSize:i=64,fontSize:u=1,letterSpacing:p=0,lineHeight:m="normal",maxWidth:g=o,direction:v,textAlign:y="left",textIndent:_=0,whiteSpace:b="normal",overflowWrap:x="normal",anchorX:w=0,anchorY:S=0,includeCaretPositions:D=!1,chunkedBoundsSize:A=8192,colorRanges:E=null},M,C=!1){const T=h(),P={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),u=+u,p=+p,g=+g,m=m||"normal",_=+_,l(n,(n=>{const r=isFinite(g);let i=null,l=null,R=null,k=null,O=null,L=null,F=null,I=0,N=0,B="nowrap"!==b;const{ascender:j,descender:z,unitsPerEm:U}=n;P.fontLoad=h()-T;const H=h(),G=u/U;"normal"===m&&(m=(j-z)/U);const V=((m*=u)-(j-z)*G)/2,W=-(j*G+V),Z=Math.min(m,(j-z)*G),$=(j+z)/2*G-Z/2;let q=_,Y=new f;const K=[Y];n.forEachGlyph(e,u,p,((t,n,i)=>{const o=e.charAt(i),l=t.advanceWidth*G,c=Y.count;let d;if("isEmpty"in t||(t.isWhitespace=!!o&&/\s/.test(o),t.canBreakAfter=!!o&&s.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(o)),t.isWhitespace||t.isEmpty||N++,B&&r&&!t.isWhitespace&&n+l+q>g&&c){if(Y.glyphAt(c-1).glyphObj.canBreakAfter)d=new f,q=-n;else for(let e=c;e--;){if(0===e&&"break-word"===x){d=new f,q=-n;break}if(Y.glyphAt(e).glyphObj.canBreakAfter){d=Y.splitAt(e+1);const t=d.glyphAt(0).x;q-=t;for(let e=d.count;e--;)d.glyphAt(e).x-=t;break}}d&&(Y.isSoftWrapped=!0,Y=d,K.push(Y),I=g)}let h=Y.glyphAt(Y.count);h.glyphObj=t,h.x=n+q,h.width=l,h.charIndex=i,"\n"===o&&(Y=new f,K.push(Y),q=-(n+l+p*u)+_)})),K.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>I&&(I=e.width))}}));let X=0,Q=0;if(w&&("number"===typeof w?X=-w:"string"===typeof w&&(X=-I*("left"===w?0:"center"===w?.5:"right"===w?1:c(w)))),S)if("number"===typeof S)Q=-S;else if("string"===typeof S){let e=K.length*m;Q="top"===S?0:"top-baseline"===S?-W:"middle"===S?e/2:"bottom"===S?e:"bottom-baseline"===S?e-V+z*G:c(S)*e}if(!C){const r=t.getEmbeddingLevels(e,v);i=new Uint16Array(N),l=new Float32Array(2*N),R={},L=[o,o,-1/0,-1/0],F=[];let a=W;D&&(O=new Float32Array(3*e.length)),E&&(k=new Uint8Array(3*N));let s,u,c=0,h=-1,f=-1;if(K.forEach(((p,g)=>{let{count:v,width:_}=p;if(v>0){let m=0;for(let e=v;e--&&p.glyphAt(e).glyphObj.isWhitespace;)m++;let g=0,b=0;if("center"===y)g=(I-_)/2;else if("right"===y)g=I-_;else if("justify"===y&&p.isSoftWrapped){let e=0;for(let t=v-m;t--;)p.glyphAt(t).glyphObj.isWhitespace&&e++;b=(I-_)/e}if(b||g){let e=0;for(let t=0;t<v;t++){let n=p.glyphAt(t);const r=n.glyphObj;n.x+=g+e,0!==b&&r.isWhitespace&&t<v-m&&(e+=b,n.width+=b)}}const x=t.getReorderSegments(e,r,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let e=0;e<x.length;e++){const[t,n]=x[e];let r=1/0,i=-1/0;for(let e=0;e<v;e++)if(p.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<v;o++){let e=p.glyphAt(o);if(e.charIndex>n)break;o<v-m&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=p.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let w;const S=e=>w=e;for(let y=0;y<v;y++){let m=p.glyphAt(y);w=m.glyphObj;const g=w.index,v=1&r.levels[m.charIndex];if(v){const r=t.getMirroredCharacter(e[m.charIndex]);r&&n.forEachGlyph(r,0,0,S)}if(D){const{charIndex:e}=m,t=m.x+X,n=m.x+m.width+X;O[3*e]=v?n:t,O[3*e+1]=v?t:n,O[3*e+2]=a+$+Q;const r=e-h;r>1&&d(O,h,r),h=e}if(E){const{charIndex:e}=m;for(;e>f;)f++,E.hasOwnProperty(f)&&(u=E[f])}if(!w.isWhitespace&&!w.isEmpty){const e=c++;R[g]||(R[g]={path:w.path,pathBounds:[w.xMin,w.yMin,w.xMax,w.yMax]});const t=m.x+X,n=a+Q;l[2*e]=t,l[2*e+1]=n;const r=t+w.xMin*G,d=n+w.yMin*G,h=t+w.xMax*G,f=n+w.yMax*G;r<L[0]&&(L[0]=r),d<L[1]&&(L[1]=d),h>L[2]&&(L[2]=h),f>L[3]&&(L[3]=f),e%A===0&&(s={start:e,end:e,rect:[o,o,-1/0,-1/0]},F.push(s)),s.end++;const p=s.rect;if(r<p[0]&&(p[0]=r),d<p[1]&&(p[1]=d),h>p[2]&&(p[2]=h),f>p[3]&&(p[3]=f),i[e]=g,E){const t=3*e;k[t]=u>>16&255,k[t+1]=u>>8&255,k[t+2]=255&u}}}}a-=m})),O){const t=e.length-h;t>1&&d(O,h,t)}}P.typesetting=h()-H,M({glyphIds:i,glyphPositions:l,glyphData:R,caretPositions:O,caretHeight:Z,glyphColors:k,chunkedBounds:F,fontSize:u,unitsPerEm:U,ascender:j*G,descender:z*G,lineHeight:m,topBaseline:W,blockBounds:[X,Q-K.length*m,X+I,Q],visibleBounds:L,timings:P})}))}function c(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function d(e,t,n){const r=e[3*t],i=e[3*t+1],o=e[3*t+2],a=(i-r)/n;for(let s=0;s<n;s++){const n=3*(t+s);e[n]=r+a*s,e[n+1]=r+a*(s+1),e[n+2]=o}}function h(){return(self.performance||Date).now()}function f(){this.data=[]}const p=["glyphObj","x","width","charIndex"];return f.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/p.length)},glyphAt(e){let t=f.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new f;return t.data=this.data.splice(e*p.length),t}},f.flyweight=p.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*p.length+n]},set(e){this.data[this.index*p.length+n]=e}}),e)),{data:null,index:0}),{typeset:u,measure:function(e,t){u(e,(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}),{metricsOnly:!0})},loadFont:l}},Vt],init(e,t,n,r){const{defaultFontURL:i}=e;return n(t,r(),{defaultFontURL:i})}}),Sn=jt({name:"Typesetter",dependencies:[wn,Ht],init:(e,t)=>function(n){const r=new t;return e.typeset(n,r.resolve),r},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}});const Dn=(()=>{const e={};const t="aTroikaGlyphIndex";class n extends l.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new l.Sphere,this.boundingBox=new l.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===l.BackSide?t/2:0,e===l.DoubleSide?t:t/2)}set detail(t){if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);let n=function(t){let n=e[t];if(!n){const r=new l.PlaneBufferGeometry(1,1,t,t),i=r.clone(),o=r.attributes,a=i.attributes,s=new l.BufferGeometry,u=o.uv.count;for(let e=0;e<u;e++)a.position.array[3*e]*=-1,a.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{s.setAttribute(e,new l.Float32BufferAttribute([...o[e].array,...a[e].array],o[e].itemSize))})),s.setIndex([...r.index.array,...i.index.array.map((e=>e+u))]),s.translate(.5,.5,0),n=e[t]=s}return n}(t);["position","normal","uv"].forEach((e=>{this.attributes[e]=n.attributes[e].clone()})),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,o,a,s){r(this,"aTroikaGlyphBounds",e,4),r(this,t,n,1),r(this,"aTroikaGlyphColor",s,3),this._blockBounds=o,this._chunkedBounds=a,i(this,n.length),this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:l}=Math,u=r/2,c=2*r,d=Math.abs(t),h=e[0]/d,f=e[2]/d,p=i((h+u)/c)!==i((f+u)/c)?-d:o(s(h)*d,s(f)*d),m=i((h-u)/c)!==i((f-u)/c)?d:a(s(h)*d,s(f)*d),g=i((h+r)/c)!==i((f+r)/c)?2*d:a(d-l(h)*d,d-l(f)*d);n.min.set(p,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(t).count,r=this._chunkedBounds;if(r)for(let t=r.length;t--;){n=r[t].end;let i=r[t].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}i(this,n)}}function r(e,t,n,r){const i=e.getAttribute(t);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(e.setAttribute(t,new l.InstancedBufferAttribute(n,r)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}function i(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return n.prototype.setAttribute||(n.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),n})();const An=(()=>{const e=new l.MeshBasicMaterial({color:16777215,side:l.DoubleSide,transparent:!0}),t=8421504,n=new l.Matrix4,r=new l.Vector3,i=new l.Vector3,o=[],a=new l.Vector3,s="+x+y";function u(e){return Array.isArray(e)?e[0]:e}let c=()=>{const t=new l.Mesh(new l.PlaneBufferGeometry(1,1),e);return c=()=>t,t},d=()=>{const t=new l.Mesh(new l.PlaneBufferGeometry(1,1,32,1),e);return d=()=>t,t};const h={type:"syncstart"},f={type:"synccomplete"},p=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],m=p.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class g extends l.Mesh{constructor(){super(new Dn,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=t,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=s,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(h),vn({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(f),e&&e()}))))}onBeforeRender(e,t,n,r,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=l.FrontSide}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===n||(t=this._derivedMaterial=function(e){const t=Jt(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new l.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new l.Vector4(0,0,0,0)},uTroikaClipRect:{value:new l.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new l.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new l.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new l.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(Wt,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(n),n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),[e,t]}return t}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return u(this.material).getDepthMaterial()}get customDistanceMaterial(){return u(this.material).getDistanceMaterial()}_prepareForRender(e){const o=e.isTextOutlineMaterial,u=e.uniforms,c=this.textRenderInfo;if(c){const{sdfTexture:e,blockBounds:n}=c;u.uTroikaSDFTexture.value=e,u.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),u.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,u.uTroikaSDFExponent.value=c.sdfExponent,u.uTroikaTotalBounds.value.fromArray(n),u.uTroikaUseGlyphColors.value=!o&&!!c.glyphColors;let r,i,a,s=0,l=0,d=0,h=0,f=0;if(o){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:i,outlineOpacity:o}=this;s=this._parsePercent(e)||0,l=Math.max(0,this._parsePercent(i)||0),r=o,h=this._parsePercent(t)||0,f=this._parsePercent(n)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(a=this.strokeColor,u.uTroikaStrokeColor.value.set(null==a?t:a),i=this.strokeOpacity,null==i&&(i=1)),r=this.fillOpacity;u.uTroikaDistanceOffset.value=s,u.uTroikaPositionOffset.value.set(h,f),u.uTroikaBlurRadius.value=l,u.uTroikaStrokeWidth.value=d,u.uTroikaStrokeOpacity.value=i,u.uTroikaFillOpacity.value=null==r?1:r,u.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)u.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);u.uTroikaClipRect.value.set(n[0]-e,n[1]-e,n[2]+e,n[3]+e)}this.geometry.applyClipRect(u.uTroikaClipRect.value)}u.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const d=o?this.outlineColor||0:this.color;if(null==d)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new l.Color;d===t._input&&"object"!==typeof d||t.set(t._input=d)}let h=this.orientation||s;if(h!==e._orientation){let t=u.uTroikaOrient.value;h=h.replace(/[^-+xyz]/g,"");let o=h!==s&&h.match(/^([-+])([xyz])([-+])([xyz])$/);if(o){let[,e,s,l,u]=o;r.set(0,0,0)[s]="-"===e?1:-1,i.set(0,0,0)[u]="-"===l?-1:1,n.lookAt(a,r.cross(i),i),t.setFromMatrix4(n)}else t.identity();e._orientation=h}}_parsePercent(e){if("string"===typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new l.Vector2){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new l.Vector2){return r.copy(e),this.localPositionToTextCoords(this.worldToLocal(r),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,a=r?d():c(),s=a.geometry,{position:l,uv:u}=s.attributes;for(let e=0;e<u.count;e++){let t=i[0]+u.getX(e)*(i[2]-i[0]);const n=i[1]+u.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),l.setXYZ(e,t,n,o)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,o.length=0,a.raycast(e,o);for(let e=0;e<o.length;e++)o[e].object=this,t.push(o[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,m.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}p.forEach((e=>{const t="_private_"+e;Object.defineProperty(g.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));let v=!1;return Object.defineProperty(g.prototype,"anchor",{get(){return this._deprecated_anchor},set(e){this._deprecated_anchor=e,v||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),v=!0),Array.isArray(e)?(this.anchorX=100*(+e[0]||0)+"%",this.anchorY=100*(+e[1]||0)+"%"):this.anchorX=this.anchorY=0}}),g})();new WeakMap;new WeakMap;const En=r.forwardRef((({anchorX:e="center",anchorY:t="middle",font:n,children:i,characters:o,onSync:a,...l},u)=>{const c=te((({invalidate:e})=>e)),[d]=r.useState((()=>new An)),[h,f]=r.useMemo((()=>{const e=[];let t="";return r.Children.forEach(i,(n=>{"string"===typeof n||"number"===typeof n?t+=n:e.push(n)})),[e,t]}),[i]);return y((()=>new Promise((e=>function({font:e,characters:t,sdfGlyphSize:n},r){vn({font:e,sdfGlyphSize:n,text:Array.isArray(t)?t.join("\n"):""+t},r)}({font:n,characters:o},e)))),["troika-text",n,o]),r.useLayoutEffect((()=>{d.sync((()=>{c(),a&&a(d)}))})),r.useEffect((()=>()=>d.dispose()),[d]),r.createElement("primitive",(0,s.Z)({object:d,ref:u,font:n,text:f,anchorX:e,anchorY:t},l),h)}));function Mn(e){var t=e.wrapperRef,n=e.groupRef,i=(0,ye.rm)(),o=i.currentTransition,a=i.refTransitionTimeline,s=(0,r.useRef)();return(0,r.useEffect)((function(){"globe=>timeline:end"===o?(s.current=0,t.current.visible=!0,ve.p8.timeline({delay:.3*Math.random(),onUpdate:function(){n.current.updateMatrix()}}).from(n.current.position,{duration:1.1,ease:"power1.easeOut",y:-.3},0).to(s,{duration:1.1,current:1,ease:"power1.easeIn"},0)):"timeline=>globe:start"!==o&&"timeline=>solution:start"!==o||a.current.add(void ve.p8.timeline({onComplete:function(){t.current.visible=!1}}).to(s,{duration:.7,current:0,ease:"power1.easeIn"},.3),0)}),[o]),s}var Cn=r.memo((function(e){var t=e.data,n=ht.zoomPriorityLevels,i=t.zoomPriority,o=t.normalizedProgress,a=t.label,s=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,ye.mv)("refValues").timeline,h=(0,ye.mv)("isRafActive"),f=(0,ye.s6)("windowBounds"),p=f.height>1e3?-1.45:-1.18,m=f.height>1e3?.12:.16,g=n[i-1],v=Mn({wrapperRef:s,groupRef:u});return ne((function(){if(h){var e=(1-l.MathUtils.smoothstep(d.selection.smooth,g[0],g[1]))*l.MathUtils.lerp(1,.8,d.selection.smooth)*v.current,t=o*d.width.smooth-.5*d.width.smooth;s.current.position.x=t,s.current.position.z=3*(1-d.selection.smooth),s.current.scale.set(1,1,1),c.current&&(c.current.material.opacity=e)}}),10),(0,be.jsx)("group",{ref:s,"position-y":p,visible:!1,children:(0,be.jsx)("group",{ref:u,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},scale:[m,m,m],children:(0,be.jsx)(En,{ref:c,"rotation-z":.5*Math.PI,color:"white",anchorX:"left",anchorY:"middle",fontSize:.4,font:"fonts/webgl-SangBleuSunrise-Medium.woff",name:"globe-bubble-hit-area",transparent:!0,children:a})})})}));function Tn(e){var t=e.timelineValues,n=e.group,r=(0,ye.rm)(),i=r.currentTransition,o=r.refTransitionTimeline,a=(0,ye.s6)("setTimelineBubbleHoverData"),s=(0,ye.s6)("setMobileTimelineDotHover");(0,Ue.bt)((function(){var e=o.current;["timeline=>globe:start","timeline=>solution:start"].includes(i)&&(a(!1),s(!1)),"timeline=>globe:start"===i&&setTimeout((function(){return e.add(function(){var e=ve.p8.timeline();t.selection.smooth<.5?e.to(n.current.rotation,{duration:4,y:2*Math.PI,ease:"power3.inOut"},0).fromTo(n.current.position,{x:2},{duration:.8,x:0,ease:"power1.out",immediateRender:!1},1):e.to(n.current.position,{duration:3,x:0,ease:"power1.inOut",immediateRender:!1},0)}(),0)}))}),[i])}function Pn(){var e="mobile"===(0,ye.s6)("responsiveVersion"),t=(0,ye.fq)().timelineHighlights,n=t.bubbles,i=t.statistics,o=t.yearLabels,a=(0,ye.rm)().isTransitioning,s=(0,r.useRef)(),l=(0,ye.mv)("refValues").timeline,u=(0,ye.mv)("isRafActive"),c=(0,r.useMemo)((function(){var t=n;e&&(t=t.filter((function(e){return e.timelineConfig.zoomPriority<3})));var r=t.map((function(e,t){return(0,be.jsx)(xt,{data:e},t)}));return r}),[]),d=(0,r.useMemo)((function(){var e=i.map((function(e,t){return(0,be.jsx)(Mt,{data:e},t)}));return e}),[]),h=(0,r.useMemo)((function(){var e=o.map((function(e,t){return(0,be.jsx)(Cn,{data:e},t)}));return e}),[]);return Tn({timelineValues:l,group:s}),ne((function(){u&&(a||(e?s.current.position.y=l.globalGroupPosition.y:s.current.position.x=l.globalGroupPosition.x))}),10),(0,be.jsxs)("group",{ref:s,children:[c,!e&&h,!e&&d]})}var Rn=n(38891);function kn(e){var t=e.uniforms,n=e.isActive,i=(0,ye.rm)(),o=i.refTransitionTimeline,a=i.currentTransition,s=function(e){var r=(e?0:1)*(n?1:0),i=ve.p8.timeline();return i.to(t.uSwitchProgress,{duration:5,value:r,ease:"linear"},0).to(t.uEntryProgress,{duration:4.6,value:r,ease:"linear"},0),i.timeScale(2),i};return(0,r.useEffect)((function(){var e=o.current;"globe=>solution:start"===a||"homepage=>solution:start"===a?setTimeout((function(){e.add(s(!1),"points:end-=0.5")}),10):"solution=>globe:start"===a?setTimeout((function(){e.add(s(!0),0)}),0):"intro=>solution:start"===a&&setTimeout((function(){e.add(function(){t.uSwitchProgress.value=0,t.uEntryProgress.value=0;var e=s(!1);return e.timeScale(.85),e}(),5.5)}),0)}),[a]),!1}function On(e){var t=e.data,n=e.isActive,i=e.lifeCycle,o=e.slug,a=(0,ye.P)("currentMap"),s=o===(null===a||void 0===a?void 0:a.slug),l=(0,r.useRef)(!0),u=(0,r.useRef)(),c=(0,ye.mv)("currentView"),d=_e.y.DV.U,h=d.shiftX,f=d.shiftY,p=d.scalePosition,m=(0,ye.rm)().currentTransition,g=(0,r.useMemo)((function(){for(var e=[],n=0;n<t.positions.length/2;n++)e.push(.9*Math.random());return{positions:new Float32Array(t.positions),colors:new Float32Array(t.colors),delays:new Float32Array(e)}}),[]),v=(0,r.useMemo)((function(){return{vertexShader:"#define GLSLIFY 1\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\nattribute vec3 aColor;\nattribute float aDelay;\n\nuniform float uEntryProgress;\nuniform float uSwitchProgress;\nuniform float uMaxDelay;\nuniform float uScale;\n\nvarying vec3 vColor;\nvarying float vAlpha;\n\nvoid main(){\n  vec3 newPos = vec3(position.xy, 0.0);\n  newPos.xy *= uScale;\n\n  float factor = 1.0;\n  float normalizedY = smoothstep(1.8, -1.6, position.y) * factor;\n  float duration = 1.99;\n\n  float normEntryProgress = smoothstep(0.0 + normalizedY, duration + normalizedY, uEntryProgress * (1.0 + duration) * factor);\n  normEntryProgress = sineInOut(normEntryProgress);\n  normEntryProgress = smoothstep(0.0 + aDelay, 1.0 + aDelay, normEntryProgress * (1.0 + uMaxDelay));\n  newPos.z += 3.5 * (1.0 - normEntryProgress);\n\n  float normSwitchProgress = smoothstep(0.0 + aDelay, 1.0 + aDelay, uSwitchProgress * (1.0 + uMaxDelay));\n  normSwitchProgress = sineInOut(normSwitchProgress);\n\n  gl_PointSize = 1.5 + 2.25 * normEntryProgress;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPos, 1.0);\n\n  vColor = aColor;\n  vAlpha = normEntryProgress * normSwitchProgress;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec3 vColor;\nvarying float vAlpha;\n\nvec3 brightnessContrast(vec3 value, float brightness, float contrast){\n  return (value - 0.5) * contrast + 0.5 + brightness;\n}\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nvoid main(){\n  vec3 color = (vColor / 255.0);\n  vec3 color2 = brightnessContrast(color, 0.6, 2.40);\n\n  float m = 1.0 - smoothstep(0.12, 0.45, luma(color));\n  m = clamp(m + 0.2, 0.0, 1.0);\n\n  vec3 final  = mix(color, color2, m);\n\n  float a = vAlpha;\n  gl_FragColor = vec4(final, a);\n}\n",uniforms:{uSwitchProgress:{value:n?1:0},uEntryProgress:{value:0},uMaxDelay:{value:.9},uScale:{value:p}}}}),[]);return kn({uniforms:v.uniforms,isActive:n}),(0,r.useEffect)((function(){if("solution"===c&&s){if(!l.current){var e=n?.2:0,t=ve.p8.timeline({delay:e});v.uniforms.uEntryProgress.value=1,t.to(v.uniforms.uSwitchProgress,{duration:1,value:n?1:0,ease:"linear"})}l.current=!1}}),[n]),(0,r.useEffect)((function(){var e;if(null===(e=u.current)||void 0===e||e.kill(),"enter"===i){var t="timeline=>solution:start"===m?1.8:1;u.current=ve.p8.timeline({delay:t}),u.current.to(v.uniforms.uEntryProgress,{duration:2.5,value:n?1:0,ease:"linear"})}else if("leave"===i){u.current=ve.p8.timeline({delay:0}),u.current.to(v.uniforms.uEntryProgress,{duration:2.5,value:0,ease:"linear"})}}),[i]),(0,be.jsxs)("points",{position:[h,f,0],renderOrder:n?10:0,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},frustumCulled:!1,children:[(0,be.jsxs)("bufferGeometry",{children:[(0,be.jsx)("bufferAttribute",{attach:"attributes-position",count:g.positions.length/2,array:g.positions,itemSize:2}),(0,be.jsx)("bufferAttribute",{attach:"attributes-aColor",count:g.colors.length/3,array:g.colors,itemSize:3}),(0,be.jsx)("bufferAttribute",{attach:"attributes-aDelay",count:g.delays.length,array:g.delays,itemSize:1})]}),(0,be.jsx)("shaderMaterial",{args:[v],transparent:!0,depthWrite:!1,depthTest:!1})]})}function Ln(){var e,t,n=(0,ye.fq)().solutionMapsData,r=(0,ye.P)("currentMap"),i=(0,ye.P)("selectedYear"),o=null===n||void 0===n||null===(e=n.maps)||void 0===e||null===(t=e.find)||void 0===t?void 0:t.call(e,(function(e){return e.slug===r.slug})),a=(0,Rn.Ir)(o,2500,"default");return(0,be.jsx)(be.Fragment,{children:a((function(e,t){return(0,be.jsx)(be.Fragment,{children:e&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(On,{slug:e.slug,data:e.start,isActive:2021===i,lifeCycle:t}),(0,be.jsx)(On,{slug:e.slug,data:e.end,isActive:2100===i,lifeCycle:t})]})})}))})}var Fn=function(e,t){var n=[.8487,.84751182,.84479598,.840213,.83359314,.8257851,.814752,.80006949,.78216192,.76060494,.73658673,.7086645,.67777182,.64475739,.60987582,.57134484,.52729731,.45167814],r=[0,.0838426,.1676852,.2515278,.3353704,.419213,.5030556,.5868982,.67182264,.75336633,.83518048,.91537187,.99339958,1.06872269,1.14066505,1.20841528,1.27035062,1.31998003,1.3523];var i=1,o=1;e<0&&(i=-1),t<0&&(o=-1),(e=Math.abs(e))<0&&(i=-1),(t=Math.abs(t))<0&&(o=-1);var a,s,l=(a=5,s=t-1e-10,Math.floor(s/a)*a);0===t&&(l=0);var u=l/5,c=(l+5)/5,d=(t-l)/5,h=(n[c]-n[u])*d+n[u],f=(r[c]-r[u])*d+r[u],p={x:0,y:0,z:0};return p.x=h*e*.017453293,p.x=p.x*i*1,p.y=f,p.y=p.y*o*1,p};function In(e){var t=e.strokeRef,n=e.imageRef,i=e.groupRef,o=e.wrapperRef,a=e.lifeCycle,s=(0,ye.rm)(),l=s.currentTransition,u=(s.refTransitionTimeline,(0,ye.s6)("prevRouter")),c=function(e){t.current.material.opacity=0,n.current.material.opacity=0,i.current.scale.set(.2,.2,1),o.current.visible=!0;var r=ve.p8.timeline({delay:.1*Math.random()+e,onUpdate:function(){i.current.updateMatrix(),n.current.updateMatrix(),t.current.updateMatrix()}});return r.to(t.current.material,{duration:1.1,opacity:1,ease:"power1.easeIn"},0).to(n.current.material,{duration:1.1,opacity:1,ease:"power1.easeIn"},0).to(i.current.scale,{duration:.86,x:1,y:1,ease:"back.out(2)"},0),r};(0,r.useEffect)((function(){"leave"===a?function(){var e=ve.p8.timeline({delay:.1*Math.random(),onUpdate:function(){i.current.updateMatrix(),n.current.updateMatrix(),t.current.updateMatrix()},onComplete:function(){o.current.visible=!1}});t.current.material.opacity=1,n.current.material.opacity=1,e.to(t.current.material,{duration:.7,opacity:0,ease:"power1.easeIn"},.3).to(n.current.material,{duration:.7,opacity:0,ease:"power1.easeIn"},.3).to(i.current.scale,{duration:.7,x:.8,y:.8,ease:"power1.easeIn"},0),e.timeScale(1.6)}():"enter"===a&&"/solutions/[solution]"===(null===u||void 0===u?void 0:u.pathname)&&c(2)}),[a]),(0,r.useEffect)((function(){["globe=>solution:end","timeline=>solution:end","intro=>solution:end","homepage=>solution:end"].includes(l)&&c(0)}),[l])}var Nn=n(80130),Bn=n(41055);function jn(e){var t=e.groupRef,n=e.imageRef,i=e.strokeRef,o=e.screenPosition,a=e.updateScreenPosition,s=e.slug,l=e.HOVER_SCALE,u=e.canClick,c=e.solutionsOverviewHoverData,d=(0,ye.mv)("currentView"),h=(0,ye.rm)().isTransitioning,f=(0,ye.s6)("setSolutionsOverviewHoverData"),p="mobile"===(0,ye.s6)("responsiveVersion"),m=(0,ye.s6)("router"),g=(0,r.useRef)(),v=function(e){"solution"!==!d&&!h&&u.current&&(e.stopPropagation(),a(),f({slug:s,position:{x:o.current.x,y:o.current.y}}))};return(0,Ue.bt)((function(){c?s===(null===c||void 0===c?void 0:c.slug)?function(){var e;null===(e=g.current)||void 0===e||e.kill();var r=ve.p8.timeline({onUpdate:function(){t.current.updateMatrix(),n.current.updateMatrix()}});r.to(t.current.scale,{duration:.4,x:l,y:l,ease:"power2.out"},0).to(n.current.scale,{duration:.4,x:1.1,y:1.1,ease:"power2.out"},0).to([i.current.material,n.current.material],{opacity:1},0),g.current=r}():s!==(null===c||void 0===c?void 0:c.slug)&&function(){var e;null===(e=g.current)||void 0===e||e.kill();var r=ve.p8.timeline({onUpdate:function(){t.current.updateMatrix(),n.current.updateMatrix()}});r.to(t.current.scale,{duration:.4,x:.8,y:.8,ease:"power2.out"},0).to(n.current.scale,{duration:.4,x:1.1,y:1.1,ease:"power2.out"},0).to([i.current.material,n.current.material],{opacity:.5},0),g.current=r}():(function(){var e;null===(e=g.current)||void 0===e||e.kill();var r=ve.p8.timeline({onUpdate:function(){t.current.updateMatrix(),n.current.updateMatrix()}});r.to(t.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"},0).to(n.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"},0),g.current=r}(),function(){var e;null===(e=g.current)||void 0===e||e.kill();var r=ve.p8.timeline({onUpdate:function(){t.current.updateMatrix(),n.current.updateMatrix()}});r.to(t.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"},0).to(n.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"},0).to([i.current.material,n.current.material],{opacity:1},0),g.current=r}())}),[c]),{onPointerEnter:v,onPointerLeave:function(e){"solution"!==!d&&(e.stopPropagation(),f(!1))},onClick:function(e){"solution"!==!d&&(p?p&&((null===c||void 0===c?void 0:c.slug)===s?(u.current=!1,(0,Nn.Z)(Bn.h.getState().solutionPageRef,(function(){m.push("/solutions/".concat(s))}))):v(e)):(u.current=!1,(0,Nn.Z)(Bn.h.getState().solutionPageRef,(function(){m.push("/solutions/".concat(s))})),f(!1)))},tlRef:g}}var zn=.45,Un=.35,Hn=.37,Gn=new l.Vector3;function Vn(e){var t=e.slug,n=e.coords,i=e.lifeCycle,o=e.canClick,a=(0,r.useRef)(),s=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)({x:0,y:0}),d=(0,Ae.W)(t),h=(0,Ae.W)("timelineDotMask"),f=(0,Ae.W)("timelineDotStroke"),p=(0,ye.mv)("refValues"),m=(0,ye.mv)("currentView"),g=(0,ye.mv)("isRafActive"),v=(0,ye.s6)("solutionsOverviewHoverData"),y=(0,ye.s6)("setSolutionsOverviewHoverData"),_="mobile"===(0,ye.s6)("responsiveVersion"),b=(0,ye.s6)("windowBounds"),x=(0,ye.s6)("router"),w=(0,ye.s6)("prevRouter"),S=te().camera,D=(0,r.useMemo)((function(){return Fn(n.long,n.lat)}),[]),A=_e.y.DV.U,E=A.shiftX,M=A.shiftY,C=A.scalePosition,T=t===(null===v||void 0===v?void 0:v.slug),P=(0,r.useMemo)((function(){return _?zn:b.height>1e3?Hn:Un}),[b,_]),R=function(){a.current.getWorldPosition(Gn),Gn.project(S),c.current.x=Gn.x*b.width*.5+.5*b.width,c.current.y=-Gn.y*b.height*.5+.5*b.height};In({strokeRef:a,imageRef:s,groupRef:l,wrapperRef:u,lifeCycle:i});var k=jn({groupRef:l,imageRef:s,strokeRef:a,screenPosition:c,updateScreenPosition:R,slug:t,HOVER_SCALE:1,canClick:o,solutionsOverviewHoverData:v}),O=k.onPointerEnter,L=k.onPointerLeave,F=k.onClick,I=k.tlRef;return(0,r.useEffect)((function(){y(!1)}),[x]),(0,r.useEffect)((function(){var e="/solutions"===(null===x||void 0===x?void 0:x.pathname)&&(void 0===(null===w||void 0===w?void 0:w.pathname)||!["/","/explore","/solutions","/solutions/[solution]"].includes(null===w||void 0===w?void 0:w.pathname))&&"solution"===m;return u.current.visible=e,function(){var e;null===(e=I.current)||void 0===e||e.kill()}}),[]),ne((function(){if(g){u.current.lookAt(S.position);var e=P-.2*p.solution.normalizedZoom.smooth;u.current.scale.x=e,u.current.scale.y=e,v&&T&&(R(),v.position.x=c.current.x,v.position.y=c.current.y)}})),(0,be.jsx)("group",{ref:u,scale:[P,P,P],"position-x":(D.x+E)*C,"position-y":(D.y+M)*C,"position-z":.1,visible:!1,children:(0,be.jsxs)("group",{ref:l,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},children:[(0,be.jsxs)("mesh",{ref:a,scale:[1.3,1.3,1.3],matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},renderOrder:1,onPointerEnter:O,onPointerLeave:L,onClick:F,children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{map:f,color:11250603,alphaMap:f,alphaTest:.05,transparent:!0})]}),(0,be.jsxs)("mesh",{matrixAutoUpdate:!1,ref:s,onUpdate:function(e){return e.updateMatrix()},renderOrder:2,children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{map:d,alphaMap:h,alphaTest:.05,transparent:!0})]})]})})}var Wn=[{lat:67.235936,long:70.780966},{lat:40.360557,long:130.987921},{lat:-6.663822,long:-53.722923},{lat:33.847608,long:9.518244},{lat:-10.921439,long:106.625276},{lat:23.855698,long:-115.170996},{lat:48.973454,long:-80.125944},{lat:4.842976,long:42.210436}];function Zn(){var e="/solutions"===(0,ye.s6)("router").route,t=(0,ye.fq)().solutionOverviewData,n=(0,r.useRef)(!0),i=(0,Rn.Yz)(e,1500),o=i.stage,a=i.shouldMount,s=(0,r.useMemo)((function(){return t.map((function(e,t){return(0,be.jsx)(Vn,{slug:e.slug,coords:Wn[t],lifeCycle:o,canClick:n},e.slug)}))}),[o]);return(0,r.useEffect)((function(){n.current=e}),[e]),(0,be.jsx)(be.Fragment,{children:a&&s})}var $n=new l.Matrix4,qn=new l.Vector3;var Yn=new l.Vector3,Kn=r.memo((function(e){var t=e.lifeCycle,n=(0,r.useRef)(),i=(0,r.useRef)(),o=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useMemo)((function(){return new l.Object3D}),[]),u=(0,ye.fq)(),c=_e.y.DV.U,d=c.shiftX,h=c.shiftY,f=c.scalePosition,p=(0,Ae.W)("bestPracticesIcon"),m=(0,r.useMemo)((function(){return{vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main(){\n  gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(position, 1.0);\n  vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D uTxt;\n\nvoid main(){\n  vec4 final = texture2D(uTxt, vUv);\n  gl_FragColor = final;\n\n  #include <encodings_fragment>\n}\n",uniforms:{uTxt:{value:p}}}}),[]),g=(0,r.useMemo)((function(){return u.solutionMapsData.bestPractices.map((function(e){var t=Fn(e.latLong.lon,e.latLong.lat);return{position:Yn.clone().set(t.x*f+d,t.y*f+h,.02),scale:0,el:e}}))}),[]),v=function(){g.forEach((function(e,t){s.position.copy(e.position),s.scale.set(e.scale,e.scale,1),s.updateMatrix(),i.current.setMatrixAt(t,s.matrix)})),i.current.instanceMatrix.needsUpdate=!0},y=function(e){var t=e.root,n=e.dummyChild,r=e.instances,i=te().camera,o=(0,ye.s6)("router"),a=(0,ye.s6)("dotHoverTransitionTl"),s=(0,ye.s6)("setBestPracticesHoverData"),l=(0,ye.s6)("windowBounds");return{onPointerEnter:function(e){var o,a;null===t||void 0===t||null===(o=t.current)||void 0===o||o.getMatrixAt(e.instanceId,$n),qn.setFromMatrixPosition($n),null===n||void 0===n||null===(a=n.current)||void 0===a||a.position.copy(qn),null===n||void 0===n||n.current.getWorldPosition(qn);var u=function(e,t,n){return e.project(t),[e.x*n.width*.5+.5*n.width,-e.y*n.height*.5+.5*n.height]}(qn,i,l);s({position:{x:u[0],y:u[1]},data:r[e.instanceId].el})},onPointerLeave:function(){s(!1)},onClick:function(e){console.log("click"),e.stopPropagation();var t=r[e.instanceId].el,n=t.image,i=t.slug,s=t.type,l=!n;"timeline"!==s||a?a||(0,Ve.pf)((function(){return o.push("/content/".concat(i))}),{noThumbnail:l,type:s}):(0,Ve.pf)((function(){return o.push("/timeline/".concat(i))}),{noThumbnail:l,type:s})}}}({root:i,dummyChild:a,instances:g}),_=y.onPointerEnter,b=y.onPointerLeave,x=y.onClick;return(0,r.useEffect)((function(){return g.forEach((function(e,t){s.position.copy(e.position),s.scale.set(e.scale,e.scale,1),s.updateMatrix(),i.current.setMatrixAt(t,s.matrix)})),i.current.instanceMatrix.needsUpdate=!0,o.current=ve.p8.timeline({onUpdate:v}),o.current.to(g,{scale:1,duration:.8,stagger:.1,ease:"back.out(4.7)"}),function(){var e;null===(e=o.current)||void 0===e||e.kill()}}),[]),(0,r.useEffect)((function(){"leave"===t&&(o.current=ve.p8.timeline({onUpdate:v}),o.current.to(g,{scale:0,duration:.7,ease:"back.in(3.7)"}))}),[t]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("object3D",{ref:a,visible:!1}),(0,be.jsxs)("instancedMesh",{ref:i,scale:[1,1,1],args:[null,null,g.length],renderOrder:100,onPointerEnter:_,onPointerLeave:b,onClick:x,children:[(0,be.jsx)("planeBufferGeometry",{ref:n,args:[.1,.1,1,1]}),(0,be.jsx)("shaderMaterial",{args:[m],transparent:!0,depthTest:!1,depthWrite:!1})]})]})}));function Xn(){var e,t=(0,ye.fq)(),n=(0,ye.P)("currentView"),r="desktop"===(0,ye.s6)("responsiveVersion"),i="bestPractices"===n&&(null===t||void 0===t||null===(e=t.solutionMapsData)||void 0===e?void 0:e.bestPractices),o=(0,Rn.Yz)(i&&r,1500),a=o.stage,s=o.shouldMount;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Zn,{}),(0,be.jsx)(Ln,{}),s&&(0,be.jsx)(Kn,{lifeCycle:a})]})}function Qn(){var e="intro"===(0,ye.mv)("currentView"),t=_e.y.nS.X,n=_e.y.mf.F,i=(0,Ae.W)("timelineDotMask"),o=te().viewport,a=(0,r.useMemo)((function(){for(var e=[],r=0;r<5e3;r++){var i=8*(2*Math.random()-1),o=8*(2*Math.random()-1),a=t.z+Math.random()*(n.z-t.z-10);e.push(i,o,a)}return{positions:new Float32Array(e)}}),[]);return(0,be.jsxs)("points",{position:[0,0,0],visible:e,frustumCulled:!1,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},children:[(0,be.jsx)("bufferGeometry",{children:(0,be.jsx)("bufferAttribute",{attach:"attributes-position",count:a.positions.length/3,array:a.positions,itemSize:3})}),(0,be.jsx)("pointsMaterial",{depthWrite:!1,depthTest:!1,size:.02*o.dpr,sizeAttenuation:!0,map:i,alphaTest:.05})]})}function Jn(e){var t=e.wrapperRef,n=e.globalOpacity,i=e.update,o=(0,ye.rm)(),a=o.currentTransition,s=o.refTransitionTimeline;(0,r.useEffect)((function(){return Se.Z.on("webgl:transition:globe-rotation",i),function(){Se.Z.off("webgl:transition:globe-rotation",i)}}),[i]);var l=function(){var e=ve.p8.timeline({onStart:function(){t.current.visible=!0},delay:.6*Math.random(),onUpdate:i});return e.fromTo(n,{current:0},{duration:2,current:1,ease:"power1.in"}),e};return(0,r.useEffect)((function(){var e=s.current;"intro=>globe:start"===a?setTimeout((function(){e.add(l(),"intro:rotation:end-=4")}),100):["globe=>timeline:start","globe=>solution:start"].includes(a)?setTimeout((function(){e.add(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=ve.p8.timeline({onComplete:function(){t.current.visible=!1}});return r.to(n,{duration:e?0:1.5,current:0,ease:"power1.in"}),r}(),0)}),0):"timeline=>globe:start"===a?setTimeout((function(){e.add(l(),"globe:end-=2")}),100):"solution=>globe:start"===a?setTimeout((function(){e.add(l(),1)}),100):"homepage=>globe:start"===a&&e.add(l(),.35)}),[a]),!1}function er(e){var t=e.strokeRef,n=e.imageRef,i=e.wrapperRef,o=e.name,a=e.isFilterActive,s=(0,r.useRef)(),l=(0,r.useRef)(!1),u=(0,ye.mv)("setCurrentType"),c="globe"===(0,ye.mv)("currentView"),d=(0,ye.s6)("setMobileGlobeCategoryOverlay"),h=(0,ye.s6)("setDotHoverData"),f=(0,ye.s6)("setGlobeBubbleHoverData"),p="mobile"===(0,ye.s6)("responsiveVersion");return(0,r.useEffect)((function(){return function(){var e;null===(e=s.current)||void 0===e||e.kill()}}),[]),{onClick:function(){c&&i.current.visible&&(a||(p&&d(o),p||u(o)))},onPointerMove:function(){c&&i.current.visible&&(p||a||l.current&&(document.body.style.cursor="pointer"))},onPointerEnter:function(e){c&&i.current.visible&&(l.current||p||a||(h(!1),e.stopPropagation(),l.current=!0,document.body.style.cursor="pointer",f(o),function(){var e;null===(e=s.current)||void 0===e||e.kill();var r=ve.p8.timeline({onUpdate:function(){t.current.updateMatrix(),n.current.updateMatrix()}});r.to(t.current.scale,{duration:.4,x:1.45,y:1.45,ease:"power2.out"},0).to(n.current.scale,{duration:.4,x:1.25,y:1.25,ease:"power2.out"},0),s.current=r}()))},onPointerLeave:function(e){if(c&&i.current.visible&&!p&&!a){var r=(null===e||void 0===e?void 0:e.intersections.map((function(e){return e.object.name})))||[],o=null===r||void 0===r?void 0:r.includes("dots-instance"),u=null===r||void 0===r?void 0:r.includes("globe-bubble-hit-area");o&&u||u||(e.stopPropagation(),document.body.style.cursor="default",l.current=!1,f(!1),function(){var e;null===(e=s.current)||void 0===e||e.kill();var r=ve.p8.timeline({onUpdate:function(){t.current.updateMatrix(),n.current.updateMatrix()}});r.to(t.current.scale,{duration:.4,x:1.3,y:1.3,ease:"power2.out"},0).to(n.current.scale,{duration:.4,x:1,y:1,ease:"power2.out"},0),s.current=r}())}}}}var tr={mobile:.45,desktop:.28},nr={mobile:.3,desktop:.23},rr=new l.Vector3,ir=r.memo((function(e){var t=e.position,n=e.label,i=e.diffuseKey,o=e.name,a=(0,r.useRef)(),s=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,r.useRef)(),h=(0,r.useRef)(0),f=(0,r.useRef)(0),p=(0,r.useRef)(1),m=(0,r.useRef)(),g=te().camera,v=(0,Ae.W)(i),y=(0,Ae.W)("timelineDotMask"),_=(0,Ae.W)("timelineDotStroke"),b=(0,ye.mv)("currentView"),x=(0,ye.mv)("isRafActive"),w=(0,ye.mv)("refValues").globe,S=(0,ye.mv)("currentType"),D=(0,ye.s6)("prevRouter"),A=(0,ye.s6)("router"),E=(0,ye.s6)("responsiveVersion"),M=(0,ye.rm)().isTransitioning,C="globe"===b,T="all"!==S,P=[-.4,.3],R=tr[E],k=nr[E],O=function(){c.current.getWorldPosition(rr),rr.z>=P[0]+w.zoom.smooth&&rr.z<=P[1]+w.zoom.smooth?h.current=l.MathUtils.smoothstep(rr.z,P[0]+w.zoom.smooth,P[1]+w.zoom.smooth):rr.z<P[0]+w.zoom.smooth?h.current=0:h.current=1,M||(c.current.visible=h.current>0);var e=(.3*h.current+.7)*R-.05*w.zoom.smooth*.125,t=h.current*f.current*p.current;a.current.material.opacity=t,s.current.material.opacity=t,d.current.material.opacity=t,u.current.position.z=12*(1-p.current),c.current.scale.set(e,e,e),c.current.lookAt(g.position)};(0,r.useEffect)((function(){var e=void 0!==(null===D||void 0===D?void 0:D.pathname);h.current=e?1:0,f.current=e?1:0,"/solutions/overview"===(null===D||void 0===D?void 0:D.pathname)&&"/solutions"===(null===A||void 0===A?void 0:A.pathname)&&(c.current.visible=!1)}),[]),Jn({wrapperRef:c,globalOpacity:f,update:O});var L=er({strokeRef:a,imageRef:s,wrapperRef:c,name:o,isFilterActive:T}),F=L.onClick,I=L.onPointerMove,N=L.onPointerEnter,B=L.onPointerLeave;return(0,r.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.kill();var t="all"===S?1:0;m.current=ve.p8.to(p,{duration:.8,current:t,ease:"power1.inOut",onUpdate:function(){u.current.updateMatrix()}})}),[S]),ne((function(){C&&x&&O()})),(0,be.jsx)("group",{ref:c,scale:[R,R,R],"position-x":t.x,"position-y":t.y,"position-z":t.z,visible:!0,children:(0,be.jsxs)("group",{ref:u,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},children:[(0,be.jsxs)("mesh",{"position-y":-.8,"scale-x":.7,"scale-y":.5,onClick:F,onPointerEnter:N,onPointerLeave:B,onPointerMove:I,visible:!1,matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},name:"globe-bubble-hit-area",children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{color:2080458,depthWrite:!1,depthTest:!1})]}),(0,be.jsxs)("mesh",{ref:a,scale:[1.3,1.3,1.3],matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},renderOrder:1,onClick:F,onPointerEnter:N,onPointerLeave:B,onPointerMove:I,name:"globe-bubble-hit-area",children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{map:_,color:11250603,alphaMap:_,alphaTest:.05,depthWrite:!1,depthTest:!1,transparent:!0})]}),(0,be.jsxs)("mesh",{matrixAutoUpdate:!1,ref:s,onUpdate:function(e){return e.updateMatrix()},renderOrder:2,children:[(0,be.jsx)("planeBufferGeometry",{args:[1,1,1,1]}),(0,be.jsx)("meshBasicMaterial",{map:v,alphaMap:y,alphaTest:.05,depthWrite:!1,depthTest:!1,transparent:!0})]}),(0,be.jsx)(En,{ref:d,"position-y":-1,color:"white",anchorX:"center",anchorY:"middle",fontSize:k,font:"fonts/webgl-SangBleuSunrise-Medium.woff",onClick:F,onPointerEnter:N,onPointerLeave:B,onPointerMove:I,name:"globe-bubble-hit-area",children:n})]})})})),or=new l.Vector3,ar=2.05,sr=[{position:or.setFromSphericalCoords(ar,1.3,1.5).clone()},{position:or.setFromSphericalCoords(ar,.9,.3).clone()},{position:or.setFromSphericalCoords(ar,1.65,3.4).clone()},{position:or.setFromSphericalCoords(ar,.9,4.6).clone()},{position:or.setFromSphericalCoords(ar,1.2,2.8).clone()},{position:or.setFromSphericalCoords(ar,1.8,.55).clone()},{position:or.setFromSphericalCoords(ar,1.6,5.2).clone()}],lr=r.memo((function(){var e=(0,ye.fq)().storyTypeData,t=(0,r.useMemo)((function(){return sr.map((function(t,n){var r=e[n].name,i=r.toUpperCase();return(0,be.jsx)(ir,{position:t.position,label:i,name:r,diffuseKey:"globe-story-".concat(r)},n)}))}),[]);return(0,be.jsx)("group",{matrixAutoUpdate:!1,onUpdate:function(e){return e.updateMatrix()},children:t})})),ur={center:{desktop:.5,mobile:1}};function cr(e){var t=e.group,n=e.globeRotation,r=e.timelineValues,i=e.setPriorityZoomThreshold,o=e.solutionShiftX,a=e.solutionShiftY,s=e.solutionZoom,l=e.solutionZoomInterpolation,u=e.isMobile,c=(0,ye.rm)(),d=c.refTransitionTimeline,h=c.currentTransition,f=c.isTransitioning,p=te().camera,m=(0,ye.mv)("responsiveSolutionValues"),g=(0,ye.mv)("responsiveGlobeScale"),v=(0,ye.mv)("refValues").globe,y=u?ur.center.mobile:ur.center.desktop,_=function(){var e=t.current,r=ve.p8.timeline(),o=(e.rotation.y-e.rotation.y%Math.PI)/Math.PI,a=o%2===0?2:3,s=o>=0?1:-1,l=Math.PI*(Math.abs(o)+a)*s;return r.to(e.rotation,{duration:3,x:0,y:l,ease:"power3.inOut"},0).to(e.position,{duration:3,z:0,ease:"power3.inOut"},0).to(v.zoom,{duration:3,smooth:0,ease:"power3.inOut"},0).set(v.zoom,{static:0}).set(v.zoom,{smooth:0}).set(n.static,{x:0,y:0}).set(n.smooth,{x:0,y:0}).call(i,[1]),r},b=function(e){var n=t.current,i=ve.p8.timeline({onUpdate:function(){Se.Z.emit("webgl:transition:globe-rotation")},onComplete:function(){n.rotation.y=0,n.rotation.x=0}});return e?i.set(r.center,{smooth:y,static:y}).to(n.scale,{duration:3,x:1,y:1,z:1,ease:"power1.inOut"},0).add(_(),0):i.to(n.rotation,{duration:4,y:2*Math.PI,ease:"power3.inOut"},0).to(n.scale,{duration:4,x:g,y:g,z:g,ease:"power3.inOut"},0).set(r.center,{smooth:y,static:y}).set(r.selection,{smooth:1,static:1}).set(r.width,{smooth:r.width.responsive}),i},x=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=t.current,i=ve.p8.timeline({onUpdate:function(){Se.Z.emit("webgl:transition:globe-rotation")},onComplete:function(){n.rotation.y=0,n.rotation.x=0}});e&&i.add(_(),0),i.to(n.scale,{duration:3,x:m.scale,y:m.scale,z:m.scale},0).to(n.position,{duration:2.5,y:m.y,ease:"power2.inOut"},0).set(r.center,{smooth:y,static:y}).set(r.selection,{smooth:1,static:1}).set(r.width,{smooth:r.width.responsive})};return(0,Ue.bt)((function(){var e=d.current;"globe=>timeline:start"===h?e.add(b(!0),0).addLabel("globe:end"):"timeline=>globe:start"===h?e.add(b(!1),0):"globe=>solution:start"===h||"homepage=>solution:start"===h?setTimeout((function(){return e.add(x(!0),"dots:end-=0.5")}),50):"solution=>globe:start"===h?e.add(function(){var e=t.current;ve.p8.timeline().to(e.scale,{duration:3,x:g,y:g,z:g,ease:"power3.inOut"},0).to(e.rotation,{duration:2,x:0,ease:"power2.inOut"},0).to(p.position,{duration:2,x:0,y:0,z:_e.y.nS.X.z,ease:"power3.inOut"},0).to(e.position,{duration:1.8,y:0,ease:"power2.inOut"},.5).set(o,{static:0,smooth:0}).set(a,{static:0,smooth:0}).set(s,{static:0,smooth:0}).set(l,{static:0,smooth:0})}(),0):"intro=>globe:start"===h||"intro=>homepage:start"===h?setTimeout((function(){e.add(void ve.p8.timeline({onUpdate:function(){Se.Z.emit("webgl:transition:globe-rotation")}}).set(t.current.scale,{x:g,y:g,z:g,ease:"power3.inOut"},0).fromTo(t.current.rotation,{y:2*-Math.PI},{duration:7,y:0,ease:"power2.inOut"},0).fromTo(t.current.position,{y:-2},{duration:7,y:0,ease:"power2.inOut"},0),0).addLabel("intro:rotation:end")}),10):"timeline=>solution:start"===h?setTimeout((function(){return e.add(x(!0),0)}),50):"intro=>solution:start"===h&&setTimeout((function(){e.add(function(){var e=ve.p8.timeline({onUpdate:function(){Se.Z.emit("webgl:transition:globe-rotation")}});t.current.scale.set(m.scale,m.scale,m.scale),t.current.position.y=m.y,e.fromTo(t.current.position,{y:m.y-2},{duration:6.3,y:m.y,ease:"power1.inOut"},0)}(),0).addLabel("intro:rotation:end")}),10)}),[h]),{isTransitioning:f}}var dr=10,hr=20;function fr(e){var t=e.isTransitioning,n=e.currentView,i=e.defaultViewportBounds,o=e.SOLUTION_MAP_SIZE,a=(0,ye.mv)("refValues"),s=(0,ye.mv)("responsiveSolutionValues"),u=(0,ye.mv)("isRafActive"),c=(0,ye.s6)("setBestPracticesHoverData"),d=(0,ye.s6)("setSolutionsOverviewHoverData"),h="mobile"===(0,ye.s6)("responsiveVersion"),f=(0,r.useRef)({smooth:1}),p=(0,r.useRef)({static:0,smooth:0}),m=(0,r.useRef)({static:0,smooth:0}),g=(0,r.useRef)({static:0,smooth:0}),v=(0,r.useRef)({up:0,static:0,smooth:0}),y=(0,r.useRef)({smooth:0});return(0,r.useEffect)((function(){var e=function(e){t||"solution"===n&&(c(!1),h?(e.first&&d(!1),m.current.static-=.0096*e.delta[0]):(m.current.static-=.0016*e.delta[0],g.current.static+=.0016*e.delta[1],v.current.static+=5e-4*e.delta[0]))},r=function(e){if(!t&&"solution"===n){c(!1);var r=p.current.static+l.MathUtils.clamp(15e-5*-e.delta[1],-.1,.1);p.current.static=l.MathUtils.clamp(r,0,1)}};return Se.Z.on("webgl:gestures:drag",e),Se.Z.on("webgl:gestures:wheel",r),function(){Se.Z.off("webgl:gestures:drag",e),Se.Z.off("webgl:gestures:wheel",r)}}),[n,t]),ne((function(){u&&"solution"===n&&(!function(){if(h){var e=i,t=Math.abs((e.width-o.width*s.scale)/2);m.current.static=l.MathUtils.clamp(m.current.static,-t,t)}else{var n=i,r=(n.width-n.width*(f.current.smooth/hr))/2;m.current.static=l.MathUtils.clamp(m.current.static,-r,r);var a=(n.height-n.height*(f.current.smooth/hr))/2;a<0&&(a=0),g.current.static=l.MathUtils.clamp(g.current.static,-a,a)}}(),p.current.smooth=l.MathUtils.lerp(p.current.smooth,p.current.static,.1),f.current.smooth=l.MathUtils.lerp(dr,hr,1-p.current.smooth),y.current.smooth=1-l.MathUtils.smoothstep(f.current.smooth,dr,hr),a.solution.normalizedZoom.smooth=y.current.smooth,m.current.smooth=l.MathUtils.lerp(m.current.smooth,m.current.static,.1),g.current.smooth=l.MathUtils.lerp(g.current.smooth,g.current.static,.1),v.current.static=l.MathUtils.lerp(0,v.current.static,.1),v.current.smooth=l.MathUtils.lerp(0,v.current.smooth+v.current.static,.93),v.current.smooth=l.MathUtils.clamp(v.current.smooth,-.1,.1))}),4),{solutionZoomInterpolation:p.current,solutionZoom:f.current,solutionShiftX:m.current,solutionShiftY:g.current,solutionRotationY:v.current,solutionNormalizedZoom:y.current}}var pr=3.3,mr=1;function gr(e){var t=e.isTransitioning,n=e.currentView,i=(0,ye.mv)("refValues").timeline,o=(0,ye.mv)("defaultViewportBounds"),a=(0,ye.mv)("isRafActive"),s="mobile"===(0,ye.s6)("responsiveVersion"),u=(0,ye.s6)("dotHoverData"),c=(0,ye.s6)("setDotHoverData"),d=(0,ye.s6)("timelineBubbleHoverData"),h=(0,ye.s6)("setTimelineBubbleHoverData"),f=(0,ye.s6)("setMobileTimelineDotHover"),p=(0,ye.s6)("timelineStatisticHoverData"),m=(0,ye.s6)("setTimelineStatisticHoverData"),g=function(){u&&c(!1),d&&(h(!1),f(!1)),p&&m(!1)};return(0,r.useEffect)((function(){var e=function(e){t||"timeline"===n&&(e.first&&g(),i.center.static+=s?25e-5*e.delta[1]:3e-4*e.delta[0]*l.MathUtils.lerp(.1,1,i.selection.static))},r=function(e){if(!t&&!s&&"timeline"===n){g();var r=l.MathUtils.clamp(24e-5*e.delta[1],-.06,.06)*l.MathUtils.lerp(.4,.05,1-i.selection.static);i.selection.static=l.MathUtils.clamp(i.selection.static-r,.05,1);var o=l.MathUtils.clamp(24e-5*e.delta[0],-.06,.06)*l.MathUtils.lerp(.4,.05,1-i.selection.static);i.center.static-=o}};return Se.Z.on("webgl:gestures:drag",e),Se.Z.on("webgl:gestures:wheel",r),function(){Se.Z.off("webgl:gestures:drag",e),Se.Z.off("webgl:gestures:wheel",r)}}),[n,t,u,d,p]),ne((function(){a&&("timeline"===n&&(s||(i.selection.smooth=l.MathUtils.lerp(i.selection.smooth,i.selection.static,.1),i.width.smooth=i.width.responsive/i.selection.smooth,i.globalGroupPosition.x=(i.center.smooth-.5)*i.width.smooth),function(){var e=i.center.static,t=i.selection.static;i.center.static=s?l.MathUtils.clamp(e,0,1):l.MathUtils.clamp(e,0+.5*t,1-.5*t)}(),i.center.smooth=l.MathUtils.lerp(i.center.smooth,i.center.static,.1)),s&&(i.globalGroupPosition.y=l.MathUtils.lerp(.35*o.height,i.mobile.height,1-i.center.smooth)))}),4),{timelineCenter:i.center,timelineSelection:i.selection,timelineWidth:i.width}}var vr={width:7.8,height:3.7};function yr(){var e=(0,ye.fq)().organized,t=(0,r.useRef)(),n=(0,r.useRef)(!1),i=te().camera,o=(0,ye.mv)("currentView"),a=(0,ye.mv)("priorityZoomThreshold"),s=(0,ye.mv)("setPriorityZoomThreshold"),u=(0,ye.mv)("viewportBounds"),c=(0,ye.mv)("defaultViewportBounds"),d=(0,ye.mv)("setResponsiveGlobeScale"),h=(0,ye.mv)("refValues"),f=(0,ye.mv)("setResponsiveSolutionValues"),p=(0,ye.mv)("isRafActive"),m="mobile"===(0,ye.s6)("responsiveVersion"),g=(0,ye.s6)("dotHoverData"),v=(0,ye.s6)("globeBubbleHoverData"),y=(0,ye.mv)("refValues").timeline,_=(0,ye.mv)("refValues").globe,b=(0,ye.rm)(),x=b.isTransitioning,w=b.currentTransition,S=function(e){var t=e.isTransitioning,n=e.currentView,i=e.priorityZoomThreshold,o=e.setPriorityZoomThreshold,a="mobile"===(0,ye.s6)("responsiveVersion"),s=(0,ye.s6)("dotHoverData"),u=(0,ye.s6)("setDotHoverData"),c=(0,ye.mv)("refValues").globe,d=(0,ye.mv)("isRafActive"),h=a?pr:mr,f=(0,r.useRef)({static:new l.Vector3,smooth:new l.Vector3});return(0,r.useEffect)((function(){var e=function(e){t||"globe"===n&&(s&&u(!1),f.current.static.y+=.0016*e.delta[0]*h,f.current.static.x+=.0016*e.delta[1]*h,f.current.static.x=l.MathUtils.clamp(f.current.static.x,-1,1))},r=function(e){if(!t&&!a&&"globe"===n){s&&u(!1);var r=c.zoom.static+l.MathUtils.clamp(.006*-e.delta[1],-.5,.5);c.zoom.static=l.MathUtils.clamp(r,0,8);var d=c.zoom.static,h=8/3,f=1;d>0&&d<=1*h?f=1:d>1*h&&d<=2*h?f=2:d>2*h&&(f=3),i!==f&&o(f)}};return Se.Z.on("webgl:gestures:drag",e),Se.Z.on("webgl:gestures:wheel",r),function(){Se.Z.off("webgl:gestures:drag",e),Se.Z.off("webgl:gestures:wheel",r)}}),[n,t,i]),ne((function(){d&&("globe"!==n&&"homepage"!==n||(f.current.smooth.lerp(f.current.static,.1),c.zoom.smooth=l.MathUtils.lerp(c.zoom.smooth,c.zoom.static,.1)))}),4),{globeRotation:f.current}}({isDragging:n,isTransitioning:x,currentView:o,priorityZoomThreshold:a,setPriorityZoomThreshold:s}),D=S.globeRotation,A=gr({isDragging:n,isTransitioning:x,currentView:o}),E=A.timelineSelection,M=A.timelineWidth,C=fr({isDragging:n,isTransitioning:x,currentView:o,defaultViewportBounds:c,SOLUTION_MAP_SIZE:vr}),T=C.solutionZoomInterpolation,P=C.solutionZoom,R=C.solutionShiftX,k=C.solutionShiftY,O=C.solutionRotationY,L=C.solutionNormalizedZoom,F=m?_e.y.yK.L.a:_e.y.yK.L.g;cr({group:t,globeRotation:D,timelineValues:y,setPriorityZoomThreshold:s,defaultViewportBounds:c,SOLUTION_MAP_SIZE:vr,solutionShiftX:R,solutionShiftY:k,solutionZoom:P,solutionZoomInterpolation:T,isMobile:m});var I=(0,r.useMemo)((function(){return Object.keys(e).map((function(t){var n=e[t];return(0,be.jsx)(Qe,{data:n,type:n.filters.type,category:n.filters.category,color:ot[n.filters.category]},t)}))}),[]);return(0,r.useEffect)((function(){var e=function(){n.current=!0},t=function(){n.current=!1};return Se.Z.on("webgl:gestures:drag-start",e),Se.Z.on("webgl:gestures:drag-end",t),function(){Se.Z.off("webgl:gestures:drag-start",e),Se.Z.off("webgl:gestures:drag-end",t)}}),[]),(0,Ue.bt)((function(){var e=l.MathUtils.clamp(c.width/4.5,0,1);d(e),"globe"===o&&t.current.scale.set(e,e,e);var n=1,r=0;if(m){n=c.width/(.25*vr.width);var i=.5*c.height;vr.height*n>i&&(n=i/vr.height),r=.5*c.height*.3}else n=c.width/vr.width*.9;f({y:r,scale:n}),"solution"===o&&(t.current.position.y=r,t.current.scale.set(n,n,n)),M.responsive=.9*u.width,M.smooth=M.responsive/E.smooth,m&&(h.timeline.mobile.height=8*u.height,h.timeline.mobile.width=l.MathUtils.clamp(.7*c.width,0,2.4))}),[o,c]),ne((function(){p&&(x&&"homepage=>globe:start"!==w||("homepage"===o?(D.static.y+=F,t.current.rotation.y=D.smooth.y):"globe"===o?(n.current||g||v||(D.static.y+=F),t.current.rotation.x=D.smooth.x,t.current.rotation.y=D.smooth.y,t.current.position.z=_.zoom.smooth):"solution"===o&&(i.position.x=R.smooth,i.position.y=k.smooth,i.position.z=P.smooth,t.current.rotation.x=.5*-L.smooth,t.current.rotation.y=O.smooth)))}),5),(0,be.jsxs)(be.Fragment,{children:["intro"===o&&(0,be.jsx)(Qn,{}),(0,be.jsxs)("group",{ref:t,children:[I,(0,be.jsx)(st,{}),(0,be.jsx)(Pn,{}),(0,be.jsx)(it,{}),(0,be.jsx)(lr,{}),(0,be.jsx)(Xn,{})]})]})}function _r(){var e=(0,r.useRef)(),t=(0,Ae.W)("timelineDotMask"),n=(0,ye.fs)("currentState"),i=(0,ye.fs)("setCurrentState"),o=(0,ye.mv)("isRafActive"),a=(0,ye.rm)().currentTransition,s=(0,r.useMemo)((function(){return["/images/webgl/intro/video1.mp4","/images/webgl/intro/video2.mp4","/images/webgl/intro/video3.mp4"].map((function(e){var t=document.createElement("video"),n=new l.VideoTexture(t);return t.addEventListener("loadedmetadata",(function(){n.image=t,n.needsUpdate=!0})),t.style.display="none",t.crossOrigin="anonymous",t.autoplay=!1,t.controls=!1,t.muted=!0,t.loop=!0,t.playsInline=!0,t.preload="auto",t.src=e,t.load(),{video:t,txt:n}}))}),[]),u=(0,r.useMemo)((function(){for(var e=[],t=[],n=[],r=[],i=0;i<5e4;i++){var o=Math.sqrt(Math.random()),a=Math.random()*(2*Math.PI),s=Math.cos(a)*o,l=Math.sin(a)*o;n.push(s,l,0),t.push(2*Math.random()),e.push(.8*Math.random()),r.push(Math.random()<.016?1:0)}return{positions:new Float32Array(n),delays:new Float32Array(e),sizes:new Float32Array(t),finalStepScale:new Float32Array(r)}}),[]),c=(0,r.useMemo)((function(){return{vertexShader:"#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nfloat sineOut(float t) {\n  return sin(t * HALF_PI);\n}\n\nfloat exponentialIn(float t) {\n  return t == 0.0 ? t : pow(2.0, 10.0 * (t - 1.0));\n}\n\nprecision highp float;\n#define GLSLIFY 1\n\nattribute float aSize;\nattribute float aDelay;\nattribute float aFinalStepScale;\n\nuniform float uTime;\nuniform float uGlobalScale;\nuniform float uMaxDelay;\nuniform float uPointScale;\nuniform float uFinalStepProgress;\nuniform float uEnhanceTransitionProgress;\nuniform float uIntroProgress;\nuniform float uIntroAlpha;\n\nvarying vec2 vPosition;\nvarying float vSize;\nvarying float vFinalStepAlpha;\nvarying float vRemapIntro;\nvarying float vRemapIntroAlpha;\n\nvoid main(){\n  float t = uTime * 0.15;\n\n  /** LAST STEP */\n  float fsp = smoothstep(0.0 + aDelay, 1.0 + aDelay, uFinalStepProgress * (1.0 + uMaxDelay));\n  float fss = mix(1.0, aFinalStepScale * aSize, fsp);\n  float fsa = mix(1.0, (aDelay / uMaxDelay) * aFinalStepScale, fsp);\n\n  /** ENHANCE  TRANSITION ON VIDEO */\n  float netp = smoothstep(0.0 + aDelay * 0.12, 1.0 + aDelay * 0.12, uEnhanceTransitionProgress * (1.0 + uMaxDelay * 0.12));\n\n  /** CIRCLE VIDEOS */\n  float inverseIntro =  1.0 - uIntroProgress;\n  float remapIntro = smoothstep(0.0 + aDelay * 0.15, 1.0 + aDelay * 0.15, inverseIntro * (1.0 + uMaxDelay * 0.15));\n  float remapIntroAlpha = smoothstep(0.0 + aDelay * 4.0, 1.0 + aDelay * 4.0, uIntroAlpha * (1.0 + uMaxDelay * 4.0));\n\n  vec3 noisePos = position;\n  noisePos.x += (sin(t + 5.0 + aDelay * 4.0) + cos(0.2 * t + sin(2.1 * t * aDelay * 8.0))) * 0.06 * uFinalStepProgress * (1.0 + (remapIntro) * 1.9);\n  noisePos.y += (sin(t * 1.2 + aDelay * 8.0) + cos(0.3 * t + sin(2.2 * t * aDelay * 3.0))) * 0.09 * uFinalStepProgress * (1.0 + (remapIntro) * 1.9);\n  noisePos.z -= aDelay * fsp * (1.0 - aFinalStepScale) * 5.0;\n  noisePos.z += (netp * 40.0);\n\n  vec3 final = noisePos;\n\n  /** SCALE*/\n  float scaleProgress = smoothstep(0.0 + aDelay, 1.0 + aDelay, uGlobalScale * (1.0 + uMaxDelay));\n  final *= scaleProgress;\n\n  // final.y -= (inverseIntro) * smoothstep(1.0, -1.0, final.y) * 2.5;\n  final.x *= 1.0 + sineOut(remapIntro) * 2.0;\n  final.y *= 1.0 + sineOut(remapIntro) * 2.0;\n\n  gl_PointSize = uPointScale * fss;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(final, 1.0);\n\n  vPosition = noisePos.xy;\n  vSize = aSize;\n  vFinalStepAlpha = fsa;\n  vRemapIntro = remapIntro;\n  vRemapIntroAlpha = exponentialIn(remapIntroAlpha);\n\n}\n",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uVideoMap;\nuniform float uMixColor;\nuniform float uMaxDelay;\nuniform float uIntroProgress;\nuniform float uIntroAlpha;\nvarying float vRemapIntro;\nvarying float vRemapIntroAlpha;\n\nvarying vec2 vPosition;\nvarying float vSize;\nvarying float vFinalStepAlpha;\n\nvoid main(){\n  vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);\n\n  float c = distance(vec2(0.5), uv);\n  c = 1.0 - smoothstep(0.35, 0.5, c);\n\n  vec3 color = vec3(0.5) + vSize * 0.5;\n\n  vec2 cUv = (vPosition + 1.0) * 0.5;\n  cUv += 2.0 * (uv - 0.5) * (0.004 / vSize);\n  vec3 mapColor = texture2D(uVideoMap, cUv).rgb;\n\n  vec3 final = mix(color, mapColor, uMixColor);\n  float a = c * 0.9 * vFinalStepAlpha * (vRemapIntroAlpha);\n\n  gl_FragColor = vec4(final, a);\n}\n",uniforms:{uProgress:{value:0},uTime:{value:0},uMask:{value:t},uVideoMap:{value:null},uGlobalScale:{value:.8},uMaxDelay:{value:.8},uMixColor:{value:.3},uPointScale:{value:3},uFinalStepProgress:{value:1},uEnhanceTransitionProgress:{value:0},uIntroProgress:{value:0},uIntroAlpha:{value:0}}}}),[]),d=function(e,t){var n=ve.p8.timeline({onComplete:function(){i(t)}}),r="power2.inOut",o=e>0?2:0;e>0&&n.to(c.uniforms.uGlobalScale,{duration:2,value:.7,ease:r},0).to(c.uniforms.uPointScale,{duration:2,value:3,ease:r},0).to(c.uniforms.uMixColor,{duration:1,value:0},1).to(c.uniforms.uFinalStepProgress,{duration:2,value:1,ease:r},0),n.addLabel("enterVideo",o).call((function(e){c.uniforms.uVideoMap.value=s[e].txt,s[e].video.play(),e>0&&s[e-1].video.play()}),[e],"enterVideo").to(c.uniforms.uFinalStepProgress,{duration:2,value:0,ease:r},"enterVideo+=0.05").to(c.uniforms.uMixColor,{duration:1,value:1},"enterVideo+=0.05").to(c.uniforms.uGlobalScale,{duration:2,value:1,ease:r},"enterVideo+=0.05").to(c.uniforms.uPointScale,{duration:2.4,value:7,ease:r},"enterVideo+=0.05").set({},{},"+=4")};return(0,r.useEffect)((function(){console.log("currentState:",n),"initial"===n?ve.p8.timeline({onUpdate:function(){return e.current.updateMatrix()}}).to(c.uniforms.uIntroProgress,{duration:5,value:1,ease:"linear"}).to(c.uniforms.uIntroAlpha,{duration:5.8,value:1,ease:"linear"},0):"step1"===n?d(0,"step2"):"step2"===n?d(1,"step3"):"step3"===n?d(2,"step4"):"step4"===n&&function(){var e="power2.inOut";ve.p8.timeline().to(c.uniforms.uGlobalScale,{duration:2,value:.8,ease:e},0).to(c.uniforms.uMixColor,{duration:2,value:.3,ease:e},0).to(c.uniforms.uPointScale,{duration:2,value:3,ease:e},0).to(c.uniforms.uFinalStepProgress,{duration:2,value:1,ease:e},0)}()}),[n]),(0,r.useEffect)((function(){"intro=>globe:start"!==a&&"intro=>homepage:start"!==a||ve.p8.to(c.uniforms.uEnhanceTransitionProgress,{duration:3,value:1,ease:"power1.in"})}),[a]),ne((function(e,t){o&&(c.uniforms.uTime.value+=t+.05*(1-c.uniforms.uIntroProgress.value))})),(0,be.jsxs)("points",{ref:e,position:[0,.2,0],matrixAutoUpdate:!1,frustumCulled:!1,children:[(0,be.jsxs)("bufferGeometry",{children:[(0,be.jsx)("bufferAttribute",{attach:"attributes-position",count:u.positions.length/3,array:u.positions,itemSize:3}),(0,be.jsx)("bufferAttribute",{attach:"attributes-aSize",count:u.sizes.length,array:u.sizes,itemSize:1}),(0,be.jsx)("bufferAttribute",{attach:"attributes-aDelay",count:u.delays.length,array:u.delays,itemSize:1}),(0,be.jsx)("bufferAttribute",{attach:"attributes-aFinalStepScale",count:u.finalStepScale.length,array:u.finalStepScale,itemSize:1})]}),(0,be.jsx)("shaderMaterial",{args:[c],transparent:!0,depthWrite:!1,depthTesT:!1})]})}function br(){var e=_e.y.mf.F,t=(0,ye.mv)("currentView");return(0,be.jsx)("group",{position:[e.x,e.y,e.z],children:"intro"===t&&(0,be.jsx)(_r,{})})}var xr=r.memo((function(){return(0,be.jsx)("div",{className:o().root,id:"#canvas-container",children:(0,be.jsx)(Be,{})})})),wr=n(86010),Sr=n(18331),Dr=n.n(Sr),Ar=n(50029),Er=n(87794),Mr=n.n(Er),Cr=n(78336),Tr=n.n(Cr),Pr=n(60577),Rr=function(){var e=(0,Ar.Z)(Mr().mark((function e(t){var n,r;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr.h.getState().introTl&&Pr.h.getState().introTl.kill(),n=ve.ZP.utils.selector(t),(r=ve.ZP.timeline()).to(n(".intro__header div"),{autoAlpha:0,duration:1.7,stagger:.05,ease:"power2.out"}),e.next=6,r.to(n(".intro__button"),{y:"-=20",autoAlpha:0,duration:.6,ease:"power2.out"},"<");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kr=function(e,t){ve.ZP.registerPlugin(Tr());var n=ve.ZP.timeline(),r="mobile"===Pr.h.getState().responsiveVersion;"step2"===t?e.innerHTML="\n<span>Land use change, forestry, and agriculture</span>\n<span>are the main drivers of species and habitat loss</span>\n<span>and account for nearly 25% of all climate emissions.</span>\n":"step3"===t?e.innerHTML=r?"\n<span>By restoring and protecting forests, grasslands,</span>\n<span>and wetlands and reforming agriculture and</span>\n<span>forestry practices, we can save species</span>\n<span>and help neutralize our carbon footprint.</span>\n":"\n  <span>By restoring and protecting forests, grasslands, and wetlands</span>\n  <span>and reforming agriculture and forestry practices,</span>\n  <span>we can save species and help neutralize our carbon footprint.</span>\n":"step4"===t&&(e.innerHTML="\n  <span>Welcome to What Is Missing?</span>\n  <span>EXPLORE stories of the natural world.</span>\n  <span>learn about SOLUTIONS</span>\n  <span>and SHARE A MEMORY.</span>\n");var i=Array.from(e.children).map((function(e){return new(Tr())(e,{type:"chars"}).chars}));n.set(i,{autoAlpha:0}),n.set(e,{autoAlpha:1}),n.addLabel("initial"),i.forEach((function(e,t){n.to(e,{autoAlpha:1,duration:.4,stagger:.035,ease:"power2.out"},"initial")}))},Or=function(e,t){var n=ve.ZP.timeline({onComplete:function(){"endIntro"===t?Pr.h.setState({isIntroVisible:!1}):"endIntro2"!==t&&kr(e,t)}}),r=ve.ZP.utils.selector(e)("span");n.addLabel("initial"),r.forEach((function(e,t){n.to(e.children,{autoAlpha:0,duration:.4,stagger:.035,ease:"power2.out"},"initial")})),n.set(e,{autoAlpha:0})},Lr=n(49568);var Fr=function(){var e=(0,ye.mv)("currentView"),t="mobile"===(0,ye.s6)("responsiveVersion"),n=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useRef)(null),a=(0,r.useState)(new Audio("/sounds/intro-audio.mp3")),s=a[0],l=(a[1],(0,ye._j)()),u=(0,ye.fs)("currentState"),c=(0,ye.fs)("setCurrentState"),d=(0,ye.s6)("router"),h=(0,ye.rm)().actions.setCurrentTransition;(0,Ue.bt)((function(){"intro"===e&&function(e){ve.ZP.registerPlugin(Tr());var t=ve.ZP.utils.selector(e),n=ve.ZP.timeline({delay:3});Pr.h.setState({introTl:n});var r=new(Tr())(t(".intro__header"),{type:"chars"}).chars;n.set(t(".intro__button"),{y:"+=30"}),n.set(t(".intro__header"),{autoAlpha:1}),n.set(r,{autoAlpha:0}),n.to(r,{autoAlpha:1,duration:1.7,stagger:.05,ease:"power2.out"}),n.to(t(".intro__header"),{y:0,duration:1.8,ease:"power4.out"},"<"),n.to(t(".intro__button"),{y:0,autoAlpha:1,duration:1.8,ease:"power2.out"},"-=1")}(n.current)}),[e]);var f=function(){var e,r,a,u;e=t&&"/"===(null===d||void 0===d?void 0:d.pathname)?"intro=>globe:start":"/"===(null===d||void 0===d?void 0:d.pathname)?"intro=>homepage:start":"intro=>solution:start",h(e),r=o.current,ve.ZP.timeline().to(r,{y:-20,autoAlpha:0,duration:1.8,ease:"power2.out"}),Or(i.current,"endIntro"),Rr(n.current),a=s,u=function(){return s.pause()},ve.ZP.timeline({onComplete:u}).to(a,{volume:0,duration:1.8,ease:"power2.out"}),l()};return(0,r.useEffect)((function(){"initial"!==u&&"animals"!==u&&("step1"===u?(kr(i.current,u),function(e){var t=ve.ZP.timeline();t.set(e,{autoAlpha:0,y:20}),t.to(e,{y:0,autoAlpha:1,duration:1.8,ease:"power2.out"})}(o.current)):Or(i.current,u),"step4"===u&&setTimeout((function(){Or(i.current,"endIntro2"),function(e){var t=ve.ZP.timeline(),n=ve.ZP.utils.selector(e)(".intro__button");t.set(n,{autoAlpha:0,y:20}),t.to(n,{autoAlpha:1,y:0,duration:1.2,ease:"power2.out"})}(n.current)}),7e3))}),[u]),(0,be.jsxs)("div",{className:Dr().intro,ref:n,children:[(0,be.jsx)("h1",{className:(0,wr.Z)(Dr().introHeader,"hide-fouc","intro__header"),children:"What is Missing?"}),(0,be.jsx)("button",{type:"button",onClick:function(){"step4"===u?f():(c("step1"),Rr(n.current),s.play())},className:(0,wr.Z)(Dr().introButton,"hide-fouc","intro__button"),children:"Enter"}),(0,be.jsxs)("p",{className:Dr().storyContainer,"aria-hidden":"initial"===u||"animals"===u,ref:i,children:[(0,be.jsx)("span",{children:"We are witnessing the 6th mass extinction"}),(0,be.jsx)("span",{children:"in the history of the planet."}),(0,be.jsx)("span",{children:"By 2100 50% of all species may face extinction."})]}),(0,be.jsx)("div",{className:(0,wr.Z)(Dr().skipButtonContainer,"intro__skip-button-container"),ref:o,children:(0,be.jsxs)("button",{type:"button",className:(0,wr.Z)(Dr().skipButton,"intro__skip-button"),onClick:f,children:["Skip Intro"," ",(0,be.jsx)("div",{className:Dr().arrowContainer,children:(0,be.jsx)(Lr.ol,{})})]})})]})},Ir=n(74129),Nr=n(41806),Br=n.n(Nr),jr=n(89343);var zr=function(e){var t,n,i,o,a=e.initialData,s=e.allData,l=e.setSelectedDot,u=(0,r.useState)(a),c=u[0],d=u[1],h=(0,r.useState)(0),f=h[0],p=h[1],m=(0,r.useState)("/images/placeholders/missingDot.png"),g=m[0],v=m[1],y=(0,ye.dz)().width;return(0,r.useEffect)((function(){d(a),console.log(a)}),[a]),(0,r.useEffect)((function(){var e=s.findIndex((function(e){return(null===e||void 0===e?void 0:e.slug)===(null===c||void 0===c?void 0:c.slug)}));p(e)}),[c]),(0,r.useEffect)((function(){var e,t;null!==c&&void 0!==c&&null!==(e=c.headerImage)&&void 0!==e&&e.url?v("".concat(null===c||void 0===c||null===(t=c.headerImage)||void 0===t?void 0:t.url,"?w=250&h=250&q=70&fit=fill")):v("/images/placeholders/missingDot.png")}),[c]),c?(0,be.jsx)("div",{className:(0,wr.Z)(Br().container,"timeline__modal-container"),children:(0,be.jsxs)("div",{className:(0,wr.Z)(Br().grid,"timeline__modal-grid"),children:[(0,be.jsx)("div",{className:(0,wr.Z)(Br().imageContainer,"timeline__modal-image-container")}),(0,be.jsxs)("div",{className:(0,wr.Z)(Br().mobileImageContainer,"timeline__modal-mobile-image-container"),children:[(0,be.jsx)("div",{className:(0,wr.Z)(Br().mobileImageMask,"timeline__modal-mobile-image-mask"),children:(0,be.jsx)("img",{className:(0,wr.Z)(Br().mobileImage,"timeline__modal-mobile-image"),src:g,alt:c.title})}),(0,be.jsx)("span",{className:"timeline__outer-circle","aria-hidden":!0})]}),(0,be.jsxs)("div",{className:Br().content,children:[(0,be.jsx)("button",{type:"button",className:(0,wr.Z)(Br().closeButton,"timeline__modal-close","hide-fouc"),onClick:function(){return(0,jr.Zo)()},children:(0,be.jsx)(Lr.x8,{})}),(0,be.jsxs)("div",{className:(0,wr.Z)(Br().copyContainer,"timeline__modal-copy-container","hide-fouc"),children:[(0,be.jsx)("h2",{className:Br().title,children:c.title}),(0,be.jsx)("p",{className:Br().timeSpan,children:c.displayYear}),(0,be.jsx)("div",{className:Br().contentContainer,children:(0,Ir.h)(c.paragraphText.json)}),((null===c||void 0===c||null===(t=c.credits)||void 0===t?void 0:t.json)||(null===c||void 0===c||null===(n=c.references)||void 0===n?void 0:n.json))&&(0,be.jsxs)("div",{className:Br().citationContainer,children:[(null===c||void 0===c||null===(i=c.references)||void 0===i?void 0:i.json)&&(0,be.jsx)("cite",{children:(0,Ir.h)(null===c||void 0===c?void 0:c.references.json)}),(null===c||void 0===c||null===(o=c.credits)||void 0===o?void 0:o.json)&&(0,be.jsx)("cite",{children:(0,Ir.h)(null===c||void 0===c?void 0:c.credits.json)})]})]}),(0,be.jsxs)("div",{className:(0,wr.Z)(Br().navArrowContainer,"timeline__modal-nav-arrow-container"),children:[(0,be.jsxs)("button",{type:"button",className:(0,wr.Z)(Br().arrow,Br().downArrow,f===s.length-1&&Br()["arrow--inactive"]),onClick:function(){return function(){var e=s.findIndex((function(e){return e.slug===c.slug})),t=y<901;e<s.length-1&&(0,jr.UX)("down",e+1,(function(){return l(s[e+1].slug)}),{mobile:t})}()},children:[(0,be.jsx)(Lr.D1,{}),(0,be.jsx)("span",{children:"Previous entry"})]}),(0,be.jsxs)("button",{type:"button",className:(0,wr.Z)(Br().arrow,Br().upArrow,0===f&&Br()["arrow--inactive"]),onClick:function(){return function(){var e=s.findIndex((function(e){return e.slug===c.slug})),t=y<901;e>0&&(0,jr.UX)("up",e-1,(function(){return l(s[e-1].slug)}),{mobile:t})}()},children:[(0,be.jsx)(Lr.D1,{}),(0,be.jsx)("span",{children:"Next entry"})]})]})]})]})}):null},Ur=n(41664),Hr=n.n(Ur),Gr=n(69590),Vr=n.n(Gr),Wr=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Zr}(e)}(e)};var Zr="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function $r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Yr((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function qr(e,t,n){return e.concat(t).map((function(e){return $r(e,n)}))}function Yr(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||qr,n.isMergeableObject=n.isMergeableObject||Wr;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=$r(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=Yr(e[i],t[i],n):r[i]=$r(t[i],n)})),r}(e,t,n):$r(t,n)}Yr.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Yr(e,n,t)}),{})};var Kr=Yr,Xr=n(96539),Qr=(0,n(77765).Z)(Object.getPrototypeOf,Object),Jr=n(75720),ei=Function.prototype,ti=Object.prototype,ni=ei.toString,ri=ti.hasOwnProperty,ii=ni.call(Object);var oi=function(e){if(!(0,Jr.Z)(e)||"[object Object]"!=(0,Xr.Z)(e))return!1;var t=Qr(e);if(null===t)return!0;var n=ri.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ni.call(n)==ii},ai=n(11179);var si=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},li=n(19541),ui=n(60076),ci=Object.prototype.hasOwnProperty;var di=function(e,t,n){var r=e[t];ci.call(e,t)&&(0,ui.Z)(r,n)&&(void 0!==n||t in e)||(0,li.Z)(e,t,n)};var hi=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?(0,li.Z)(n,s,l):di(n,s,l)}return n},fi=n(38855);var pi=function(e,t){return e&&hi(t,(0,fi.Z)(t),e)},mi=n(9643),gi=n(24642),vi=n(43959);var yi=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},_i=Object.prototype.hasOwnProperty;var bi=function(e){if(!(0,gi.Z)(e))return yi(e);var t=(0,vi.Z)(e),n=[];for(var r in e)("constructor"!=r||!t&&_i.call(e,r))&&n.push(r);return n},xi=n(17922);var wi=function(e){return(0,xi.Z)(e)?(0,mi.Z)(e,!0):bi(e)};var Si=function(e,t){return e&&hi(t,wi(t),e)},Di=n(34701);var Ai=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Ei=n(70135);var Mi=function(e,t){return hi(e,(0,Ei.Z)(e),t)},Ci=n(95061),Ti=n(41876),Pi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,Ci.Z)(t,(0,Ei.Z)(e)),e=Qr(e);return t}:Ti.Z,Ri=Pi;var ki=function(e,t){return hi(e,Ri(e),t)},Oi=n(99312),Li=n(91122);var Fi=function(e){return(0,Li.Z)(e,wi,Ri)},Ii=n(17194),Ni=Object.prototype.hasOwnProperty;var Bi=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ni.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ji=n(44857);var zi=function(e){var t=new e.constructor(e.byteLength);return new ji.Z(t).set(new ji.Z(e)),t};var Ui=function(e,t){var n=t?zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Hi=/\w*$/;var Gi=function(e){var t=new e.constructor(e.source,Hi.exec(e));return t.lastIndex=e.lastIndex,t},Vi=n(58878),Wi=Vi.Z?Vi.Z.prototype:void 0,Zi=Wi?Wi.valueOf:void 0;var $i=function(e){return Zi?Object(Zi.call(e)):{}};var qi=function(e,t){var n=t?zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Yi=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return zi(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Ui(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qi(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Gi(e);case"[object Symbol]":return $i(e)}},Ki=Object.create,Xi=function(){function e(){}return function(t){if(!(0,gi.Z)(t))return{};if(Ki)return Ki(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Qi=Xi;var Ji=function(e){return"function"!=typeof e.constructor||(0,vi.Z)(e)?{}:Qi(Qr(e))},eo=n(93217),to=n(33182);var no=function(e){return(0,Jr.Z)(e)&&"[object Map]"==(0,Ii.Z)(e)},ro=n(17182),io=n(56790),oo=io.Z&&io.Z.isMap,ao=oo?(0,ro.Z)(oo):no;var so=function(e){return(0,Jr.Z)(e)&&"[object Set]"==(0,Ii.Z)(e)},lo=io.Z&&io.Z.isSet,uo=lo?(0,ro.Z)(lo):so,co="[object Arguments]",ho="[object Function]",fo="[object Object]",po={};po[co]=po["[object Array]"]=po["[object ArrayBuffer]"]=po["[object DataView]"]=po["[object Boolean]"]=po["[object Date]"]=po["[object Float32Array]"]=po["[object Float64Array]"]=po["[object Int8Array]"]=po["[object Int16Array]"]=po["[object Int32Array]"]=po["[object Map]"]=po["[object Number]"]=po["[object Object]"]=po["[object RegExp]"]=po["[object Set]"]=po["[object String]"]=po["[object Symbol]"]=po["[object Uint8Array]"]=po["[object Uint8ClampedArray]"]=po["[object Uint16Array]"]=po["[object Uint32Array]"]=!0,po["[object Error]"]=po[ho]=po["[object WeakMap]"]=!1;var mo=function e(t,n,r,i,o,a){var s,l=1&n,u=2&n,c=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!(0,gi.Z)(t))return t;var d=(0,eo.Z)(t);if(d){if(s=Bi(t),!l)return Ai(t,s)}else{var h=(0,Ii.Z)(t),f=h==ho||"[object GeneratorFunction]"==h;if((0,to.Z)(t))return(0,Di.Z)(t,l);if(h==fo||h==co||f&&!o){if(s=u||f?{}:Ji(t),!l)return u?ki(t,Si(s,t)):Mi(t,pi(s,t))}else{if(!po[h])return o?t:{};s=Yi(t,h,l)}}a||(a=new ai.Z);var p=a.get(t);if(p)return p;a.set(t,s),uo(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):ao(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var m=c?u?Fi:Oi.Z:u?wi:fi.Z,g=d?void 0:m(t);return si(g||t,(function(i,o){g&&(i=t[o=i]),di(s,o,e(i,n,r,o,t,a))})),s};var go=function(e){return mo(e,4)},vo=n(32931),yo=n(4397),_o=n(98957),bo=n(93235),xo=n(93204);var wo=function(e){return(0,eo.Z)(e)?(0,vo.Z)(e,bo.Z):(0,yo.Z)(e)?[e]:Ai((0,_o.Z)((0,xo.Z)(e)))};var So=function(e,t){};n(8679);var Do=function(e){return mo(e,5)};function Ao(){return Ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ao.apply(this,arguments)}function Eo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Mo(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var To=function(e){return Array.isArray(e)&&0===e.length},Po=function(e){return"function"===typeof e},Ro=function(e){return null!==e&&"object"===typeof e},ko=function(e){return String(Math.floor(Number(e)))===e},Oo=function(e){return"[object String]"===Object.prototype.toString.call(e)},Lo=function(e){return 0===r.Children.count(e)},Fo=function(e){return Ro(e)&&Po(e.then)};function Io(e,t,n,r){void 0===r&&(r=0);for(var i=wo(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function No(e,t,n){for(var r=go(e),i=r,o=0,a=wo(t);o<a.length-1;o++){var s=a[o],l=Io(e,a.slice(0,o+1));if(l&&(Ro(l)||Array.isArray(l)))i=i[s]=go(l);else{var u=a[o+1];i=i[s]=ko(u)&&Number(u)>=0?[]:{}}}return(0===o?e:i)[a[o]]===n?e:(void 0===n?delete i[a[o]]:i[a[o]]=n,0===o&&void 0===n&&delete r[a[o]],r)}function Bo(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];Ro(s)?n.get(s)||(n.set(s,!0),r[a]=Array.isArray(s)?[]:{},Bo(s,t,n,r[a])):r[a]=t}return r}var jo=(0,r.createContext)(void 0);jo.displayName="FormikContext";var zo=jo.Provider;jo.Consumer;function Uo(){var e=(0,r.useContext)(jo);return e||So(!1),e}function Ho(e,t){switch(t.type){case"SET_VALUES":return Ao({},e,{values:t.payload});case"SET_TOUCHED":return Ao({},e,{touched:t.payload});case"SET_ERRORS":return Vr()(e.errors,t.payload)?e:Ao({},e,{errors:t.payload});case"SET_STATUS":return Ao({},e,{status:t.payload});case"SET_ISSUBMITTING":return Ao({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Ao({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Ao({},e,{values:No(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Ao({},e,{touched:No(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Ao({},e,{errors:No(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Ao({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Ao({},e,{touched:Bo(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return Ao({},e,{isSubmitting:!1});default:return e}}var Go={},Vo={};function Wo(e){var t=e.validateOnChange,n=void 0===t||t,i=e.validateOnBlur,o=void 0===i||i,a=e.validateOnMount,s=void 0!==a&&a,l=e.isInitialValid,u=e.enableReinitialize,c=void 0!==u&&u,d=e.onSubmit,h=Mo(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=Ao({validateOnChange:n,validateOnBlur:o,validateOnMount:s,onSubmit:d},h),p=(0,r.useRef)(f.initialValues),m=(0,r.useRef)(f.initialErrors||Go),g=(0,r.useRef)(f.initialTouched||Vo),v=(0,r.useRef)(f.initialStatus),y=(0,r.useRef)(!1),_=(0,r.useRef)({});(0,r.useEffect)((function(){return y.current=!0,function(){y.current=!1}}),[]);var b=(0,r.useReducer)(Ho,{values:f.initialValues,errors:f.initialErrors||Go,touched:f.initialTouched||Vo,status:f.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),x=b[0],w=b[1],S=(0,r.useCallback)((function(e,t){return new Promise((function(n,r){var i=f.validate(e,t);null==i?n(Go):Fo(i)?i.then((function(e){n(e||Go)}),(function(e){r(e)})):n(i)}))}),[f.validate]),D=(0,r.useCallback)((function(e,t){var n=f.validationSchema,r=Po(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=$o(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(Go)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return No(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;Io(t,a.path)||(t=No(t,a.path,a.message))}}return t}(n)):t(n)}))}))}),[f.validationSchema]),A=(0,r.useCallback)((function(e,t){return new Promise((function(n){return n(_.current[e].validate(t))}))}),[]),E=(0,r.useCallback)((function(e){var t=Object.keys(_.current).filter((function(e){return Po(_.current[e].validate)})),n=t.length>0?t.map((function(t){return A(t,Io(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=No(e,t[r],n)),e}),{})}))}),[A]),M=(0,r.useCallback)((function(e){return Promise.all([E(e),f.validationSchema?D(e):{},f.validate?S(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return Kr.all([t,n,r],{arrayMerge:qo})}))}),[f.validate,f.validationSchema,E,S,D]),C=Ko((function(e){return void 0===e&&(e=x.values),w({type:"SET_ISVALIDATING",payload:!0}),M(e).then((function(e){return y.current&&(w({type:"SET_ISVALIDATING",payload:!1}),w({type:"SET_ERRORS",payload:e})),e}))}));(0,r.useEffect)((function(){s&&!0===y.current&&Vr()(p.current,f.initialValues)&&C(p.current)}),[s,C]);var T=(0,r.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:m.current?m.current:f.initialErrors||{},r=e&&e.touched?e.touched:g.current?g.current:f.initialTouched||{},i=e&&e.status?e.status:v.current?v.current:f.initialStatus;p.current=t,m.current=n,g.current=r,v.current=i;var o=function(){w({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(f.onReset){var a=f.onReset(x.values,q);Fo(a)?a.then(o):o()}else o()}),[f.initialErrors,f.initialStatus,f.initialTouched]);(0,r.useEffect)((function(){!0!==y.current||Vr()(p.current,f.initialValues)||(c&&(p.current=f.initialValues,T()),s&&C(p.current))}),[c,f.initialValues,T,s,C]),(0,r.useEffect)((function(){c&&!0===y.current&&!Vr()(m.current,f.initialErrors)&&(m.current=f.initialErrors||Go,w({type:"SET_ERRORS",payload:f.initialErrors||Go}))}),[c,f.initialErrors]),(0,r.useEffect)((function(){c&&!0===y.current&&!Vr()(g.current,f.initialTouched)&&(g.current=f.initialTouched||Vo,w({type:"SET_TOUCHED",payload:f.initialTouched||Vo}))}),[c,f.initialTouched]),(0,r.useEffect)((function(){c&&!0===y.current&&!Vr()(v.current,f.initialStatus)&&(v.current=f.initialStatus,w({type:"SET_STATUS",payload:f.initialStatus}))}),[c,f.initialStatus,f.initialTouched]);var P=Ko((function(e){if(_.current[e]&&Po(_.current[e].validate)){var t=Io(x.values,e),n=_.current[e].validate(t);return Fo(n)?(w({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),w({type:"SET_ISVALIDATING",payload:!1})}))):(w({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return f.validationSchema?(w({type:"SET_ISVALIDATING",payload:!0}),D(x.values,e).then((function(e){return e})).then((function(t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),w({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),R=(0,r.useCallback)((function(e,t){var n=t.validate;_.current[e]={validate:n}}),[]),k=(0,r.useCallback)((function(e){delete _.current[e]}),[]),O=Ko((function(e,t){return w({type:"SET_TOUCHED",payload:e}),(void 0===t?o:t)?C(x.values):Promise.resolve()})),L=(0,r.useCallback)((function(e){w({type:"SET_ERRORS",payload:e})}),[]),F=Ko((function(e,t){var r=Po(e)?e(x.values):e;return w({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?C(r):Promise.resolve()})),I=(0,r.useCallback)((function(e,t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),N=Ko((function(e,t,r){return w({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?C(No(x.values,e,t)):Promise.resolve()})),B=(0,r.useCallback)((function(e,t){var n,r=t,i=e;if(!Oo(e)){e.persist&&e.persist();var o=e.target?e.target:e.currentTarget,a=o.type,s=o.name,l=o.id,u=o.value,c=o.checked,d=(o.outerHTML,o.options),h=o.multiple;r=t||(s||l),i=/number|range/.test(a)?(n=parseFloat(u),isNaN(n)?"":n):/checkbox/.test(a)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,o=-1;if(Array.isArray(e))r=e,i=(o=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,o).concat(r.slice(o+1))}(Io(x.values,r),c,u):d&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(d):u}r&&N(r,i)}),[N,x.values]),j=Ko((function(e){if(Oo(e))return function(t){return B(t,e)};B(e)})),z=Ko((function(e,t,n){return void 0===t&&(t=!0),w({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?o:n)?C(x.values):Promise.resolve()})),U=(0,r.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,o=(n.outerHTML,t||(r||i));z(o,!0)}),[z]),H=Ko((function(e){if(Oo(e))return function(t){return U(t,e)};U(e)})),G=(0,r.useCallback)((function(e){Po(e)?w({type:"SET_FORMIK_STATE",payload:e}):w({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),V=(0,r.useCallback)((function(e){w({type:"SET_STATUS",payload:e})}),[]),W=(0,r.useCallback)((function(e){w({type:"SET_ISSUBMITTING",payload:e})}),[]),Z=Ko((function(){return w({type:"SUBMIT_ATTEMPT"}),C().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Y()))return}catch(r){throw r}return Promise.resolve(n).then((function(e){return y.current&&w({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(y.current)throw w({type:"SUBMIT_FAILURE"}),e}))}if(y.current&&(w({type:"SUBMIT_FAILURE"}),t))throw e}))})),$=Ko((function(e){e&&e.preventDefault&&Po(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Po(e.stopPropagation)&&e.stopPropagation(),Z().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),q={resetForm:T,validateForm:C,validateField:P,setErrors:L,setFieldError:I,setFieldTouched:z,setFieldValue:N,setStatus:V,setSubmitting:W,setTouched:O,setValues:F,setFormikState:G,submitForm:Z},Y=Ko((function(){return d(x.values,q)})),K=Ko((function(e){e&&e.preventDefault&&Po(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Po(e.stopPropagation)&&e.stopPropagation(),T()})),X=(0,r.useCallback)((function(e){return{value:Io(x.values,e),error:Io(x.errors,e),touched:!!Io(x.touched,e),initialValue:Io(p.current,e),initialTouched:!!Io(g.current,e),initialError:Io(m.current,e)}}),[x.errors,x.touched,x.values]),Q=(0,r.useCallback)((function(e){return{setValue:function(t,n){return N(e,t,n)},setTouched:function(t,n){return z(e,t,n)},setError:function(t){return I(e,t)}}}),[N,z,I]),J=(0,r.useCallback)((function(e){var t=Ro(e),n=t?e.name:e,r=Io(x.values,n),i={name:n,value:r,onChange:j,onBlur:H};if(t){var o=e.type,a=e.value,s=e.as,l=e.multiple;"checkbox"===o?void 0===a?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(a)),i.value=a):"radio"===o?(i.checked=r===a,i.value=a):"select"===s&&l&&(i.value=i.value||[],i.multiple=!0)}return i}),[H,j,x.values]),ee=(0,r.useMemo)((function(){return!Vr()(p.current,x.values)}),[p.current,x.values]),te=(0,r.useMemo)((function(){return"undefined"!==typeof l?ee?x.errors&&0===Object.keys(x.errors).length:!1!==l&&Po(l)?l(f):l:x.errors&&0===Object.keys(x.errors).length}),[l,ee,x.errors,f]);return Ao({},x,{initialValues:p.current,initialErrors:m.current,initialTouched:g.current,initialStatus:v.current,handleBlur:H,handleChange:j,handleReset:K,handleSubmit:$,resetForm:T,setErrors:L,setFormikState:G,setFieldTouched:z,setFieldValue:N,setFieldError:I,setStatus:V,setSubmitting:W,setTouched:O,setValues:F,submitForm:Z,validateForm:C,validateField:P,isValid:te,dirty:ee,unregisterField:k,registerField:R,getFieldProps:J,getFieldMeta:X,getFieldHelpers:Q,validateOnBlur:o,validateOnChange:n,validateOnMount:s})}function Zo(e){var t=Wo(e),n=e.component,i=e.children,o=e.render,a=e.innerRef;return(0,r.useImperativeHandle)(a,(function(){return t})),(0,r.createElement)(zo,{value:t},n?(0,r.createElement)(n,t):o?o(t):i?Po(i)?i(t):Lo(i)?null:r.Children.only(i):null)}function $o(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||oi(e)?$o(e):""!==e?e:void 0})):oi(e[r])?t[r]=$o(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function qo(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var o=!1!==n.clone&&n.isMergeableObject(t);r[i]=o?Kr(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=Kr(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var Yo="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function Ko(e){var t=(0,r.useRef)(e);return Yo((function(){t.current=e})),(0,r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}(0,r.forwardRef)((function(e,t){var n=e.action,i=Mo(e,["action"]),o=null!=n?n:"#",a=Uo(),s=a.handleReset,l=a.handleSubmit;return(0,r.createElement)("form",Object.assign({onSubmit:l,ref:t,onReset:s,action:o},i))})).displayName="Form";var Xo=function(e,t,n){var r=Qo(e);return r.splice(t,0,n),r},Qo=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(Ao({},e,{length:t+1}))}return[]},Jo=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,o=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,a="function"===typeof t?t:e,s=No(n.values,o,e(Io(n.values,o))),l=r?i(Io(n.errors,o)):void 0,u=t?a(Io(n.touched,o)):void 0;return To(l)&&(l=void 0),To(u)&&(u=void 0),Ao({},n,{values:s,errors:r?No(n.errors,o,l):n.errors,touched:t?No(n.touched,o,u):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(Qo(t),[Do(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=Qo(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=Qo(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return Xo(n,e,t)}),(function(t){return Xo(t,e,null)}),(function(t){return Xo(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=Qo(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(Co(n)),n.pop=n.pop.bind(Co(n)),n}Eo(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Vr()(Io(e.formik.values,e.name),Io(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?Qo(n):[];return t||(t=r[e]),Po(r.splice)&&r.splice(e,1),r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,i=t.render,o=t.children,a=t.name,s=Ao({},e,{form:Mo(t.formik,["validate","validationSchema"]),name:a});return n?(0,r.createElement)(n,s):i?i(s):o?"function"===typeof o?o(s):Lo(o)?null:r.Children.only(o):null},t}(r.Component);Jo.defaultProps={validateOnChange:!0};r.Component,r.Component;var ea,ta,na=n(55877);try{ea=Map}catch(xl){}try{ta=Set}catch(xl){}function ra(e,t,n){if(!e||"object"!==typeof e||"function"===typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(ia);if(ea&&e instanceof ea)return new Map(Array.from(e.entries()));if(ta&&e instanceof ta)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var i in n.push(r),e){var o=t.findIndex((function(t){return t===e[i]}));r[i]=o>-1?n[o]:ra(e[i],t,n)}return r}return e}function ia(e){return ra(e,[],[])}const oa=Object.prototype.toString,aa=Error.prototype.toString,sa=RegExp.prototype.toString,la="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",ua=/^Symbol\((.*)\)(.*)$/;function ca(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return la.call(e).replace(ua,"Symbol($1)");const r=oa.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+aa.call(e)+"]":"RegExp"===r?sa.call(e):null}function da(e,t){let n=ca(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=ca(this[e],t);return null!==r?r:n}),2)}let ha={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{let i=null!=r&&r!==n,o=`${e} must be a \`${t}\` type, but the final value was: \`${da(n,!0)}\``+(i?` (cast from the value \`${da(r,!0)}\`).`:".");return null===n&&(o+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),o},defined:"${path} must be defined"},fa={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},pa={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},ma={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},ga={isValue:"${path} field must be ${value}"},va={noUnknown:"${path} field has unspecified keys: ${unknown}"},ya={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:ha,string:fa,number:pa,date:ma,object:va,array:ya,boolean:ga});var _a=n(18721),ba=n.n(_a);var xa=e=>e&&e.__isYupSchema__;var wa=class{constructor(e,t){if(this.fn=void 0,this.refs=e,this.refs=e,"function"===typeof t)return void(this.fn=t);if(!ba()(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,o="function"===typeof n?n:(...e)=>e.every((e=>e===n));this.fn=function(...e){let t=e.pop(),n=e.pop(),a=o(...e)?r:i;if(a)return"function"===typeof a?a(n):n.concat(a.resolve(t))}}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!xa(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}};function Sa(e){return null==e?[]:[].concat(e)}function Da(){return Da=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Da.apply(this,arguments)}let Aa=/\$\{\s*(\w+)\s*\}/g;class Ea extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=Da({},t,{path:n})),"string"===typeof e?e.replace(Aa,((e,n)=>da(t[n]))):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],Sa(e).forEach((e=>{Ea.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,Ea)}}function Ma(e,t){let{endEarly:n,tests:r,args:i,value:o,errors:a,sort:s,path:l}=e,u=(e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}})(t),c=r.length;const d=[];if(a=a||[],!c)return a.length?u(new Ea(a,o,l)):u(null,o);for(let h=0;h<r.length;h++){(0,r[h])(i,(function(e){if(e){if(!Ea.isError(e))return u(e,o);if(n)return e.value=o,u(e,o);d.push(e)}if(--c<=0){if(d.length&&(s&&d.sort(s),a.length&&d.push(...a),a=d),a.length)return void u(new Ea(a,o,l),o);u(null,o)}}))}}var Ca=n(66604),Ta=n.n(Ca),Pa=n(55760);const Ra="$",ka=".";class Oa{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ra,this.isValue=this.key[0]===ka,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?Ra:this.isValue?ka:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,Pa.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}function La(){return La=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(this,arguments)}function Fa(e){function t(t,n){let{value:r,path:i="",label:o,options:a,originalValue:s,sync:l}=t,u=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["value","path","label","options","originalValue","sync"]);const{name:c,test:d,params:h,message:f}=e;let{parent:p,context:m}=a;function g(e){return Oa.isRef(e)?e.getValue(r,p,m):e}function v(e={}){const t=Ta()(La({value:r,originalValue:s,label:o,path:e.path||i},h,e.params),g),n=new Ea(Ea.formatError(e.message||f,t),r,t.path,e.type||c);return n.params=t,n}let y,_=La({path:i,parent:p,type:c,createError:v,resolve:g,options:a,originalValue:s},u);if(l){try{var b;if(y=d.call(_,r,_),"function"===typeof(null==(b=y)?void 0:b.then))throw new Error(`Validation test of type: "${_.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(x){return void n(x)}Ea.isError(y)?n(y):y?n(null,y):n(v())}else try{Promise.resolve(d.call(_,r,_)).then((e=>{Ea.isError(e)?n(e):e?n(null,e):n(v())})).catch(n)}catch(x){n(x)}}return t.OPTIONS=e,t}Oa.prototype.__isYupRef=!0;function Ia(e,t,n,r=n){let i,o,a;return t?((0,Pa.forEach)(t,((s,l,u)=>{let c=l?(e=>e.substr(0,e.length-1).substr(1))(s):s;if((e=e.resolve({context:r,parent:i,value:n})).innerType){let r=u?parseInt(c,10):0;if(n&&r>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=n,n=n&&n[r],e=e.innerType}if(!u){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${a} which is a type: "${e._type}")`);i=n,n=n&&n[c],e=e.fields[c]}o=c,a=l?"["+s+"]":"."+s})),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class Na{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(e){return this.toArray().reduce(((t,n)=>t.concat(Oa.isRef(n)?e(n):n)),[])}add(e){Oa.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){Oa.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}clone(){const e=new Na;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach((e=>n.add(e))),e.refs.forEach((e=>n.add(e))),t.list.forEach((e=>n.delete(e))),t.refs.forEach((e=>n.delete(e))),n}}function Ba(){return Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ba.apply(this,arguments)}class ja{constructor(e){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new Na,this._blacklist=new Na,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(ha.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=Ba({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=Ba({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=ia(Ba({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=Ba({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e,t={}){let n=this.resolve(Ba({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){let i=da(e),o=da(r);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". \n\nattempted value: ${i} \n`+(o!==i?`result of cast: ${o}`:""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault()),n}_validate(e,t={},n){let{sync:r,path:i,from:o=[],originalValue:a=e,strict:s=this.spec.strict,abortEarly:l=this.spec.abortEarly}=t,u=e;s||(u=this._cast(u,Ba({assert:!1},t)));let c={value:u,path:i,options:t,originalValue:a,schema:this,label:this.spec.label,sync:r,from:o},d=[];this._typeError&&d.push(this._typeError);let h=[];this._whitelistError&&h.push(this._whitelistError),this._blacklistError&&h.push(this._blacklistError),Ma({args:c,value:u,path:i,sync:r,tests:d,endEarly:l},(e=>{e?n(e,u):Ma({tests:this.tests.concat(h),args:c,path:i,sync:r,value:u,endEarly:l},n)}))}validate(e,t,n){let r=this.resolve(Ba({},t,{value:e}));return"function"===typeof n?r._validate(e,t,n):new Promise(((n,i)=>r._validate(e,t,((e,t)=>{e?i(e):n(t)}))))}validateSync(e,t){let n;return this.resolve(Ba({},t,{value:e}))._validate(e,Ba({},t,{sync:!0}),((e,t)=>{if(e)throw e;n=t})),n}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(Ea.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(Ea.isError(n))return!1;throw n}}_getDefault(){let e=this.spec.default;return null==e?e:"function"===typeof e?e.call(this):ia(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(e=!0){let t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(e=ha.defined){return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(e=ha.required){return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){let e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(e=!0){return this.clone({nullable:!1!==e})}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"===typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=ha.default),"function"!==typeof t.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=Fa(t),i=t.exclusive||t.name&&!0===n.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter((e=>{if(e.OPTIONS.name===t.name){if(i)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=Sa(e).map((e=>new Oa(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new wa(r,t)),n}typeError(e){let t=this.clone();return t._typeError=Fa({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e,t=ha.oneOf){let n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=Fa({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}notOneOf(e,t=ha.notOneOf){let n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=Fa({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec;return{meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))}}}ja.prototype.__isYupSchema__=!0;for(const wl of["validate","validateSync"])ja.prototype[`${wl}At`]=function(e,t,n={}){const{parent:r,parentPath:i,schema:o}=Ia(this,e,t,n.context);return o[wl](r&&r[i],Ba({},n,{parent:r,path:e}))};for(const wl of["equals","is"])ja.prototype[wl]=ja.prototype.oneOf;for(const wl of["not","nope"])ja.prototype[wl]=ja.prototype.notOneOf;ja.prototype.optional=ja.prototype.notRequired;const za=ja;za.prototype;var Ua=e=>null==e;function Ha(){return new Ga}class Ga extends ja{constructor(){super({type:"boolean"}),this.withMutation((()=>{this.transform((function(e){if(!this.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))}))}_typeCheck(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}isTrue(e=ga.isValue){return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:e=>Ua(e)||!0===e})}isFalse(e=ga.isValue){return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:e=>Ua(e)||!1===e})}}Ha.prototype=Ga.prototype;let Va=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,Wa=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Za=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,$a=e=>Ua(e)||e===e.trim(),qa={}.toString();function Ya(){return new Ka}class Ka extends ja{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===qa?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=fa.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return Ua(t)||t.length===this.resolve(e)}})}min(e,t=fa.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return Ua(t)||t.length>=this.resolve(e)}})}max(e,t=fa.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return Ua(t)||t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"===typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||fa.matches,params:{regex:e},test:t=>Ua(t)||""===t&&i||-1!==t.search(e)})}email(e=fa.email){return this.matches(Va,{name:"email",message:e,excludeEmptyString:!0})}url(e=fa.url){return this.matches(Wa,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=fa.uuid){return this.matches(Za,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(e=fa.trim){return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:$a})}lowercase(e=fa.lowercase){return this.transform((e=>Ua(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>Ua(e)||e===e.toLowerCase()})}uppercase(e=fa.uppercase){return this.transform((e=>Ua(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>Ua(e)||e===e.toUpperCase()})}}Ya.prototype=Ka.prototype;function Xa(){return new Qa}class Qa extends ja{constructor(){super({type:"number"}),this.withMutation((()=>{this.transform((function(e){let t=e;if("string"===typeof t){if(t=t.replace(/\s/g,""),""===t)return NaN;t=+t}return this.isType(t)?t:parseFloat(t)}))}))}_typeCheck(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e)}min(e,t=pa.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return Ua(t)||t>=this.resolve(e)}})}max(e,t=pa.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return Ua(t)||t<=this.resolve(e)}})}lessThan(e,t=pa.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},test(t){return Ua(t)||t<this.resolve(e)}})}moreThan(e,t=pa.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},test(t){return Ua(t)||t>this.resolve(e)}})}positive(e=pa.positive){return this.moreThan(0,e)}negative(e=pa.negative){return this.lessThan(0,e)}integer(e=pa.integer){return this.test({name:"integer",message:e,test:e=>Ua(e)||Number.isInteger(e)})}truncate(){return this.transform((e=>Ua(e)?e:0|e))}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((t=>Ua(t)?t:Math[e](t)))}}Xa.prototype=Qa.prototype;var Ja=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let es=new Date("");function ts(){return new ns}class ns extends ja{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=Ja.exec(e)){for(var o,a=0;o=r[a];++a)n[o]=+n[o]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?es:new Date(e))}))}))}_typeCheck(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}prepareParam(e,t){let n;if(Oa.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e,t=ma.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return Ua(e)||e>=this.resolve(n)}})}max(e,t=ma.max){let n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return Ua(e)||e<=this.resolve(n)}})}}ns.INVALID_DATE=es,ts.prototype=ns.prototype,ts.INVALID_DATE=es;var rs=n(11865),is=n.n(rs),os=n(68929),as=n.n(os),ss=n(67523),ls=n.n(ss),us=n(94633),cs=n.n(us);function ds(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(-1!==(null==(i=t.path)?void 0:i.indexOf(e)))return n=r,!0})),n}function hs(e){return(t,n)=>ds(e,t)-ds(e,n)}function fs(){return fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fs.apply(this,arguments)}let ps=e=>"[object Object]"===Object.prototype.toString.call(e);const ms=hs([]);class gs extends ja{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=ms,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return ps(e)||"function"===typeof e}_cast(e,t={}){var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault();if(!this._typeCheck(r))return r;let i=this.fields,o=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,a=this._nodes.concat(Object.keys(r).filter((e=>-1===this._nodes.indexOf(e)))),s={},l=fs({},t,{parent:s,__validating:t.__validating||!1}),u=!1;for(const c of a){let e=i[c],n=ba()(r,c);if(e){let n,i=r[c];l.path=(t.path?`${t.path}.`:"")+c,e=e.resolve({value:i,context:t.context,parent:s});let o="spec"in e?e.spec:void 0,a=null==o?void 0:o.strict;if(null==o?void 0:o.strip){u=u||c in r;continue}n=t.__validating&&a?r[c]:e.cast(r[c],l),void 0!==n&&(s[c]=n)}else n&&!o&&(s[c]=r[c]);s[c]!==r[c]&&(u=!0)}return u?s:r}_validate(e,t={},n){let r=[],{sync:i,from:o=[],originalValue:a=e,abortEarly:s=this.spec.abortEarly,recursive:l=this.spec.recursive}=t;o=[{schema:this,value:a},...o],t.__validating=!0,t.originalValue=a,t.from=o,super._validate(e,t,((e,u)=>{if(e){if(!Ea.isError(e)||s)return void n(e,u);r.push(e)}if(!l||!ps(u))return void n(r[0]||null,u);a=a||u;let c=this._nodes.map((e=>(n,r)=>{let i=-1===e.indexOf(".")?(t.path?`${t.path}.`:"")+e:`${t.path||""}["${e}"]`,s=this.fields[e];s&&"validate"in s?s.validate(u[e],fs({},t,{path:i,from:o,strict:!0,parent:u,originalValue:a[e]}),r):r(null)}));Ma({sync:i,tests:c,value:u,errors:r,endEarly:s,sort:this._sortErrors,path:t.path},n)}))}clone(e){const t=super.clone(e);return t.fields=fs({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,i]of Object.entries(this.fields)){const e=n[r];void 0===e?n[r]=i:e instanceof ja&&i instanceof ja&&(n[r]=i.concat(e))}return t.withMutation((()=>t.shape(n,this._excludedEdges)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e,t=[]){let n=this.clone(),r=Object.assign(n.fields,e);return n.fields=r,n._sortErrors=hs(Object.keys(r)),t.length&&(Array.isArray(t[0])||(t=[t]),n._excludedEdges=[...n._excludedEdges,...t]),n._nodes=function(e,t=[]){let n=[],r=new Set,i=new Set(t.map((([e,t])=>`${e}-${t}`)));function o(e,t){let o=(0,Pa.split)(e)[0];r.add(o),i.has(`${t}-${o}`)||n.push([t,o])}for(const a in e)if(ba()(e,a)){let t=e[a];r.add(a),Oa.isRef(t)&&t.isSibling?o(t.path,a):xa(t)&&"deps"in t&&t.deps.forEach((e=>o(e,a)))}return cs().array(Array.from(r),n).reverse()}(r,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const r of e)delete n[r];return t.withMutation((()=>t.shape(n)))}from(e,t,n){let r=(0,Pa.getter)(e,!0);return this.transform((i=>{if(null==i)return i;let o=i;return ba()(i,e)&&(o=fs({},i),n||delete o[e],o[t]=r(i)),o}))}noUnknown(e=!0,t=va.noUnknown){"string"===typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=va.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&ls()(t,((t,n)=>e(n)))))}camelCase(){return this.transformKeys(as())}snakeCase(){return this.transformKeys(is())}constantCase(){return this.transformKeys((e=>is()(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=Ta()(this.fields,(e=>e.describe())),e}}function vs(e){return new gs(e)}vs.prototype=gs.prototype;var ys=n(40004),_s=n.n(ys),bs=n(79307),xs=n(77871),ws=function(){var e=Bn.h.getState().shareAMemoryRef,t=ve.ZP.utils.selector(e),n=t(".js-share-a-memory__intro"),r=t(".js-share-a-memory__form"),i=t(".js-share-a-memory__success"),o=ve.ZP.timeline({});o.to([r,n],{autoAlpha:0,duration:.5,onComplete:function(){i[0].scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),r[0].style.height="200px"}}),o.to(i,{autoAlpha:1,duration:.5},"+=0.8")},Ss={title:"",paragraphText:"",location:"",coordinates:"",year:"",firstName:"",lastName:"",email:"",mailingList:!1,permission:!1},Ds=vs({title:Ya().required("Required"),paragraphText:Ya().required("Required"),location:Ya(),latitude:Xa(),longitude:Xa(),coordinates:Ya().required("Required"),year:Xa().typeError("Please enter a number").required("Required"),firstName:Ya(),lastName:Ya(),email:Ya().email("Please enter a valid email").required("Required"),mailingList:Ha(),permission:Ha().oneOf([!0],"Field must be checked").required("Field must be checked")});var As=function(){var e=(0,na.v4)().replace(/-/g,""),t=(0,r.useState)([]),n=t[0],i=t[1],o=(0,r.useState)(""),a=o[0],s=o[1],l=(0,r.useState)("initial"),u=l[0],c=l[1],d=(0,r.useState)(!1),h=d[0],f=d[1],p=(0,xs.ap)(a),m=function(){var t=(0,Ar.Z)(Mr().mark((function t(r){var i,o;return Mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c("loading"),i={id:e,title:r.title,paragraphText:r.paragraphText,location:r.location,latLong:{lat:r.latitude,lng:r.longitude},year:r.year,contributorJson:{first_name:r.firstName,last_name:r.lastName,email:r.email,mailingList:r.mailingList,acceptedTerms:!0},hasPhoto:n.length>0,image:n[0]},t.prev=2,t.next=5,fetch("/api/add-memory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 5:return o=t.sent,t.next=8,o.json();case 8:"Success"===t.sent.message?(c("success"),ws()):c("error"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0),c("error");case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var e=(0,Ar.Z)(Mr().mark((function e(t,n,r){var i,o;return Mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!1),e.next=4,(0,xs.HQ)(n.place_id);case 4:i=e.sent,o="lat:".concat(i[0].geometry.location.lat(),",lng:").concat(i[0].geometry.location.lng()),r("coordinates",o),r("location",n.description),r("latitude",i[0].geometry.location.lat()),r("longitude",i[0].geometry.location.lng()),s(n.description);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Zo,{initialValues:Ss,onSubmit:m,validationSchema:Ds,children:function(e){var t=e.values,r=e.touched,o=e.errors,l=e.handleSubmit,c=e.handleBlur,d=e.handleChange,m=e.setFieldValue;e.dirty,e.isValid;return(0,be.jsxs)("form",{onSubmit:l,className:(0,wr.Z)(_s().form,"js-share-a-memory__form","loading"===u&&_s()["form--loading"]),children:[(0,be.jsxs)("div",{className:_s().fieldContainer,children:[(0,be.jsx)("label",{htmlFor:"title",children:"Title"}),(0,be.jsx)("input",{id:"title",name:"title",value:t.title,type:"text",className:(0,wr.Z)(r.title&&Boolean(o.title)&&_s().errorInput),placeholder:"Enter the title of your memory",onChange:d,onBlur:c,mb:55,autoComplete:"off"}),(0,be.jsx)("p",{className:_s().error,children:o.title})]}),(0,be.jsxs)("div",{className:_s().fieldContainer,children:[(0,be.jsx)("label",{htmlFor:"description",children:"Memory description"}),(0,be.jsx)("textarea",{id:"description",name:"paragraphText",value:t.paragraphText,className:(0,wr.Z)(r.paragraphText&&Boolean(o.paragraphText)&&_s().errorTextarea),type:"text",onChange:d,onBlur:c,placeholder:"Enter a description",mb:65,autoComplete:"off"}),o.paragraphText&&r.paragraphText&&(0,be.jsx)("p",{className:_s().error,children:o.paragraphText})]}),(0,be.jsxs)("div",{className:_s().twoColumnContainer,children:[(0,be.jsxs)("div",{className:_s().fieldContainer,children:[(0,be.jsx)("label",{htmlFor:"location",children:"Location"}),(0,be.jsxs)("div",{className:_s().locationContainer,children:[(0,be.jsx)("input",{id:"location",type:"text",name:"location",placeholder:"Location",value:a,error:Boolean(o.coordinates),className:(0,wr.Z)(r.coordinates&&Boolean(o.coordinates)&&_s().errorInput),onBlur:c,onChange:function(e){""===e.target.value&&m("coordinates",""),s(e.target.value),f(!0)},autoComplete:"off"}),o.coordinates&&r.coordinates&&(0,be.jsx)("p",{className:_s().error,children:o.coordinates}),(0,be.jsx)("ul",{className:(0,wr.Z)(_s().predictionsUl,(!h||!a||!p)&&_s().hidden),children:h&&a&&p&&p.map((function(e){return(0,be.jsx)("li",{className:_s().predictionsLi,children:(0,be.jsx)("button",{className:_s().predictionsButton,onClick:function(t){return g(t,e,m)},onKeyDown:function(t){return g(t,e,m)},type:"button",children:e.description||"Not found"})},e.place_id)}))})]})]}),(0,be.jsxs)("div",{className:_s().fieldContainer,children:[(0,be.jsx)("label",{htmlFor:"year",children:"Year of Memory"}),(0,be.jsx)("input",{id:"year",type:"text",name:"year",placeholder:"Year",className:(0,wr.Z)(r.year&&Boolean(o.year)&&_s().errorInput),value:t.year,onBlur:c,onChange:d,mb:55,autoComplete:"off"}),o.year&&r.year&&(0,be.jsx)("p",{className:_s().error,children:o.year})]})]}),(0,be.jsx)(bs.xI,{files:n,setFiles:i}),(0,be.jsxs)("div",{className:_s().error,children:[(0,be.jsx)("label",{htmlFor:"email",children:"Email"}),(0,be.jsx)("input",{id:"email",type:"email",name:"email",value:t.email,className:(0,wr.Z)(r.email&&Boolean(o.email)&&_s().errorInput),placeholder:"Enter your email",onChange:d,onBlur:c,autoComplete:"off"}),o.email&&r.email&&(0,be.jsx)("p",{className:_s().error,children:o.email})]}),(0,be.jsxs)("div",{className:_s().twoColumnContainer,children:[(0,be.jsxs)("div",{className:_s().fieldContainer,children:[(0,be.jsx)("label",{htmlFor:"first",children:"First name"}),(0,be.jsx)("input",{id:"first",type:"text",name:"firstName",value:t.firstName,placeholder:"Optional",onChange:d,autoComplete:"new-password"})]}),(0,be.jsxs)("div",{className:_s().fieldContainer,children:[(0,be.jsx)("label",{htmlFor:"last",children:"Last name"}),(0,be.jsx)("input",{id:"last",type:"text",name:"lastName",value:t.lastName,placeholder:"Optional",onChange:d,autoComplete:"new-password"})]})]}),(0,be.jsxs)("div",{className:_s().checkboxesContainer,children:[(0,be.jsxs)("label",{className:_s().checkboxRow,children:[(0,be.jsxs)("div",{className:_s().checkboxContainer,children:[(0,be.jsx)("input",{id:"mailingList",className:_s().checkbox,type:"checkbox",name:"mailingList",value:t.mailingList,onChange:d}),(0,be.jsx)("span",{className:_s().checkmark,"aria-hidden":!0})]}),(0,be.jsx)("p",{className:_s().checkboxCopy,children:"Sign up for the What is Missing Foundation mailing list"})]}),(0,be.jsxs)("label",{className:_s().checkboxRow,children:[(0,be.jsxs)("div",{className:_s().checkboxContainer,children:[(0,be.jsx)("input",{id:"permission",className:_s().checkbox,type:"checkbox",name:"permission",value:t.permission,onChange:d}),(0,be.jsx)("span",{className:_s().checkmark,"aria-hidden":!0})]}),(0,be.jsxs)("p",{className:_s().checkboxCopy,children:["I hearby grant permission for my writing and photographs to be posted/published as part of \u201cWhat Is Missing\u201d and I have read and agree to ",(0,be.jsx)(Hr(),{href:"/license-agreement",children:"the disclaimer"}),"."]}),o.permission&&r.permission&&(0,be.jsx)("p",{className:(0,wr.Z)(_s().error,_s().permissionError),children:o.permission})]})]}),(0,be.jsx)("div",{className:_s().submitContainer,children:(0,be.jsx)("button",{className:_s().submitButton,type:"submit",children:"Share Memory"})}),"error"===u&&(0,be.jsx)("p",{className:_s().formError,children:"There was an error submitting your memory. Please try again later."})]})}}),(0,be.jsx)("div",{className:(0,wr.Z)(_s().successContainer,"js-share-a-memory__success"),children:(0,be.jsx)("p",{children:"Your memory has been submitted to the What is Missing? Project. Your submission is awaiting review, and you'll receive an email when your memory is published on the site to share with your friends."})})]})};var Es=n(2937);function Ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||(0,Es.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cs=n(5730);var Ts=function(e){var t=e.length;return t?e[(0,Cs.Z)(0,t-1)]:void 0};var Ps=function(e,t){return(0,vo.Z)(t,(function(t){return e[t]}))};var Rs=function(e){return null==e?[]:Ps(e,(0,fi.Z)(e))};var ks=function(e){return Ts(Rs(e))};var Os=function(e){return((0,eo.Z)(e)?Ts:ks)(e)},Ls=n(25675),Fs=n.n(Ls),Is=n(91832),Ns=n.n(Is),Bs=r.memo((function(e){var t=e.data,n=e.amount,r=e.onClickSubCategory;return(0,be.jsxs)("button",{type:"button",className:(0,wr.Z)(Ns().root,"u-reset-btn","js-accordion__grid-thumbnail"),onClick:function(){r(t.name)},children:[(0,be.jsx)("div",{className:Ns().image__container,children:(0,be.jsxs)("div",{className:Ns().image__wrapper,children:[(0,be.jsx)("div",{className:Ns().image__amount,children:n}),(0,be.jsx)("div",{className:Ns().image__dc,children:(0,be.jsx)(Fs(),{src:"".concat(t.thumbnail.url,"?w=500&h=500&q=70&fit=thumb&fl=progressive"),layout:"fill",priority:"true"})})]})}),(0,be.jsx)("div",{className:Ns().title,children:t.name})]})})),js=n(90255),zs=n.n(js),Us=r.memo((function(e){var t=e.type,n=e.data,i=e.globalData,o=e.onClickSubCategory,a=(0,ye.$x)("subCategoriesData"),s=(0,r.useMemo)((function(){return n.map((function(e){return(0,be.jsx)(Bs,{data:a[e],amount:i[e].length,onClickSubCategory:o},e)}))}),[]);return(0,be.jsx)("div",{className:(0,wr.Z)(zs().root,zs()[t],"js-accordion__grid"),children:s})})),Hs=n(49403),Gs=n.n(Hs),Vs=n(98367),Ws=[{type:"type__1",amount:3},{type:"type__2",amount:3},{type:"type__3",amount:1},{type:"type__4",amount:4}];function Zs(e){var t=e.data,n=e.lifeCycle,i=e.isAccordionOpen,o=e.onClickSubCategory,a=(0,r.useRef)(),s=(0,r.useRef)(!0),l=(0,ye.$x)("subCategoriesData"),u=Ms((0,ye.ac)(["md"]),1)[0],c=(0,r.useRef)(),d=(0,r.useMemo)((function(){for(var e=Object.keys(t),n=[],r=0,i=0;r<e.length;){var a=Ws[i];n.push({data:e.slice(r,r+a.amount),type:a.type}),r+=a.amount,i=(i+1)%Ws.length}return 1===n[n.length-1].data.length?n[n.length-1].type=Os(["type__1","type__3","type__4"]):n[n.length-1].data.length<3&&(n[n.length-1].type=Os(["type__1","type__4"])),n.map((function(e,n){return(0,be.jsx)(Us,{data:e.data,type:e.type,globalData:t,onClickSubCategory:o},n)}))}),[]),h=(0,r.useMemo)((function(){return Object.keys(t).map((function(e,n){return(0,be.jsx)("div",{className:Gs()["grid__idem--mobile"],children:(0,be.jsx)(Bs,{data:l[e],amount:t[e].length,onClickSubCategory:o})},n)}))}));return(0,Ue.bt)((function(){var e;null===(e=c.current)||void 0===e||e.kill(),i&&("enter"===n?c.current=(0,Vs.JI)(a.current):"leave"===n&&(c.current=(0,Vs.iI)(a.current)))}),[n]),(0,Ue.bt)((function(){var e;null===(e=c.current)||void 0===e||e.kill(),s.current||(c.current=i?(0,Vs.JI)(a.current,{delay:.35}):(0,Vs.iI)(a.current))}),[i]),(0,Ue.bt)((function(){s.current=!1}),[]),(0,be.jsxs)("div",{ref:a,className:(0,wr.Z)(Gs().root,"js-index__gridContainer"),children:[!u&&d,u&&h]})}var $s=n(61420),qs=n(26870),Ys=n(90467),Ks=n.n(Ys);function Xs(e){var t=e.data,n=e.subcategory,i=e.entriesAmount,o=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,ye.$x)("subCategoriesData"),l=(0,ye.$x)("storyCollection"),u=(0,ye.s6)("router"),c=(0,ye.ic)("indexPageRef"),d=(0,r.useMemo)((function(){return(i?t.slice(0,i):t).map((function(e,t){var r="timeline"===e.type?"/timeline/".concat(e.slug):"/content/".concat(e.slug),i=l.find((function(t){return t.name===e.type})),o="video"===e.filterType?e.filterType:e.type,a=s[n].color;i.useColorOverride&&(a=i.colorOverride);return(0,be.jsxs)("div",{className:(0,wr.Z)(Ks().right__entry,"js-accordion__groupList-entry"),children:[(0,be.jsx)(Hr(),{href:"timeline"===e.type?"/timeline/".concat(e.slug):"/content/".concat(e.slug),children:(0,be.jsx)("a",{className:Ks()["right__entry-title"],style:{color:a},onClick:function(e){e.preventDefault(),Vs.KB&&(0,Vs.KB)(c,{onComplete:function(){return u.push(r)}})},children:e.title})}),(0,be.jsx)("div",{className:Ks()["right__entry-category"],children:o})]},t)}))}),[]);return(0,be.jsxs)("div",{ref:o,className:(0,wr.Z)(Ks().root,"js-accordion__groupList"),children:[(0,be.jsxs)("div",{ref:a,className:Ks().left,children:[(0,be.jsx)("div",{className:(0,wr.Z)(Ks().left__image,"js-accordion__groupList-image"),children:(0,be.jsx)(Fs(),{src:"".concat(s[n].thumbnail.url,"?w=100&h=100&q=70&fit=thumb&fl=progressive"),width:100,height:100,priority:"true"})}),(0,be.jsx)("div",{className:(0,wr.Z)(Ks().left__name,"js-accordion__groupList-name"),children:s[n].name})]}),(0,be.jsx)("div",{className:Ks().right,children:d})]})}var Qs=n(70179),Js=n.n(Qs);function el(e){var t=e.data,n=e.lifeCycle,i=e.selected,o=e.isAccordionOpen,a=e.uniqueSingularity,s=e.uniqueSingularityActive,l=(0,ye.$x)("setUniqueSingularityRef"),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,r.useRef)(!0),h=(0,r.useState)(!1),f=h[0],p=h[1],m=Ms((0,ye.ac)(["md"]),1)[0],g=(0,ye.$x)("subCategoriesData"),v=(0,r.useMemo)((function(){var e=(0,$s.Z)(t[i],"subCategory"),n=Object.keys(e);return(n=(0,qs.Z)(n,(function(e){return g[e].order}))).map((function(t){return(0,be.jsx)(Xs,{data:e[t],subcategory:t,entriesAmount:!!m&&35},t)}))}),[]),y=(0,r.useMemo)((function(){var e,n=null===t||void 0===t||null===(e=t[i])||void 0===e?void 0:e.filter((function(e){return e.type===a})),r=(0,$s.Z)(n,"subCategory"),o=Object.keys(r);return(o=(0,qs.Z)(o,(function(e){return g[e].order}))).map((function(e){return(0,be.jsx)(Xs,{data:r[e],subcategory:e,className:"js-index-page__type-list-filtered",entriesAmount:!!m&&35},"".concat(e,"Filtered"))}))}),[]);return(0,Ue.bt)((function(){var e;null===(e=c.current)||void 0===e||e.kill(),o&&("enter"===n?c.current=(0,Vs.c5)(u.current):"leave"===n&&(c.current=(0,Vs.kh)(u.current)))}),[n]),(0,Ue.bt)((function(){var e;null===(e=c.current)||void 0===e||e.kill(),d.current||(c.current=o?(0,Vs.c5)(u.current,{delay:.35}):(0,Vs.kh)(u.current))}),[o]),(0,Ue.bt)((function(){d.current=!1}),[]),(0,Ue.bt)((function(){s&&l(u.current)}),[]),(0,Ue.bt)((function(){var e;null===(e=c.current)||void 0===e||e.kill(),s&&p(!0),f&&!s&&(c.current=(0,Vs.c5)(u.current,{delay:.35}))}),[s]),(0,be.jsx)("div",{ref:u,className:(0,wr.Z)(Js().root),children:s?y:v})}var tl=n(77399),nl=n.n(tl);function rl(e){var t=e.currentView,n=e.options,i=e.onClickClear,o=e.onClickCb,a=e.isAccordionOpen,s=e.uniqueSingularityActive,l=e.setUniqueSingularityActive,u=e.uniqueSingularity,c=(0,ye.$x)("uniqueSingularityRef"),d=(0,r.useRef)(),h=(0,r.useState)("Clear"),f=h[0],p=h[1],m=(0,r.useRef)(),g=(0,r.useRef)(),v=(0,r.useMemo)((function(){return n.map((function(e){return(0,be.jsx)("button",{type:"button",onClick:function(){return function(e){o(e)}(e)},className:(0,wr.Z)(nl().root__single,"u-reset-btn","js-indexPage__type-selector"),children:"singularity"===e?"Account":e},e)}))}),[]);return(0,Ue.bt)((function(){var e;if(null===(e=m.current)||void 0===e||e.kill(),"default"!==t.type||s)["subcategory","type","type:filtered"].includes(t.type)?(p("singularity"===t.data?"Account":t.data),m.current=(0,Vs._f)(d.current)):s&&(m.current=(0,Vs.dH)(d.current,{instant:!0}));else{m.current=(0,Vs.dH)(d.current,{cb:function(){p("Clear")}})}}),[t]),(0,Ue.bt)((function(){var e;"default"===t.type&&(null===(e=g.current)||void 0===e||e.kill(),g.current=a&&!s?(0,Vs.dH)(d.current,{delay:.2}):(0,Vs._f)(d.current,{hasClear:!1}))}),[a]),(0,Ue.bt)((function(){return function(){var e;null===(e=m.current)||void 0===e||e.kill()}}),[]),(0,be.jsxs)("div",{ref:d,className:nl().root,children:[v,s?(0,be.jsxs)("button",{type:"button",onClick:function(){var e;null===(e=m.current)||void 0===e||e.kill(),m.current=(0,Vs.cQ)(d.current,{categorySelected:"default"!==t.type}),(0,Vs.kh)(c,(function(){l(!1)}))},className:(0,wr.Z)(nl().uniqueSingularity,"js-singularity-filter"),children:[(0,be.jsx)(Lr.x8,{})," ",u]}):(0,be.jsxs)("button",{type:"button",className:(0,wr.Z)(nl().root__single,nl().root__clear,"u-reset-btn","js-root-clear"),onClick:i,children:[(0,be.jsx)("span",{className:nl()["root__clear-icon"],children:(0,be.jsx)(Lr.x8,{})}),f]})]})}var il=n(75486),ol=n(66332),al=n.n(ol),sl=r.forwardRef((function(e,t){var n=e.title,i=e.isAlreadyOpen,o=e.setAccordionOpen,a=void 0===o?function(){}:o,s=e.children,l=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),d=(0,r.useState)(!1),h=d[0],f=d[1];return(0,Ue.bt)((function(){var e=ve.p8.delayedCall(2,(function(){f(i),a(i)}));return function(){null===e||void 0===e||e.kill()}}),[]),(0,Ue.bt)((function(){var e;if(null===(e=c.current)||void 0===e||e.kill(),h){ve.p8.set(u.current,{height:"auto"});var t=(0,il.Z)(u.current.clientHeight/3e3,1.6,3);c.current=ve.p8.timeline(),c.current.from(u.current,{duration:t,height:0,ease:"power2.inOut"},.1).to(l.current,{duration:1.2,rotate:-90,ease:"power2.inOut"},.1).set(u.current,{height:"auto"}),c.current.timeScale(1.4)}else{c.current=ve.p8.timeline(),c.current.to(u.current,{duration:1.6,height:0,ease:"power2.inOut",delay:.1}).to(l.current,{duration:1.6,rotate:90,ease:"power2.inOut"},0),c.current.timeScale(1.4)}}),[h]),(0,be.jsxs)("div",{children:[(0,be.jsxs)("button",{ref:t,type:"button",className:(0,wr.Z)("u-reset-btn",al().trigger,"js-accordion__trigger"),onClick:function(){h?(f(!1),a(!1)):(f(!0),a(!0))},children:[(0,be.jsx)("div",{className:(0,wr.Z)(al().title,"js-accordion__title"),children:(0,be.jsx)("h5",{children:n})}),(0,be.jsx)("div",{ref:l,className:(0,wr.Z)(al().arrowContainer),children:(0,be.jsx)(Lr.ol,{})})]}),(0,be.jsx)("div",{ref:u,className:al().content,children:s})]})})),ll=r.memo(sl),ul=r.memo((function(e){var t=e.type,n=e.title,i=e.query,o=(0,r.useRef)(),a=(0,r.useState)(!1),s=a[0],l=a[1],u=(0,r.useState)({type:!1,data:!1}),c=u[0],d=u[1],h=(0,ye.$x)("groupedByCategory"),f=(0,ye.$x)("groupedByCategoryType");(0,Ue.bt)((function(){null!==i&&void 0!==i&&i.f?d({type:"type",data:null===i||void 0===i?void 0:i.f}):d({type:"default",data:""})}),[]);var p=function(e){if(o.current.getBoundingClientRect().top<0){var t=o.current.offsetTop;window.scrollTo({top:t,behavior:"smooth"})}d({type:"subcategory",data:e})},m=(0,Rn.Ir)(c,1100,"out-in");return(0,be.jsxs)(ll,{title:n,ref:o,setAccordionOpen:l,isAlreadyOpen:(null===i||void 0===i?void 0:i.a)===t,children:[(0,be.jsx)(rl,{options:["timeline","singularity","video","memory"],onClickClear:function(){d({type:"default"})},onClickCb:function(e){!function(e){d({type:"type",data:e})}(e)},currentView:c,isAccordionOpen:s}),m((function(e,n){return(0,be.jsxs)(be.Fragment,{children:["default"===e.type&&(0,be.jsx)(Zs,{data:h[t],lifeCycle:n,onClickSubCategory:p,isAccordionOpen:s}),"subcategory"===e.type&&(0,be.jsx)(el,{data:h[t],lifeCycle:n,selected:e.data,isAccordionOpen:s}),"type"===e.type&&(0,be.jsx)(el,{data:f[t],lifeCycle:n,selected:e.data,isAccordionOpen:s})]})}))]})})),cl=r.memo((function(e){var t=e.type,n=e.title,i=e.query,o=["extinction","success","disaster","history"],a=(0,r.useState)(!1),s=a[0],l=a[1],u=(0,r.useState)({type:!1,data:!1}),c=u[0],d=u[1],h=(0,r.useState)(o.includes(null===i||void 0===i?void 0:i.a)&&"singularity"===t),f=h[0],p=h[1],m=(0,ye.$x)("groupedByType"),g=(0,Rn.Ir)(c,1100,"out-in"),v=(0,r.useMemo)((function(){if("type:filtered"===c.type)return(0,$s.Z)(m[t][t],"category")}),[c]);(0,Ue.bt)((function(){null!==i&&void 0!==i&&i.f?d({type:"type:filtered",data:null===i||void 0===i?void 0:i.f}):d({type:"default",data:t})}),[]);var y;return(0,be.jsxs)(ll,{title:n,setAccordionOpen:l,isAlreadyOpen:(y=null===i||void 0===i?void 0:i.a,!(!o.includes(y)||"singularity"!==t)||y===t),children:[(0,be.jsx)(rl,{options:["species","habitat","anthro"],onClickClear:function(){d({type:"default",data:t})},onClickCb:function(e){!function(e){d({type:"type:filtered",data:e})}(e)},currentView:c,isAccordionOpen:s,uniqueSingularityActive:f,setUniqueSingularityActive:p,uniqueSingularity:null===i||void 0===i?void 0:i.a}),g((function(e,n){return(0,be.jsxs)(be.Fragment,{children:["default"===e.type&&(0,be.jsx)(el,{data:m[t],lifeCycle:n,selected:e.data,isAccordionOpen:s,uniqueSingularity:!(!o.includes(null===i||void 0===i?void 0:i.a)||"singularity"!==t)&&(null===i||void 0===i?void 0:i.a),uniqueSingularityActive:f}),"type:filtered"===e.type&&(0,be.jsx)(el,{data:v,lifeCycle:n,selected:e.data,isAccordionOpen:s,uniqueSingularity:!(!o.includes(null===i||void 0===i?void 0:i.a)||"singularity"!==t)&&(null===i||void 0===i?void 0:i.a),uniqueSingularityActive:f})]})}))]})}));function dl(e){var t=e.lifeCycle,n=e.children,i=(0,r.useRef)(),o=(0,r.useRef)();return(0,Ue.bt)((function(){var e;null===(e=o.current)||void 0===e||e.kill(),"enter"===t?o.current=(0,Vs.hM)(i.current):"leave"===t&&(o.current=(0,Vs.hj)(i.current))}),[t]),(0,Ue.bt)((function(){return function(){var e;null===(e=o.current)||void 0===e||e.kill()}}),[]),(0,be.jsx)("div",{ref:i,children:n})}var hl=r.memo((function(e){var t=e.currentView,n=e.query,r=(0,Rn.Ir)(t,1e3,"out-in");return(0,be.jsx)("div",{children:r((function(e,t){return(0,be.jsxs)(be.Fragment,{children:["category"===e&&(0,be.jsxs)(dl,{lifeCycle:t,children:[(0,be.jsx)(ul,{type:"species",title:"Species",query:n}),(0,be.jsx)(ul,{type:"habitat",title:"Habitat",query:n}),(0,be.jsx)(ul,{type:"anthro",title:"Anthro",query:n})]}),"type"===e&&(0,be.jsxs)(dl,{lifeCycle:t,children:[(0,be.jsx)(cl,{type:"timeline",title:"Timeline",query:n}),(0,be.jsx)(cl,{type:"singularity",title:"Account",query:n}),(0,be.jsx)(cl,{type:"video",title:"Video",query:n}),(0,be.jsx)(cl,{type:"memory",title:"Memory",query:n})]})]})}))})})),fl=n(34845),pl=n.n(fl),ml=r.memo((function(e){var t=e.currentView,n=e.setCurrentView;return(0,be.jsxs)("div",{className:pl().selector,children:[(0,be.jsx)("h1",{children:"Index"}),(0,be.jsxs)("div",{className:pl().selector__container,children:[(0,be.jsx)("button",{type:"button",className:(0,wr.Z)(pl().selector__entry,"category"===t&&pl()["is--active"],"u-reset-btn"),onClick:function(){return n("category")},children:"Category"}),(0,be.jsx)("div",{className:pl().selector__divider,children:"|"}),(0,be.jsx)("button",{type:"button",className:(0,wr.Z)(pl().selector__entry,"type"===t&&pl()["is--active"],"u-reset-btn"),onClick:function(){return n("type")},children:"Type"})]})]})})),gl=n(63941),vl=n(47803),yl=n.n(vl),_l={categories:"category",types:"type"},bl=r.memo((function(e){var t=e.backExitFn,n=((0,ye.s6)("exitFn"),(0,ye.s6)("router")),i=(0,r.useState)(!1),o=i[0],a=i[1],s=(0,r.useState)(),l=s[0],u=s[1];return(0,Ue.bt)((function(){var e,t;(null!==n&&void 0!==n&&n.isReady||null!==n&&void 0!==n&&n.query)&&(a((null===_l||void 0===_l?void 0:_l[null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.v])||"category"),null!==n&&void 0!==n&&null!==(t=n.query)&&void 0!==t&&t.v&&u(null===n||void 0===n?void 0:n.query))}),[n]),(0,be.jsxs)("div",{className:(0,wr.Z)(yl().root,"js-indexPage-content"),children:[(0,be.jsx)(gl.xE,{backLink:"/",backExitFn:t}),(0,be.jsx)("div",{className:yl().selector,children:(0,be.jsx)(ml,{currentView:o,setCurrentView:a})}),(0,be.jsx)("div",{className:yl().content,children:(0,be.jsx)(hl,{currentView:o,query:l})})]})}))},65929:function(e,t,n){"use strict";n.d(t,{jA:function(){return R},h4:function(){return A},Ar:function(){return F},v2:function(){return q},au:function(){return de},nn:function(){return ne}});var r=n(67294),i=n(13541),o=n(41664),a=n.n(o),s=n(11163),l=n(86010),u=n(43212),c=n.n(u),d=n(11930),h=n(50029),f=n(87794),p=n.n(f),m=n(19608),g=n(60577),v=n(41055),y=function(){var e=(0,h.Z)(p().mark((function e(t){var n,r,i,o,a,s,l,u,c,h,f,y;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=v.h.getState().menuRef,r=v.h.getState().mobileMenuRef,i=v.h.getState().headerRef,n&&(g.h.setState({menuOpen:!0}),o=m.ZP.timeline({delay:.3}),t?(a=m.ZP.utils.selector(r),s=a(".mobile-menu__circle-outline"),l=a(".mobile-menu__image-container"),u=a(".mobile-menu__image"),c=a(".mobile-menu__menu-item-label"),(0,d.xW)(i),o.set([s,l],{scale:0}),o.set(u,{scale:1.7}),o.set(c,{autoAlpha:0,x:"-=10"}),o.to(r,{autoAlpha:1,duration:.8,ease:"power2.out"}),o.to([l,u],{scale:1,duration:.8,ease:"power2.out"},"-=0.3"),o.to(c,{autoAlpha:1,x:0,duration:.8,ease:"power2.out"},"<"),o.to(s,{scale:1,duration:.8,ease:"power2.out"},"<")):(h=m.ZP.utils.selector(n),f=h(".menu__dot"),y=h(".menu__link-copy"),(0,d.kT)(i,{isMobile:t}),o.set(f,{scale:0}),o.set(y,{autoAlpha:0}),o.to(n,{autoAlpha:1,duration:.8,ease:"power2.out"}),o.to(f,{scale:1,duration:.8,ease:"power2.out"}),o.addLabel("dotsFinished"),o.to(y,{autoAlpha:1,duration:1.8,ease:"power2.out"},"dotsFinished-=0.3")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=v.h.getState().menuRef,n=v.h.getState().mobileMenuRef,r=v.h.getState().headerRef,i=g.h.getState().viewIconsVisible;g.h.setState({menuOpen:!1});var o=m.ZP.timeline();e&&n?((0,d.b6)(r),o.to(n,{autoAlpha:0,duration:.5,ease:"power2.out"})):!e&&t&&o.to(t,{autoAlpha:0,duration:.5,ease:"power2.out",onComplete:function(){(0,d.kp)(r,{viewIconsVisible:i,isMobile:e})}})},b=function(e,t,n){var r=m.ZP.utils.selector(e)("[data-menu-li]").filter((function(e){var n;return(null===e||void 0===e||null===(n=e.dataset)||void 0===n?void 0:n.menuLi)!==t})),i=r.map((function(e){return e.querySelector(".mobile-menu__circle-outline")})),o=r.map((function(e){return e.querySelector(".mobile-menu__image-container")})),a=r.map((function(e){return e.querySelector(".mobile-menu__menu-item-label")})),s=m.ZP.timeline({onStart:function(){n()},onComplete:function(){setTimeout((function(){return _(!0)}),1e3)}});s.to(i,{scale:0,duration:.7,ease:"power2.in"}),s.to(o,{scale:0,duration:.7,ease:"power2.in"},"-=0.3"),s.to(a,{autoAlpha:0,x:"-20",duration:.7,ease:"power2.in"},"<")},x=n(89343),w=n(49568),S=n(77843),D=n(85893);var A=function(){var e=(0,S.mv)("currentView"),t=(0,S.mv)("setIsRafActive"),n=(0,r.useRef)(null),o=(0,s.useRouter)(),u=(0,S.s6)("exitFn"),h=(0,S.s6)("headerVisible"),f=(0,S.s6)("setHeaderVisible"),p=(0,S.s6)("setHamburgerVisible"),m=(0,S.s6)("viewIconsVisible"),g=(0,S.s6)("setViewIconsVisible"),v=(0,S.s6)("menuOpen"),A=(0,S.ic)("setHeaderRef"),E=(0,S.ic)("mobileMenuRef"),M=(0,S.s6)("dotTimelineModalOpen"),C=(0,r.useState)(!1),T=C[0],P=C[1],R=(0,S.rm)().actions.setCurrentTransition,k=(0,S.dz)().width,O=(0,r.useState)(!1),L=O[0],F=O[1];(0,r.useEffect)((function(){F(k<900)}),[k]);var I=function(e,t,n){e.preventDefault(),b(E,t,(function(){return o.push(n)}))};(0,r.useEffect)((function(){n.current&&A(n.current)}),[n.current]),(0,r.useEffect)((function(){if(!1!==e&&"intro"!==e&&"homepage"!==e&&!T){var t="homepage"!==e,r="/"===o.pathname;P(!0),(0,d.kp)(n.current,{hamburgerVisible:t,viewIconsVisible:r,isMobile:L})}}),[e]),(0,r.useEffect)((function(){["/","/solutions","/solutions/[solution]"].includes(o.pathname)||f(!0)}),[]),(0,i.bt)((function(){if(h&&!T){var t="/"!==o.pathname||L||"homepage"!==e,r="/explore"===o.pathname||"/"===o.pathname&&L;P(!0),(0,d.kp)(n.current,{hamburgerVisible:t,viewIconsVisible:r,isMobile:L}),P(!0),t&&p(!0),r&&g(!0)}}),[h]),(0,r.useEffect)((function(){var t="homepage"!==e&&"/"===o.pathname;t&&!m?((0,d.ZQ)(n.current),g(!0)):!t&&m&&((0,d.um)(n.current),g(!1))}),[o.pathname]);var N=function(e,n){u&&(e.preventDefault(),t(!0),u(n))};return(0,D.jsx)("header",{ref:n,className:(0,l.Z)(c().container,"header__container"),children:(0,D.jsxs)("div",{className:c().inner,children:[(0,D.jsxs)("div",{className:c().left,children:[(0,D.jsx)(a(),{href:"/search",children:(0,D.jsx)("a",{type:"button",className:(0,l.Z)(c().button,c().mobileSearch,"header__mobile-search"),"aria-hidden":v,onClick:function(e){return I(e,"search","/search")},onKeyDown:function(e){return I(e,"search","/search")},children:(0,D.jsx)(w.HN,{})})}),(0,D.jsx)(a(),{href:"/",children:(0,D.jsx)("a",{onKeyDown:function(e){return N(e,"/")},onClick:function(e){return N(e,"/")},className:(0,l.Z)(c().wim,"header__wim","hide-fouc"),children:"What is Missing"})}),(0,D.jsx)(a(),{href:"/share-a-memory",children:(0,D.jsx)("a",{className:(0,l.Z)(c().share,"header__share","hide-fouc"),onKeyDown:function(e){return N(e,"/share-a-memory")},onClick:function(e){return N(e,"/share-a-memory")},children:"Share a Memory"})})]}),(0,D.jsxs)("div",{className:(0,l.Z)(c().right,"header__right","hide-fouc"),children:[(0,D.jsx)("button",{type:"button",className:(0,l.Z)(c().button,c().viewButton,"globe"===e&&c().viewButtonSelected,"header__globe"),onClick:function(){"globe"!==e&&R("timeline=>globe:start")},children:(0,D.jsx)(w.TH,{})}),(0,D.jsx)("button",{type:"button",className:(0,l.Z)(c().button,c().viewButton,"timeline"===e&&c().viewButtonSelected,"header__clock"),onClick:function(){"timeline"!==e&&R("globe=>timeline:start")},children:(0,D.jsx)(w.SU,{})}),(0,D.jsx)("button",{type:"button",className:(0,l.Z)(c().button,c().hamburger,"header__hamburger"),onClick:function(){y(L)},"aria-hidden":!v,children:(0,D.jsx)(w.pr,{})}),(0,D.jsx)("button",{type:"button",className:(0,l.Z)(c().button,c().mobileClose,"header__mobile-close"),"aria-hidden":v,onClick:function(){M?(0,x.Zo)({mobile:!0}):_(L)},children:(0,D.jsx)(w.x8,{})})]})]})})},E=n(88522),M=n.n(E),C=n(29489),T=n.n(C),P=n(96029);var R=function(){var e=(0,S.s6)("setFlipContainer"),t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current&&e(t.current)}),[t.current]),(0,D.jsx)("div",{className:M().container,ref:t,"aria-hidden":!0,children:(0,D.jsxs)(P.OO,{standardGrid:!0,transparentBg:!0,children:[(0,D.jsx)("div",{className:(0,l.Z)(M().heroContainer,T().heroContainer,"flip__hero-container")}),(0,D.jsx)("div",{className:(0,l.Z)(M().background,"flip__background")})]})})},k=n(38891),O=n(60324),L=n.n(O);var F=function(e){var t=e.children,n=(0,S.s6)("mobileGlobeCategoryOverlay"),r=(0,k.Yz)(!!n,850),i=r.stage,o=r.shouldMount;return(0,D.jsxs)("div",{className:L().container,children:[(0,D.jsx)(A,{}),t,(0,D.jsx)(q,{}),o&&(0,D.jsx)(de,{lifeCycle:i}),(0,D.jsx)(ne,{}),(0,D.jsx)(R,{})]})},I=n(25675),N=n.n(I),B=n(38567),j=n.n(B),z=n(19910),U=n(79307),H={src:"/_next/static/media/about.fc0a4966.png",height:1200,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR4nAEIAff+AaOwugAnKiopzs/YmeDd2jkYFA8A2OgGx5jjCmefSxPXAQAATCl0hlTFEBANEQUA9wC5ze8AOS8gAD80Hu8UDgI7Aaazv8LNztU96/IA+hUQBgbM3/oAX0kk+hkWDwbm7wHCAaKqr/vY3u0EtcroAP3+/wA8MCMAGhUKAPT5AQDs8PX7AYOTqfoOCwUFycbJAP4EDwACDBcADBAWAObn5QAWA+b7AWFmcMIkIhk9/gIK+tPc8wbv/QsAGBYX+v0JFAYG9uLCAXhzZyno7fnFDwsHEfMDIAD0+gAADwX0AAEJF+/iEUE7AUUwAADs6gApR1t0mOrz/zkQCPcA4/QTxyQJx2jnCVfXT8Fsz26UPOwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},G={src:"/_next/static/media/explore.e69f46ca.png",height:1200,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR4nAEIAff+AWuHOACVecgpfJ08mQwN+TkXEC4AFQtMx+r152fm2fHXAZ67USnW3N7FB/gGEQUFAwDN58gAQC5vACMdEu+vrn87AZGmXMIJFNo9GgBG+v3uJAa63JEABwoX+iIYCgYsKxHCAZe0SfsLC+sEEwRbAPLiDQC6vKQAByPnAA4X9QBAL3L7AY2rO/vv8vsEHRI4ALqxywDWwfYALkr/APYI9QALBxH7AZKtRcLd4O09Ehb4+tnQBQYpIy4A1cfl+ic/9wb09uzCAVWGACkhEjvFBv4CESYeHAD/D9cA8OIdABEOJO84QC87AYmhXwAwKx4pubXQmDpBLTkHBCkAv8+rxxACBGgIE67Xg49pFVW7A2IAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},V={src:"/_next/static/media/default.6c2883d5.jpg",height:1600,width:1600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAj4P/xAAZEAEAAgMAAAAAAAAAAAAAAAABAAIiMWH/2gAIAQEAAT8Ab2RBw1yf/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:8,blurHeight:8},W={src:"/_next/static/media/solutions-2.45b800a0.png",height:1200,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR4nAEIAff+AWV5WgDd6qYpFQZNmQ8JGzkNDRgAJyQrxjk2PGgBAQTXAWd7YCkMCAzFBgUIEQcGCgAJCBMA/v7+AC8qOe8yLjc7AYOOhcIUERQ9Eg8V+vL08wbw9PYA/v/++iYhKwYaFxzCAaywtfv4+PIE7e/qAAcHCgD5+wIAAAEAABMQFAAKCQz7AaGlo/sRDxIE4uPhAP8A/wDy9vUAAAD+ABEPFgAAAAH7AYWMgcEBAQM+Ew8Z+vP08gbo7OYABwQG+g0OEgb9/f3CAUdaOCkxIz7FBAQIEQECAAD19PMA/P38AAsKDu8AAP87AUhWPwAaDSApBAwFmOv03zkhFy0ACAUJx/b4+GgFBAXXHItcD62b6QgAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},Z={src:"/_next/static/media/what-if-2.05eaefa3.png",height:1200,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA+ElEQVR42mOAAk1FpaBDysoRv/gF7H6xsZocYmBw0gTLLFm8WjM8rPAdA4P+fz5e8f9Aof8xMVn/Gxu63/n55GkyTJ8+91BxUdV/oMRPYSEtIC3+384u6qebW/L/iPDsgwz6esG/GBi0/nOwqQAlpf5zcBj9NzZO+29gkPpfVzfpF1CB1y97+0SgpO1/EWE9IK32PzQk639TY/9/Q4O0Xwy6ui6HlFUi/tvaZv5MTir6z8CgDLYuJDjtf1xszUEGfl4GTWWl4HfZWQ3/ExMygZJc/3l5FIC09jsGhgSIT0pLJmk6OgQeBDJ/cXPJ/mJgkDwoKsoAlgQA+vRYLHAUFfIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},$={src:"/_next/static/media/share-a-memory-2.77453768.png",height:1200,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA5ElEQVR42iWPy06DUBRFT+BwKw/voyiQmtBCxAYjxprG1NRHTIx15sAP8Fvhg5gDgy20K9lZgzXaNOF5TklkN+zwIAQPls3NmStKOuFPsZ2bGaaJGcNxGDY77RhLii+piRMf+VJ2rsuwmOF63NmjrxaypnR9O6yyGFEiobSPQHrQOkB0IbBKZU/n1VPvyjmksJAsRhsFNSPEjx8wm8+ewrei1s83CO6WnalSyCqDLLhTP39QX4eawsNDqfdFa/ZrqPsMaptD766hv1/b8Pf99ERlVmm2aa3zqFe7rFcvRe1v6Bj/Aa1rQlIuRjk1AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};var q=function(e){var t=e.homepage,n=(0,r.useRef)(null),i=(0,r.useState)(null),o=i[0],u=i[1],c=(0,S._j)(),d=(0,S.s6)("menuOpen"),h=(0,S.s6)("audioArr"),f=(0,S.s6)("audioPlaying"),p=(0,S.s6)("setAudioPlaying"),g=(0,S.s6)("activeAudio"),v="mobile"===(0,S.s6)("responsiveVersion"),y=(0,S.ic)("setMenuRef"),b=(0,s.useRouter)(),x=(0,S.rm)().actions.setCurrentTransition;(0,r.useEffect)((function(){n.current&&!t&&y(n.current)}),[n.current]);var A=function(){_(v)},E=function(e){e!==o&&(!function(e,t){var n=m.ZP.utils.selector(e)('[data-circle="'.concat(t,'"]')),r=n[0].querySelector("p"),i=m.ZP.timeline();i.set(n,{scale:1.3}),i.set(r,{autoAlpha:0,y:"20"}),i.to(n,{autoAlpha:1,duration:.7,scale:1.02,ease:"power2.out"}),i.to(r,{autoAlpha:1,duration:.7,y:"0",ease:"power2.out"},"-=0.3")}(n.current,e),u(e))},M=function(e){!function(e,t){var n=m.ZP.utils.selector(e)('[data-circle="'.concat(t,'"]')),r=n[0].querySelector("p"),i=m.ZP.timeline();i.to(n,{autoAlpha:0,duration:.7,scale:1.02,ease:"power2.out"}),i.to(r,{autoAlpha:0,duration:.7,y:"20",ease:"power2.out"},"<")}(n.current,e),u(null)},C=function(e,r,i){e.preventDefault(),t?"/"===i?(x("homepage=>globe:start"),(0,z.t)(n.current,r)):"/solutions"===i?(0,z.t)(n.current,r,(function(){b.push(i),x("homepage=>solution:start")})):(0,z.t)(n.current,r,(function(){return b.push(i)})):function(e,t,n){var r=m.ZP.utils.selector(e)("[data-menu-li]").filter((function(e){var n;return(null===e||void 0===e||null===(n=e.dataset)||void 0===n?void 0:n.menuLi)!==t})),i=r.map((function(e){return e.querySelector(".menu__dot")})),o=r.map((function(e){return e.querySelector(".menu__link-copy")})),a=m.ZP.timeline({onStart:function(){n()},onComplete:function(){setTimeout((function(){return _()}),1e3)}});a.to(o,{autoAlpha:0,duration:.7,ease:"power2.out"}),a.to(i,{scale:0,duration:.7,ease:"power2.in"},"<")}(n.current,r,(function(){return b.push(i)}))};return(0,D.jsxs)("div",{className:(0,l.Z)(j().container,t&&j()["container--homepage"],t&&"js-homepage-menu__container"),"aria-hidden":!d,ref:n,children:[!t&&(0,D.jsxs)("div",{className:j().header,children:[(0,D.jsx)(a(),{href:"/search",children:(0,D.jsx)("a",{className:j().search,onClick:function(e){return C(e,null,"/search")},onKeyDown:function(e){return C(e,null,"/search")},children:(0,D.jsx)("button",{type:"button",className:j().headerButton,onClick:A,children:(0,D.jsx)(w.HN,{})})})}),(0,D.jsx)("div",{className:j().close,children:(0,D.jsx)("button",{type:"button",className:j().headerButton,onClick:A,children:(0,D.jsx)(w.x8,{})})})]}),(0,D.jsxs)("div",{className:(0,l.Z)(j().circle,t&&j()["circle--homepage"]),children:[(0,D.jsxs)("div",{className:j().circleContainer,children:[!t&&(0,D.jsx)(N(),{src:V,alt:"Globe",layout:"fill",objectFit:"cover",priority:!0}),(0,D.jsx)(U.e7,{active:"about"===o,slug:"about",alt:"A view of a forest looking up from the ground",copy:"Learn about Maya Lin\u2019s fifth and final memorial: a multi-platform science based artwork that presents an ecological history of our world - past, present, and future.",src:H}),(0,D.jsx)(U.e7,{active:"explore"===o,slug:"explore",alt:"A bird",copy:"Discover ecological histories and stories of former abundance, loss, and recovery on the map of memory.",src:G}),(0,D.jsx)(U.e7,{active:"solutions"===o,slug:"solutions",alt:"An overhead view of fields",copy:"Learn how we can reduce our emissions and protect and restore species and habitats \u2013 around the world.",src:W}),(0,D.jsx)(U.e7,{active:"whatIf"===o,slug:"whatIf",alt:"A view of a city interspersed with mountains",copy:"See how art can help us rethink the problems we face, and give us hope that each one of us can make a difference.",src:Z}),(0,D.jsx)(U.e7,{active:"shareAMemory"===o,slug:"shareAMemory",alt:"An aerial view of a coast",copy:"Help make a global memorial something personal and close to home. Share your stories of the natural world.",src:$})]}),(0,D.jsx)("nav",{children:(0,D.jsxs)("ul",{className:j().ul,children:[(0,D.jsx)("li",{onMouseEnter:function(){return E("about")},onMouseLeave:function(){return M("about")},"data-menu-li":"about",children:(0,D.jsx)(a(),{href:"/about",children:(0,D.jsxs)("a",{className:j().linkContainer,onClick:function(e){return C(e,"about","/about")},onKeyDown:function(e){return C(e,"about","/about")},children:[(0,D.jsx)("span",{className:(0,l.Z)(j().dot,"menu__dot"),"aria-hidden":"true",children:(0,D.jsx)("span",{className:(0,l.Z)(j().innerDot,"about"===o&&j()["innerDot--active"])})}),(0,D.jsx)("div",{className:(0,l.Z)(j().linkCopy,"menu__link-copy"),children:"About"})]})})}),(0,D.jsx)("li",{onMouseEnter:function(){return E("explore")},onMouseLeave:function(){return M("explore")},"data-menu-li":"explore",children:(0,D.jsx)(a(),{href:"/",children:(0,D.jsxs)("a",{className:j().linkContainer,onClick:function(e){return C(e,"explore","/")},onKeyDown:function(e){return C(e,"explore","/")},children:[(0,D.jsx)("span",{className:(0,l.Z)(j().dot,"menu__dot"),"aria-hidden":"true",children:(0,D.jsx)("span",{className:(0,l.Z)(j().innerDot,"explore"===o&&j()["innerDot--active"])})}),(0,D.jsx)("div",{className:(0,l.Z)(j().linkCopy,"menu__link-copy"),children:"Explore"})]})})}),(0,D.jsx)("li",{onMouseEnter:function(){return E("solutions")},onMouseLeave:function(){return M("solutions")},"data-menu-li":"solutions",children:(0,D.jsx)(a(),{href:"/solutions",children:(0,D.jsxs)("a",{className:j().linkContainer,onClick:function(e){return C(e,"solutions","/solutions")},onKeyDown:function(e){return C(e,"solutions","/solutions")},children:[(0,D.jsx)("span",{className:(0,l.Z)(j().dot,"menu__dot"),"aria-hidden":"true",children:(0,D.jsx)("span",{className:(0,l.Z)(j().innerDot,"solutions"===o&&j()["innerDot--active"])})}),(0,D.jsx)("div",{className:(0,l.Z)(j().linkCopy,"menu__link-copy"),children:"Solutions"})]})})}),(0,D.jsx)("li",{onMouseEnter:function(){return E("whatIf")},onMouseLeave:function(){return M("whatIf")},"data-menu-li":"whatIf",children:(0,D.jsx)(a(),{href:"/what-if",children:(0,D.jsxs)("a",{className:j().linkContainer,onClick:function(e){return C(e,"whatIf","/what-if")},onKeyDown:function(e){return C(e,"whatIf","/what-if")},children:[(0,D.jsx)("span",{className:(0,l.Z)(j().dot,"menu__dot"),"aria-hidden":"true",children:(0,D.jsx)("span",{className:(0,l.Z)(j().innerDot,"whatIf"===o&&j()["innerDot--active"])})}),(0,D.jsx)("div",{className:(0,l.Z)(j().linkCopy,"menu__link-copy"),children:"What if?"})]})})}),(0,D.jsx)("li",{onMouseEnter:function(){return E("shareAMemory")},onMouseLeave:function(){return M("shareAMemory")},"data-menu-li":"shareAMemory",children:(0,D.jsx)(a(),{href:"/share-a-memory",children:(0,D.jsxs)("a",{className:j().linkContainer,onClick:function(e){return C(e,"shareAMemory","/share-a-memory")},onKeyDown:function(e){return C(e,"shareAMemory","/share-a-memory")},children:[(0,D.jsx)("span",{className:(0,l.Z)(j().dot,"menu__dot"),"aria-hidden":"true",children:(0,D.jsx)("span",{className:(0,l.Z)(j().innerDot,"shareAMemory"===o&&j()["innerDot--active"])})}),(0,D.jsx)("div",{className:(0,l.Z)(j().linkCopy,"menu__link-copy"),children:"Share your memory"})]})})})]})})]}),!t&&(0,D.jsx)("div",{className:j().footer,children:(0,D.jsxs)("div",{className:j().footerInner,children:[(0,D.jsx)("div",{children:h&&(0,D.jsxs)("button",{className:j().audioButton,type:"button",onClick:function(){f?(p(!1),g.pause()):!f&&g?(p(!0),g.play()):c()},children:[(0,D.jsx)(U.yI,{muted:!f}),f?"Pause sounds":"Play sounds"]})}),(0,D.jsx)("nav",{className:j().footerNav,children:(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:(0,D.jsx)(a(),{href:"/site-index",children:(0,D.jsx)("a",{onClick:function(e){return C(e,null,"/site-index")},onKeyDown:function(e){return C(e,null,"/site-index")},children:"Index"})})}),(0,D.jsx)("li",{children:(0,D.jsx)(a(),{href:"/terms",children:(0,D.jsx)("a",{onClick:function(e){return C(e,null,"/terms")},onKeyDown:function(e){return C(e,null,"/terms")},children:"Terms"})})}),(0,D.jsx)("li",{children:(0,D.jsx)(a(),{href:"/credits",children:(0,D.jsx)("a",{onClick:function(e){return C(e,null,"/credits")},onKeyDown:function(e){return C(e,null,"/credits")},children:"Credits"})})})]})})]})}),t&&(0,D.jsx)("p",{className:(0,l.Z)(j().pathCopy,"js-homepage-menu__path-copy"),children:"Choose a path\u2026"})]})},Y=n(86904),K=n.n(Y),X={src:"/_next/static/media/about-mobile.353ca900.jpg",height:120,width:120,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAKQqP//EAB0QAAIBBAMAAAAAAAAAAAAAAAECBAADBRIRIeL/2gAIAQEAAT8AEjLLnHGlxpW5CK3PXmv/xAAZEQABBQAAAAAAAAAAAAAAAAACAAEhIjH/2gAIAQIBAT8Ac4Go4v/EABcRAAMBAAAAAAAAAAAAAAAAAAABIRL/2gAIAQMBAT8AzXWf/9k=",blurWidth:8,blurHeight:8},Q={src:"/_next/static/media/explore-mobile.ec119f7b.jpg",height:120,width:120,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABQEBAQAAAAAAAAAAAAAAAAAAAgT/2gAMAwEAAhADEAAAALYlP//EABwQAAIBBQEAAAAAAAAAAAAAAAEEAwACEyFxgv/aAAgBAQABPwBoPLvR45WC/IzqwAnviv/EABsRAAEEAwAAAAAAAAAAAAAAAAMAAQIxEjJR/9oACAECAQE/AAibHaV9tf/EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEDAQE/AAv/2Q==",blurWidth:8,blurHeight:8},J={src:"/_next/static/media/solutions-mobile-2.0909620c.jpg",height:120,width:120,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABAEBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAKwn/8QAGxAAAQQDAAAAAAAAAAAAAAAAAwABAgQhIuH/2gAIAQEAAT8AAepUNBwQbV89X//EABYRAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAgBAgEBPwA0hf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Af//Z",blurWidth:8,blurHeight:8},ee={src:"/_next/static/media/what-if-mobile-2.c8f37a4f.jpg",height:120,width:120,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABwEBAQAAAAAAAAAAAAAAAAAAAgT/2gAMAwEAAhADEAAAAJ2Lj//EABwQAQACAgMBAAAAAAAAAAAAAAIDEQExAAQSE//aAAgBAQABPwAuEdoTSfAxTBeBg2RqrOdXz//EABgRAAIDAAAAAAAAAAAAAAAAAAARAQJx/9oACAECAQE/AKS3p//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Af//Z",blurWidth:8,blurHeight:8},te={src:"/_next/static/media/share-a-memory-mobile-2.05565989.jpg",height:120,width:120,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABwEBAQAAAAAAAAAAAAAAAAAAAgT/2gAMAwEAAhADEAAAAJcFH//EABkQAAIDAQAAAAAAAAAAAAAAAAECABQhcf/aAAgBAQABPwCoGcDAvZ//xAAXEQADAQAAAAAAAAAAAAAAAAAAAQIh/9oACAECAQE/AISpaf/EABgRAAIDAAAAAAAAAAAAAAAAAAEDAAIx/9oACAEDAQE/ALOYDs//2Q==",blurWidth:8,blurHeight:8};var ne=function(){var e=(0,S._j)(),t=(0,S.s6)("menuOpen"),n=(0,S.s6)("audioArr"),i=(0,S.s6)("audioPlaying"),o=(0,S.s6)("setAudioPlaying"),u=(0,S.s6)("activeAudio"),c=(0,S.ic)("setMobileMenuRef"),d=(0,r.useRef)(null),h=(0,s.useRouter)();(0,r.useEffect)((function(){d.current&&c(d.current)}),[d.current]);var f=function(e,t,n){e.preventDefault(),b(d.current,t,(function(){return h.push(n)}))};return(0,D.jsxs)("div",{className:K().container,"aria-hidden":!t,ref:d,children:[(0,D.jsx)("nav",{className:K().nav,children:(0,D.jsxs)("ul",{className:K().menu,children:[(0,D.jsx)("li",{className:K().menuItem,"data-menu-li":"about",children:(0,D.jsx)(a(),{href:"/about",children:(0,D.jsxs)("a",{className:K().link,onClick:function(e){return f(e,"about","/about")},onKeyDown:function(e){return f(e,"about","/about")},children:[(0,D.jsx)("span",{className:(0,l.Z)(K().circleOutline,"mobile-menu__circle-outline"),"aria-hidden":"true"}),(0,D.jsx)("div",{className:(0,l.Z)(K().imageContainer,"mobile-menu__image-container"),children:(0,D.jsx)(N(),{src:X,alt:"",className:"mobile-menu__image"})}),(0,D.jsx)("span",{className:(0,l.Z)(K().menuItemLabel,"mobile-menu__menu-item-label"),children:"About"})]})})}),(0,D.jsx)("li",{className:K().menuItem,"data-menu-li":"explore",children:(0,D.jsx)(a(),{href:"/explore",children:(0,D.jsxs)("a",{className:K().link,onClick:function(e){return f(e,"explore","/")},onKeyDown:function(e){return f(e,"explore","/")},children:[(0,D.jsx)("span",{className:(0,l.Z)(K().circleOutline,"mobile-menu__circle-outline"),"aria-hidden":"true"}),(0,D.jsx)("div",{className:(0,l.Z)(K().imageContainer,"mobile-menu__image-container"),children:(0,D.jsx)(N(),{src:Q,alt:"",className:"mobile-menu__image"})}),(0,D.jsx)("span",{className:(0,l.Z)(K().menuItemLabel,"mobile-menu__menu-item-label"),children:"Explore"})]})})}),(0,D.jsx)("li",{className:K().menuItem,"data-menu-li":"solutions",children:(0,D.jsx)(a(),{href:"/solutions",children:(0,D.jsxs)("a",{className:K().link,onClick:function(e){return f(e,"solutions","/solutions")},onKeyDown:function(e){return f(e,"solutions","/solutions")},children:[(0,D.jsx)("span",{className:(0,l.Z)(K().circleOutline,"mobile-menu__circle-outline"),"aria-hidden":"true"}),(0,D.jsx)("div",{className:(0,l.Z)(K().imageContainer,"mobile-menu__image-container"),children:(0,D.jsx)(N(),{src:J,alt:"",className:"mobile-menu__image"})}),(0,D.jsx)("span",{className:(0,l.Z)(K().menuItemLabel,"mobile-menu__menu-item-label"),children:"Solutions"})]})})}),(0,D.jsx)("li",{className:K().menuItem,"data-menu-li":"whatIf",children:(0,D.jsx)(a(),{href:"/what-if",children:(0,D.jsxs)("a",{className:K().link,onClick:function(e){return f(e,"whatIf","/what-if")},onKeyDown:function(e){return f(e,"whatIf","/what-if")},children:[(0,D.jsx)("span",{className:(0,l.Z)(K().circleOutline,"mobile-menu__circle-outline"),"aria-hidden":"true"}),(0,D.jsx)("div",{className:(0,l.Z)(K().imageContainer,"mobile-menu__image-container"),children:(0,D.jsx)(N(),{src:ee,alt:"",className:"mobile-menu__image"})}),(0,D.jsx)("span",{className:(0,l.Z)(K().menuItemLabel,"mobile-menu__menu-item-label"),children:"What if?"})]})})}),(0,D.jsx)("li",{className:K().menuItem,"data-menu-li":"shareAMemory",children:(0,D.jsx)(a(),{href:"/share-a-memory",children:(0,D.jsxs)("a",{className:K().link,onClick:function(e){return f(e,"shareAMemory","/share-a-memory")},onKeyDown:function(e){return f(e,"shareAMemory","/share-a-memory")},children:[(0,D.jsx)("span",{className:(0,l.Z)(K().circleOutline,"mobile-menu__circle-outline"),"aria-hidden":"true"}),(0,D.jsx)("div",{className:(0,l.Z)(K().imageContainer,"mobile-menu__image-container"),children:(0,D.jsx)(N(),{src:te,alt:"",className:"mobile-menu__image"})}),(0,D.jsx)("span",{className:(0,l.Z)(K().menuItemLabel,"mobile-menu__menu-item-label"),children:"Share your memory"})]})})})]})}),(0,D.jsx)("div",{className:K().soundContainer,children:n&&(0,D.jsxs)("button",{className:K().audioButton,type:"button",onClick:function(){i?(o(!1),u.pause()):!i&&u?(o(!0),u.play()):e()},children:[(0,D.jsx)(U.yI,{muted:!i}),i?"Pause sounds":"Play sounds"]})}),(0,D.jsx)("nav",{className:K().footerNav,children:(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:(0,D.jsx)(a(),{href:"/site-index",children:(0,D.jsx)("a",{onClick:function(e){return f(e,"siteIndex","/site-index")},onKeyDown:function(e){return f(e,"siteIndex","/site-index")},children:"Index"})})}),(0,D.jsx)("li",{children:(0,D.jsx)(a(),{href:"/terms",children:(0,D.jsx)("a",{onClick:function(e){return f(e,"terms","/terms")},onKeyDown:function(e){return f(e,"terms","/terms")},children:"Terms"})})}),(0,D.jsx)("li",{children:(0,D.jsx)(a(),{href:"/credits",children:(0,D.jsx)("a",{onClick:function(e){return f(e,"credits","/credits")},onKeyDown:function(e){return f(e,"credits","/credits")},children:"Credits"})})})]})})]})},re=n(27812),ie=n(4730),oe=n(85490),ae=n(59252),se=n(53026),le=n(43323),ue=n.n(le),ce=["storyTypeData"],de=r.memo((function(e){var t=e.lifeCycle,n=(0,r.useRef)(),o=(0,r.useRef)(),u=(0,s.useRouter)(),c=(0,S.fq)(),d=c.storyTypeData,h=(0,ie.Z)(c,ce),f=(0,S.s6)("mobileGlobeCategoryOverlay"),p=(0,S.s6)("setMobileGlobeCategoryOverlay"),m=(0,S.mv)("setIsRafActive"),g=f,v=function(e){p(!1)};(0,r.useEffect)((function(){var e=o.current.querySelectorAll("a");return e.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.href.replace("https://www.whatismissing.org","");u.push(n)}))})),function(){e.forEach((function(e){e.removeEventListener("click",(function(t){t.preventDefault(),u.push(e.href)}))}))}}),[o.current]);var y=(0,r.useMemo)((function(){var e=d.find((function(e){return e.name===g})),t=[].concat((0,re.Z)(h.raw.dotCollection.items),(0,re.Z)(h.raw.dotCollectionTimeline.items)).filter((function(e){return 1===e.priority&&e.subType===g}));return t.sort((function(e,t){var n=parseInt(e.yearString,10),r=parseInt(t.yearString,10);return n>r?-1:n<r?1:0})),{top:e,entries:t}}),[]),_=(0,r.useMemo)((function(){return y.entries.map((function(e){var t,n,r=null!==e&&void 0!==e&&null!==(t=e.image)&&void 0!==t&&t.url?"".concat(null===(n=e.image)||void 0===n?void 0:n.url,"?w=125&h=125&q=70&fit=fill"):"/images/placeholders/missingDot.png",i="timeline"===g?"/timeline/".concat(e.slug):"/content/".concat(e.slug);return(0,D.jsx)(a(),{href:i,children:(0,D.jsx)("a",{children:(0,D.jsxs)("div",{className:ue().entries__single,children:[(0,D.jsx)("div",{className:ue()["entries__single-image"],children:(0,D.jsx)(N(),{src:r,layout:"fill",objectFit:"cover"})}),(0,D.jsxs)("div",{className:ue()["entries__single-content"],children:[(0,D.jsx)("h3",{children:e.title}),(0,D.jsx)("div",{className:ue()["entries__single-label"],children:e.displayYear})]})]})})},e.slug)}))}),[y]);(0,i.bt)((function(){"leave"===t?(m(!0),(0,se.Z)(n.current)):"enter"===t&&(m(!1),(0,se.I)(n.current))}),[t]);(0,oe.useDrag)((function(e){e.movement[0]>0&&p(!1)}),{swipe:{distance:[5,5],duration:3e3,velocity:[0,0]}});return(0,D.jsxs)("div",{ref:n,className:ue().root,children:[(0,D.jsx)("div",{className:(0,l.Z)(ue().backArrowContainer,"timeline__back-arrow-container"),onClick:v,onKeyDown:v,children:(0,D.jsx)(w.D1,{})}),(0,D.jsxs)("div",{className:ue().wrapper,children:[(0,D.jsx)("div",{className:ue().topImage,style:{backgroundImage:"linear-gradient(to bottom,  rgba(0,0,0, 0.3) 75%,rgba(0,0,0,1) 100%), url(".concat(y.top.image.url,"?w=500&h=400&q=70&fit=fill)")}}),(0,D.jsxs)("div",{className:ue().inner,children:[(0,D.jsx)("h2",{children:y.top.name}),(0,D.jsx)("p",{ref:o,className:(0,l.Z)(ue().description,"js-mobile-modal__description"),dangerouslySetInnerHTML:{__html:(0,ae.Z)(y.top.descriptionMobile)}}),(0,D.jsx)("div",{className:ue().entries,children:_})]})]})]})}))},49194:function(e,t,n){"use strict";n.d(t,{F:function(){return u}});var r=n(59499),i=n(67294),o=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=(0,i.createContext)();function u(e){var t=e.value,n=e.children,r=(0,i.useState)(),a=r[0],u=r[1];return(0,o.jsx)(l.Provider,{value:s(s({},t),{},{solutionMapsData:a,actions:{setSolutionMapsData:u}}),children:n})}t.Z=l},67882:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});var r=n(67294),i=n(19608),o=n(13541),a=n(77843),s=n(85893),l=(0,r.createContext)(),u={"intro=>homepage:start":"homepage","intro=>globe:start":"globe","intro=>solution:start":"solution","homepage=>globe:start":"globe","homepage=>solution:start":"solution","globe=>timeline:start":"timeline","timeline=>globe:start":"globe","solution=>globe:start":"globe","globe=>solution:start":"solution","timeline=>solution:start":"solution","deeplink=>solution:start":"solution"};function c(e){var t=e.children,n=(0,r.useState)(),c=n[0],d=n[1],h=(0,r.useState)(),f=h[0],p=h[1],m=(0,r.useRef)(i.p8.timeline()),g=(0,a.mv)("setCurrentView");return(0,o.bt)((function(){var e,t=f,n=m;null===n||void 0===n||null===(e=n.current)||void 0===e||e.kill();var r=t&&(null===t||void 0===t?void 0:t.includes(":start")),o=t&&(null===t||void 0===t?void 0:t.includes(":end"));if(r){var a=u[f];d(!0),n.current=i.p8.timeline({onComplete:function(){d(!1),p((function(e){return e.replace(":start",":end")})),g(a)}}),n.current.set({},{},.3)}else o?i.p8.delayedCall(.1,(function(){p(!1)}),!1):(n.current=null,setTimeout((function(){d(!1),p(!1)})))}),[f]),(0,s.jsx)(l.Provider,{value:{isTransitioning:c,currentTransition:f,refTransitionTimeline:m,actions:{setIsTransitioning:d,setCurrentTransition:p}},children:t})}t.Z=l},44475:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=function(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}()},36292:function(e,t,n){"use strict";n.d(t,{Z:function(){return In},W:function(){return Fn}});var r={};n.r(r),n.d(r,{AsyncCompress:function(){return Nt},AsyncDecompress:function(){return Jt},AsyncDeflate:function(){return Tt},AsyncGunzip:function(){return Ut},AsyncGzip:function(){return Nt},AsyncInflate:function(){return Ot},AsyncUnzipInflate:function(){return Mn},AsyncUnzlib:function(){return Yt},AsyncZipDeflate:function(){return xn},AsyncZlib:function(){return Wt},Compress:function(){return It},DecodeUTF8:function(){return ln},Decompress:function(){return Qt},Deflate:function(){return Ct},EncodeUTF8:function(){return un},Gunzip:function(){return zt},Gzip:function(){return It},Inflate:function(){return kt},Unzip:function(){return Cn},UnzipInflate:function(){return En},UnzipPassThrough:function(){return An},Unzlib:function(){return qt},Zip:function(){return wn},ZipDeflate:function(){return bn},ZipPassThrough:function(){return _n},Zlib:function(){return Vt},compress:function(){return Bt},compressSync:function(){return jt},decompress:function(){return en},decompressSync:function(){return tn},deflate:function(){return Pt},deflateSync:function(){return Rt},gunzip:function(){return Ht},gunzipSync:function(){return Gt},gzip:function(){return Bt},gzipSync:function(){return jt},inflate:function(){return Lt},inflateSync:function(){return Ft},strFromU8:function(){return dn},strToU8:function(){return cn},unzip:function(){return Tn},unzipSync:function(){return Pn},unzlib:function(){return Kt},unzlibSync:function(){return Xt},zip:function(){return Sn},zipSync:function(){return Dn},zlib:function(){return Zt},zlibSync:function(){return $t}});var i=n(27812);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(67294),s=n(99477);class l extends s.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new p(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new w(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new _(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new S(e)}))}load(e,t,n,r){const i=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:s.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},l=new s.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(r){a(r)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},a={};if("string"===typeof e)i=e;else{if(s.LoaderUtils.decodeText(new Uint8Array(e,0,4))===D){try{o[c.KHR_BINARY_GLTF]=new M(e)}catch(d){return void(r&&r(d))}i=o[c.KHR_BINARY_GLTF].content}else i=s.LoaderUtils.decodeText(new Uint8Array(e))}const l=JSON.parse(i);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new oe(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let s=0;s<this.pluginCallbacks.length;s++){const e=this.pluginCallbacks[s](u);a[e.name]=e,o[e.name]=!0}if(l.extensionsUsed)for(let s=0;s<l.extensionsUsed.length;++s){const e=l.extensionsUsed[s],t=l.extensionsRequired||[];switch(e){case c.KHR_MATERIALS_UNLIT:o[e]=new h;break;case c.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[e]=new R;break;case c.KHR_DRACO_MESH_COMPRESSION:o[e]=new C(l,this.dracoLoader);break;case c.KHR_TEXTURE_TRANSFORM:o[e]=new T;break;case c.KHR_MESH_QUANTIZATION:o[e]=new k;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}u.setExtensions(o),u.setPlugins(a),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function u(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const c={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class d{constructor(e){this.parser=e,this.name=c.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const l=new s.Color(16777215);void 0!==o.color&&l.fromArray(o.color);const u=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new s.DirectionalLight(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new s.PointLight(l),a.distance=u;break;case"spot":a=new s.SpotLight(l),a.distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class h{constructor(){this.name=c.KHR_MATERIALS_UNLIT}getMaterialType(){return s.MeshBasicMaterial}extendParams(e,t,n){const r=[];e.color=new s.Color(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,s.sRGBEncoding))}return Promise.all(r)}}class f{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new s.Vector2(e,e)}return Promise.all(i)}}class m{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class g{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new s.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,s.sRGBEncoding)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class v{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class y{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new s.Color(a[0],a[1],a[2]),Promise.all(i)}}class _{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class b{constructor(e){this.parser=e,this.name=c.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new s.Color(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,s.sRGBEncoding)),Promise.all(i)}}class x{constructor(e){this.parser=e,this.name=c.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,o)}}class w{constructor(e){this.parser=e,this.name=c.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class S{constructor(e){this.name=c.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new ArrayBuffer(o*a),l=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(s),o,a,l,e.mode,e.filter),s}))}return null}}const D="glTF",A=1313821514,E=5130562;class M{constructor(e){this.name=c.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:s.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==D)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===A){const n=new Uint8Array(e,12+i,t);this.content=s.LoaderUtils.decodeText(n)}else if(n===E){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class C{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=c.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const u in o){const e=$[u]||u.toLowerCase();a[e]=o[u]}for(const u in e.attributes){const t=$[u]||u.toLowerCase();if(void 0!==o[u]){const r=n.accessors[e.attributes[u]],i=G[r.componentType];l[t]=i,s[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class T{constructor(){this.name=c.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class P extends s.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new s.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class R{constructor(){this.name=c.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return P}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new s.Color(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture,s.sRGBEncoding)),e.emissive=new s.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new s.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t,s.sRGBEncoding))}return Promise.all(i)}createMaterial(e){const t=new P(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=s.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class k{constructor(){this.name=c.KHR_MESH_QUANTIZATION}}class O extends s.Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[i+o];return t}}O.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,u=r-t,c=(n-t)/u,d=c*c,h=d*c,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+c;for(let _=0;_!==a;_++){const e=o[p+_+a],t=o[p+_+s]*u,n=o[f+_+a],r=o[f+_]*u;i[_]=v*e+y*t+m*n+g*r}return i};const L=new s.Quaternion;class F extends O{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return L.fromArray(i).normalize().toArray(i),i}}const I=0,N=1,B=2,j=3,z=4,U=5,H=6,G={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},V={9728:s.NearestFilter,9729:s.LinearFilter,9984:s.NearestMipmapNearestFilter,9985:s.LinearMipmapNearestFilter,9986:s.NearestMipmapLinearFilter,9987:s.LinearMipmapLinearFilter},W={33071:s.ClampToEdgeWrapping,33648:s.MirroredRepeatWrapping,10497:s.RepeatWrapping},Z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Y={CUBICSPLINE:void 0,LINEAR:s.InterpolateLinear,STEP:s.InterpolateDiscrete},K="OPAQUE",X="MASK",Q="BLEND";function J(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ee(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function te(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ne(e){const t=e.extensions&&e.extensions[c.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+re(t.attributes):e.indices+":"+re(e.attributes)+":"+e.mode,n}function re(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function ie(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class oe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new u,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"===typeof createImageBitmap||n||r&&i<98?this.textureLoader=new s.TextureLoader(this.options.manager):this.textureLoader=new s.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new s.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};J(i,o,r),ee(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,o]of e.children.entries())i(o,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[c.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(s.LoaderUtils.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],o=Z[r.type],a=G[r.componentType],l=a.BYTES_PER_ELEMENT,u=l*o,c=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let f,p;if(d&&d!==u){const e=Math.floor(c/d),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let u=t.cache.get(n);u||(f=new a(i,e*d,r.count*d/l),u=new s.InterleavedBuffer(f,d/l),t.cache.add(n,u)),p=new s.InterleavedBufferAttribute(u,o,c%d/l,h)}else f=null===i?new a(r.count*o):new a(i,c,r.count*o),p=new s.BufferAttribute(f,o,h);if(void 0!==r.sparse){const t=Z.SCALAR,n=G[r.sparse.indices.componentType],l=r.sparse.indices.byteOffset||0,u=r.sparse.values.byteOffset||0,c=new n(e[1],l,r.sparse.count*t),d=new a(e[2],u,r.sparse.count*o);null!==i&&(p=new s.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(p.setX(t,d[e*o]),o>=2&&p.setY(t,d[e*o+1]),o>=3&&p.setZ(t,d[e*o+2]),o>=4&&p.setW(t,d[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const r=this,i=this.json,o=i.textures[e],a=i.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,n).then((function(t){t.flipY=!1,o.name&&(t.name=o.name);const n=(i.samplers||{})[o.sampler]||{};return t.magFilter=V[n.magFilter]||s.LinearFilter,t.minFilter=V[n.minFilter]||s.LinearMipmapLinearFilter,t.wrapS=W[n.wrapS]||s.RepeatWrapping,t.wrapT=W[n.wrapT]||s.RepeatWrapping,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=u,u}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(void 0!==o.bufferView)l=n.getDependency("bufferView",o.bufferView).then((function(e){u=!0;const t=new Blob([e],{type:o.mimeType});return l=a.createObjectURL(t),l}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then((function(e){return new Promise((function(n,r){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new s.Texture(e);t.needsUpdate=!0,n(t)}),t.load(s.LoaderUtils.resolveURL(e,i.path),o,void 0,r)}))})).then((function(e){var t;return!0===u&&a.revokeObjectURL(l),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[c.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[c.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(o);o=i.extensions[c.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),i.associations.set(o,t)}}return void 0!==r&&(o.encoding=r),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new s.PointsMaterial,s.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new s.LineBasicMaterial,s.Material.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||o){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return s.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const a={},l=i.extensions||{},u=[];if(l[c.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[c.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),u.push(e.extendParams(a,i,t))}else if(l[c.KHR_MATERIALS_UNLIT]){const e=r[c.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),u.push(e.extendParams(a,i,t))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new s.Color(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(a,"map",n.baseColorTexture,s.sRGBEncoding)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===i.doubleSided&&(a.side=s.DoubleSide);const d=i.alphaMode||K;if(d===Q?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===X&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==s.MeshBasicMaterial&&(u.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new s.Vector2(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==i.occlusionTexture&&o!==s.MeshBasicMaterial&&(u.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==s.MeshBasicMaterial&&(a.emissive=(new s.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==s.MeshBasicMaterial&&u.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,s.sRGBEncoding)),Promise.all(u).then((function(){let n;return n=o===P?r[c.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),i.name&&(n.name=i.name),ee(n,i),t.associations.set(n,{materials:e}),i.extensions&&J(r,n,i),n}))}createUniqueName(e){const t=s.PropertyBinding.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[c.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return se(n,e,t)}))}const o=[];for(let a=0,l=e.length;a<l;a++){const n=e[a],l=ne(n),u=r[l];if(u)o.push(u.promise);else{let e;e=n.extensions&&n.extensions[c.KHR_DRACO_MESH_COMPRESSION]?i(n):se(new s.BufferGeometry,n,t),r[l]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,a=[];for(let u=0,c=o.length;u<c;u++){const e=void 0===o[u].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new s.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:s.FrontSide})),l.DefaultMaterial):this.getDependency("material",o[u].material);a.push(e)}var l;return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),l=n[n.length-1],u=[];for(let d=0,h=l.length;d<h;d++){const n=l[d],c=o[d];let h;const f=a[d];if(c.mode===z||c.mode===U||c.mode===H||void 0===c.mode)h=!0===i.isSkinnedMesh?new s.SkinnedMesh(n,f):new s.Mesh(n,f),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),c.mode===U?h.geometry=le(h.geometry,s.TriangleStripDrawMode):c.mode===H&&(h.geometry=le(h.geometry,s.TriangleFanDrawMode));else if(c.mode===N)h=new s.LineSegments(n,f);else if(c.mode===j)h=new s.Line(n,f);else if(c.mode===B)h=new s.LineLoop(n,f);else{if(c.mode!==I)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new s.Points(n,f)}Object.keys(h.geometry.morphAttributes).length>0&&te(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),ee(h,i),c.extensions&&J(r,h,c),t.assignFinalMaterial(h),u.push(h)}for(let r=0,i=u.length;r<i;r++)t.associations.set(u[r],{meshes:e,primitives:r});if(1===u.length)return u[0];const c=new s.Group;t.associations.set(c,{meshes:e});for(let e=0,t=u.length;e<t;e++)c.add(u[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new s.PerspectiveCamera(s.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new s.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ee(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],o=[],a=[];for(let s=0,l=t.channels.length;s<l;s++){const e=t.channels[s],l=t.samplers[e.sampler],u=e.target,c=void 0!==u.node?u.node:u.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,h=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",c)),r.push(this.getDependency("accessor",d)),i.push(this.getDependency("accessor",h)),o.push(l),a.push(u)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then((function(n){const r=n[0],i=n[1],o=n[2],a=n[3],l=n[4],u=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],c=o[e],d=a[e],h=l[e];if(void 0===t)continue;let f;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,q[h.path]){case q.weights:f=s.NumberKeyframeTrack;break;case q.rotation:f=s.QuaternionKeyframeTrack;break;default:f=s.VectorKeyframeTrack}const p=t.name?t.name:t.uuid,m=void 0!==d.interpolation?Y[d.interpolation]:s.InterpolateLinear,g=[];q[h.path]===q.weights?t.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(p);let v=c.array;if(c.normalized){const e=ie(v.constructor),t=new Float32Array(v.length);for(let n=0,r=v.length;n<r;n++)t[n]=v[n]*e;v=t}for(let e=0,r=g.length;e<r;e++){const t=new f(g[e]+"."+q[h.path],n.array,v,m);"CUBICSPLINE"===d.interpolation&&(t.createInterpolant=function(e){return new(this instanceof s.QuaternionKeyframeTrack?F:O)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(t)}}const c=t.name?t.name:"animation_"+e;return new s.AnimationClip(c,void 0,u)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===i.isBone?new s.Bone:t.length>1?new s.Group:1===t.length?t[0]:new s.Object3D,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=o),ee(a,i),i.extensions&&J(n,a,i),void 0!==i.matrix){const e=new s.Matrix4;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,o=new s.Group;r.name&&(o.name=i.createUniqueName(r.name)),ee(o,r),r.extensions&&J(n,o,r);const a=r.nodes||[],l=[];for(let s=0,u=a.length;s<u;s++)l.push(ae(a[s],o,t,i));return Promise.all(l).then((function(){return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof s.Material||n instanceof s.Texture)&&t.set(n,r);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(o),o}))}}function ae(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let i=0,o=t.joints.length;i<o;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let o=0,a=n.length;o<a;o++){const e=n[o];if(e){r.push(e);const n=new s.Matrix4;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*o),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new s.Skeleton(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const o=[];if(i.children){const t=i.children;for(let i=0,a=t.length;i<a;i++){const a=t[i];o.push(ae(a,e,n,r))}}return Promise.all(o)}))}function se(e,t,n){const r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const a in r){const t=$[a]||a.toLowerCase();t in e.attributes||i.push(o(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return ee(e,t),function(e,t,n){const r=t.attributes,i=new s.Box3;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new s.Vector3(t[0],t[1],t[2]),new s.Vector3(o[0],o[1],o[2])),e.normalized){const t=ie(G[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new s.Vector3,t=new s.Vector3;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const e=ie(G[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new s.Sphere;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,o=!1;for(let u=0,c=t.length;u<c;u++){const e=t[u];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let u=0,c=t.length;u<c;u++){const c=t[u];if(r){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;s.push(t)}if(o){const t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function le(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===s.TriangleFanDrawMode)for(let a=1;a<=r;a++)i.push(n.getX(0)),i.push(n.getX(a)),i.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(i.push(n.getX(a)),i.push(n.getX(a+1)),i.push(n.getX(a+2))):(i.push(n.getX(a+2)),i.push(n.getX(a+1)),i.push(n.getX(a)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o}var ue={},ce=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},de=function(e){return new Worker(e)};try{URL.revokeObjectURL(ce(""))}catch(Nn){ce=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},de=function(e){return new Worker(e,{type:"module"})}}var he=Uint8Array,fe=Uint16Array,pe=Uint32Array,me=new he([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ge=new he([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ve=new he([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ye=function(e,t){for(var n=new fe(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new pe(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},_e=ye(me,2),be=_e[0],xe=_e[1];be[28]=258,xe[258]=28;for(var we=ye(ge,0),Se=we[0],De=we[1],Ae=new fe(32768),Ee=0;Ee<32768;++Ee){var Me=(43690&Ee)>>>1|(21845&Ee)<<1;Me=(61680&(Me=(52428&Me)>>>2|(13107&Me)<<2))>>>4|(3855&Me)<<4,Ae[Ee]=((65280&Me)>>>8|(255&Me)<<8)>>>1}var Ce=function(e,t,n){for(var r=e.length,i=0,o=new fe(t);i<r;++i)++o[e[i]-1];var a,s=new fe(t);for(i=0;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new fe(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],d=s[e[i]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)a[Ae[d]>>>l]=u}else for(a=new fe(r),i=0;i<r;++i)e[i]&&(a[i]=Ae[s[e[i]-1]++]>>>15-e[i]);return a},Te=new he(288);for(Ee=0;Ee<144;++Ee)Te[Ee]=8;for(Ee=144;Ee<256;++Ee)Te[Ee]=9;for(Ee=256;Ee<280;++Ee)Te[Ee]=7;for(Ee=280;Ee<288;++Ee)Te[Ee]=8;var Pe=new he(32);for(Ee=0;Ee<32;++Ee)Pe[Ee]=5;var Re=Ce(Te,9,0),ke=Ce(Te,9,1),Oe=Ce(Pe,5,0),Le=Ce(Pe,5,1),Fe=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ie=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Ne=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Be=function(e){return(e/8|0)+(7&e&&1)},je=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof fe?fe:e instanceof pe?pe:he)(n-t);return r.set(e.subarray(t,n)),r},ze=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new he(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new he(3*r));var a=function(e){var n=t.length;if(e>n){var r=new he(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,u=n.b||0,c=n.l,d=n.d,h=n.m,f=n.n,p=8*r;do{if(!c){n.f=s=Ie(e,l,1);var m=Ie(e,l+1,3);if(l+=3,!m){var g=e[(M=Be(l)+4)-4]|e[M-3]<<8,v=M+g;if(v>r){if(o)throw"unexpected EOF";break}i&&a(u+g),t.set(e.subarray(M,v),u),n.b=u+=g,n.p=l=8*v;continue}if(1==m)c=ke,d=Le,h=9,f=5;else{if(2!=m)throw"invalid block type";var y=Ie(e,l,31)+257,_=Ie(e,l+10,15)+4,b=y+Ie(e,l+5,31)+1;l+=14;for(var x=new he(b),w=new he(19),S=0;S<_;++S)w[ve[S]]=Ie(e,l+3*S,7);l+=3*_;var D=Fe(w),A=(1<<D)-1,E=Ce(w,D,1);for(S=0;S<b;){var M,C=E[Ie(e,l,A)];if(l+=15&C,(M=C>>>4)<16)x[S++]=M;else{var T=0,P=0;for(16==M?(P=3+Ie(e,l,3),l+=2,T=x[S-1]):17==M?(P=3+Ie(e,l,7),l+=3):18==M&&(P=11+Ie(e,l,127),l+=7);P--;)x[S++]=T}}var R=x.subarray(0,y),k=x.subarray(y);h=Fe(R),f=Fe(k),c=Ce(R,h,1),d=Ce(k,f,1)}if(l>p){if(o)throw"unexpected EOF";break}}i&&a(u+131072);for(var O=(1<<h)-1,L=(1<<f)-1,F=l;;F=l){var I=(T=c[Ne(e,l)&O])>>>4;if((l+=15&T)>p){if(o)throw"unexpected EOF";break}if(!T)throw"invalid length/literal";if(I<256)t[u++]=I;else{if(256==I){F=l,c=null;break}var N=I-254;if(I>264){var B=me[S=I-257];N=Ie(e,l,(1<<B)-1)+be[S],l+=B}var j=d[Ne(e,l)&L],z=j>>>4;if(!j)throw"invalid distance";l+=15&j;k=Se[z];if(z>3){B=ge[z];k+=Ne(e,l)&(1<<B)-1,l+=B}if(l>p){if(o)throw"unexpected EOF";break}i&&a(u+131072);for(var U=u+N;u<U;u+=4)t[u]=t[u-k],t[u+1]=t[u+1-k],t[u+2]=t[u+2-k],t[u+3]=t[u+3-k];u=U}}n.l=c,n.p=F,n.b=u,c&&(s=1,n.m=h,n.d=d,n.n=f)}while(!s);return u==t.length?t:je(t,0,u)},Ue=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},He=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Ge=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[Ke,0];if(1==i){var a=new he(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var f=new fe(h+1),p=Ve(n[c-1],f,0);if(p>t){r=0;var m=0,g=p-t,v=1<<g;for(o.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<i;++r){var y=o[r].s;if(!(f[y]>t))break;m+=v-(1<<p-f[y]),f[y]=t}for(m>>>=g;m>0;){var _=o[r].s;f[_]<t?m-=1<<t-f[_]++-1:++r}for(;r>=0&&m;--r){var b=o[r].s;f[b]==t&&(--f[b],++m)}p=t}return[new he(f),p]},Ve=function(e,t,n){return-1==e.s?Math.max(Ve(e.l,t,n+1),Ve(e.r,t,n+1)):t[e.s]=n},We=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new fe(++t),r=0,i=e[0],o=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return[n.subarray(0,r),t]},Ze=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},$e=function(e,t,n){var r=n.length,i=Be(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},qe=function(e,t,n,r,i,o,a,s,l,u,c){Ue(t,c++,n),++i[256];for(var d=Ge(i,15),h=d[0],f=d[1],p=Ge(o,15),m=p[0],g=p[1],v=We(h),y=v[0],_=v[1],b=We(m),x=b[0],w=b[1],S=new fe(19),D=0;D<y.length;++D)S[31&y[D]]++;for(D=0;D<x.length;++D)S[31&x[D]]++;for(var A=Ge(S,7),E=A[0],M=A[1],C=19;C>4&&!E[ve[C-1]];--C);var T,P,R,k,O=u+5<<3,L=Ze(i,Te)+Ze(o,Pe)+a,F=Ze(i,h)+Ze(o,m)+a+14+3*C+Ze(S,E)+(2*S[16]+3*S[17]+7*S[18]);if(O<=L&&O<=F)return $e(t,c,e.subarray(l,l+u));if(Ue(t,c,1+(F<L)),c+=2,F<L){T=Ce(h,f,0),P=h,R=Ce(m,g,0),k=m;var I=Ce(E,M,0);Ue(t,c,_-257),Ue(t,c+5,w-1),Ue(t,c+10,C-4),c+=14;for(D=0;D<C;++D)Ue(t,c+3*D,E[ve[D]]);c+=3*C;for(var N=[y,x],B=0;B<2;++B){var j=N[B];for(D=0;D<j.length;++D){var z=31&j[D];Ue(t,c,I[z]),c+=E[z],z>15&&(Ue(t,c,j[D]>>>5&127),c+=j[D]>>>12)}}}else T=Re,P=Te,R=Oe,k=Pe;for(D=0;D<s;++D)if(r[D]>255){z=r[D]>>>18&31;He(t,c,T[z+257]),c+=P[z+257],z>7&&(Ue(t,c,r[D]>>>23&31),c+=me[z]);var U=31&r[D];He(t,c,R[U]),c+=k[U],U>3&&(He(t,c,r[D]>>>5&8191),c+=ge[U])}else He(t,c,T[r[D]]),c+=P[r[D]];return He(t,c,T[256]),c+P[256]},Ye=new pe([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ke=new he(0),Xe=function(e,t,n,r,i,o){var a=e.length,s=new he(r+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(r,s.length-i),u=0;if(!t||a<8)for(var c=0;c<=a;c+=65535){var d=c+65535;d<a?u=$e(l,u,e.subarray(c,d)):(l[c]=o,u=$e(l,u,e.subarray(c,a)))}else{for(var h=Ye[t-1],f=h>>>13,p=8191&h,m=(1<<n)-1,g=new fe(32768),v=new fe(m+1),y=Math.ceil(n/3),_=2*y,b=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<_)&m},x=new pe(25e3),w=new fe(288),S=new fe(32),D=0,A=0,E=(c=0,0),M=0,C=0;c<a;++c){var T=b(c),P=32767&c,R=v[T];if(g[P]=R,v[T]=P,M<=c){var k=a-c;if((D>7e3||E>24576)&&k>423){u=qe(e,l,0,x,w,S,A,E,C,c-C,u),E=D=A=0,C=c;for(var O=0;O<286;++O)w[O]=0;for(O=0;O<30;++O)S[O]=0}var L=2,F=0,I=p,N=P-R&32767;if(k>2&&T==b(c-N))for(var B=Math.min(f,k)-1,j=Math.min(32767,c),z=Math.min(258,k);N<=j&&--I&&P!=R;){if(e[c+L]==e[c+L-N]){for(var U=0;U<z&&e[c+U]==e[c+U-N];++U);if(U>L){if(L=U,F=N,U>B)break;var H=Math.min(N,U-2),G=0;for(O=0;O<H;++O){var V=c-N+O+32768&32767,W=V-g[V]+32768&32767;W>G&&(G=W,R=V)}}}N+=(P=R)-(R=g[P])+32768&32767}if(F){x[E++]=268435456|xe[L]<<18|De[F];var Z=31&xe[L],$=31&De[F];A+=me[Z]+ge[$],++w[257+Z],++S[$],M=c+L,++D}else x[E++]=e[c],++w[e[c]]}}u=qe(e,l,o,x,w,S,A,E,C,c-C,u),!o&&7&u&&(u=$e(l,u+1,Ke))}return je(s,0,r+Be(u)+i)},Qe=function(){for(var e=new pe(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Je=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Qe[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},et=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=n[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},tt=function(e,t,n,r,i){return Xe(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},nt=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},rt=function(e,t,n){for(var r=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<r.length;++a){var s=r[a],l=o[a];if("function"==typeof s){t+=";"+l+"=";var u=s.toString();if(s.prototype)if(-1!=u.indexOf("[native code]")){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else for(var d in t+=u,s.prototype)t+=";"+l+".prototype."+d+"="+s.prototype[d].toString();else t+=u}else n[l]=s}return[t,n]},it=[],ot=function(e,t,n,r){var i;if(!it[n]){for(var o="",a={},s=e.length-1,l=0;l<s;++l)o=(i=rt(e[l],o,a))[0],a=i[1];it[n]=rt(e[s],o,a)}var u=nt({},it[n][1]);return function(e,t,n,r,i){var o=de(ue[t]||(ue[t]=ce(e)));return o.onerror=function(e){return i(e.error,null)},o.onmessage=function(e){return i(null,e.data)},o.postMessage(n,r),o}(it[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,u,function(e){var t=[];for(var n in e)(e[n]instanceof he||e[n]instanceof fe||e[n]instanceof pe)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(u),r)},at=function(){return[he,fe,pe,me,ge,ve,be,Se,ke,Le,Ae,Ce,Fe,Ie,Ne,Be,je,ze,Ft,ht,ft]},st=function(){return[he,fe,pe,me,ge,ve,xe,De,Re,Te,Oe,Pe,Ae,Ye,Ke,Ce,Ue,He,Ge,Ve,We,Ze,$e,qe,Be,je,Xe,tt,Rt,ht]},lt=function(){return[xt,Dt,bt,Je,Qe]},ut=function(){return[wt,St]},ct=function(){return[At,bt,et]},dt=function(){return[Et]},ht=function(e){return postMessage(e,[e.buffer])},ft=function(e){return e&&e.size&&new he(e.size)},pt=function(e,t,n,r,i,o){var a=ot(n,r,i,(function(e,t){a.terminate(),o(e,t)}));return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}},mt=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},gt=function(e,t,n,r,i){var o,a=ot(e,r,i,(function(e,n){e?(a.terminate(),t.ondata.call(t,e)):(n[1]&&a.terminate(),t.ondata.call(t,e,n[0],n[1]))}));a.postMessage(n),t.push=function(e,n){if(o)throw"stream finished";if(!t.ondata)throw"no stream handler";a.postMessage([e,o=n],[e.buffer])},t.terminate=function(){a.terminate()}},vt=function(e,t){return e[t]|e[t+1]<<8},yt=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},_t=function(e,t){return yt(e,t)+4294967296*yt(e,t+4)},bt=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},xt=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&bt(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},wt=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},St=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},Dt=function(e){return 10+(e.filename&&e.filename.length+1||0)},At=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},Et=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Mt(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var Ct=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(tt(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}(),Tt=function(){return function(e,t){gt([st,function(){return[mt,Ct]}],this,Mt.call(this,e,t),(function(e){var t=new Ct(e.data);onmessage=mt(t)}),6)}}();function Pt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return pt(e,t,[st],(function(e){return ht(Rt(e.data[0],e.data[1]))}),0,n)}function Rt(e,t){return tt(e,t||{},0,0)}var kt=function(){function e(e){this.s={},this.p=new he(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new he(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=ze(this.p,this.o,this.s);this.ondata(je(n,t,this.s.b),this.d),this.o=je(n,this.s.b-32768),this.s.b=this.o.length,this.p=je(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),Ot=function(){return function(e){this.ondata=e,gt([at,function(){return[mt,kt]}],this,0,(function(){var e=new kt;onmessage=mt(e)}),7)}}();function Lt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return pt(e,t,[at],(function(e){return ht(Ft(e.data[0],ft(e.data[1])))}),1,n)}function Ft(e,t){return ze(e,t)}var It=function(){function e(e,t){this.c=Je(),this.l=0,this.v=1,Ct.call(this,e,t)}return e.prototype.push=function(e,t){Ct.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=tt(e,this.o,this.v&&Dt(this.o),t&&8,!t);this.v&&(xt(n,this.o),this.v=0),t&&(bt(n,n.length-8,this.c.d()),bt(n,n.length-4,this.l)),this.ondata(n,t)},e}(),Nt=function(){return function(e,t){gt([st,lt,function(){return[mt,Ct,It]}],this,Mt.call(this,e,t),(function(e){var t=new It(e.data);onmessage=mt(t)}),8)}}();function Bt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return pt(e,t,[st,lt,function(){return[jt]}],(function(e){return ht(jt(e.data[0],e.data[1]))}),2,n)}function jt(e,t){t||(t={});var n=Je(),r=e.length;n.p(e);var i=tt(e,t,Dt(t),8),o=i.length;return xt(i,t),bt(i,o-8,n.d()),bt(i,o-4,r),i}var zt=function(){function e(e){this.v=1,kt.call(this,e)}return e.prototype.push=function(e,t){if(kt.prototype.e.call(this,e),this.v){var n=this.p.length>3?wt(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}kt.prototype.c.call(this,t)},e}(),Ut=function(){return function(e){this.ondata=e,gt([at,ut,function(){return[mt,kt,zt]}],this,0,(function(){var e=new zt;onmessage=mt(e)}),9)}}();function Ht(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return pt(e,t,[at,ut,function(){return[Gt]}],(function(e){return ht(Gt(e.data[0]))}),3,n)}function Gt(e,t){return ze(e.subarray(wt(e),-8),t||new he(St(e)))}var Vt=function(){function e(e,t){this.c=et(),this.v=1,Ct.call(this,e,t)}return e.prototype.push=function(e,t){Ct.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=tt(e,this.o,this.v&&2,t&&4,!t);this.v&&(At(n,this.o),this.v=0),t&&bt(n,n.length-4,this.c.d()),this.ondata(n,t)},e}(),Wt=function(){return function(e,t){gt([st,ct,function(){return[mt,Ct,Vt]}],this,Mt.call(this,e,t),(function(e){var t=new Vt(e.data);onmessage=mt(t)}),10)}}();function Zt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return pt(e,t,[st,ct,function(){return[$t]}],(function(e){return ht($t(e.data[0],e.data[1]))}),4,n)}function $t(e,t){t||(t={});var n=et();n.p(e);var r=tt(e,t,2,4);return At(r,t),bt(r,r.length-4,n.d()),r}var qt=function(){function e(e){this.v=1,kt.call(this,e)}return e.prototype.push=function(e,t){if(kt.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}kt.prototype.c.call(this,t)},e}(),Yt=function(){return function(e){this.ondata=e,gt([at,dt,function(){return[mt,kt,qt]}],this,0,(function(){var e=new qt;onmessage=mt(e)}),11)}}();function Kt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return pt(e,t,[at,dt,function(){return[Xt]}],(function(e){return ht(Xt(e.data[0],ft(e.data[1])))}),5,n)}function Xt(e,t){return ze((Et(e),e.subarray(2,-4)),t)}var Qt=function(){function e(e){this.G=zt,this.I=kt,this.Z=qt,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new he(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,i=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,t),this.p=null}}},e}(),Jt=function(){function e(e){this.G=Ut,this.I=Ot,this.Z=Yt,this.ondata=e}return e.prototype.push=function(e,t){Qt.prototype.push.call(this,e,t)},e}();function en(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return 31==e[0]&&139==e[1]&&8==e[2]?Ht(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Lt(e,t,n):Kt(e,t,n)}function tn(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?Gt(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Ft(e,t):Xt(e,t)}var nn=function(e,t,n,r){for(var i in e){var o=e[i],a=t+i;o instanceof he?n[a]=[o,r]:Array.isArray(o)?n[a]=[o[0],nt(r,o[1])]:nn(o,a+"/",n,r)}},rn="undefined"!=typeof TextEncoder&&new TextEncoder,on="undefined"!=typeof TextDecoder&&new TextDecoder,an=0;try{on.decode(Ke,{stream:!0}),an=1}catch(Nn){}var sn=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,je(e,n-1)];i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},ln=function(){function e(e){this.ondata=e,an?this.t=new TextDecoder:this.p=Ke}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var n=new he(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=sn(n),i=r[0],o=r[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(i,t)}},e}(),un=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(cn(e),this.d=t||!1)},e}();function cn(e,t){if(t){for(var n=new he(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(rn)return rn.encode(e);var i=e.length,o=new he(e.length+(e.length>>1)),a=0,s=function(e){o[a++]=e};for(r=0;r<i;++r){if(a+5>o.length){var l=new he(a+8+(i-r<<1));l.set(o),o=l}var u=e.charCodeAt(r);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|63&u)):u>55295&&u<57344?(s(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++r))>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|63&u)):(s(224|u>>12),s(128|u>>6&63),s(128|63&u))}return je(o,0,a)}function dn(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(on)return on.decode(e);var i=sn(e),o=i[0];if(i[1].length)throw"invalid utf-8 data";return o}var hn=function(e){return 1==e?3:e<6?2:9==e?1:0},fn=function(e,t){return t+30+vt(e,t+26)+vt(e,t+28)},pn=function(e,t,n){var r=vt(e,t+28),i=dn(e.subarray(t+46,t+46+r),!(2048&vt(e,t+8))),o=t+46+r,a=yt(e,t+20),s=n&&4294967295==a?mn(e,o):[a,yt(e,t+24),yt(e,t+42)],l=s[0],u=s[1],c=s[2];return[vt(e,t+10),l,u,i,o+vt(e,t+30)+vt(e,t+32),c]},mn=function(e,t){for(;1!=vt(e,t);t+=4+vt(e,t+2));return[_t(e,t+12),_t(e,t+4),_t(e,t+20)]},gn=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},vn=function(e,t,n,r,i,o,a,s){var l=r.length,u=n.extra,c=s&&s.length,d=gn(u);bt(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==o&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),f=h.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(bt(e,t,f<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,null!=o&&(bt(e,t,n.crc),bt(e,t+4,o),bt(e,t+8,n.size)),bt(e,t+12,l),bt(e,t+14,d),t+=16,null!=a&&(bt(e,t,c),bt(e,t+6,n.attrs),bt(e,t+10,a),t+=14),e.set(r,t),t+=l,d)for(var p in u){var m=u[p],g=m.length;bt(e,t,+p),bt(e,t+2,g),e.set(m,t+4),t+=4+g}return c&&(e.set(s,t),t+=c),t},yn=function(e,t,n,r,i){bt(e,t,101010256),bt(e,t+8,n),bt(e,t+10,n),bt(e,t+12,r),bt(e,t+16,i)},_n=function(){function e(e){this.filename=e,this.c=Je(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}(),bn=function(){function e(e,t){var n=this;t||(t={}),_n.call(this,e),this.d=new Ct(t,(function(e,t){n.ondata(null,e,t)})),this.compression=8,this.flag=hn(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(Nn){this.ondata(Nn,null,t)}},e.prototype.push=function(e,t){_n.prototype.push.call(this,e,t)},e}(),xn=function(){function e(e,t){var n=this;t||(t={}),_n.call(this,e),this.d=new Tt(t,(function(e,t,r){n.ondata(e,t,r)})),this.compression=8,this.flag=hn(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){_n.prototype.push.call(this,e,t)},e}(),wn=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var n=cn(e.filename),r=n.length,i=e.comment,o=i&&cn(i),a=r!=e.filename.length||o&&i.length!=o.length,s=r+gn(e.extra)+30;if(r>65535)throw"filename too long";var l=new he(s);vn(l,0,e,n,a);var u=[l],c=function(){for(var e=0,n=u;e<n.length;e++){var r=n[e];t.ondata(null,r,!1)}u=[]},d=this.d;this.d=0;var h=this.u.length,f=nt(e,{f:n,u:a,o:o,t:function(){e.terminate&&e.terminate()},r:function(){if(c(),d){var e=t.u[h+1];e?e.r():t.d=1}d=1}}),p=0;e.ondata=function(n,r,i){if(n)t.ondata(n,r,i),t.terminate();else if(p+=r.length,u.push(r),i){var o=new he(16);bt(o,0,134695760),bt(o,4,e.crc),bt(o,8,p),bt(o,12,e.size),u.push(o),f.c=p,f.b=s+p+16,f.crc=e.crc,f.size=e.size,d&&f.r(),d=1}else d&&c()},this.u.push(f)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,n=0,r=0,i=this.u;r<i.length;r++){n+=46+(l=i[r]).f.length+gn(l.extra)+(l.o?l.o.length:0)}for(var o=new he(n+22),a=0,s=this.u;a<s.length;a++){var l=s[a];vn(o,e,l,l.f,l.u,l.c,t,l.o),e+=46+l.f.length+gn(l.extra)+(l.o?l.o.length:0),t+=l.b}yn(o,e,this.u.length,n,t),this.ondata(null,o,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2},e}();function Sn(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";var r={};nn(e,"",r,t);var i=Object.keys(r),o=i.length,a=0,s=0,l=o,u=new Array(o),c=[],d=function(){for(var e=0;e<c.length;++e)c[e]()},h=function(){var e=new he(s+22),t=a,r=s-a;s=0;for(var i=0;i<l;++i){var o=u[i];try{var c=o.c.length;vn(e,s,o,o.f,o.u,c);var d=30+o.f.length+gn(o.extra),h=s+d;e.set(o.c,h),vn(e,a,o,o.f,o.u,c,s,o.m),a+=16+d+(o.m?o.m.length:0),s=h+c}catch(Nn){return n(Nn,null)}}yn(e,a,u.length,r,t),n(null,e)};o||h();for(var f=function(e){var t=i[e],l=r[t],f=l[0],p=l[1],m=Je(),g=f.length;m.p(f);var v=cn(t),y=v.length,_=p.comment,b=_&&cn(_),x=b&&b.length,w=gn(p.extra),S=0==p.level?0:8,D=function(r,i){if(r)d(),n(r,null);else{var l=i.length;u[e]=nt(p,{size:g,crc:m.d(),c:i,f:v,m:b,u:y!=t.length||b&&_.length!=x,compression:S}),a+=30+y+w+l,s+=76+2*(y+w)+(x||0)+l,--o||h()}};if(y>65535&&D("filename too long",null),S)if(g<16e4)try{D(null,Rt(f,p))}catch(Nn){D(Nn,null)}else c.push(Pt(f,p,D));else D(null,f)},p=0;p<l;++p)f(p);return d}function Dn(e,t){t||(t={});var n={},r=[];nn(e,"",n,t);var i=0,o=0;for(var a in n){var s=n[a],l=s[0],u=s[1],c=0==u.level?0:8,d=(S=cn(a)).length,h=u.comment,f=h&&cn(h),p=f&&f.length,m=gn(u.extra);if(d>65535)throw"filename too long";var g=c?Rt(l,u):l,v=g.length,y=Je();y.p(l),r.push(nt(u,{size:l.length,crc:y.d(),c:g,f:S,m:f,u:d!=a.length||f&&h.length!=p,o:i,compression:c})),i+=30+d+m+v,o+=76+2*(d+m)+(p||0)+v}for(var _=new he(o+22),b=i,x=o-i,w=0;w<r.length;++w){var S=r[w];vn(_,S.o,S,S.f,S.u,S.c.length);var D=30+S.f.length+gn(S.extra);_.set(S.c,S.o+D),vn(_,i,S,S.f,S.u,S.c.length,S.o,S.m),i+=16+D+(S.m?S.m.length:0)}return yn(_,i,r.length,x,b),_}var An=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}(),En=function(){function e(){var e=this;this.i=new kt((function(t,n){e.ondata(null,t,n)}))}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(Nn){this.ondata(Nn,e,t)}},e.compression=8,e}(),Mn=function(){function e(e,t){var n=this;t<32e4?this.i=new kt((function(e,t){n.ondata(null,e,t)})):(this.i=new Ot((function(e,t,r){n.ondata(e,t,r)})),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=je(e,0)),this.i.push(e,t)},e.compression=8,e}(),Cn=function(){function e(e){this.onfile=e,this.k=[],this.o={0:An},this.p=Ke}return e.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),i=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(i,!this.c):this.k[0].push(i),(e=e.subarray(r)).length)return this.push(e,t)}else{var o=0,a=0,s=void 0,l=void 0;this.p.length?e.length?((l=new he(this.p.length+e.length)).set(this.p),l.set(e,this.p.length)):l=this.p:l=e;for(var u=l.length,c=this.c,d=c&&this.d,h=function(){var e,t=yt(l,a);if(67324752==t){o=1,s=a,f.d=null,f.c=0;var r=vt(l,a+6),i=vt(l,a+8),d=2048&r,h=8&r,p=vt(l,a+26),m=vt(l,a+28);if(u>a+30+p+m){var g=[];f.k.unshift(g),o=2;var v,y=yt(l,a+18),_=yt(l,a+22),b=dn(l.subarray(a+30,a+=30+p),!d);4294967295==y?(e=h?[-2]:mn(l,a),y=e[0],_=e[1]):h&&(y=-1),a+=m,f.c=y;var x={name:b,compression:i,start:function(){if(!x.ondata)throw"no callback";if(y){var e=n.o[i];if(!e)throw"unknown compression type "+i;(v=y<0?new e(b):new e(b,y,_)).ondata=function(e,t,n){x.ondata(e,t,n)};for(var t=0,r=g;t<r.length;t++){var o=r[t];v.push(o,!1)}n.k[0]==g&&n.c?n.d=v:v.push(Ke,!0)}else x.ondata(null,Ke,!0)},terminate:function(){v&&v.terminate&&v.terminate()}};y>=0&&(x.size=y,x.originalSize=_),f.onfile(x)}return"break"}if(c){if(134695760==t)return s=a+=12+(-2==c&&8),o=3,f.c=0,"break";if(33639248==t)return s=a-=4,o=3,f.c=0,"break"}},f=this;a<u-4;++a){if("break"===h())break}if(this.p=Ke,c<0){var p=o?l.subarray(0,s-12-(-2==c&&8)-(134695760==yt(l,s-16)&&4)):l.subarray(0,a);d?d.push(p,!!o):this.k[+(2==o)].push(p)}if(2&o)return this.push(l.subarray(a),t);this.p=l.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e}();function Tn(e,t){if("function"!=typeof t)throw"no callback";for(var n=[],r=function(){for(var e=0;e<n.length;++e)n[e]()},i={},o=e.length-22;101010256!=yt(e,o);--o)if(!o||e.length-o>65558)return void t("invalid zip file",null);var a=vt(e,o+8);a||t(null,{});var s=a,l=yt(e,o+16),u=4294967295==l;if(u){if(o=yt(e,o-12),101075792!=yt(e,o))return void t("invalid zip file",null);s=a=yt(e,o+32),l=yt(e,o+48)}for(var c=function(s){var c=pn(e,l,u),d=c[0],h=c[1],f=c[2],p=c[3],m=c[4],g=c[5],v=fn(e,g);l=m;var y=function(e,n){e?(r(),t(e,null)):(i[p]=n,--a||t(null,i))};if(d)if(8==d){var _=e.subarray(v,v+h);if(h<32e4)try{y(null,Ft(_,new he(f)))}catch(o){y(o,null)}else n.push(Lt(_,{size:f},y))}else y("unknown compression type "+d,null);else y(null,je(e,v,v+h))},d=0;d<s;++d)c();return r}function Pn(e){for(var t={},n=e.length-22;101010256!=yt(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=vt(e,n+8);if(!r)return{};var i=yt(e,n+16),o=4294967295==i;if(o){if(n=yt(e,n-12),101075792!=yt(e,n))throw"invalid zip file";r=yt(e,n+32),i=yt(e,n+48)}for(var a=0;a<r;++a){var s=pn(e,i,o),l=s[0],u=s[1],c=s[2],d=s[3],h=s[4],f=s[5],p=fn(e,f);if(i=h,l){if(8!=l)throw"unknown compression type "+l;t[d]=Ft(e.subarray(p,p+u),new he(c))}else t[d]=je(e,p,p+u)}return t}class Rn extends s.DataTextureLoader{constructor(e){super(e),this.type=s.HalfFloatType}parse(e){const t=65536,n=14,i=65537,o=16384,a=Math.pow(2.7182818,2.2);const l={l:0,c:0,lc:0};function u(e,t,n,r,i){for(;n<e;)t=t<<8|G(r,i),n+=8;n-=e,l.l=t>>n&(1<<e)-1,l.c=t,l.lc=n}const c=new Array(59);function d(e,t,n,r,o,a){const s=t;let d=0,h=0;for(;r<=o;r++){if(s.value-t.value>n)return!1;u(6,d,h,e,s);const i=l.l;if(d=l.c,h=l.lc,a[r]=i,63==i){if(s.value-t.value>n)throw new Error("Something wrong with hufUnpackEncTable");u(8,d,h,e,s);let i=l.l+6;if(d=l.c,h=l.lc,r+i>o+1)throw new Error("Something wrong with hufUnpackEncTable");for(;i--;)a[r++]=0;r--}else if(i>=59){let e=i-59+2;if(r+e>o+1)throw new Error("Something wrong with hufUnpackEncTable");for(;e--;)a[r++]=0;r--}}!function(e){for(let n=0;n<=58;++n)c[n]=0;for(let n=0;n<i;++n)c[e[n]]+=1;let t=0;for(let n=58;n>0;--n){const e=t+c[n]>>1;c[n]=t,t=e}for(let n=0;n<i;++n){const t=e[n];t>0&&(e[n]=t|c[t]++<<6)}}(a)}function h(e){return 63&e}function f(e){return e>>6}const p={c:0,lc:0};function m(e,t,n,r){e=e<<8|G(n,r),t+=8,p.c=e,p.lc=t}const g={c:0,lc:0};function v(e,t,n,r,i,o,a,s,l){if(e==t){r<8&&(m(n,r,i,o),n=p.c,r=p.lc);let e=n>>(r-=8);if(e=new Uint8Array([e])[0],s.value+e>l)return!1;const t=a[s.value-1];for(;e-->0;)a[s.value++]=t}else{if(!(s.value<l))return!1;a[s.value++]=e}g.c=n,g.lc=r}function y(e){return 65535&e}function _(e){const t=y(e);return t>32767?t-65536:t}const b={a:0,b:0};function x(e,t){const n=_(e),r=_(t),i=n+(1&r)+(r>>1),o=i,a=i-r;b.a=o,b.b=a}function w(e,t){const n=y(e),r=y(t),i=n-(r>>1)&65535,o=r+i-32768&65535;b.a=o,b.b=i}function S(e,t,n,r,i,o,a){const s=a<16384,l=n>i?i:n;let u,c,d=1;for(;d<=l;)d<<=1;for(d>>=1,u=d,d>>=1;d>=1;){c=0;const a=c+o*(i-u),l=o*d,h=o*u,f=r*d,p=r*u;let m,g,v,y;for(;c<=a;c+=h){let i=c;const o=c+r*(n-u);for(;i<=o;i+=p){const n=i+f,r=i+l,o=r+f;s?(x(e[i+t],e[r+t]),m=b.a,v=b.b,x(e[n+t],e[o+t]),g=b.a,y=b.b,x(m,g),e[i+t]=b.a,e[n+t]=b.b,x(v,y),e[r+t]=b.a,e[o+t]=b.b):(w(e[i+t],e[r+t]),m=b.a,v=b.b,w(e[n+t],e[o+t]),g=b.a,y=b.b,w(m,g),e[i+t]=b.a,e[n+t]=b.b,w(v,y),e[r+t]=b.a,e[o+t]=b.b)}if(n&d){const n=i+l;s?x(e[i+t],e[n+t]):w(e[i+t],e[n+t]),m=b.a,e[n+t]=b.b,e[i+t]=m}}if(i&d){let i=c;const o=c+r*(n-u);for(;i<=o;i+=p){const n=i+f;s?x(e[i+t],e[n+t]):w(e[i+t],e[n+t]),m=b.a,e[n+t]=b.b,e[i+t]=m}}u=d,d>>=1}return c}function D(e,t,r,a,s,l){const u=r.value,c=H(t,r),y=H(t,r);r.value+=4;const _=H(t,r);if(r.value+=4,c<0||c>=i||y<0||y>=i)throw new Error("Something wrong with HUF_ENCSIZE");const b=new Array(i),x=new Array(o);!function(e){for(let t=0;t<o;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(x);if(d(e,r,a-(r.value-u),c,y,b),_>8*(a-(r.value-u)))throw new Error("Something wrong with hufUncompress");!function(e,t,r,i){for(;t<=r;t++){const r=f(e[t]),o=h(e[t]);if(r>>o)throw new Error("Invalid table entry");if(o>n){const e=i[r>>o-n];if(e.len)throw new Error("Invalid table entry");if(e.lit++,e.p){const t=e.p;e.p=new Array(e.lit);for(let n=0;n<e.lit-1;++n)e.p[n]=t[n]}else e.p=new Array(1);e.p[e.lit-1]=t}else if(o){let e=0;for(let a=1<<n-o;a>0;a--){const a=i[(r<<n-o)+e];if(a.len||a.p)throw new Error("Invalid table entry");a.len=o,a.lit=t,e++}}}}(b,c,y,x),function(e,t,r,i,o,a,s,l,u){let c=0,d=0;const y=s,_=Math.trunc(i.value+(o+7)/8);for(;i.value<_;)for(m(c,d,r,i),c=p.c,d=p.lc;d>=n;){const o=t[c>>d-n&16383];if(o.len)d-=o.len,v(o.lit,a,c,d,r,i,l,u,y),c=g.c,d=g.lc;else{if(!o.p)throw new Error("hufDecode issues");let t;for(t=0;t<o.lit;t++){const n=h(e[o.p[t]]);for(;d<n&&i.value<_;)m(c,d,r,i),c=p.c,d=p.lc;if(d>=n&&f(e[o.p[t]])==(c>>d-n&(1<<n)-1)){d-=n,v(o.p[t],a,c,d,r,i,l,u,y),c=g.c,d=g.lc;break}}if(t==o.lit)throw new Error("hufDecode issues")}}const b=8-o&7;for(c>>=b,d-=b;d>0;){const e=t[c<<n-d&16383];if(!e.len)throw new Error("hufDecode issues");d-=e.len,v(e.lit,a,c,d,r,i,l,u,y),c=g.c,d=g.lc}}(b,x,e,r,_,y,l,s,{value:0})}function A(e){for(let t=1;t<e.length;t++){const n=e[t-1]+e[t]-128;e[t]=n}}function E(e,t){let n=0,r=Math.floor((e.length+1)/2),i=0;const o=e.length-1;for(;!(i>o)&&(t[i++]=e[n++],!(i>o));)t[i++]=e[r++]}function M(e){let t=e.byteLength;const n=new Array;let r=0;const i=new DataView(e);for(;t>0;){const e=i.getInt8(r++);if(e<0){const o=-e;t-=o+1;for(let e=0;e<o;e++)n.push(i.getUint8(r++))}else{const o=e;t-=2;const a=i.getUint8(r++);for(let e=0;e<o+1;e++)n.push(a)}}return n}function C(e,t,n){let r,i=1;for(;i<64;)r=t[e.value],65280==r?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}function T(e,t){t[0]=q(e[0]),t[1]=q(e[1]),t[2]=q(e[5]),t[3]=q(e[6]),t[4]=q(e[14]),t[5]=q(e[15]),t[6]=q(e[27]),t[7]=q(e[28]),t[8]=q(e[2]),t[9]=q(e[4]),t[10]=q(e[7]),t[11]=q(e[13]),t[12]=q(e[16]),t[13]=q(e[26]),t[14]=q(e[29]),t[15]=q(e[42]),t[16]=q(e[3]),t[17]=q(e[8]),t[18]=q(e[12]),t[19]=q(e[17]),t[20]=q(e[25]),t[21]=q(e[30]),t[22]=q(e[41]),t[23]=q(e[43]),t[24]=q(e[9]),t[25]=q(e[11]),t[26]=q(e[18]),t[27]=q(e[24]),t[28]=q(e[31]),t[29]=q(e[40]),t[30]=q(e[44]),t[31]=q(e[53]),t[32]=q(e[10]),t[33]=q(e[19]),t[34]=q(e[23]),t[35]=q(e[32]),t[36]=q(e[39]),t[37]=q(e[45]),t[38]=q(e[52]),t[39]=q(e[54]),t[40]=q(e[20]),t[41]=q(e[22]),t[42]=q(e[33]),t[43]=q(e[38]),t[44]=q(e[46]),t[45]=q(e[51]),t[46]=q(e[55]),t[47]=q(e[60]),t[48]=q(e[21]),t[49]=q(e[34]),t[50]=q(e[37]),t[51]=q(e[47]),t[52]=q(e[50]),t[53]=q(e[56]),t[54]=q(e[59]),t[55]=q(e[61]),t[56]=q(e[35]),t[57]=q(e[36]),t[58]=q(e[48]),t[59]=q(e[49]),t[60]=q(e[57]),t[61]=q(e[58]),t[62]=q(e[62]),t[63]=q(e[63])}function P(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625),l=new Array(4),u=new Array(4),c=new Array(4),d=new Array(4);for(let h=0;h<8;++h){const f=8*h;l[0]=r*e[f+2],l[1]=a*e[f+2],l[2]=r*e[f+6],l[3]=a*e[f+6],u[0]=n*e[f+1]+i*e[f+3]+o*e[f+5]+s*e[f+7],u[1]=i*e[f+1]-s*e[f+3]-n*e[f+5]-o*e[f+7],u[2]=o*e[f+1]-n*e[f+3]+s*e[f+5]+i*e[f+7],u[3]=s*e[f+1]-o*e[f+3]+i*e[f+5]-n*e[f+7],c[0]=t*(e[f+0]+e[f+4]),c[3]=t*(e[f+0]-e[f+4]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],d[0]=c[0]+c[1],d[1]=c[3]+c[2],d[2]=c[3]-c[2],d[3]=c[0]-c[1],e[f+0]=d[0]+u[0],e[f+1]=d[1]+u[1],e[f+2]=d[2]+u[2],e[f+3]=d[3]+u[3],e[f+4]=d[3]-u[3],e[f+5]=d[2]-u[2],e[f+6]=d[1]-u[1],e[f+7]=d[0]-u[0]}for(let h=0;h<8;++h)l[0]=r*e[16+h],l[1]=a*e[16+h],l[2]=r*e[48+h],l[3]=a*e[48+h],u[0]=n*e[8+h]+i*e[24+h]+o*e[40+h]+s*e[56+h],u[1]=i*e[8+h]-s*e[24+h]-n*e[40+h]-o*e[56+h],u[2]=o*e[8+h]-n*e[24+h]+s*e[40+h]+i*e[56+h],u[3]=s*e[8+h]-o*e[24+h]+i*e[40+h]-n*e[56+h],c[0]=t*(e[h]+e[32+h]),c[3]=t*(e[h]-e[32+h]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],d[0]=c[0]+c[1],d[1]=c[3]+c[2],d[2]=c[3]-c[2],d[3]=c[0]-c[1],e[0+h]=d[0]+u[0],e[8+h]=d[1]+u[1],e[16+h]=d[2]+u[2],e[24+h]=d[3]+u[3],e[32+h]=d[3]-u[3],e[40+h]=d[2]-u[2],e[48+h]=d[1]-u[1],e[56+h]=d[0]-u[0]}function R(e){for(let t=0;t<64;++t){const n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}function k(e,t,n){for(let r=0;r<64;++r)t[n+r]=s.DataUtils.toHalfFloat(O(e[r]))}function O(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(a,Math.abs(e)-1)}function L(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function F(e){const t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(M(t)),r=new Uint8Array(n.length);return A(n),E(n,r),new DataView(r.buffer)}function I(e){const t=e.array.slice(e.offset.value,e.offset.value+e.size);"undefined"===typeof r&&console.error("THREE.EXRLoader: External library fflate.min.js required.");const n=Xt(t),i=new Uint8Array(n.length);return A(n),E(n,i),new DataView(i.buffer)}function N(e){const n=e.viewer,r={value:e.offset.value},i=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(8192);let a=0;const s=new Array(e.channels);for(let t=0;t<e.channels;t++)s[t]={},s[t].start=a,s[t].end=s[t].start,s[t].nx=e.width,s[t].ny=e.lines,s[t].size=e.type,a+=s[t].nx*s[t].ny*s[t].size;const l=Y(n,r),u=Y(n,r);if(u>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(l<=u)for(let t=0;t<u-l+1;t++)o[t+l]=V(n,r);const c=new Uint16Array(t),d=function(e,n){let r=0;for(let o=0;o<t;++o)(0==o||e[o>>3]&1<<(7&o))&&(n[r++]=o);const i=r-1;for(;r<t;)n[r++]=0;return i}(o,c),h=H(n,r);D(e.array,n,r,h,i,a);for(let t=0;t<e.channels;++t){const e=s[t];for(let n=0;n<s[t].size;++n)S(i,e.start+n,e.nx,e.size,e.ny,e.nx*e.size,d)}!function(e,t,n){for(let r=0;r<n;++r)t[r]=e[t[r]]}(c,i,a);let f=0;const p=new Uint8Array(i.buffer.byteLength);for(let t=0;t<e.lines;t++)for(let n=0;n<e.channels;n++){const e=s[n],t=e.nx*e.size,r=new Uint8Array(i.buffer,2*e.end,2*t);p.set(r,f),f+=2*t,e.end+=t}return new DataView(p.buffer)}function B(e){const t=e.array.slice(e.offset.value,e.offset.value+e.size);"undefined"===typeof r&&console.error("THREE.EXRLoader: External library fflate.min.js required.");const n=Xt(t),i=e.lines*e.channels*e.width,o=1==e.type?new Uint16Array(i):new Uint32Array(i);let a=0,s=0;const l=new Array(4);for(let r=0;r<e.lines;r++)for(let t=0;t<e.channels;t++){let t=0;switch(e.type){case 1:l[0]=a,l[1]=l[0]+e.width,a=l[1]+e.width;for(let r=0;r<e.width;++r){t+=n[l[0]++]<<8|n[l[1]++],o[s]=t,s++}break;case 2:l[0]=a,l[1]=l[0]+e.width,l[2]=l[1]+e.width,a=l[2]+e.width;for(let r=0;r<e.width;++r){t+=n[l[0]++]<<24|n[l[1]++]<<16|n[l[2]++]<<8,o[s]=t,s++}}}return new DataView(o.buffer)}function j(e){const t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:W(t,n),unknownUncompressedSize:W(t,n),unknownCompressedSize:W(t,n),acCompressedSize:W(t,n),dcCompressedSize:W(t,n),rleCompressedSize:W(t,n),rleUncompressedSize:W(t,n),rleRawSize:W(t,n),totalAcUncompressedCount:W(t,n),totalDcUncompressedCount:W(t,n),acCompression:W(t,n)};if(i.version<2)throw new Error("EXRLoader.parse: "+te.compression+" version "+i.version+" is unsupported");const o=new Array;let a=Y(t,n)-2;for(;a>0;){const e=z(t.buffer,n),r=V(t,n),i=r>>2&3,s=new Int8Array([(r>>4)-1])[0],l=V(t,n);o.push({name:e,index:s,type:l,compression:i}),a-=e.length+3}const s=te.channels,l=new Array(e.channels);for(let m=0;m<e.channels;++m){const t=l[m]={},n=s[m];t.name=n.name,t.compression=0,t.decoded=!1,t.type=n.pixelType,t.pLinear=n.pLinear,t.width=e.width,t.height=e.lines}const u={idx:new Array(3)};for(let m=0;m<e.channels;++m){const e=l[m];for(let t=0;t<o.length;++t){const n=o[t];e.name==n.name&&(e.compression=n.compression,n.index>=0&&(u.idx[n.index]=m),e.offset=m)}}let c,d,h;if(i.acCompressedSize>0)switch(i.acCompression){case 0:c=new Uint16Array(i.totalAcUncompressedCount),D(e.array,t,n,i.acCompressedSize,c,i.totalAcUncompressedCount);break;case 1:const r=Xt(e.array.slice(n.value,n.value+i.totalAcUncompressedCount));c=new Uint16Array(r.buffer),n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){const t={array:e.array,offset:n,size:i.dcCompressedSize};d=new Uint16Array(I(t).buffer),n.value+=i.dcCompressedSize}if(i.rleRawSize>0){h=M(Xt(e.array.slice(n.value,n.value+i.rleCompressedSize)).buffer),n.value+=i.rleCompressedSize}let f=0;const p=new Array(l.length);for(let m=0;m<p.length;++m)p[m]=new Array;for(let m=0;m<e.lines;++m)for(let t=0;t<l.length;++t)p[t].push(f),f+=l[t].width*e.type*2;!function(e,t,n,r,i,o){let a=new DataView(o.buffer);const s=n[e.idx[0]].width,l=n[e.idx[0]].height,u=Math.floor(s/8),c=Math.ceil(s/8),d=Math.ceil(l/8),h=s-8*(c-1),f=l-8*(d-1),p={value:0},m=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3),_=new Array(3);for(let x=0;x<3;++x)_[x]=t[e.idx[x]],m[x]=x<1?0:m[x-1]+c*d,g[x]=new Float32Array(64),v[x]=new Uint16Array(64),y[x]=new Uint16Array(64*c);for(let x=0;x<d;++x){let t=8;x==d-1&&(t=f);let o=8;for(let e=0;e<c;++e){e==c-1&&(o=h);for(let e=0;e<3;++e)v[e].fill(0),v[e][0]=i[m[e]++],C(p,r,v[e]),T(v[e],g[e]),P(g[e]);R(g);for(let t=0;t<3;++t)k(g[t],y[t],64*e)}let s=0;for(let r=0;r<3;++r){const i=n[e.idx[r]].type;for(let e=8*x;e<8*x+t;++e){s=_[r][e];for(let t=0;t<u;++t){const n=64*t+8*(7&e);a.setUint16(s+0*i,y[r][n+0],!0),a.setUint16(s+2*i,y[r][n+1],!0),a.setUint16(s+4*i,y[r][n+2],!0),a.setUint16(s+6*i,y[r][n+3],!0),a.setUint16(s+8*i,y[r][n+4],!0),a.setUint16(s+10*i,y[r][n+5],!0),a.setUint16(s+12*i,y[r][n+6],!0),a.setUint16(s+14*i,y[r][n+7],!0),s+=16*i}}if(u!=c)for(let e=8*x;e<8*x+t;++e){const t=_[r][e]+8*u*2*i,n=64*u+8*(7&e);for(let e=0;e<o;++e)a.setUint16(t+2*e*i,y[r][n+e],!0)}}}const b=new Uint16Array(s);a=new DataView(o.buffer);for(let x=0;x<3;++x){n[e.idx[x]].decoded=!0;const t=n[e.idx[x]].type;if(2==n[x].type)for(let e=0;e<l;++e){const n=_[x][e];for(let e=0;e<s;++e)b[e]=a.getUint16(n+2*e*t,!0);for(let e=0;e<s;++e)a.setFloat32(n+2*e*t,q(b[e]),!0)}}}(u,p,l,c,d,r);for(let m=0;m<l.length;++m){const t=l[m];if(!t.decoded){if(2!==t.compression)throw new Error("EXRLoader.parse: unsupported channel compression");{let n=0,i=0;for(let o=0;o<e.lines;++o){let e=p[m][n];for(let n=0;n<t.width;++n){for(let n=0;n<2*t.type;++n)r[e++]=h[i+n*t.width*t.height];i++}n++}}}}return new DataView(r.buffer)}function z(e,t){const n=new Uint8Array(e);let r=0;for(;0!=n[t.value+r];)r+=1;const i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function U(e,t){const n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function H(e,t){const n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function G(e,t){const n=e[t.value];return t.value=t.value+1,n}function V(e,t){const n=e.getUint8(t.value);return t.value=t.value+1,n}const W=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function Z(e,t){const n=e.getFloat32(t.value,!0);return t.value+=4,n}function $(e,t){return s.DataUtils.toHalfFloat(Z(e,t))}function q(e){const t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function Y(e,t){const n=e.getUint16(t.value,!0);return t.value+=2,n}function K(e,t){return q(Y(e,t))}function X(e,t,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){const r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i):"chlist"===r?function(e,t,n,r){const i=n.value,o=[];for(;n.value<i+r-1;){const r=z(t,n),i=U(e,n),a=V(e,n);n.value+=3;const s=U(e,n),l=U(e,n);o.push({name:r,pixelType:i,pLinear:a,xSampling:s,ySampling:l})}return n.value+=1,o}(e,t,n,i):"chromaticities"===r?function(e,t){return{redX:Z(e,t),redY:Z(e,t),greenX:Z(e,t),greenY:Z(e,t),blueX:Z(e,t),blueY:Z(e,t),whiteX:Z(e,t),whiteY:Z(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][V(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:H(e,t),yMin:H(e,t),xMax:H(e,t),yMax:H(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][V(e,t)]}(e,n):"float"===r?Z(e,n):"v2f"===r?function(e,t){return[Z(e,t),Z(e,t)]}(e,n):"v3f"===r?function(e,t){return[Z(e,t),Z(e,t),Z(e,t)]}(e,n):"int"===r?U(e,n):"rational"===r?function(e,t){return[U(e,t),H(e,t)]}(e,n):"timecode"===r?function(e,t){return[H(e,t),H(e,t)]}(e,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}const Q=new DataView(e),J=new Uint8Array(e),ee={value:0},te=function(e,t,n){const r={};if(20000630!=e.getUint32(0,!0))throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");r.version=e.getUint8(4);const i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;let o=!0;for(;o;){const i=z(t,n);if(0==i)o=!1;else{const o=z(t,n),a=X(e,t,n,o,H(e,n));void 0===a?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${o}'.`):r[i]=a}}if(0!=(-5&i))throw console.error("EXRHeader:",r),new Error("THREE.EXRLoader: provided file is currently unsupported.");return r}(Q,e,ee),ne=function(e,t,n,r,i){const o={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=L;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=F;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=I;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=I;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=N;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=B;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=j;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=j;break;default:throw new Error("EXRLoader.parse: "+e.compression+" is unsupported")}if(o.scanlineBlockSize=o.lines,1==o.type)switch(i){case s.FloatType:o.getter=K,o.inputSize=2;break;case s.HalfFloatType:o.getter=Y,o.inputSize=2}else{if(2!=o.type)throw new Error("EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".");switch(i){case s.FloatType:o.getter=Z,o.inputSize=4;break;case s.HalfFloatType:o.getter=$,o.inputSize=4}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(let s=0;s<o.blockCount;s++)W(t,r);o.outputChannels=3==o.channels?4:o.channels;const a=o.width*o.height*o.outputChannels;switch(i){case s.FloatType:o.byteArray=new Float32Array(a),o.channels<o.outputChannels&&o.byteArray.fill(1,0,a);break;case s.HalfFloatType:o.byteArray=new Uint16Array(a),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,a);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?(o.format=s.RGBAFormat,o.encoding=s.LinearEncoding):(o.format=s.RedFormat,o.encoding=s.LinearEncoding),o}(te,Q,J,ee,this.type),re={value:0},ie={R:0,G:1,B:2,A:3,Y:0};for(let r=0;r<ne.height/ne.scanlineBlockSize;r++){const e=H(Q,ee);ne.size=H(Q,ee),ne.lines=e+ne.scanlineBlockSize>ne.height?ne.height-e:ne.scanlineBlockSize;const t=ne.size<ne.lines*ne.bytesPerLine?ne.uncompress(ne):L(ne);ee.value+=ne.size;for(let n=0;n<ne.scanlineBlockSize;n++){const e=n+r*ne.scanlineBlockSize;if(e>=ne.height)break;for(let r=0;r<ne.channels;r++){const i=ie[te.channels[r].name];for(let o=0;o<ne.width;o++){re.value=(n*(ne.channels*ne.width)+r*ne.width+o)*ne.inputSize;const a=(ne.height-1-e)*(ne.width*ne.outputChannels)+o*ne.outputChannels+i;ne.byteArray[a]=ne.getter(t,re)}}}}return{header:te,width:ne.width,height:ne.height,data:ne.byteArray,format:ne.format,encoding:ne.encoding,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){e.encoding=n.encoding,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),n,r)}}var kn=JSON.parse('[{"key":"globeDotIcons","type":"texture","path":"/images/webgl/dots/globeDotIcons.png"},{"key":"timelineDotMask","type":"texture","path":"/images/webgl/dots/timelineDotMask.jpg"},{"key":"timelineDotStroke","type":"texture","path":"/images/webgl/dots/timelineDotStroke.jpg"},{"key":"FboGlobe","type":"fbo","path":"/images/webgl/globe/globe.exr"},{"key":"FboFlatMap","type":"fbo","path":"/images/webgl/globe/map.exr"},{"key":"introBear","type":"fbo","path":"/images/webgl/intro/bear.exr"},{"key":"introFrog","type":"fbo","path":"/images/webgl/intro/frog.exr"},{"key":"introBird","type":"fbo","path":"/images/webgl/intro/bird.exr"},{"key":"noise","type":"texture","path":"/images/webgl/helpers/noise.png"},{"key":"missingDot","type":"texture","path":"/images/placeholders/missingDot.png"},{"key":"statisticIcon","type":"texture","path":"/images/webgl/dots/statisticIcon.png"},{"key":"bestPracticesIcon","type":"texture","path":"/images/webgl/helpers/bestPracticesIcon.png"}]'),On=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._loaders={gltfLoader:new l,textureLoader:new s.TextureLoader,exrLoader:new Rn},this._loaded=0,this._resources=new Map,this._onLoadCb=void 0}var t,n,r;return t=e,n=[{key:"get",value:function(e){return this._resources.get(e)}},{key:"startLoad",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._onLoadCb=r,this._gl=e;var o=[],a=[].concat((0,i.Z)(n),(0,i.Z)(kn));return a.forEach((function(e){if(!t._resources.has(e.key)){var n=new Promise((function(n){"gltfModel"===e.type?t._loaders.gltfLoader.load(e.path,(function(r){t.onSingleLoad(e.key,r,n)})):"texture"===e.type?t._loaders.textureLoader.load(e.path,(function(r){r.encoding=3001,r.needsUpdate=!0,t.onSingleLoad(e.key,r,n,e)})):"fbo"===e.type?t._loaders.exrLoader.load(e.path,(function(r){r.minFilter=r.magFilter=s.NearestFilter,r.generateMipmaps=!1,r.needsUpdate=!0,t.onSingleLoad(e.key,r,n,e)})):"envtexture"===e.type&&(t._pmremGenerator.compileEquirectangularShader(),t._loaders.textureLoader.load(e.path,(function(r){r.encoding=3001,r.needsUpdate=!0;var i=t._pmremGenerator.fromEquirectangular(r).texture;t.onSingleLoad(e.key,i,n)})))}));o.push(n)}})),Promise.all(o).then((function(){return t.onLoadComplete()}))}},{key:"onSingleLoad",value:function(e,t,n,r){console.log("--- LOADED:",e),this._loaded+=1,this._resources.set(e,t),n()}},{key:"onLoadComplete",value:function(){this._onLoadCb()}}],n&&o(t.prototype,n),r&&o(t,r),e}(),Ln=new On,Fn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,a.useMemo)((function(){return Ln.get(e)}),t)},In=Ln},77843:function(e,t,n){"use strict";n.d(t,{_j:function(){return a},fq:function(){return c},mv:function(){return g},s6:function(){return w},$x:function(){return y},fs:function(){return E},ac:function(){return bs},ic:function(){return b},o$:function(){return d.Z},P:function(){return D},rm:function(){return f},dz:function(){return gs}});var r=n(50029),i=n(87794),o=n.n(i);var a=function(){var e=w("audioArr"),t=w("setAudioPlaying"),n=w("setActiveAudio"),i=function(){var a=(0,r.Z)(o().mark((function r(){var a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e&&((a=new Audio(e[Math.floor(Math.random()*e.length)].url)).play(),a.volume=.1,a.onended=i,n(a),t(!0));case 1:case"end":return r.stop()}}),r)})));return function(){return a.apply(this,arguments)}}();return i},s=n(67294),l=n.t(s,2),u=n(49194);function c(){return(0,s.useContext)(u.Z)}var d=n(65252),h=n(67882);function f(){return(0,s.useContext)(h.Z)}var p=n(36902),m=(0,p.ZP)((function(e,t){return{currentView:!1,setCurrentView:function(t){return e((function(e){e.currentView=t}))},isRafActive:!0,setIsRafActive:function(t){return e((function(e){e.isRafActive=t}))},viewportBounds:{},setViewportBounds:function(t){return e((function(e){e.viewportBounds=t}))},defaultViewportBounds:{},setDefaultViewportBounds:function(t){return e((function(e){e.defaultViewportBounds=t}))},currentType:"all",setCurrentType:function(t){return e((function(e){e.currentType=t}))},currentCategory:"all",setCurrentCategory:function(t){return e((function(e){e.currentCategory=t}))},homepageFilterPersistentFlow:[!1,!1],setHomepageFilterPersistentFlow:function(t){return e((function(e){e.homepageFilterPersistentFlow=t}))},priorityZoomThreshold:1,setPriorityZoomThreshold:function(t){return e((function(e){e.priorityZoomThreshold=t}))},solutionMapType:2021,setSolutionMapType:function(t){return e((function(e){e.solutionMapType=t}))},responsiveSolutionValues:{y:0,scale:1},setResponsiveSolutionValues:function(t){return e((function(e){e.responsiveSolutionValues=t}))},responsiveGlobeScale:1,setResponsiveGlobeScale:function(t){return e((function(e){e.responsiveGlobeScale=t}))},refValues:{globe:{zoom:{static:0,smooth:0}},timeline:{globalGroupPosition:{x:0,y:0},center:{smooth:.5,static:.5},selection:{smooth:1,static:1},width:{smooth:6,responsive:6},mobile:{width:2,height:6}},solution:{normalizedZoom:{smooth:0}}}}}));function g(e){return function(e){return m((function(t){return t[e]}))}(e)}var v=(0,p.ZP)((function(e){return{subCategoriesData:null,setSubCategoriesData:function(t){return e((function(e){e.subCategoriesData=t}))},rawData:null,setRawData:function(t){return e((function(e){e.rawData=t}))},groupedByCategory:null,setGroupedByCategory:function(t){return e((function(e){e.groupedByCategory=t}))},groupedByCategoryType:null,setGroupedByCategoryType:function(t){return e((function(e){e.groupedByCategoryType=t}))},groupedByType:null,setGroupedByType:function(t){return e((function(e){e.groupedByType=t}))},storyCollection:null,setStoryCollection:function(t){return e((function(e){e.storyCollection=t}))},uniqueSingularityRef:!1,setUniqueSingularityRef:function(t){return e((function(e){e.uniqueSingularityRef=t}))}}}));function y(e){return function(e){return v((function(t){return t[e]}))}(e)}var _=n(41055);function b(e){return(0,_.o)(e)}var x=n(60577);function w(e){return(0,x.o)(e)}var S=(0,p.ZP)((function(e){return{currentView:"map",setCurrentView:function(t){return e((function(e){e.currentView=t}))},currentMap:void 0,setCurrentMap:function(t){return e((function(e){e.currentMap=t}))},selectedYear:2021,setSelectedYear:function(t){return e((function(e){e.selectedYear=t}))}}}));function D(e){return function(e){return S((function(t){return t[e]}))}(e)}var A=(0,p.ZP)((function(e,t){return{currentState:"initial",setCurrentState:function(t){return e((function(e){e.currentState=t}))}}}));function E(e){return function(e){return A((function(t){return t[e]}))}(e)}function M(...e){return t=>e.forEach((e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t)))}function C(...e){return s.useCallback(M(...e),e)}var T=n(87462);const P=s.forwardRef(((e,t)=>{const{children:n,...r}=e;return s.Children.toArray(n).some(O)?s.createElement(s.Fragment,null,s.Children.map(n,(e=>O(e)?s.createElement(R,(0,T.Z)({},r,{ref:t}),e.props.children):e))):s.createElement(R,(0,T.Z)({},r,{ref:t}),n)}));P.displayName="Slot";const R=s.forwardRef(((e,t)=>{const{children:n,...r}=e;return s.isValidElement(n)?s.cloneElement(n,{...L(r,n.props),ref:M(t,n.ref)}):s.Children.count(n)>1?s.Children.only(null):null}));R.displayName="SlotClone";const k=({children:e})=>s.createElement(s.Fragment,null,e);function O(e){return s.isValidElement(e)&&e.type===k}function L(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?n[r]=(...e)=>{null==o||o(...e),null==i||i(...e)}:"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}const F=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:s.forwardRef(((e,n)=>{const{asChild:r,...i}=e,o=r?P:t;return s.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),s.createElement(o,(0,T.Z)({},i,{ref:n}))}))})),{}),I=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?s.useLayoutEffect:()=>{};var N=n(73935);const B=s.forwardRef(((e,t)=>{var n,r;const{containerRef:i,style:o,...a}=e,l=null!==(n=null==i?void 0:i.current)&&void 0!==n?n:null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body,[,u]=s.useState({});return I((()=>{u({})}),[]),l?N.createPortal(s.createElement(F.div,(0,T.Z)({"data-radix-portal":""},a,{ref:t,style:l===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...o}:void 0})),l):null})),j=B;var z=Object.prototype.hasOwnProperty;function U(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&U(e[r],t[r]););return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(z.call(e,n)&&++r&&!z.call(t,n))return!1;if(!(n in t)||!U(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}function H(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var G=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};function V(e,t){return void 0===t&&(t="simple"),"object"===typeof e?e[t]:e}function W(e,t,n){if(e.length){var r=e.shift(),i=W(e,t,n);return r.perform(i,n)}return V(t)}function Z(e,t,n){if(e.length){var r=e.shift(),i=Z(e,t,n);return r.performAsync(i,n)}return function(e){return Promise.resolve(V(t,"async")(e))}}G.prototype._test=function(e){var t=this.fn;try{W(this.modifiers.slice(),t,this)(e)}catch(n){t=function(){return!1}}try{return W(this.modifiers.slice(),t,this)(e)}catch(r){return!1}},G.prototype._check=function(e){try{W(this.modifiers.slice(),this.fn,this)(e)}catch(t){if(W(this.modifiers.slice(),(function(e){return e}),this)(!1))return}if(!W(this.modifiers.slice(),this.fn,this)(e))throw null},G.prototype._testAsync=function(e){var t=this;return new Promise((function(n,r){Z(t.modifiers.slice(),t.fn,t)(e).then((function(t){t?n(e):r(null)})).catch((function(e){return r(e)}))}))};var $=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},q=function(e){function t(n,r,i,o){for(var a=[],s=arguments.length-4;s-->0;)a[s]=arguments[s+4];e.call(this,a),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=r,this.cause=i,this.target=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Y=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};function K(e,t,n,r){if(t.length){var i=t.shift();i._testAsync(e).then((function(){K(e,t,n,r)}),(function(t){r(new q(i,e,t))}))}else n(e)}Y.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return n.chain.push(new G(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},Y.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new $(t,e.simple,e.async)),this},Y.prototype._clone=function(){return new Y(this.chain.slice(),this.nextRuleModifiers.slice())},Y.prototype.test=function(e){return this.chain.every((function(t){return t._test(e)}))},Y.prototype.testAll=function(e){var t=[];return this.chain.forEach((function(n){try{n._check(e)}catch(r){t.push(new q(n,e,r))}})),t},Y.prototype.check=function(e){this.chain.forEach((function(t){try{t._check(e)}catch(n){throw new q(t,e,n)}}))},Y.prototype.testAsync=function(e){var t=this;return new Promise((function(n,r){K(e,t.chain.slice(),n,r)}))};var X=function(e,t){return!(!t||"string"!==typeof e||0!==e.trim().length)||(void 0===e||null===e)};function Q(){return"undefined"!==typeof Proxy?ee(new Y):te(new Y)}var J={};function ee(e){return new Proxy(e,{get:function(t,n){if(n in t)return t[n];var r=ee(e._clone());return n in ne?r._applyModifier(ne[n],n):n in J?r._applyRule(J[n],n):n in oe?r._applyRule(oe[n],n):void 0}})}function te(e){var t=function(e,t){return Object.keys(e).forEach((function(n){t[n]=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];var o=te(t._clone()),a=o._applyRule(e[n],n).apply(void 0,r);return a}})),t},n=t(oe,e),r=t(J,n);return Object.keys(ne).forEach((function(e){Object.defineProperty(r,e,{get:function(){return te(r._clone())._applyModifier(ne[e],e)}})})),r}Q.extend=function(e){Object.assign(J,e)},Q.clearCustomRules=function(){J={}};var ne={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(){return!0}))}}},some:{simple:function(e){return function(t){return ie(t).some((function(t){try{return e(t)}catch(n){return!1}}))}},async:function(e){return function(t){return Promise.all(ie(t).map((function(t){try{return e(t).catch((function(){return!1}))}catch(n){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return!1!==t&&ie(t).every(e)}},async:function(e){return function(t){return Promise.all(ie(t).map(e)).then((function(e){return e.every(Boolean)}))}}},strict:{simple:function(e,t){return function(n){return re(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then((function(e){return re(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e:e})).catch((function(){return!1}))}}}};function re(e){return e&&"schema"===e.name&&e.args.length>0&&"object"===typeof e.args[0]}function ie(e){return"string"===typeof e?e.split(""):e}var oe={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"===typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||se)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return ae("string")},boolean:function(){return ae("boolean")},undefined:function(){return ae("undefined")},null:function(){return ae("null")},array:function(){return ae("array")},object:function(){return ae("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"===typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach((function(r){var i=e[r];try{i.check((t||{})[r])}catch(o){o.target=r,n.push(o)}})),n.length>0)throw n;return!0},async:function(t){var n=[],r=Object.keys(e).map((function(r){return e[r].testAsync((t||{})[r]).catch((function(e){e.target=r,n.push(e)}))}));return Promise.all(r).then((function(){if(n.length>0)throw n;return!0}))}}}(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some((function(e){return e.test(t)}))}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(n){return X(n,t)||void 0===e.check(n)},async:function(n){return X(n,t)||e.testAsync(n)}}}};function ae(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function se(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}var le=Q,ue="colors",ce="sizes",de="space",he={gap:de,gridGap:de,columnGap:de,gridColumnGap:de,rowGap:de,gridRowGap:de,inset:de,insetBlock:de,insetBlockEnd:de,insetBlockStart:de,insetInline:de,insetInlineEnd:de,insetInlineStart:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,marginBlock:de,marginBlockEnd:de,marginBlockStart:de,marginInline:de,marginInlineEnd:de,marginInlineStart:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,paddingBlock:de,paddingBlockEnd:de,paddingBlockStart:de,paddingInline:de,paddingInlineEnd:de,paddingInlineStart:de,top:de,right:de,bottom:de,left:de,scrollMargin:de,scrollMarginTop:de,scrollMarginRight:de,scrollMarginBottom:de,scrollMarginLeft:de,scrollMarginX:de,scrollMarginY:de,scrollMarginBlock:de,scrollMarginBlockEnd:de,scrollMarginBlockStart:de,scrollMarginInline:de,scrollMarginInlineEnd:de,scrollMarginInlineStart:de,scrollPadding:de,scrollPaddingTop:de,scrollPaddingRight:de,scrollPaddingBottom:de,scrollPaddingLeft:de,scrollPaddingX:de,scrollPaddingY:de,scrollPaddingBlock:de,scrollPaddingBlockEnd:de,scrollPaddingBlockStart:de,scrollPaddingInline:de,scrollPaddingInlineEnd:de,scrollPaddingInlineStart:de,fontSize:"fontSizes",background:ue,backgroundColor:ue,backgroundImage:ue,borderImage:ue,border:ue,borderBlock:ue,borderBlockEnd:ue,borderBlockStart:ue,borderBottom:ue,borderBottomColor:ue,borderColor:ue,borderInline:ue,borderInlineEnd:ue,borderInlineStart:ue,borderLeft:ue,borderLeftColor:ue,borderRight:ue,borderRightColor:ue,borderTop:ue,borderTopColor:ue,caretColor:ue,color:ue,columnRuleColor:ue,fill:ue,outline:ue,outlineColor:ue,stroke:ue,textDecorationColor:ue,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:ce,minBlockSize:ce,maxBlockSize:ce,inlineSize:ce,minInlineSize:ce,maxInlineSize:ce,width:ce,minWidth:ce,maxWidth:ce,height:ce,minHeight:ce,maxHeight:ce,flexBasis:ce,gridTemplateColumns:ce,gridTemplateRows:ce,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},fe=(e,t)=>"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t,pe=()=>{const e=Object.create(null);return(t,n,...r)=>{const i=(e=>JSON.stringify(e,fe))(t);return i in e?e[i]:e[i]=n(t,...r)}},me=Symbol.for("sxs.internal"),ge=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),ve=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:ye}=Object.prototype,_e=e=>e.includes("-")?e:e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),be=/\s+(?![^()]*\))/,xe=e=>t=>e(..."string"==typeof t?String(t).split(be):[t]),we={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:xe(((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e}))),marginInline:xe(((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e}))),maxSize:xe(((e,t)=>({maxBlockSize:e,maxInlineSize:t||e}))),minSize:xe(((e,t)=>({minBlockSize:e,minInlineSize:t||e}))),paddingBlock:xe(((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e}))),paddingInline:xe(((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e})))},Se=/([\d.]+)([^]*)/,De=(e,t)=>e.length?e.reduce(((e,n)=>(e.push(...t.map((e=>e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?`:is(${n})`:n):n+" "+e))),e)),[]):t,Ae=(e,t)=>e in Ee&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,n,r,i)=>n+("stretch"===r?`-moz-available${i};${_e(e)}:${n}-webkit-fill-available`:`-moz-fit-content${i};${_e(e)}:${n}fit-content`)+i)):String(t),Ee={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Me=e=>e?e+"-":"",Ce=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((e,r,i,o,a)=>"$"==o==!!i?e:(r||"--"==o?"calc(":"")+"var(--"+("$"===o?Me(t)+(a.includes("$")?"":Me(n))+a.replace(/\$/g,"-"):a)+")"+(r||"--"==o?"*"+(r||"")+(i||"1")+")":""))),Te=/\s*,\s*(?![^()]*\))/,Pe=Object.prototype.toString,Re=(e,t,n,r,i)=>{let o,a,s;const l=(e,t,n)=>{let u,c;const d=e=>{for(u in e){const p=64===u.charCodeAt(0),m=p&&Array.isArray(e[u])?e[u]:[e[u]];for(c of m){const e=/[A-Z]/.test(f=u)?f:f.replace(/-[^]/g,(e=>e[1].toUpperCase())),m="object"==typeof c&&c&&c.toString===Pe&&(!r.utils[e]||!t.length);if(e in r.utils&&!m){const t=r.utils[e];if(t!==a){a=t,d(t(c)),a=null;continue}}else if(e in we){const t=we[e];if(t!==s){s=t,d(t(c)),s=null;continue}}if(p&&(h=u.slice(1)in r.media?"@media "+r.media[u.slice(1)]:u,u=h.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((e,t,n,r,i,o)=>{const a=Se.test(t),s=.0625*(a?-1:1),[l,u]=a?[r,t]:[t,r];return"("+("="===n[0]?"":">"===n[0]===a?"max-":"min-")+l+":"+("="!==n[0]&&1===n.length?u.replace(Se,((e,t,r)=>Number(t)+s*(">"===n?1:-1)+r)):u)+(i?") and ("+(">"===i[0]?"min-":"max-")+l+":"+(1===i.length?o.replace(Se,((e,t,n)=>Number(t)+s*(">"===i?-1:1)+n)):o):"")+")"}))),m){const e=p?n.concat(u):[...n],r=p?[...t]:De(t,u.split(Te));void 0!==o&&i(ke(...o)),o=void 0,l(c,r,e)}else void 0===o&&(o=[[],t,n]),u=p||36!==u.charCodeAt(0)?u:`--${Me(r.prefix)}${u.slice(1).replace(/\$/g,"-")}`,c=m?c:"number"==typeof c?c&&e in Oe?String(c)+"px":String(c):Ce(Ae(e,null==c?"":c),r.prefix,r.themeMap[e]),o[0].push(`${p?`${u} `:`${_e(u)}:`}${c}`)}}var h,f};d(e),void 0!==o&&i(ke(...o)),o=void 0};l(e,t,n)},ke=(e,t,n)=>`${n.map((e=>`${e}{`)).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,Oe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Le=e=>String.fromCharCode(e+(e>25?39:97)),Fe=e=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Le(t%52)+n;return Le(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(e))>>>0),Ie=["themed","global","styled","onevar","resonevar","allvar","inline"],Ne=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},Be=e=>{let t;const n=()=>{const{cssRules:e}=t.sheet;return[].map.call(e,((n,r)=>{const{cssText:i}=n;let o="";if(i.startsWith("--sxs"))return"";if(e[r-1]&&(o=e[r-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(const e in t.rules)if(t.rules[e].group===n)return`--sxs{--sxs:${[...t.rules[e].cache].join(" ")}}${i}`;return n.cssRules.length?`${o}${i}`:""}return i})).join("")},r=()=>{if(t){const{rules:e,sheet:n}=t;if(!n.deleteRule){for(;3===Object(Object(n.cssRules)[0]).type;)n.cssRules.splice(0,1);n.cssRules=[]}for(const t in e)delete e[t]}const i=Object(e).styleSheets||[];for(const e of i)if(Ne(e)){for(let i=0,o=e.cssRules;o[i];++i){const a=Object(o[i]);if(1!==a.type)continue;const s=Object(o[i+1]);if(4!==s.type)continue;++i;const{cssText:l}=a;if(!l.startsWith("--sxs"))continue;const u=l.slice(14,-3).trim().split(/\s+/),c=Ie[u[0]];c&&(t||(t={sheet:e,reset:r,rules:{},toString:n}),t.rules[c]={group:s,index:i,cache:new Set(u)})}if(t)break}if(!t){const i=(e,t)=>({type:t,cssRules:[],insertRule(e,t){this.cssRules.splice(t,0,i(e,{import:3,undefined:1}[(e.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===e?`@media{${[].map.call(this.cssRules,(e=>e.cssText)).join("")}}`:e}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:i("","text/css"),rules:{},reset:r,toString:n}}const{sheet:o,rules:a}=t;for(let e=Ie.length-1;e>=0;--e){const t=Ie[e];if(!a[t]){const n=Ie[e+1],r=a[n]?a[n].index:o.cssRules.length;o.insertRule("@media{}",r),o.insertRule(`--sxs{--sxs:${e}}`,r),a[t]={group:o.cssRules[r+1],index:r,cache:new Set([e])}}je(a[t])}};return r(),t},je=e=>{const t=e.group;let n=t.cssRules.length;e.apply=e=>{try{t.insertRule(e,n),++n}catch(e){}}},ze=Symbol(),Ue=pe(),He=(e,t)=>Ue(e,(()=>(...n)=>{let r={type:null,composers:new Set};for(const t of n)if(null!=t)if(t[me]){null==r.type&&(r.type=t[me].type);for(const e of t[me].composers)r.composers.add(e)}else t.constructor!==Object||t.$$typeof?null==r.type&&(r.type=t):r.composers.add(Ge(t,e));return null==r.type&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Ve(e,r,t)})),Ge=({variants:e,compoundVariants:t,defaultVariants:n,...r},i)=>{const o=`${Me(i.prefix)}c-${Fe(r)}`,a=[],s=[],l=Object.create(null),u=[];for(const h in n)l[h]=String(n[h]);if("object"==typeof e&&e)for(const h in e){c=l,d=h,ye.call(c,d)||(l[h]="undefined");const t=e[h];for(const e in t){const n={[h]:String(e)};"undefined"===String(e)&&u.push(h);const r=t[e],i=[n,r,!ve(r)];a.push(i)}}var c,d;if("object"==typeof t&&t)for(const h of t){let{css:e,...t}=h;e="object"==typeof e&&e||{};for(const r in t)t[r]=String(t[r]);const n=[t,e,!ve(e)];s.push(n)}return[o,r,a,s,l,u]},Ve=(e,t,n)=>{const[r,i,o,a]=We(t.composers),s="function"==typeof t.type||t.type.$$typeof?(e=>{function t(){for(let n=0;n<t[ze].length;n++){const[r,i]=t[ze][n];e.rules[r].apply(i)}return t[ze]=[],null}return t[ze]=[],t.rules={},Ie.forEach((e=>t.rules[e]={apply:n=>t[ze].push([e,n])})),t})(n):null,l=(s||n).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=c=>{c="object"==typeof c&&c||$e;const{css:d,...h}=c,f={};for(const e in o)if(delete h[e],e in c){let t=c[e];"object"==typeof t&&t?f[e]={"@initial":o[e],...t}:(t=String(t),f[e]="undefined"!==t||a.has(e)?t:o[e])}else f[e]=o[e];const p=new Set([...i]);for(const[r,i,o,a]of t.composers){n.rules.styled.cache.has(r)||(n.rules.styled.cache.add(r),Re(i,[`.${r}`],[],e,(e=>{l.styled.apply(e)})));const t=Ze(o,f,e.media),s=Ze(a,f,e.media,!0);for(const i of t)if(void 0!==i)for(const[t,o,a]of i){const i=`${r}-${Fe(o)}-${t}`;p.add(i);const s=(a?n.rules.resonevar:n.rules.onevar).cache,u=a?l.resonevar:l.onevar;s.has(i)||(s.add(i),Re(o,[`.${i}`],[],e,(e=>{u.apply(e)})))}for(const i of s)if(void 0!==i)for(const[t,o]of i){const i=`${r}-${Fe(o)}-${t}`;p.add(i),n.rules.allvar.cache.has(i)||(n.rules.allvar.cache.add(i),Re(o,[`.${i}`],[],e,(e=>{l.allvar.apply(e)})))}}if("object"==typeof d&&d){const t=`${r}-i${Fe(d)}-css`;p.add(t),n.rules.inline.cache.has(t)||(n.rules.inline.cache.add(t),Re(d,[`.${t}`],[],e,(e=>{l.inline.apply(e)})))}for(const e of String(c.className||"").trim().split(/\s+/))e&&p.add(e);const m=h.className=[...p].join(" ");return{type:t.type,className:m,selector:u,props:h,toString:()=>m,deferredInjector:s}};return ge(c,{className:r,selector:u,[me]:t,toString:()=>(n.rules.styled.cache.has(r)||c(),r)})},We=e=>{let t="";const n=[],r={},i=[];for(const[o,,,,a,s]of e){""===t&&(t=o),n.push(o),i.push(...s);for(const e in a){const t=a[e];(void 0===r[e]||"undefined"!==t||s.includes(t))&&(r[e]=t)}}return[t,n,r,new Set(i)]},Ze=(e,t,n,r)=>{const i=[];e:for(let[o,a,s]of e){if(s)continue;let e,l=0,u=!1;for(e in o){const r=o[e];let i=t[e];if(i!==r){if("object"!=typeof i||!i)continue e;{let e,t,o=0;for(const a in i){if(r===String(i[a])){if("@initial"!==a){const e=a.slice(1);(t=t||[]).push(e in n?n[e]:a.replace(/^@media ?/,"")),u=!0}l+=o,e=!0}++o}if(t&&t.length&&(a={["@media "+t.join(", ")]:a}),!e)continue e}}}(i[l]=i[l]||[]).push([r?"cv":`${e}-${o[e]}`,a,u])}return i},$e={},qe=pe(),Ye=(e,t)=>qe(e,(()=>(...n)=>{const r=()=>{for(let r of n){r="object"==typeof r&&r||{};let n=Fe(r);if(!t.rules.global.cache.has(n)){if(t.rules.global.cache.add(n),"@import"in r){let e=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let n of[].concat(r["@import"]))n=n.includes('"')||n.includes("'")?n:`"${n}"`,t.sheet.insertRule(`@import ${n};`,e++);delete r["@import"]}Re(r,[],[],e,(e=>{t.rules.global.apply(e)}))}}return""};return ge(r,{toString:r})})),Ke=pe(),Xe=(e,t)=>Ke(e,(()=>n=>{const r=`${Me(e.prefix)}k-${Fe(n)}`,i=()=>{if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);const i=[];Re(n,[],[],e,(e=>i.push(e)));const o=`@keyframes ${r}{${i.join("")}}`;t.rules.global.apply(o)}return r};return ge(i,{get name(){return i()},toString:i})})),Qe=class{constructor(e,t,n,r){this.token=null==e?"":String(e),this.value=null==t?"":String(t),this.scale=null==n?"":String(n),this.prefix=null==r?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Me(this.prefix)+Me(this.scale)+this.token}toString(){return this.computedValue}},Je=pe(),et=(e,t)=>Je(e,(()=>(n,r)=>{r="object"==typeof n&&n||Object(r);const i=`.${n=(n="string"==typeof n?n:"")||`${Me(e.prefix)}t-${Fe(r)}`}`,o={},a=[];for(const t in r){o[t]={};for(const n in r[t]){const i=`--${Me(e.prefix)}${t}-${n}`,s=Ce(String(r[t][n]),e.prefix,t);o[t][n]=new Qe(n,s,t,e.prefix),a.push(`${i}:${s}`)}}const s=()=>{if(a.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const i=`${r===e.theme?":root,":""}.${n}{${a.join(";")}}`;t.rules.themed.apply(i)}return n};return{...o,get className(){return s()},selector:i,toString:s}})),tt=pe(),nt=pe(),rt=e=>{const t=(e=>{let t=!1;const n=tt(e,(e=>{t=!0;const n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",r="object"==typeof e.media&&e.media||{},i="object"==typeof e.root?e.root||null:globalThis.document||null,o="object"==typeof e.theme&&e.theme||{},a={prefix:n,media:r,theme:o,themeMap:"object"==typeof e.themeMap&&e.themeMap||{...he},utils:"object"==typeof e.utils&&e.utils||{}},s=Be(i),l={css:He(a,s),globalCss:Ye(a,s),keyframes:Xe(a,s),createTheme:et(a,s),reset(){s.reset(),l.theme.toString()},theme:{},sheet:s,config:a,prefix:n,getCssText:s.toString,toString:s.toString};return String(l.theme=l.createTheme(o)),l}));return t||n.reset(),n})(e);return t.styled=(({config:e,sheet:t})=>nt(e,(()=>{const n=He(e,t);return(...e)=>{const t=n(...e),r=t[me].type,i=s.forwardRef(((e,n)=>{const i=e&&e.as||r,{props:o,deferredInjector:a}=t(e);return delete o.as,o.ref=n,a?s.createElement(s.Fragment,null,s.createElement(i,o),s.createElement(a,null)):s.createElement(i,o)}));return i.className=t.className,i.displayName=`Styled.${r.displayName||r.name||r}`,i.selector=t.selector,i.toString=()=>t.selector,i[me]=t[me],i}})))(t),t},it=n(85490);const ot=l["useId".toString()]||(()=>{});let at=0;const st=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:s.forwardRef(((e,n)=>{const{asChild:r,...i}=e,o=r?P:t;return s.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(lt),s.createElement(o,(0,T.Z)({},i,{ref:n}))}))})),{}),lt="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",ut=s.forwardRef(((e,t)=>s.createElement(st.span,(0,T.Z)({},e,{ref:t,style:{...e.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}})))),ct=ut,dt=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:s.forwardRef(((e,n)=>{const{asChild:r,...i}=e,o=r?P:t;return s.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(ht),s.createElement(o,(0,T.Z)({},i,{ref:n}))}))})),{}),ht="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",ft=s.forwardRef(((e,t)=>{var n,r;const{containerRef:i,style:o,...a}=e,l=null!==(n=null==i?void 0:i.current)&&void 0!==n?n:null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body,[,u]=s.useState({});return I((()=>{u({})}),[]),l?N.createPortal(s.createElement(dt.div,(0,T.Z)({"data-radix-portal":""},a,{ref:t,style:l===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...o}:void 0})),l):null})),pt=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:s.forwardRef(((e,n)=>{const{asChild:r,...i}=e,o=r?P:t;return s.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(mt),s.createElement(o,(0,T.Z)({},i,{ref:n}))}))})),{}),mt="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",gt=s.forwardRef(((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return s.createElement(pt.svg,(0,T.Z)({},o,{ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:s.createElement("polygon",{points:"0,0 30,0 15,10"}))})),vt=gt,yt=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:s.forwardRef(((e,n)=>{const{asChild:r,...i}=e,o=r?P:t;return s.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(_t),s.createElement(o,(0,T.Z)({},i,{ref:n}))}))})),{}),_t="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element";function bt(e){const[t,n]=s.useState(void 0);return s.useEffect((()=>{if(e){const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,o;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,o=t.blockSize}else{const t=e.getBoundingClientRect();i=t.width,o=t.height}n({width:i,height:o})}));return t.observe(e,{box:"border-box"}),()=>{n(void 0),t.unobserve(e)}}}),[e]),t}let xt;const wt=new Map;function St(){const e=[];wt.forEach(((t,n)=>{const r=n.getBoundingClientRect();var i,o;o=r,((i=t.rect).width!==o.width||i.height!==o.height||i.top!==o.top||i.right!==o.right||i.bottom!==o.bottom||i.left!==o.left)&&(t.rect=r,e.push(t))})),e.forEach((e=>{e.callbacks.forEach((t=>t(e.rect)))})),xt=requestAnimationFrame(St)}function Dt(e){const[t,n]=s.useState();return s.useEffect((()=>{if(e){const t=function(e,t){const n=wt.get(e);return void 0===n?(wt.set(e,{rect:{},callbacks:[t]}),1===wt.size&&(xt=requestAnimationFrame(St))):(n.callbacks.push(t),t(e.getBoundingClientRect())),()=>{const n=wt.get(e);if(void 0===n)return;const r=n.callbacks.indexOf(t);r>-1&&n.callbacks.splice(r,1),0===n.callbacks.length&&(wt.delete(e),0===wt.size&&cancelAnimationFrame(xt))}}(e,n);return()=>{n(void 0),t()}}}),[e]),t}function At(e,t=[]){let n=[];const r=()=>{const t=n.map((e=>s.createContext(e)));return function(n){const r=(null==n?void 0:n[e])||t;return s.useMemo((()=>({[`__scope${e}`]:{...n,[e]:r}})),[n,r])}};return r.scopeName=e,[function(t,r){const i=s.createContext(r),o=n.length;function a(t){const{scope:n,children:r,...a}=t,l=(null==n?void 0:n[e][o])||i,u=s.useMemo((()=>a),Object.values(a));return s.createElement(l.Provider,{value:u},r)}return n=[...n,r],a.displayName=t+"Provider",[a,function(n,a){const l=(null==a?void 0:a[e][o])||i,u=s.useContext(l);if(u)return u;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Et(r,...t)]}function Et(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const r=n.reduce(((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]})),{});return s.useMemo((()=>({[`__scope${t.scopeName}`]:r})),[r])}};return n.scopeName=t.scopeName,n}function Mt(e,t,n){const r=e["x"===n?"left":"top"],i="x"===n?"width":"height",o=e[i],a=t[i];return{before:r-a,start:r,center:r+(o-a)/2,end:r+o-a,after:r+o}}function Ct(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(e.x+window.scrollX)}px, ${Math.round(e.y+window.scrollY)}px, 0)`}}function Tt(e,t,n,r,i){const o="top"===t||"bottom"===t,a=i?i.width:0,s=i?i.height:0,l=a/2+r;let u="",c="";return o?(u={start:`${l}px`,center:"center",end:e.width-l+"px"}[n],c="top"===t?`${e.height+s}px`:-s+"px"):(u="left"===t?`${e.width+s}px`:-s+"px",c={start:`${l}px`,center:"center",end:e.height-l+"px"}[n]),`${u} ${c}`}const Pt={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},Rt={position:"absolute",opacity:0};function kt({popperSize:e,arrowSize:t,arrowOffset:n,side:r,align:i}){const o=(e.width-t.width)/2,a=(e.height-t.width)/2,s={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(t.width,t.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${s}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:Ot(r,i)};return"top"!==r&&"bottom"!==r||("start"===i&&(u.left=`${n}px`),"center"===i&&(u.left=`${o}px`),"end"===i&&(u.right=`${n}px`)),"left"!==r&&"right"!==r||("start"===i&&(u.top=`${n}px`),"center"===i&&(u.top=`${a}px`),"end"===i&&(u.bottom=`${n}px`)),u}function Ot(e,t){return("top"!==e&&"right"!==e||"end"!==t)&&("bottom"!==e&&"left"!==e||"end"===t)?"ltr":"rtl"}function Lt(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function Ft(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}const[It,Nt]=At("Popper"),[Bt,jt]=It("Popper"),zt=s.forwardRef(((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=jt("PopperAnchor",n),a=s.useRef(null),l=C(t,a);return s.useEffect((()=>{o.onAnchorChange((null==r?void 0:r.current)||a.current)})),r?null:s.createElement(yt.div,(0,T.Z)({},i,{ref:l}))})),[Ut,Ht]=It("PopperContent"),Gt=s.forwardRef(((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i,align:o="center",alignOffset:a,collisionTolerance:l,avoidCollisions:u=!0,...c}=e,d=jt("PopperContent",n),[h,f]=s.useState(),p=Dt(d.anchor),[m,g]=s.useState(null),v=bt(m),[y,_]=s.useState(null),b=bt(y),x=C(t,(e=>g(e))),w=function(){const[e,t]=s.useState(void 0);return s.useEffect((()=>{let e;function n(){t({width:window.innerWidth,height:window.innerHeight})}function r(){window.clearTimeout(e),e=window.setTimeout(n,100)}return n(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)}),[]),e}(),S=w?DOMRect.fromRect({...w,x:0,y:0}):void 0,{popperStyles:D,arrowStyles:A,placedSide:E,placedAlign:M}=function({anchorRect:e,popperSize:t,arrowSize:n,arrowOffset:r=0,side:i,sideOffset:o=0,align:a,alignOffset:s=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:c=0}){if(!e||!t||!u)return{popperStyles:Pt,arrowStyles:Rt};const d=function(e,t,n=0,r=0,i){const o=i?i.height:0,a=Mt(t,e,"x"),s=Mt(t,e,"y"),l=s.before-n-o,u=s.after+n+o,c=a.before-n-o,d=a.after+n+o;return{top:{start:{x:a.start+r,y:l},center:{x:a.center,y:l},end:{x:a.end-r,y:l}},right:{start:{x:d,y:s.start+r},center:{x:d,y:s.center},end:{x:d,y:s.end-r}},bottom:{start:{x:a.start+r,y:u},center:{x:a.center,y:u},end:{x:a.end-r,y:u}},left:{start:{x:c,y:s.start+r},center:{x:c,y:s.center},end:{x:c,y:s.end-r}}}}(t,e,o,s,n),h=d[i][a];if(!1===l){const e=Ct(h);let o=Rt;return n&&(o=kt({popperSize:t,arrowSize:n,arrowOffset:r,side:i,align:a})),{popperStyles:{...e,"--radix-popper-transform-origin":Tt(t,i,a,r,n)},arrowStyles:o,placedSide:i,placedAlign:a}}const f=DOMRect.fromRect({...t,...h}),p=(m=u,g=c,DOMRect.fromRect({width:m.width-2*g,height:m.height-2*g,x:m.left+g,y:m.top+g}));var m,g;const v=Ft(f,p),y=d[Lt(i)][a],_=function(e,t,n){const r=Lt(e);return t[e]&&!n[r]?r:e}(i,v,Ft(DOMRect.fromRect({...t,...y}),p)),b=function(e,t,n,r,i){const o="top"===n||"bottom"===n,a=o?"left":"top",s=o?"right":"bottom",l=o?"width":"height",u=t[l]>e[l];return"start"!==r&&"center"!==r||!(i[a]&&u||i[s]&&!u)?"end"!==r&&"center"!==r||!(i[s]&&u||i[a]&&!u)?r:"start":"end"}(t,e,i,a,v),x=Ct(d[_][b]);let w=Rt;return n&&(w=kt({popperSize:t,arrowSize:n,arrowOffset:r,side:_,align:b})),{popperStyles:{...x,"--radix-popper-transform-origin":Tt(t,_,b,r,n)},arrowStyles:w,placedSide:_,placedAlign:b}}({anchorRect:p,popperSize:v,arrowSize:b,arrowOffset:h,side:r,sideOffset:i,align:o,alignOffset:a,shouldAvoidCollisions:u,collisionBoundariesRect:S,collisionTolerance:l}),P=void 0!==E;return s.createElement("div",{style:D,"data-radix-popper-content-wrapper":""},s.createElement(Ut,{scope:n,arrowStyles:A,onArrowChange:_,onArrowOffsetChange:f},s.createElement(yt.div,(0,T.Z)({"data-side":E,"data-align":M},c,{style:{...c.style,animation:P?void 0:"none"},ref:x}))))})),Vt=s.forwardRef((function(e,t){const{__scopePopper:n,offset:r,...i}=e,o=Ht("PopperArrow",n),{onArrowOffsetChange:a}=o;return s.useEffect((()=>a(r)),[a,r]),s.createElement("span",{style:{...o.arrowStyles,pointerEvents:"none"}},s.createElement("span",{ref:o.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},s.createElement(vt,(0,T.Z)({},i,{ref:t,style:{...i.style,display:"block"}}))))})),Wt=e=>{const{__scopePopper:t,children:n}=e,[r,i]=s.useState(null);return s.createElement(Bt,{scope:t,anchor:r,onAnchorChange:i},n)},Zt=zt,$t=Gt,qt=Vt,Yt=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=s.useState(),r=s.useRef({}),i=s.useRef(e),o=s.useRef("none"),a=e?"mounted":"unmounted",[l,u]=function(e,t){return s.useReducer(((e,n)=>{const r=t[e][n];return null!=r?r:e}),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect((()=>{const e=Kt(r.current);o.current="mounted"===l?e:"none"}),[l]),I((()=>{const t=r.current,n=i.current;if(n!==e){const r=o.current,a=Kt(t);if(e)u("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))u("UNMOUNT");else{const e=r!==a;u(n&&e?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,u]),I((()=>{if(t){const e=e=>{const n=Kt(r.current).includes(e.animationName);e.target===t&&n&&u("ANIMATION_END")},n=e=>{e.target===t&&(o.current=Kt(r.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}}),[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:s.useCallback((e=>{e&&(r.current=getComputedStyle(e)),n(e)}),[])}}(t),i="function"==typeof n?n({present:r.isPresent}):s.Children.only(n),o=C(r.ref,i.ref);return"function"==typeof n||r.isPresent?s.cloneElement(i,{ref:o}):null};function Kt(e){return(null==e?void 0:e.animationName)||"none"}function Xt(e){const t=s.useRef(e);return s.useEffect((()=>{t.current=e}),[e]),t.current}function Qt(e){const t=s.useRef(e);return s.useEffect((()=>{t.current=e})),s.useMemo((()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)}),[])}function Jt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}Yt.displayName="Presence";const[en,tn]=At("Tooltip",[Nt]),nn=Nt(),rn=700,[on,an]=en("TooltipProvider",{isOpenDelayed:!0,delayDuration:rn,onOpen:()=>{},onClose:()=>{}}),[sn,ln]=en("Tooltip"),un=s.forwardRef(((e,t)=>{const{__scopeTooltip:n,...r}=e,i=ln("TooltipTrigger",n),o=nn(n),a=C(t,i.onTriggerChange),l=s.useRef(!1),u=s.useCallback((()=>l.current=!1),[]);return s.useEffect((()=>()=>document.removeEventListener("mouseup",u)),[u]),s.createElement(Zt,(0,T.Z)({asChild:!0},o),s.createElement(dt.button,(0,T.Z)({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:a,onMouseEnter:Jt(e.onMouseEnter,i.onTriggerEnter),onMouseLeave:Jt(e.onMouseLeave,i.onClose),onMouseDown:Jt(e.onMouseDown,(()=>{i.onClose(),l.current=!0,document.addEventListener("mouseup",u,{once:!0})})),onFocus:Jt(e.onFocus,(()=>{l.current||i.onOpen()})),onBlur:Jt(e.onBlur,i.onClose),onClick:Jt(e.onClick,i.onClose)})))})),cn=s.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,i=ln("TooltipContent",e.__scopeTooltip);return s.createElement(Yt,{present:n||i.open},s.createElement(dn,(0,T.Z)({ref:t},r)))})),dn=s.forwardRef(((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,portalled:o=!0,...a}=e,l=ln("TooltipContent",n),u=nn(n),c=o?ft:s.Fragment,{onClose:d}=l;return function(e){const t=Qt(e);s.useEffect((()=>{const e=e=>{"Escape"===e.key&&t(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[t])}((()=>d())),s.useEffect((()=>(document.addEventListener("tooltip.open",d),()=>document.removeEventListener("tooltip.open",d))),[d]),s.createElement(c,null,s.createElement(fn,{__scopeTooltip:n}),s.createElement($t,(0,T.Z)({"data-state":l.stateAttribute},u,a,{ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),s.createElement(k,null,r),s.createElement(ct,{id:l.contentId,role:"tooltip"},i||r)))})),hn=s.forwardRef(((e,t)=>{const{__scopeTooltip:n,...r}=e,i=nn(n);return s.createElement(qt,(0,T.Z)({},i,r,{ref:t}))}));function fn(e){const{__scopeTooltip:t}=e,n=ln("CheckTriggerMoved",t),r=Dt(n.trigger),i=null==r?void 0:r.left,o=Xt(i),a=null==r?void 0:r.top,l=Xt(a),u=n.onClose;return s.useEffect((()=>{(void 0!==o&&o!==i||void 0!==l&&l!==a)&&u()}),[u,o,l,i,a]),null}const pn=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,delayDuration:a}=e,l=an("Tooltip",t),u=nn(t),[c,d]=s.useState(null),h=function(e){const[t,n]=s.useState(ot());return I((()=>{e||n((e=>null!=e?e:String(at++)))}),[e]),e||(t?`radix-${t}`:"")}(),f=s.useRef(0),p=null!=a?a:l.delayDuration,m=s.useRef(!1),{onOpen:g,onClose:v}=l,[y=!1,_]=function({prop:e,defaultProp:t,onChange:n=(()=>{})}){const[r,i]=function({defaultProp:e,onChange:t}){const n=s.useState(e),[r]=n,i=s.useRef(r),o=Qt(t);return s.useEffect((()=>{i.current!==r&&(o(r),i.current=r)}),[r,i,o]),n}({defaultProp:t,onChange:n}),o=void 0!==e,a=o?e:r,l=Qt(n);return[a,s.useCallback((t=>{if(o){const n=t,r="function"==typeof t?n(e):t;r!==e&&l(r)}else i(t)}),[o,e,i,l])]}({prop:r,defaultProp:i,onChange:e=>{e&&(document.dispatchEvent(new CustomEvent("tooltip.open")),g()),null==o||o(e)}}),b=s.useMemo((()=>y?m.current?"delayed-open":"instant-open":"closed"),[y]),x=s.useCallback((()=>{window.clearTimeout(f.current),m.current=!1,_(!0)}),[_]),w=s.useCallback((()=>{window.clearTimeout(f.current),f.current=window.setTimeout((()=>{m.current=!0,_(!0)}),p)}),[p,_]);return s.useEffect((()=>()=>window.clearTimeout(f.current)),[]),s.createElement(Wt,u,s.createElement(sn,{scope:t,contentId:h,open:y,stateAttribute:b,trigger:c,onTriggerChange:d,onTriggerEnter:s.useCallback((()=>{l.isOpenDelayed?w():x()}),[l.isOpenDelayed,w,x]),onOpen:s.useCallback(x,[x]),onClose:s.useCallback((()=>{window.clearTimeout(f.current),_(!1),v()}),[_,v])},n))},mn=un,gn=cn,vn=hn;function yn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}let _n;!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(_n||(_n={}));const bn={[_n.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[_n.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[_n.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[_n.DUPLICATE_KEYS]:(e,t,n)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[_n.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[_n.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[_n.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[_n.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[_n.PATH_DOESNT_EXIST]:e=>[`Error accessing the value at path \`${e}\``],[_n.INPUT_TYPE_OVERRIDE]:(e,t,n)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${n}\`.`],[_n.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function xn(e,t,...n){const[r,...i]=bn[t](...n);console[e]("LEVA: "+r,...i)}const wn=xn.bind(null,"warn"),Sn=xn.bind(null,"log"),Dn=["value"],An=["schema"],En=["value"],Mn=[],Cn={};function Tn(e){let{value:t}=e,n=yn(e,Dn);for(let r of Mn){const e=r(t,n);if(e)return e}}function Pn(e,t){let{schema:n}=t,r=yn(t,An);e in Cn?wn(_n.ALREADY_REGISTERED_TYPE,e):(Mn.push(((t,r)=>n(t,r)&&e)),Cn[e]=r)}function Rn(e,t,n,r){const{normalize:i}=Cn[e];if(i)return i(t,n,r);if("object"!==typeof t||!("value"in t))return{value:t};const{value:o}=t;return{value:o,settings:yn(t,En)}}function kn(e,t,n){const{format:r}=Cn[e];return r?r(t,n):t}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const In=(e,t,n)=>e>n?n:e<t?t:e,Nn=e=>{if(""===e||"number"===typeof e)return e;try{const t=qn(e);if(!isNaN(t))return t}catch(t){}return parseFloat(e)},Bn=Math.log(10);function jn(e){let t=Math.abs(+String(e).replace(".",""));if(0===t)return.01;for(;0!==t&&t%10===0;)t/=10;const n=Math.floor(Math.log(t)/Bn)+1,r=Math.floor(Math.log10(Math.abs(e))),i=Math.pow(10,r-n);return Math.max(i,.001)}const zn=(e,t,n)=>{if(n===t)return 0;return(In(e,t,n)-t)/(n-t)},Un=(e,t,n)=>e*(n-t)+t,Hn=/\(([0-9+\-*/^ .]+)\)/,Gn=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Vn=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Wn=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Zn=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,$n=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function qn(e){if(isNaN(Number(e))){if(Hn.test(e)){const t=e.replace(Hn,((e,t)=>String(qn(t))));return qn(t)}if(Gn.test(e)){return qn(e.replace(Gn,((e,t,n)=>String(Math.pow(Number(t),Number(n))))))}if(Vn.test(e)){const t=e.replace(Vn,((e,t,n)=>String(Number(t)*Number(n))));return qn(t)}if(Wn.test(e)){const t=e.replace(Wn,((e,t,n)=>{if(0!=n)return String(Number(t)/Number(n));throw new Error("Division by zero")}));return qn(t)}if(Zn.test(e)){const t=e.replace(Zn,((e,t,n)=>String(Number(t)+Number(n))));return qn(t)}if($n.test(e)){const t=e.replace($n,((e,t,n)=>String(Number(t)-Number(n))));return qn(t)}return Number(e)}return Number(e)}function Yn(e){return"[object Object]"===Object.prototype.toString.call(e)}let Kn,Xn;!function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"}(Kn||(Kn={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(Xn||(Xn={}));const Qn=["type","__customInput"],Jn=["render","label","optional","disabled","hint","onChange","onEditStart","onEditEnd","transient"],er=["type"];function tr(e,t,n={},r){var i,o;if("object"!==typeof e||Array.isArray(e))return{type:r,input:e,options:Fn({key:t,label:t,optional:!1,disabled:!1},n)};if("__customInput"in e){const{type:n,__customInput:r}=e;return tr(r,t,yn(e,Qn),n)}const{render:a,label:s,optional:l,disabled:u,hint:c,onChange:d,onEditStart:h,onEditEnd:f,transient:p}=e,m=yn(e,Jn),g=Fn({render:a,key:t,label:null!==s&&void 0!==s?s:t,hint:c,transient:null!==p&&void 0!==p?p:!!d,onEditStart:h,onEditEnd:f,disabled:u,optional:l},n);let v,{type:y}=m,_=yn(m,er);return y=null!==r&&void 0!==r?r:y,y in Kn?{type:y,input:_,options:g}:(r&&Yn(_)&&"value"in _?v=_.value:v=Yn(b=_)&&0===Object.keys(b).length?void 0:_,{type:y,input:v,options:Fn(Fn({},g),{},{onChange:d,optional:null!==(i=g.optional)&&void 0!==i&&i,disabled:null!==(o=g.disabled)&&void 0!==o&&o})});var b}function nr(e,t,n,r,i){const{value:o,type:a,settings:s}=e;e.value=ir({type:a,value:o,settings:s},t,n,r),e.fromPanel=i}const rr=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function ir({type:e,value:t,settings:n},r,i,o){const a="SELECT"!==e&&"function"===typeof r?r(t):r;let s;try{s=function(e,t,n,r,i,o){const{sanitize:a}=Cn[e];return a?a(t,n,r,i,o):t}(e,a,n,t,i,o)}catch(l){throw new rr(`The value \`${r}\` did not result in a correct value.`,t,l)}if(U(s,t))throw new rr(`The value \`${r}\` did not result in a value update, which remained the same: \`${t}\`.\n        You can ignore this warning if this is the intended behavior.`,t);return s}const or=(e,t,n=!1)=>{let r=0;return function(){const i=arguments,o=n&&!r,a=()=>e.apply(this,i);window.clearTimeout(r),r=window.setTimeout(a,t),o&&a()}},ar=e=>e.shiftKey?5:e.altKey?.2:1,sr=["value"],lr=["min","max"],ur=(e,{min:t=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(e);if(""===e||isNaN(i))throw Error("Invalid number");const o=In(i,t,n);return r?o+r:o},cr=e=>{let{value:t}=e,n=yn(e,sr);const{min:r=-1/0,max:i=1/0}=n,o=yn(n,lr);let a=parseFloat(t);const s="string"===typeof t?t.substring((""+a).length):void 0;a=In(a,r,i);let l=n.step;l||(Number.isFinite(r)?l=Number.isFinite(i)?+(Math.abs(i-r)/100).toPrecision(1):+(Math.abs(a-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-a)/100).toPrecision(1)));const u=l?10*jn(l):jn(a);l=l||u/10;return{value:s?a+s:a,settings:Fn({initialValue:a,step:l,pad:Math.round(In(Math.log10(1/u),0,2)),min:r,max:i,suffix:s},o)}},dr=(e,{step:t,initialValue:n})=>n+Math.round((e-n)/t)*t;var hr=Object.freeze({__proto__:null,schema:e=>{if("number"===typeof e)return!0;if("string"===typeof e){const t=parseFloat(e);if(isNaN(t))return!1;return e.substring((""+t).length).trim().length<4}return!1},sanitize:ur,format:(e,{pad:t=0,suffix:n})=>{const r=parseFloat(e).toFixed(t);return n?r+n:r},normalize:cr,sanitizeStep:dr});function fr(){return fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fr.apply(this,arguments)}const pr=(0,s.createContext)({});function mr(){return(0,s.useContext)(pr)}const gr=(0,s.createContext)(null),vr=(0,s.createContext)(null),yr=(0,s.createContext)(null);function _r(){return(0,s.useContext)(vr)}function br(e,t){const[n,r]=e.split(" "),i={};return"none"!==n&&(i.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${"default"!==n&&n||t.borderColor}`),r&&(i.backgroundColor=r),i}const xr={$inputStyle:()=>e=>br(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>br(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>br(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>br(e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:wr,css:Sr,createTheme:Dr,globalCss:Ar,keyframes:Er}=rt({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:Fn(Fn({},xr),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":xr.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":xr.$focusStyle()(e)}),$hover:e=>({"&:hover":xr.$hoverStyle()(e)}),$active:e=>({"&:active":xr.$activeStyle()(e)})})}),Mr=Ar({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Cr(e,t){const{theme:n}=(0,s.useContext)(gr);if(!(e in n)||!(t in n[e]))return wn(_n.THEME_ERROR,e,t),"";let r=t;for(;;){let t=n[e][r];if("string"!==typeof t||"$"!==t.charAt(0))return t;r=t.substr(1)}}const Tr=wr("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Pr=wr("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Tr}`]:{paddingLeft:0}}),Rr=wr(Pr,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),kr=wr("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Or=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Lr=["onUpdate"];function Fr(e){let{innerLabel:t,value:n,onUpdate:r,onChange:i,onKeyDown:o,type:a,id:l,inputType:u="text",rows:c=0}=e,d=yn(e,Or);const{id:h,emitOnEditStart:f,emitOnEditEnd:p,disabled:m}=mr(),g=l||h,v=(0,s.useRef)(null),y=c>0,_=y?"textarea":"input",b=(0,s.useCallback)((e=>t=>{const n=t.currentTarget.value;e(n)}),[]);s.useEffect((()=>{const e=v.current,t=b((e=>{r(e),p()}));return null===e||void 0===e||e.addEventListener("blur",t),()=>null===e||void 0===e?void 0:e.removeEventListener("blur",t)}),[b,r,p]);const x=(0,s.useCallback)((e=>{"Enter"===e.key&&b(r)(e)}),[b,r]),w=Object.assign({as:_},y?{rows:c}:{},d);return s.createElement(kr,{textArea:y},t&&"string"===typeof t?s.createElement(Pr,null,t):t,s.createElement(Tr,fr({levaType:a,ref:v,id:g,type:u,autoComplete:"off",spellCheck:"false",value:n,onChange:b(i),onFocus:()=>f(),onKeyPress:x,onKeyDown:o,disabled:m},w)))}function Ir(e){let{onUpdate:t}=e,n=yn(e,Lr);const r=(0,s.useCallback)((e=>t(Nn(e))),[t]),i=(0,s.useCallback)((e=>{const n="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(n){e.preventDefault();const r=e.altKey?.1:e.shiftKey?10:1;t((e=>parseFloat(e)+n*r))}}),[t]);return s.createElement(Fr,fr({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const Nr=wr("div",{}),Br=wr("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),jr=wr("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Br}::after`]:{opacity:.6},[`${Nr}:hover > & + ${Br}::after`]:{opacity:.6},[`${Nr}:hover > & > svg`]:{opacity:1}}),zr=wr("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Nr}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Ur=wr("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${zr} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),Hr=wr(Ur,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Gr=wr("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Vr=wr("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Wr=wr("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Zr=wr("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Wr}`]:{pointerEvents:"auto"}}}}}),$r=wr("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),qr=wr("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Yr=wr(vn,{fill:"$toolTipBackground"});function Kr({children:e}){const{className:t}=(0,s.useContext)(gr);return s.createElement(j,{className:t},e)}const Xr=["align"];function Qr(){const{id:e,disable:t,disabled:n}=mr();return s.createElement(s.Fragment,null,s.createElement(Vr,{id:e+"__disable",type:"checkbox",checked:!n,onChange:()=>t(!n)}),s.createElement("label",{htmlFor:e+"__disable"}))}function Jr(e){const{id:t,optional:n,hint:r}=mr(),i=e.htmlFor||(t?{htmlFor:t}:null),o=r||"string"!==typeof e.children?null:{title:e.children};return s.createElement(s.Fragment,null,n&&s.createElement(Qr,null),void 0!==r?s.createElement(pn,null,s.createElement(mn,{asChild:!0},s.createElement(Wr,fr({},i,e))),s.createElement(gn,{side:"top",sideOffset:2},s.createElement(qr,null,r,s.createElement(Yr,null)))):s.createElement(Wr,fr({},i,o,e)))}function ei(e){let{align:t}=e,n=yn(e,Xr);const{value:r,label:i,key:o,disabled:a}=mr(),{hideCopyButton:l}=(0,s.useContext)(yr),u=!l&&void 0!==o,[c,d]=(0,s.useState)(!1);return s.createElement(Gr,{align:t,onPointerLeave:()=>d(!1)},s.createElement(Jr,n),u&&!a&&s.createElement("div",{title:`Click to copy ${"string"===typeof i?i:o} value`},c?s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},s.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),s.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):s.createElement("svg",{onClick:async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[o]:null!==r&&void 0!==r?r:""})),d(!0)}catch(e){wn(_n.CLIPBOARD_ERROR,{[o]:r})}},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},s.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),s.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const ti=["toggled"],ni=wr("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function ri(e){let{toggled:t}=e,n=yn(e,ti);return s.createElement(ni,fr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},n),s.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const ii=["input"];function oi(e){let{input:t}=e,n=yn(e,ii);return t?s.createElement(Hr,n):s.createElement(Ur,n)}function ai({value:e,type:t,settings:n,setValue:r}){const[i,o]=(0,s.useState)(kn(t,e,n)),a=(0,s.useRef)(e),l=(0,s.useRef)(n);l.current=n;const u=(0,s.useCallback)((e=>o(kn(t,e,l.current))),[t]),c=(0,s.useCallback)((e=>{try{r(e)}catch(t){const{type:e,previousValue:n}=t;if("LEVA_ERROR"!==e)throw t;u(n)}}),[u,r]);return(0,s.useEffect)((()=>{U(e,a.current)||u(e),a.current=e}),[e,u]),{displayValue:i,onChange:o,onUpdate:c}}function si(e,t){const{emitOnEditStart:n,emitOnEditEnd:r}=mr();return(0,it.useDrag)((t=>{t.first&&(document.body.classList.add("leva__panel__dragged"),null===n||void 0===n||n());const i=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null===r||void 0===r||r()),i}),t)}function li(){const e=(0,s.useRef)(null),t=(0,s.useRef)({x:0,y:0}),n=(0,s.useCallback)((n=>{Object.assign(t.current,n),e.current&&(e.current.style.transform=`translate3d(${t.current.x}px, ${t.current.y}px, 0)`)}),[]);return[e,n]}const ui=["__refCount"],ci=(e,t)=>{if(!e[t])return null;return yn(e[t],ui)};const di=wr("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),hi=wr("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),fi=wr("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),pi=wr("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),mi=wr("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function gi({value:e,min:t,max:n,onDrag:r,step:i,initialValue:o}){const a=(0,s.useRef)(null),l=(0,s.useRef)(null),u=(0,s.useRef)(0),c=Cr("sizes","scrubberWidth"),d=si((({event:s,first:d,xy:[h],movement:[f],memo:p})=>{if(d){const{width:r,left:i}=a.current.getBoundingClientRect();u.current=r-parseFloat(c);p=(null===s||void 0===s?void 0:s.target)===l.current?e:Un((h-i)/r,t,n)}const m=p+Un(f/u.current,0,n-t);return r(dr(m,{step:i,initialValue:o})),p})),h=zn(e,t,n);return s.createElement(pi,fr({ref:a},d()),s.createElement(hi,null,s.createElement(mi,{style:{left:0,right:100*(1-h)+"%"}})),s.createElement(fi,{ref:l,style:{left:`calc(${h} * (100% - ${c}))`}}))}const vi=s.memo((({label:e,onUpdate:t,step:n,innerLabelTrim:r})=>{const[i,o]=(0,s.useState)(!1),a=si((({active:e,delta:[r],event:i,memo:a=0})=>(o(e),a+=r/2,Math.abs(a)>=1&&(t((e=>parseFloat(e)+Math.floor(a)*n*ar(i))),a=0),a)));return s.createElement(Rr,fr({dragging:i,title:e.length>1?e:""},a()),e.slice(0,r))}));function yi({label:e,id:t,displayValue:n,onUpdate:r,onChange:i,settings:o,innerLabelTrim:a=1}){const l=a>0&&s.createElement(vi,{label:e,step:o.step,onUpdate:r,innerLabelTrim:a});return s.createElement(Ir,{id:t,value:String(n),onUpdate:r,onChange:i,innerLabel:l})}const{sanitizeStep:_i}=hr;var bi=Fn({component:function(){const e=mr(),{label:t,value:n,onUpdate:r,settings:i,id:o}=e,{min:a,max:l}=i,u=l!==1/0&&a!==-1/0;return s.createElement(oi,{input:!0},s.createElement(ei,null,t),s.createElement(di,{hasRange:u},u&&s.createElement(gi,fr({value:parseFloat(n),onDrag:r},i)),s.createElement(yi,fr({},e,{id:o,label:"value",innerLabelTrim:u?0:1}))))}},yn(hr,["sanitizeStep"]));var xi=Object.freeze({__proto__:null,schema:(e,t)=>le().schema({options:le().passesAnyOf(le().object(),le().array())}).test(t),sanitize:(e,{values:t})=>{if(t.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},format:(e,{values:t})=>t.indexOf(e),normalize:e=>{let t,n,{value:r,options:i}=e;return Array.isArray(i)?(n=i,t=i.map((e=>String(e)))):(n=Object.values(i),t=Object.keys(i)),"value"in e?n.includes(r)||(t.unshift(String(r)),n.unshift(r)):r=n[0],Object.values(i).includes(r)||(i[String(r)]=r),{value:r,settings:{keys:t,values:n}}}});const wi=wr("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Si=wr("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Di=wr("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Si}:focus + &`]:{$focusStyle:""},[`${Si}:hover + &`]:{$hoverStyle:""}});function Ai({displayValue:e,value:t,onUpdate:n,id:r,settings:i,disabled:o}){const{keys:a,values:l}=i,u=(0,s.useRef)();return t===l[e]&&(u.current=a[e]),s.createElement(wi,null,s.createElement(Si,{id:r,value:e,onChange:e=>n(l[Number(e.currentTarget.value)]),disabled:o},a.map(((e,t)=>s.createElement("option",{key:e,value:t},e)))),s.createElement(Di,null,u.current),s.createElement(ri,{toggled:!0}))}var Ei=Fn({component:function(){const{label:e,value:t,displayValue:n,onUpdate:r,id:i,disabled:o,settings:a}=mr();return s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(Ai,{id:i,value:t,displayValue:n,onUpdate:r,settings:a,disabled:o}))}},xi);var Mi=Object.freeze({__proto__:null,schema:e=>le().string().test(e),sanitize:e=>{if("string"!==typeof e)throw Error("Invalid string");return e},normalize:({value:e,editable:t=!0,rows:n=!1})=>({value:e,settings:{editable:t,rows:"number"===typeof n?n:n?5:0}})});const Ci=["displayValue","onUpdate","onChange","editable"],Ti=wr("div",{whiteSpace:"pre-wrap"});function Pi(e){let{displayValue:t,onUpdate:n,onChange:r,editable:i=!0}=e,o=yn(e,Ci);return i?s.createElement(Fr,fr({value:t,onUpdate:n,onChange:r},o)):s.createElement(Ti,null,t)}var Ri=Fn({component:function(){const{label:e,settings:t,displayValue:n,onUpdate:r,onChange:i}=mr();return s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(Pi,fr({displayValue:n,onUpdate:r,onChange:i},t)))}},Mi);var ki=Object.freeze({__proto__:null,schema:e=>le().boolean().test(e),sanitize:e=>{if("boolean"!==typeof e)throw Error("Invalid boolean");return e}});const Oi=wr("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Li({value:e,onUpdate:t,id:n,disabled:r}){return s.createElement(Oi,null,s.createElement("input",{id:n,type:"checkbox",checked:e,onChange:e=>t(e.currentTarget.checked),disabled:r}),s.createElement("label",{htmlFor:n},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var Fi=Fn({component:function(){const{label:e,value:t,onUpdate:n,disabled:r,id:i}=mr();return s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(Li,{value:t,onUpdate:n,id:i,disabled:r}))}},ki);const Ii=["locked"];function Ni({value:e,id:t,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:o}){const a=(0,s.useRef)(e[n]);a.current=e[n];const l=(0,s.useCallback)((e=>i({[n]:ir({type:"NUMBER",value:a.current,settings:r},e)})),[i,r,n]),u=ai({type:"NUMBER",value:e[n],settings:r,setValue:l});return s.createElement(yi,{id:t,label:n,value:e[n],displayValue:u.displayValue,onUpdate:u.onUpdate,onChange:u.onChange,settings:r,innerLabelTrim:o})}const Bi=wr("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function ji(e){let{locked:t}=e,n=yn(e,Ii);return s.createElement("svg",fr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t?s.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):s.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function zi({value:e,onUpdate:t,settings:n,innerLabelTrim:r}){const{id:i,setSettings:o}=mr(),{lock:a,locked:l}=n;return s.createElement(Bi,{withLock:a},a&&s.createElement(ji,{locked:l,onClick:()=>o({locked:!l})}),Object.keys(e).map(((o,a)=>s.createElement(Ni,{id:0===a?i:`${i}.${o}`,key:o,valueKey:o,value:e,settings:n[o],onUpdate:t,innerLabelTrim:r}))))}const Ui=(e,t)=>{const n={};let r=0,i=1/0;Object.entries(e).forEach((([e,o])=>{n[e]=cr(Fn({value:o},t[e])).settings,r=Math.max(r,n[e].step),i=Math.min(i,n[e].pad)}));for(let o in n){const{step:e,min:a,max:s}=t[o]||{};isFinite(e)||isFinite(a)&&isFinite(s)||(n[o].step=r,n[o].pad=i)}return n},Hi=["lock"],Gi=["value"];function Vi(e){const t=le().array().length(e).every.number();return n=>t.test(n)||(t=>{if(!t||"object"!==typeof t)return!1;const n=Object.values(t);return n.length===e&&n.every((e=>isFinite(e)))})(n)}function Wi(e,t,n){return function(e){return Array.isArray(e)?"array":"object"}(e)===t?e:"array"===t?Object.values(e):function(e,t){return e.reduce(((e,n,r)=>Object.assign(e,{[t[r]]:n})),{})}(e,n)}function Zi(e){return{schema:Vi(e.length),normalize:t=>{let{value:n}=t;return function(e,t,n=[]){const{lock:r=!1}=t,i=yn(t,Hi),o=Array.isArray(e)?"array":"object",a="object"===o?Object.keys(e):n,s=Wi(e,"object",a),l=(e=>!!e&&("step"in e||"min"in e||"max"in e))(i)?a.reduce(((e,t)=>Object.assign(e,{[t]:i})),{}):i;return{value:"array"===o?e:s,settings:Fn(Fn({},Ui(s,l)),{},{format:o,keys:a,lock:r,locked:!1})}}(n,yn(t,Gi),e)},format:(e,t)=>((e,t)=>Wi(e,"object",t.keys))(e,t),sanitize:(e,t,n)=>((e,t,n)=>{const r=Wi(e,"object",t.keys);for(let a in r)r[a]=ur(r[a],t[a]);const i=Object.keys(r);let o={};if(i.length===t.keys.length)o=r;else{const e=Wi(n,"object",t.keys);if(1===i.length&&t.locked){const t=i[0],n=r[t],a=e[t],s=0!==a?n/a:1;for(let r in e)r===t?o[t]=n:o[r]=e[r]*s}else o=Fn(Fn({},e),r)}return Wi(o,t.format,t.keys)})(e,t,n)}}var $i={grad:.9,turn:360,rad:360/(2*Math.PI)},qi=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Yi=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Ki=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Xi=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Qi=function(e){return{r:Ki(e.r,0,255),g:Ki(e.g,0,255),b:Ki(e.b,0,255),a:Ki(e.a)}},Ji=function(e){return{r:Yi(e.r),g:Yi(e.g),b:Yi(e.b),a:Yi(e.a,3)}},eo=/^#([0-9a-f]{3,8})$/i,to=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},no=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a?o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a:0;return{h:60*(s<0?s+6:s),s:o?a/o*100:0,v:o/255*100,a:i}},ro=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),a=r*(1-n),s=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),u=o%6;return{r:255*[r,s,a,a,l,r][u],g:255*[l,r,r,s,a,a][u],b:255*[a,a,l,r,r,s][u],a:i}},io=function(e){return{h:Xi(e.h),s:Ki(e.s,0,100),l:Ki(e.l,0,100),a:Ki(e.a)}},oo=function(e){return{h:Yi(e.h),s:Yi(e.s),l:Yi(e.l),a:Yi(e.a,3)}},ao=function(e){return ro((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},so=function(e){return{h:(t=no(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},lo=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uo=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,co=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ho=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fo={string:[[function(e){var t=eo.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Yi(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Yi(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=co.exec(e)||ho.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Qi({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=lo.exec(e)||uo.exec(e);if(!t)return null;var n,r,i=io({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*($i[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return ao(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=void 0===i?1:i;return qi(t)&&qi(n)&&qi(r)?Qi({r:Number(t),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,o=void 0===i?1:i;if(!qi(t)||!qi(n)||!qi(r))return null;var a=io({h:Number(t),s:Number(n),l:Number(r),a:Number(o)});return ao(a)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,o=void 0===i?1:i;if(!qi(t)||!qi(n)||!qi(r))return null;var a=function(e){return{h:Xi(e.h),s:Ki(e.s,0,100),v:Ki(e.v,0,100),a:Ki(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(o)});return ro(a)},"hsv"]]},po=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},mo=function(e){return"string"==typeof e?po(e.trim(),fo.string):"object"==typeof e&&null!==e?po(e,fo.object):[null,void 0]},go=function(e,t){var n=so(e);return{h:n.h,s:Ki(n.s+100*t,0,100),l:n.l,a:n.a}},vo=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},yo=function(e,t){var n=so(e);return{h:n.h,s:n.s,l:Ki(n.l+100*t,0,100),a:n.a}},_o=function(){function e(e){this.parsed=mo(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Yi(vo(this.rgba),2)},e.prototype.isDark=function(){return vo(this.rgba)<.5},e.prototype.isLight=function(){return vo(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Ji(this.rgba)).r,n=e.g,r=e.b,o=(i=e.a)<1?to(Yi(255*i)):"","#"+to(t)+to(n)+to(r)+o;var e,t,n,r,i,o},e.prototype.toRgb=function(){return Ji(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Ji(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return oo(so(this.rgba))},e.prototype.toHslString=function(){return t=(e=oo(so(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=no(this.rgba),{h:Yi(e.h),s:Yi(e.s),v:Yi(e.v),a:Yi(e.a,3)};var e},e.prototype.invert=function(){return bo({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),bo(go(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),bo(go(this.rgba,-e))},e.prototype.grayscale=function(){return bo(go(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),bo(yo(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),bo(yo(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?bo({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Yi(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=so(this.rgba);return"number"==typeof e?bo({h:e,s:t.s,l:t.l,a:t.a}):Yi(t.h)},e.prototype.isEqual=function(e){return this.toHex()===bo(e).toHex()},e}(),bo=function(e){return e instanceof _o?e:new _o(e)},xo=[];function wo(){return(wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function So(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function Do(e){var t=(0,s.useRef)(e),n=(0,s.useRef)((function(e){t.current&&t.current(e)}));return t.current=e,n.current}var Ao=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},Eo=function(e){return"touches"in e},Mo=function(e){return e&&e.ownerDocument.defaultView||self},Co=function(e,t,n){var r=e.getBoundingClientRect(),i=Eo(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:Ao((i.pageX-(r.left+Mo(e).pageXOffset))/r.width),top:Ao((i.pageY-(r.top+Mo(e).pageYOffset))/r.height)}},To=function(e){!Eo(e)&&e.preventDefault()},Po=s.memo((function(e){var t=e.onMove,n=e.onKey,r=So(e,["onMove","onKey"]),i=(0,s.useRef)(null),o=Do(t),a=Do(n),l=(0,s.useRef)(null),u=(0,s.useRef)(!1),c=(0,s.useMemo)((function(){var e=function(e){To(e),(Eo(e)?e.touches.length>0:e.buttons>0)&&i.current?o(Co(i.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,o=Mo(i.current),a=n?o.addEventListener:o.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=i.current;if(r&&(To(t),!function(e,t){return t&&!Eo(e)}(t,u.current)&&r)){if(Eo(t)){u.current=!0;var a=t.changedTouches||[];a.length&&(l.current=a[0].identifier)}r.focus(),o(Co(r,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),a({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[a,o]),d=c[0],h=c[1],f=c[2];return(0,s.useEffect)((function(){return f}),[f]),s.createElement("div",wo({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))})),Ro=function(e){return e.filter(Boolean).join(" ")},ko=function(e){var t=e.color,n=e.left,r=e.top,i=void 0===r?.5:r,o=Ro(["react-colorful__pointer",e.className]);return s.createElement("div",{className:o,style:{top:100*i+"%",left:100*n+"%"}},s.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},Oo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},Lo=(Math.PI,function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:Oo(e.h),s:Oo(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:Oo(i/2),a:Oo(r,2)}}),Fo=function(e){var t=Lo(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},Io=function(e){var t=Lo(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},No=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),a=r*(1-n),s=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),u=o%6;return{r:Oo(255*[r,s,a,a,l,r][u]),g:Oo(255*[l,r,r,s,a,a][u]),b:Oo(255*[a,a,l,r,r,s][u]),a:Oo(i,2)}},Bo=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a?o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a:0;return{h:Oo(60*(s<0?s+6:s)),s:Oo(o?a/o*100:0),v:Oo(o/255*100),a:i}},jo=s.memo((function(e){var t=e.hue,n=e.onChange,r=Ro(["react-colorful__hue",e.className]);return s.createElement("div",{className:r},s.createElement(Po,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:Ao(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":Oo(t)},s.createElement(ko,{className:"react-colorful__hue-pointer",left:t/360,color:Fo({h:t,s:100,v:100,a:1})})))})),zo=s.memo((function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:Fo({h:t.h,s:100,v:100,a:1})};return s.createElement("div",{className:"react-colorful__saturation",style:r},s.createElement(Po,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:Ao(t.s+100*e.left,0,100),v:Ao(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Oo(t.s)+"%, Brightness "+Oo(t.v)+"%"},s.createElement(ko,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Fo(t)})))})),Uo=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function Ho(e,t,n){var r=Do(n),i=(0,s.useState)((function(){return e.toHsva(t)})),o=i[0],a=i[1],l=(0,s.useRef)({color:t,hsva:o});(0,s.useEffect)((function(){if(!e.equal(t,l.current.color)){var n=e.toHsva(t);l.current={hsva:n,color:t},a(n)}}),[t,e]),(0,s.useEffect)((function(){var t;Uo(o,l.current.hsva)||e.equal(t=e.fromHsva(o),l.current.color)||(l.current={hsva:o,color:t},r(t))}),[o,e,r]);var u=(0,s.useCallback)((function(e){a((function(t){return Object.assign({},t,e)}))}),[]);return[o,u]}var Go,Vo="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,Wo=new Map,Zo=function(e){Vo((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!Wo.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',Wo.set(t,r);var i=Go||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}}),[])},$o=function(e){var t=e.className,n=e.colorModel,r=e.color,i=void 0===r?n.defaultColor:r,o=e.onChange,a=So(e,["className","colorModel","color","onChange"]),l=(0,s.useRef)(null);Zo(l);var u=Ho(n,i,o),c=u[0],d=u[1],h=Ro(["react-colorful",t]);return s.createElement("div",wo({},a,{ref:l,className:h}),s.createElement(zo,{hsva:c,onChange:d}),s.createElement(jo,{hue:c.h,onChange:d,className:"react-colorful__last-control"}))},qo=function(e){var t=e.className,n=e.hsva,r=e.onChange,i={backgroundImage:"linear-gradient(90deg, "+Io(Object.assign({},n,{a:0}))+", "+Io(Object.assign({},n,{a:1}))+")"},o=Ro(["react-colorful__alpha",t]);return s.createElement("div",{className:o},s.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),s.createElement(Po,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:Ao(n.a+e.left)})},"aria-label":"Alpha","aria-valuetext":Oo(100*n.a)+"%"},s.createElement(ko,{className:"react-colorful__alpha-pointer",left:n.a,color:Io(n)})))},Yo=function(e){var t=e.className,n=e.colorModel,r=e.color,i=void 0===r?n.defaultColor:r,o=e.onChange,a=So(e,["className","colorModel","color","onChange"]),l=(0,s.useRef)(null);Zo(l);var u=Ho(n,i,o),c=u[0],d=u[1],h=Ro(["react-colorful",t]);return s.createElement("div",wo({},a,{ref:l,className:h}),s.createElement(zo,{hsva:c,onChange:d}),s.createElement(jo,{hue:c.h,onChange:d}),s.createElement(qo,{hsva:c,onChange:d,className:"react-colorful__last-control"}))},Ko={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Bo,fromHsva:No,equal:Uo},Xo=function(e){return s.createElement(Yo,wo({},e,{colorModel:Ko}))},Qo={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return Bo({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=No(e)).r,g:t.g,b:t.b};var t},equal:Uo},Jo=function(e){return s.createElement($o,wo({},e,{colorModel:Qo}))},ea=n(55162);function ta(e){let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const na="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?s.useEffect:s.useLayoutEffect;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var ra=n(34529),ia=n.n(ra);const oa=(...e)=>e.filter(Boolean).join(".");function aa(e=3){const t=(0,s.useRef)(null),n=(0,s.useRef)(null),[r,i]=(0,s.useState)(!1),o=(0,s.useCallback)((()=>i(!0)),[]),a=(0,s.useCallback)((()=>i(!1)),[]);return(0,s.useLayoutEffect)((()=>{if(r){const{bottom:r,top:i,left:o}=t.current.getBoundingClientRect(),{height:a}=n.current.getBoundingClientRect(),s=r+a>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=o+"px","down"===s?n.current.style.top=r+e+"px":n.current.style.bottom=window.innerHeight-i+e+"px"}}),[e,r]),{popinRef:t,wrapperRef:n,shown:r,show:o,hide:a}}!function(e){e.forEach((function(e){xo.indexOf(e)<0&&(e(_o,fo),xo.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,a,s=r[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!o.length)for(var d in n)o[d]=new e(n[d]).toRgb();for(var h in n){var f=(i=l,a=o[h],Math.pow(i.r-a.r,2)+Math.pow(i.g-a.g,2)+Math.pow(i.b-a.b,2));f<u&&(u=f,c=h)}return c}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);const sa={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};le.extend({color:()=>e=>bo(e).isValid()});function la(e,{format:t,hasAlpha:n,isString:r}){const i=e[sa[t]+(r&&"hex"!==t?"String":"")]();return"object"!==typeof i||n?i:function(e,t){const n=Fn({},e);return t.forEach((t=>t in e&&delete n[t])),n}(i,["a"])}const ua=(e,t)=>{const n=bo(e);if(!n.isValid())throw Error("Invalid color");return la(n,t)};var ca=Object.freeze({__proto__:null,schema:e=>le().color().test(e),sanitize:ua,format:(e,t)=>la(bo(e),Fn(Fn({},t),{},{isString:!0,format:"hex"})),normalize:({value:e})=>{const t=function(e){return mo(e)[1]}(e),n={format:"name"===t?"hex":t,hasAlpha:"object"===typeof e?"a"in e:"hex"===t&&8===e.length||/^(rgba)|(hsla)|(hsva)/.test(e),isString:"string"===typeof e};return{value:ua(e,n),settings:n}}});const da=wr("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),ha=wr("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),fa=wr("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function pa(e,t){return"rgb"!==t?bo(e).toRgb():e}function ma({value:e,displayValue:t,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:o}=mr(),{format:a,hasAlpha:l}=n,{popinRef:u,wrapperRef:c,shown:d,show:h,hide:f}=aa(),p=(0,s.useRef)(0),[m,g]=(0,s.useState)((()=>pa(e,a))),v=l?Xo:Jo,y=()=>{f(),o(),window.clearTimeout(p.current)};return(0,s.useEffect)((()=>()=>window.clearTimeout(p.current)),[]),s.createElement(s.Fragment,null,s.createElement(da,{ref:u,active:d,onClick:()=>(g(pa(e,a)),h(),void i()),style:{color:t}}),d&&s.createElement(Kr,null,s.createElement($r,{onPointerUp:y}),s.createElement(fa,{ref:c,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:e=>0===e.buttons&&void(p.current=window.setTimeout(y,500))},s.createElement(v,{color:m,onChange:r}))))}var ga=Fn({component:function(){const{value:e,displayValue:t,label:n,onChange:r,onUpdate:i,settings:o}=mr();return s.createElement(oi,{input:!0},s.createElement(ei,null,n),s.createElement(ha,null,s.createElement(ma,{value:e,displayValue:t,onChange:r,onUpdate:i,settings:o}),s.createElement(Fr,{value:t,onChange:r,onUpdate:i})))}},ca);var va=Fn({component:function(){const{label:e,displayValue:t,onUpdate:n,settings:r}=mr();return s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(zi,{value:t,settings:r,onUpdate:n}))}},Zi(["x","y","z"]));const ya=wr("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),_a=wr("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function ba({value:e,settings:t,onUpdate:n}){const r=(0,s.useRef)(),i=(0,s.useRef)(0),o=(0,s.useRef)(0),a=(0,s.useRef)(1),[l,u]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[h,f]=li(),p=(0,s.useRef)(null),m=(0,s.useRef)(null);(0,s.useLayoutEffect)((()=>{if(l){const{top:e,left:t,width:n,height:r}=p.current.getBoundingClientRect();m.current.style.left=t+n/2+"px",m.current.style.top=e+r/2+"px"}}),[l]);const{keys:[g,v],joystick:y}=t,_="invertY"===y?1:-1,{[g]:{step:b},[v]:{step:x}}=t,w=Cr("sizes","joystickWidth"),S=Cr("sizes","joystickHeight"),D=.8*parseFloat(w)/2,A=.8*parseFloat(S)/2,E=(0,s.useCallback)((()=>{r.current||(d(!0),i.current&&f({x:i.current*D}),o.current&&f({y:o.current*-A}),r.current=window.setInterval((()=>{n((e=>{const t=b*i.current*a.current,n=_*x*o.current*a.current;return Array.isArray(e)?{[g]:e[0]+t,[v]:e[1]+n}:{[g]:e[g]+t,[v]:e[v]+n}}))}),16))}),[D,A,n,f,b,x,g,v,_]),M=(0,s.useCallback)((()=>{window.clearTimeout(r.current),r.current=void 0,d(!1)}),[]);(0,s.useEffect)((()=>{function e(e){a.current=ar(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}}),[]);const C=si((({first:t,active:r,delta:[s,l],movement:[c,d]})=>{t&&u(!0);const h=In(c,-D,D),p=In(d,-A,A);i.current=Math.abs(c)>Math.abs(h)?Math.sign(c-h):0,o.current=Math.abs(d)>Math.abs(p)?Math.sign(p-d):0;let m=e[g],y=e[v];r?(i.current||(m+=s*b*a.current,f({x:h})),o.current||(y-=_*l*x*a.current,f({y:p})),i.current||o.current?E():M(),n({[g]:m,[v]:y})):(u(!1),i.current=0,o.current=0,f({x:0,y:0}),M())}));return s.createElement(ya,fr({ref:p},C()),l&&s.createElement(Kr,null,s.createElement(_a,{ref:m,isOutOfBounds:c},s.createElement("div",null),s.createElement("span",{ref:h}))))}const xa=wr("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});const wa=["joystick"],Sa=Zi(["x","y"]);var Da=Fn(Fn({component:function(){const{label:e,displayValue:t,onUpdate:n,settings:r}=mr();return s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(xa,{withJoystick:!!r.joystick},r.joystick&&s.createElement(ba,{value:t,settings:r,onUpdate:n}),s.createElement(zi,{value:t,settings:r,onUpdate:n})))}},Sa),{},{normalize:e=>{let{joystick:t=!0}=e,n=yn(e,wa);const{value:r,settings:i}=Sa.normalize(n);return{value:r,settings:Fn(Fn({},i),{},{joystick:t})}}});var Aa=Object.freeze({__proto__:null,sanitize:e=>{if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(t){return}if("string"===typeof e&&0===e.indexOf("blob:"))return e;throw Error("Invalid image format [undefined | blob |\xa0File].")}},schema:(e,t)=>"object"===typeof t&&"image"in t,normalize:({image:e})=>({value:e})});const Ea=wr("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Ma=wr("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Ca=wr("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Ta=wr("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Pa=wr("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Ra=wr("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var ka=Fn({component:function(){const{label:e,value:t,onUpdate:n,disabled:r}=mr(),{popinRef:i,wrapperRef:o,shown:a,show:l,hide:u}=aa(),c=(0,s.useCallback)((e=>{e.length&&n(e[0])}),[n]),d=(0,s.useCallback)((e=>{e.stopPropagation(),n(void 0)}),[n]),{getRootProps:h,getInputProps:f,isDragAccept:p}=(0,ea.uI)({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(Ea,null,s.createElement(Ca,{ref:i,hasImage:!!t,onPointerDown:()=>!!t&&l(),onPointerUp:u,style:{backgroundImage:t?`url(${t})`:"none"}}),a&&!!t&&s.createElement(Kr,null,s.createElement($r,{onPointerUp:u,style:{cursor:"pointer"}}),s.createElement(Ta,{ref:o,style:{backgroundImage:`url(${t})`}})),s.createElement(Ma,h({isDragAccept:p}),s.createElement("input",f()),s.createElement(Pa,null,p?"drop image":"click or drop")),s.createElement(Ra,{onClick:d,disabled:!t})))}},Aa);const Oa=le().number(),La=e=>({min:e[0],max:e[1]}),Fa=(e,{bounds:[t,n]},r)=>{const i={min:r[0],max:r[1]},{min:o,max:a}=Fn(Fn({},i),e);return[In(Number(o),t,Math.max(t,a)),In(Number(a),Math.min(n,o),n)]};var Ia=Object.freeze({__proto__:null,schema:(e,t)=>le().array().length(2).every.number().test(e)&&le().schema({min:Oa,max:Oa}).test(t),format:La,sanitize:Fa,normalize:({value:e,min:t,max:n})=>{const r={min:t,max:n},i=[t,n],o=Fn(Fn({},Ui(La(e),{min:r,max:r})),{},{bounds:i});return{value:Fa(La(e),o,e),settings:o}}});const Na=["value","bounds","onDrag"],Ba=["bounds"],ja=wr("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function za(e){let{value:t,bounds:[n,r],onDrag:i}=e,o=yn(e,Na);const a=(0,s.useRef)(null),l=(0,s.useRef)(null),u=(0,s.useRef)(null),c=(0,s.useRef)(0),d=Cr("sizes","scrubberWidth"),h=si((({event:e,first:s,xy:[h],movement:[f],memo:p={}})=>{if(s){const{width:i,left:o}=a.current.getBoundingClientRect();c.current=i-parseFloat(d);const s=(null===e||void 0===e?void 0:e.target)===l.current||(null===e||void 0===e?void 0:e.target)===u.current;p.pos=Un((h-o)/i,n,r);const f=Math.abs(p.pos-t.min)-Math.abs(p.pos-t.max);p.key=f<0||0===f&&p.pos<=t.min?"min":"max",s&&(p.pos=t[p.key])}const m=p.pos+Un(f/c.current,0,r-n);return i({[p.key]:_i(m,o[p.key])}),p})),f=`calc(${zn(t.min,n,r)} * (100% - ${d} - 8px) + 4px)`,p=`calc(${1-zn(t.max,n,r)} * (100% - ${d} - 8px) + 4px)`;return s.createElement(pi,fr({ref:a},h()),s.createElement(hi,null,s.createElement(mi,{style:{left:f,right:p}})),s.createElement(fi,{position:"left",ref:l,style:{left:f}}),s.createElement(fi,{position:"right",ref:u,style:{right:p}}))}var Ua=Fn({component:function(){const{label:e,displayValue:t,onUpdate:n,settings:r}=mr(),i=yn(r,Ba);return s.createElement(s.Fragment,null,s.createElement(oi,{input:!0},s.createElement(ei,null,e),s.createElement(ja,null,s.createElement(za,fr({value:t},r,{onDrag:n})),s.createElement(zi,{value:t,settings:i,onUpdate:n,innerLabelTrim:0}))))}},Ia);const Ha=["type","value"],Ga=["onChange","transient","onEditStart","onEditEnd"],Va=function(){const e=function(e){const t="function"===typeof e?ta(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=(0,s.useReducer)((e=>e+1),0),i=t.getState(),o=(0,s.useRef)(i),a=(0,s.useRef)(e),l=(0,s.useRef)(n),u=(0,s.useRef)(!1),c=(0,s.useRef)();let d;void 0===c.current&&(c.current=e(i));let h=!1;(o.current!==i||a.current!==e||l.current!==n||u.current)&&(d=e(i),h=!n(c.current,d)),na((()=>{h&&(c.current=d),o.current=i,a.current=e,l.current=n,u.current=!1}));const f=(0,s.useRef)(i);na((()=>{const e=()=>{try{const e=t.getState(),n=a.current(e);l.current(c.current,n)||(o.current=e,c.current=n,r())}catch(e){u.current=!0,r()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n}),[]);const p=h?d:c.current;return(0,s.useDebugValue)(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}((t=()=>({data:{}}),(e,n,r)=>{const i=r.subscribe;return r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let a=e(r.getState());o=n=>{const r=e(n);if(!i(a,r)){const e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return i(o)},t(e,n,r)}));var t;const n=(()=>{const e=new Map;return{on:(t,n)=>{let r=e.get(t);void 0===r&&(r=new Set,e.set(t,r)),r.add(n)},off:(t,n)=>{const r=e.get(t);void 0!==r&&(r.delete(n),0===r.size&&e.delete(t))},emit:(t,...n)=>{const r=e.get(t);if(void 0!==r)for(const e of r)e(...n)}}})();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const e=this.getData(),t=Object.keys(e),n=[];Object.entries(r).forEach((([e,r])=>{r.render&&t.some((t=>0===t.indexOf(e)))&&!r.render(this.get)&&n.push(e+".")}));const o=[];return i.forEach((t=>{t in e&&e[t].__refCount>0&&n.every((e=>-1===t.indexOf(e)))&&(!e[t].render||e[t].render(this.get))&&o.push(t)})),o},this.setOrderedPaths=e=>{e.forEach((e=>i.add(e)))},this.orderPaths=e=>(this.setOrderedPaths(e),e),this.disposePaths=t=>{e.setState((e=>{const n=e.data;return t.forEach((e=>{if(e in n){const t=n[e];t.__refCount--,0===t.__refCount&&t.type in Kn&&delete n[e]}})),{data:n}}))},this.dispose=()=>{e.setState((()=>({data:{}})))},this.getFolderSettings=e=>r[e]||{},this.getData=()=>e.getState().data,this.addData=(t,n)=>{e.setState((e=>{const r=e.data;return Object.entries(t).forEach((([e,t])=>{let i=r[e];if(i){const{type:e,value:r}=t,o=yn(t,Ha);e!==i.type?wn(_n.INPUT_TYPE_OVERRIDE,e):((0===i.__refCount||n)&&Object.assign(i,o),i.__refCount++)}else r[e]=Fn(Fn({},t),{},{__refCount:1})})),{data:r}}))},this.setValueAtPath=(t,n,r)=>{e.setState((e=>{const i=e.data;return nr(i[t],n,t,this,r),{data:i}}))},this.setSettingsAtPath=(t,n)=>{e.setState((e=>{const r=e.data;return r[t].settings=Fn(Fn({},r[t].settings),n),{data:r}}))},this.disableInputAtPath=(t,n)=>{e.setState((e=>{const r=e.data;return r[t].disabled=n,{data:r}}))},this.set=(t,n)=>{e.setState((e=>{const r=e.data;return Object.entries(t).forEach((([e,t])=>{try{nr(r[e],t,void 0,void 0,n)}catch(i){}})),{data:r}}))},this.getInput=e=>{try{return this.getData()[e]}catch(t){wn(_n.PATH_DOESNT_EXIST,e)}},this.get=e=>{var t;return null===(t=this.getInput(e))||void 0===t?void 0:t.value},this.emitOnEditStart=e=>{n.emit(`onEditStart:${e}`,this.get(e),e,Fn(Fn({},this.getInput(e)),{},{get:this.get}))},this.emitOnEditEnd=e=>{n.emit(`onEditEnd:${e}`,this.get(e),e,Fn(Fn({},this.getInput(e)),{},{get:this.get}))},this.subscribeToEditStart=(e,t)=>{const r=`onEditStart:${e}`;return n.on(r,t),()=>n.off(r,t)},this.subscribeToEditEnd=(e,t)=>{const r=`onEditEnd:${e}`;return n.on(r,t),()=>n.off(r,t)};const o=(e,t,n)=>{const i={};return Object.entries(e).forEach((([e,a])=>{if(""===e)return wn(_n.EMPTY_KEY);let s=oa(t,e);if(a.type===Kn.FOLDER){const e=o(a.schema,s,n);Object.assign(i,e),s in r||(r[s]=a.settings)}else if(e in n)wn(_n.DUPLICATE_KEYS,e,s,n[e].path);else{const t=function(e,t,n,r){const i=tr(e,t),{type:o,input:a,options:s}=i;if(o)return o in Kn?i:{type:o,input:Rn(o,a,n,r),options:s};let l=Tn(a);return l?{type:l,input:Rn(l,a,n,r),options:s}:(l=Tn({value:a}),!!l&&{type:l,input:Rn(l,{value:a},n,r),options:s})}(a,e,s,i);if(t){const{type:r,options:o,input:a}=t,{onChange:l,transient:u,onEditStart:c,onEditEnd:d}=o,h=yn(o,Ga);i[s]=Fn(Fn(Fn({type:r},h),a),{},{fromPanel:!0}),n[e]={path:s,onChange:l,transient:u,onEditStart:c,onEditEnd:d}}else wn(_n.UNKNOWN_INPUT,s,a)}})),i};this.getDataFromSchema=e=>{const t={};return[o(e,"",t),t]}};new Va;function Wa({toggle:e,toggled:t,name:n}){return s.createElement(jr,{onClick:()=>e()},s.createElement(ri,{toggled:t}),s.createElement("div",null,n))}const Za=["type","label","path","valueKey","value","settings","setValue","disabled"];function $a(e){let{type:t,label:n,path:r,valueKey:i,value:o,settings:a,setValue:l,disabled:u}=e,c=yn(e,Za);const{displayValue:d,onChange:h,onUpdate:f}=ai({type:t,value:o,settings:a,setValue:l}),p=Cn[t].component;return p?s.createElement(pr.Provider,{value:Fn({key:i,path:r,id:""+r,label:n,displayValue:d,value:o,onChange:h,onUpdate:f,settings:a,setValue:l,disabled:u},c)},s.createElement(Zr,{disabled:u},s.createElement(p,null))):(wn(_n.NO_COMPONENT_FOR_TYPE,t,r),null)}const qa=wr("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});const Ya=wr("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Ka=wr("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}});const Xa=wr("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"});const Qa=(0,s.forwardRef)((function({initialValue:e},t){const n=Cr("colors","highlight3"),r=Cr("colors","elevation2"),i=Cr("colors","highlight1"),[o,a]=(0,s.useMemo)((()=>[bo(i).alpha(.4).toRgbString(),bo(i).alpha(.1).toRgbString()]),[i]),l=(0,s.useRef)([e]),u=(0,s.useRef)(e),c=(0,s.useRef)(e),d=(0,s.useRef)(),h=(0,s.useCallback)(((e,t)=>{if(!e)return;const{width:i,height:s}=e,d=new Path2D,h=i/100,f=.05*s;for(let n=0;n<l.current.length;n++){const e=h*n,t=s-zn(l.current[n],u.current,c.current)*(s-2*f)-f;d.lineTo(e,t)}t.clearRect(0,0,i,s);const p=new Path2D(d);p.lineTo(h*(l.current.length+1),s),p.lineTo(0,s),p.lineTo(0,0);const m=t.createLinearGradient(0,0,0,s);m.addColorStop(0,o),m.addColorStop(1,a),t.fillStyle=m,t.fill(p),t.strokeStyle=r,t.lineJoin="round",t.lineWidth=14,t.stroke(d),t.strokeStyle=n,t.lineWidth=2,t.stroke(d)}),[n,r,o,a]),[f,p]=function(e){const t=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{const i=or((()=>{t.current.width=t.current.offsetWidth*window.devicePixelRatio,t.current.height=t.current.offsetHeight*window.devicePixelRatio,e(t.current,n.current)}),250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)}),[e]),(0,s.useEffect)((()=>{n.current=t.current.getContext("2d")}),[]),[t,n]}(h);return(0,s.useImperativeHandle)(t,(()=>({frame:e=>{(void 0===u.current||e<u.current)&&(u.current=e),(void 0===c.current||e>c.current)&&(c.current=e),function(e,t){e.push(t),e.length>100&&e.shift()}(l.current,e),d.current=requestAnimationFrame((()=>h(f.current,p.current)))}})),[f,p,h]),(0,s.useEffect)((()=>()=>cancelAnimationFrame(d.current)),[]),s.createElement(Xa,{ref:f})})),Ja=e=>Number.isFinite(e)?e.toPrecision(2):e.toString(),es=(0,s.forwardRef)((function({initialValue:e},t){const[n,r]=(0,s.useState)(Ja(e));return(0,s.useImperativeHandle)(t,(()=>({frame:e=>r(Ja(e))})),[]),s.createElement("div",null,n)}));function ts(e){return"function"===typeof e?e():e.current}const ns=["type","label","key"],rs={[Kn.BUTTON]:function({onClick:e,settings:t,label:n}){const r=_r();return s.createElement(oi,null,s.createElement(qa,{disabled:t.disabled,onClick:()=>e(r.get)},n))},[Kn.BUTTON_GROUP]:function(e){const{label:t,opts:n}=(({label:e,opts:t})=>{let n="string"===typeof e&&""===e.trim()?null:e,r=t;return"object"===typeof t.opts&&(void 0!==r.label&&(n=t.label),r=t.opts),{label:n,opts:r}})(e),r=_r();return s.createElement(oi,{input:!!t},t&&s.createElement(ei,null,t),s.createElement(Ya,null,Object.entries(n).map((([e,t])=>s.createElement(Ka,{key:e,onClick:()=>t(r.get)},e)))))},[Kn.MONITOR]:function({label:e,objectOrFn:t,settings:n}){const r=(0,s.useRef)(),i=(0,s.useRef)(ts(t));return(0,s.useEffect)((()=>{const e=window.setInterval((()=>{var e;document.hidden||null===(e=r.current)||void 0===e||e.frame(ts(t))}),n.interval);return()=>window.clearInterval(e)}),[t,n.interval]),s.createElement(oi,{input:!0},s.createElement(ei,{align:"top"},e),n.graph?s.createElement(Qa,{ref:r,initialValue:i.current}):s.createElement(es,{ref:r,initialValue:i.current}))}},is=s.memo((({path:e})=>{const[t,{set:n,setSettings:r,disable:i,storeId:o,emitOnEditStart:a,emitOnEditEnd:l}]=function(e){const t=_r(),[n,r]=(0,s.useState)(ci(t.getData(),e)),i=(0,s.useCallback)((n=>t.setValueAtPath(e,n,!0)),[e,t]),o=(0,s.useCallback)((n=>t.setSettingsAtPath(e,n)),[e,t]),a=(0,s.useCallback)((n=>t.disableInputAtPath(e,n)),[e,t]),l=(0,s.useCallback)((()=>t.emitOnEditStart(e)),[e,t]),u=(0,s.useCallback)((()=>t.emitOnEditEnd(e)),[e,t]);return(0,s.useEffect)((()=>{r(ci(t.getData(),e));const n=t.useStore.subscribe((t=>ci(t.data,e)),r,{equalityFn:H});return()=>n()}),[t,e]),[n,{set:i,setSettings:o,disable:a,storeId:t.storeId,emitOnEditStart:l,emitOnEditEnd:u}]}(e);if(!t)return null;const{type:u,label:c,key:d}=t,h=yn(t,ns);if(u in Kn){const t=rs[u];return s.createElement(t,fr({label:c,path:e},h))}return u in Cn?s.createElement($a,fr({key:o+e,type:u,label:c,storeId:o,path:e,valueKey:d,setValue:n,setSettings:r,disable:i,emitOnEditStart:a,emitOnEditEnd:l},h)):(Sn(_n.UNSUPPORTED_INPUT,u,e),null)})),os=({name:e,path:t,tree:n})=>{const r=_r(),i=oa(t,e),{collapsed:o,color:a}=r.getFolderSettings(i),[l,u]=(0,s.useState)(!o),c=(0,s.useRef)(null),d=Cr("colors","folderWidgetColor"),h=Cr("colors","folderTextColor");return(0,s.useLayoutEffect)((()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",a||d),c.current.style.setProperty("--leva-colors-folderTextColor",a||h)}),[a,d,h]),s.createElement(Nr,{ref:c},s.createElement(Wa,{name:e,toggled:l,toggle:()=>u((e=>!e))}),s.createElement(as,{parent:i,tree:n,toggled:l}))},as=s.memo((({isRoot:e=!1,fill:t=!1,flat:n=!1,parent:r,tree:i,toggled:o})=>{const{wrapperRef:a,contentRef:l}=function(e){const t=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(!0);return(0,s.useLayoutEffect)((()=>{e||(t.current.style.height="0px",t.current.style.overflow="hidden")}),[]),(0,s.useEffect)((()=>{if(r.current)return void(r.current=!1);let i;const o=t.current,a=()=>{e&&(o.style.removeProperty("height"),o.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};o.addEventListener("transitionend",a,{once:!0});const{height:s}=n.current.getBoundingClientRect();return o.style.height=s+"px",e||(o.style.overflow="hidden",i=window.setTimeout((()=>o.style.height="0px"),50)),()=>{o.removeEventListener("transitionend",a),clearTimeout(i)}}),[e]),{wrapperRef:t,contentRef:n}}(o);return s.createElement(Br,{ref:a,isRoot:e,fill:t,flat:n},s.createElement(zr,{ref:l,isRoot:e,toggled:o},Object.entries(i).map((([e,t])=>(e=>"__levaInput"in e)(t)?s.createElement(is,{key:t.path,valueKey:t.valueKey,path:t.path}):s.createElement(os,{key:e,name:e,path:r,tree:t})))))})),ss=wr("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${Hr}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),ls=wr("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),us=wr("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),cs=wr("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${ls}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),ds=wr("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),hs=wr("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),fs=s.forwardRef((({setFilter:e,toggle:t},n)=>{const[r,i]=(0,s.useState)(""),o=(0,s.useMemo)((()=>or(e,250)),[e]);return(0,s.useEffect)((()=>{o(r)}),[r,o]),s.createElement(s.Fragment,null,s.createElement(ds,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:e=>e.stopPropagation(),onChange:e=>{const n=e.currentTarget.value;t(!0),i(n)}}),s.createElement(ls,{onClick:()=>(e(""),void i("")),style:{visibility:r?"visible":"hidden"}},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))}));function ps({setFilter:e,onDrag:t,toggle:n,toggled:r,title:i,drag:o,filterEnabled:a}){const[l,u]=(0,s.useState)(!1),c=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e,t;l?null===(e=c.current)||void 0===e||e.focus():null===(t=c.current)||void 0===t||t.blur()}),[l]);const d=si((({offset:[e,n]})=>t({x:e,y:n})),{filterTaps:!0});return(0,s.useEffect)((()=>{const e=e=>{"L"===e.key&&e.shiftKey&&e.metaKey&&u((e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]),s.createElement(s.Fragment,null,s.createElement(us,{mode:o?"drag":void 0},s.createElement(ls,{active:!r,onClick:()=>n()},s.createElement(ri,{toggled:r,width:12,height:8})),s.createElement(hs,fr({},o?d():{},{drag:o,filterEnabled:a}),void 0===i&&o?s.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},s.createElement("circle",{cx:"2",cy:"2",r:"2"}),s.createElement("circle",{cx:"14",cy:"2",r:"2"}),s.createElement("circle",{cx:"26",cy:"2",r:"2"}),s.createElement("circle",{cx:"2",cy:"12",r:"2"}),s.createElement("circle",{cx:"14",cy:"12",r:"2"}),s.createElement("circle",{cx:"26",cy:"12",r:"2"})):i),a&&s.createElement(ls,{active:l,onClick:()=>u((e=>!e))},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},s.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),s.createElement(cs,{toggled:l},s.createElement(fs,{ref:c,setFilter:e,toggle:n})))}s.memo((({store:e,rootClass:t,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:o=!1,titleBar:a={title:void 0,drag:!0,filter:!0},hideCopyButton:l=!1,toggled:u,setToggle:c})=>{var d,h;const f=(e=>{const[t,n]=(0,s.useState)(e.getVisiblePaths());return(0,s.useEffect)((()=>{n(e.getVisiblePaths());const t=e.useStore.subscribe(e.getVisiblePaths,n,{equalityFn:H});return()=>t()}),[e]),t})(e),[p,m]=(0,s.useState)(""),g=(0,s.useMemo)((()=>((e,t)=>{const n={},r=t?t.toLowerCase():null;return e.forEach((e=>{const[t,i]=function(e){const t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e);(!r||t.toLowerCase().indexOf(r)>-1)&&ia()(n,i,{[t]:{__levaInput:!0,path:e}})})),n})(f,p)),[f,p]),[v,y]=li(),_=i||f.length>0,b="object"===typeof a&&a.title||void 0,x="object"!==typeof a||(null===(d=a.drag)||void 0===d||d),w="object"!==typeof a||(null===(h=a.filter)||void 0===h||h);return Mr(),s.createElement(yr.Provider,{value:{hideCopyButton:l}},s.createElement(ss,{ref:v,className:t,fill:n,flat:r,oneLineLabels:o,hideTitleBar:!a,style:{display:_?"block":"none"}},a&&s.createElement(ps,{onDrag:y,setFilter:m,toggle:e=>c((t=>null!==e&&void 0!==e?e:!t)),toggled:u,title:b,drag:x,filterEnabled:w}),_&&s.createElement(vr.Provider,{value:e},s.createElement(as,{isRoot:!0,fill:n,flat:r,tree:g,toggled:u}))))}));function ms(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function gs(){var e=(0,s.useState)(ms()),t=e[0],n=e[1];return(0,s.useEffect)((function(){function e(){n(ms())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}Pn(Xn.SELECT,Ei),Pn(Xn.IMAGE,ka),Pn(Xn.NUMBER,bi),Pn(Xn.COLOR,ga),Pn(Xn.STRING,Ri),Pn(Xn.BOOLEAN,Fi),Pn(Xn.INTERVAL,Ua),Pn(Xn.VECTOR3D,va),Pn(Xn.VECTOR2D,Da);n(77871);function vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ys=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.length?t:Array(e.length).fill(!1);if("undefined"===typeof window)return n;var r=e.map((function(e){return window.matchMedia(e)})),i=function(){return r.map((function(e){return e.matches}))},o=(0,s.useState)(i),a=vs(o,2),l=a[0],u=a[1];return(0,s.useLayoutEffect)((function(){var e=function(){return u(i)};return r.forEach((function(t){return t.addListener(e)})),function(){return r.forEach((function(t){return t.removeListener(e)}))}}),[]),l},_s={xs:"(max-width:360px)",sm:"(max-width:600px)",md:"(max-width:900px)",lg:"(max-width:1025px)",xl:"(max-width:1440px)",max:"(max-width:1920px)"};function bs(e){var t=e.map((function(e){return _s[e]}));return ys(t)}},77871:function(e,t,n){"use strict";n.d(t,{HQ:function(){return u},ap:function(){return l}});var r=n(50029),i=n(87794),o=n.n(i),a=n(67294),s=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!t)return Error("Need valid text input");try{(new window.google.maps.places.AutocompleteService).getPlacePredictions({input:t},e)}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=(0,a.useState)([]),i=n[0],l=n[1];return(0,a.useEffect)((function(){var n=setTimeout((0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,s(e);case 5:n=t.sent,l(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),t);return function(){clearTimeout(n)}}),[e,t]),i}var u=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!t)return Error("Need valid placeId");try{(new window.google.maps.Geocoder).geocode({placeId:t},e)}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},65252:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(67294),i=n(67020),o=n(71262),a=n(78052);var s=function(e){return e&&e.length?(0,i.Z)(e,a.Z,o.Z):void 0},l=n(77843),u=n(82064),c=n(27812),d=n(99477),h=n(26870),f=function(e){for(var t=u.yearRanges,n=1/t.length,r=0,i=0;i<t.length;i++){var o=t[i].range;if(e>=o[0]&&e<o[1]){r=n*d.MathUtils.mapLinear(e,o[0],o[1],0,1)+n*i;break}}return r};var p=function(e,t){var n=18e-5,r=new d.Vector3,i=e,o=t,a=function(e){var t={};return e.forEach((function(e){var n=e.category,r=e.subType,i=e.type,o="".concat(i,"-").concat(n,"-").concat(r);Object.keys(t).includes(o)?t[o].items.push(e):t[o]={filters:{category:n,type:i,subType:r},items:[e]}})),t},s=[].concat((0,c.Z)(i),(0,c.Z)(o)),l=(0,h.Z)(s,(function(e){return e.priority}),["desc"]);l.forEach((function(e,t){!function(e,t){var n=e.latLong,i={},o={},a=Math.cos(n.lat*Math.PI/180),s=Math.sin(n.lat*Math.PI/180),l=Math.cos(n.lon*Math.PI/180),u=Math.sin(n.lon*Math.PI/180),c=r.clone().set(a*l*2,2*s,a*u*2);if(c.x*=-1,e.yearString){var d=e.yearString,h=f(d),p=2*Math.random()-1,m=Math.pow(Math.sqrt(Math.random())*(1+.6*Math.random())*.6,2);m>.3&&Math.random()<.7&&(m*=1+Math.random()*Math.pow(1.4,2)),m<.23&&Math.random()<.24&&(m-=.1+Math.random()*Math.pow(.35,1.4)),i={index:t,year:d,normalizedProgress:h,randomY:m-=.7,randomZ:2*Math.random()-1,randomX:p}}o.position=c,e.timelineViewConfig=i,e.globeViewConfig=o;var g=!!e.video,v=e.isTimeline,y=e.categoryCollection.items[0].name,_=v?"timeline":g?"video":e.storyTypeCollection.items[0].name,b=v?"timeline":function(e,t){return["success","disaster","extinction","history"].includes(e)&&!t?"singularity":t?"video":e||"none"}(e.storyTypeCollection.items[0].name,g);e.category=y,e.type=b,e.subType=_}(e,t)}));var u=[];return function(e,t){return Object.keys(e).forEach((function(n){var r,i=t[n].items.slice(0,10);(r=e[n].items).push.apply(r,(0,c.Z)(i))})),e}(a(l.filter((function(e,t){for(var r=10,i=0;i<l.length;i++){var o=l[i];if(t!==i&&!o.isFilteredByDistance){var a=e.globeViewConfig.position.distanceToSquared(o.globeViewConfig.position);if(a<n){r=a,o.isFilteredByDistance=!0,o.isGlobeFilterOnly=!0,u.push(o);break}}}return r>n})).filter((function(e){var t,n,r,i;return(null===e||void 0===e||null===(t=e.categoryCollection)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.length)&&(null===e||void 0===e||null===(r=e.storyTypeCollection)||void 0===r||null===(i=r.items)||void 0===i?void 0:i.length)}))),a(u))},m=function(e,t){var n=e.bubbles,r=e.statistics;n.forEach((function(e){e.timelineConfig.normalizedProgress=f(e.yearString)})),r.forEach((function(e){e.timelineConfig.normalizedProgress=f(e.yearString)}));var i=[];return t.yearRanges.forEach((function(e){e.items.forEach((function(e){e.normalizedProgress=f(e.year),i.push(e)}))})),e.yearLabels=i,e};function g(e){var t=(0,l.s6)("globalData"),n=(0,l.s6)("setGlobalData");(0,r.useEffect)((function(){if(!t){var r=Number(s(e.timelineHighlights.bubbles.map((function(e){return parseInt(e.yearString,10)}))));r+=20,u.yearRanges[u.yearRanges.length-1].range[1]=r;var i=m(e.timelineHighlights,u),o=p(e.dotCollection.items,e.dotCollectionTimeline.items),a={raw:e,organized:o,timelineHighlights:i,solutionOverviewData:e.solutionOverviewData,storyTypeData:e.storyTypeData};n(a)}}),[])}},44019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=function(e,t,r,i){var o=n(86340).normalizeLocalePath,a=n(57565).detectDomainLocale,s=t||o(e,r).detectedLocale,l=a(i,void 0,s);if(l){var u="http".concat(l.http?"":"s","://"),c=s===l.defaultLocale?"":"/".concat(s);return"".concat(u).concat(l.domain).concat("").concat(c).concat(e)}return!1};("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},78566:function(e,t,n){"use strict";var r=n(930),i=n(85696),o=n(7980);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.src,s=e.sizes,l=e.unoptimized,m=void 0!==l&&l,g=e.priority,b=void 0!==g&&g,A=e.loading,M=e.lazyRoot,C=void 0===M?null:M,T=e.lazyBoundary,P=e.className,R=e.quality,k=e.width,O=e.height,L=e.style,F=e.objectFit,I=e.objectPosition,N=e.onLoadingComplete,B=e.placeholder,j=void 0===B?"empty":B,z=e.blurDataURL,U=u(e,["src","sizes","unoptimized","priority","loading","lazyRoot","lazyBoundary","className","quality","width","height","style","objectFit","objectPosition","onLoadingComplete","placeholder","blurDataURL"]),H=c.useContext(p.ImageConfigContext),G=c.useMemo((function(){var e=v||H||h.imageConfigDefault,t=[].concat(o(e.deviceSizes),o(e.imageSizes)).sort((function(e,t){return e-t})),n=e.deviceSizes.sort((function(e,t){return e-t}));return a({},e,{allSizes:t,deviceSizes:n})}),[H]),V=U,W=s?"responsive":"intrinsic";"layout"in V&&(V.layout&&(W=V.layout),delete V.layout);var Z=D;if("loader"in V){if(V.loader){var $=V.loader;Z=function(e){e.config;var t=u(e,["config"]);return $(t)}}delete V.loader}var q="";if(function(e){return"object"===typeof e&&(x(e)||function(e){return void 0!==e.src}(e))}(n)){var Y=x(n)?n.default:n;if(!Y.src)throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ".concat(JSON.stringify(Y)));if(z=z||Y.blurDataURL,q=Y.src,(!W||"fill"!==W)&&(O=O||Y.height,k=k||Y.width,!Y.height||!Y.width))throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ".concat(JSON.stringify(Y)))}var K=!b&&("lazy"===A||"undefined"===typeof A);((n="string"===typeof n?n:q).startsWith("data:")||n.startsWith("blob:"))&&(m=!0,K=!1);y.has(n)&&(K=!1);G.unoptimized&&(m=!0);var X,Q=c.useState(!1),J=i(Q,2),ee=J[0],te=J[1],ne=f.useIntersection({rootRef:C,rootMargin:T||"200px",disabled:!K}),re=i(ne,3),ie=re[0],oe=re[1],ae=re[2],se=!K||oe,le={boxSizing:"border-box",display:"block",overflow:"hidden",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},ue={boxSizing:"border-box",display:"block",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},ce=!1,de={position:"absolute",top:0,left:0,bottom:0,right:0,boxSizing:"border-box",padding:0,border:"none",margin:"auto",display:"block",width:0,height:0,minWidth:"100%",maxWidth:"100%",minHeight:"100%",maxHeight:"100%",objectFit:F,objectPosition:I},he=S(k),fe=S(O),pe=S(R);0;var me=Object.assign({},L,de),ge="blur"!==j||ee?{}:{backgroundSize:F||"cover",backgroundPosition:I||"0% 0%",filter:"blur(20px)",backgroundImage:'url("'.concat(z,'")')};if("fill"===W)le.display="block",le.position="absolute",le.top=0,le.left=0,le.bottom=0,le.right=0;else if("undefined"!==typeof he&&"undefined"!==typeof fe){var ve=fe/he,ye=isNaN(ve)?"100%":"".concat(100*ve,"%");"responsive"===W?(le.display="block",le.position="relative",ce=!0,ue.paddingTop=ye):"intrinsic"===W?(le.display="inline-block",le.position="relative",le.maxWidth="100%",ce=!0,ue.maxWidth="100%",X="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27".concat(he,"%27%20height=%27").concat(fe,"%27/%3e")):"fixed"===W&&(le.display="inline-block",le.position="relative",le.width=he,le.height=fe)}else 0;var _e={src:_,srcSet:void 0,sizes:void 0};se&&(_e=w({config:G,src:n,unoptimized:m,layout:W,width:he,quality:pe,sizes:s,loader:Z}));var be=n;0;var xe="imagesrcset",we="imagesizes";xe="imageSrcSet",we="imageSizes";var Se=(r(t={},xe,_e.srcSet),r(t,we,_e.sizes),r(t,"crossOrigin",V.crossOrigin),t),De=c.default.useLayoutEffect,Ae=c.useRef(N),Ee=c.useRef(n);c.useEffect((function(){Ae.current=N}),[N]),De((function(){Ee.current!==n&&(ae(),Ee.current=n)}),[ae,n]);var Me=a({isLazy:K,imgAttributes:_e,heightInt:fe,widthInt:he,qualityInt:pe,layout:W,className:P,imgStyle:me,blurStyle:ge,loading:A,config:G,unoptimized:m,placeholder:j,loader:Z,srcString:be,onLoadingCompleteRef:Ae,setBlurComplete:te,setIntersection:ie,isVisible:se,noscriptSizes:s},V);return c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{style:le},ce?c.default.createElement("span",{style:ue},X?c.default.createElement("img",{style:{display:"block",maxWidth:"100%",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},alt:"","aria-hidden":!0,src:X}):null):null,c.default.createElement(E,Object.assign({},Me))),b?c.default.createElement(d.default,null,c.default.createElement("link",Object.assign({key:"__nimg-"+_e.src+_e.srcSet+_e.sizes,rel:"preload",as:"image",href:_e.srcSet?void 0:_e.src},Se))):null)};var a=n(6495).Z,s=n(92648).Z,l=n(91598).Z,u=n(17273).Z,c=l(n(67294)),d=s(n(72717)),h=n(48187),f=n(90639),p=n(89239),m=(n(99475),n(24969));function g(e){return"/"===e[0]?e.slice(1):e}var v={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1},y=new Set,_=(new Map,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");var b=new Map([["default",function(e){var t=e.config,n=e.src,r=e.width,i=e.quality;return n.endsWith(".svg")&&!t.dangerouslyAllowSVG?n:"".concat(m.normalizePathTrailingSlash(t.path),"?url=").concat(encodeURIComponent(n),"&w=").concat(r,"&q=").concat(i||75)}],["imgix",function(e){var t=e.config,n=e.src,r=e.width,i=e.quality,o=new URL("".concat(t.path).concat(g(n))),a=o.searchParams;return a.set("auto",a.getAll("auto").join(",")||"format"),a.set("fit",a.get("fit")||"max"),a.set("w",a.get("w")||r.toString()),i&&a.set("q",i.toString()),o.href}],["cloudinary",function(e){var t=e.config,n=e.src,r=["f_auto","c_limit","w_"+e.width,"q_"+(e.quality||"auto")].join(",")+"/";return"".concat(t.path).concat(r).concat(g(n))}],["akamai",function(e){var t=e.config,n=e.src,r=e.width;return"".concat(t.path).concat(g(n),"?imwidth=").concat(r)}],["custom",function(e){var t=e.src;throw new Error('Image with src "'.concat(t,'" is missing "loader" prop.')+"\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader")}]]);function x(e){return void 0!==e.default}function w(e){var t=e.config,n=e.src,r=e.unoptimized,i=e.layout,a=e.width,s=e.quality,l=e.sizes,u=e.loader;if(r)return{src:n,srcSet:void 0,sizes:void 0};var c=function(e,t,n,r){var i=e.deviceSizes,a=e.allSizes;if(r&&("fill"===n||"responsive"===n)){for(var s,l=/(^|\s)(1?\d?\d)vw/g,u=[];s=l.exec(r);s)u.push(parseInt(s[2]));if(u.length){var c=.01*Math.min.apply(Math,u);return{widths:a.filter((function(e){return e>=i[0]*c})),kind:"w"}}return{widths:a,kind:"w"}}return"number"!==typeof t||"fill"===n||"responsive"===n?{widths:i,kind:"w"}:{widths:o(new Set([t,2*t].map((function(e){return a.find((function(t){return t>=e}))||a[a.length-1]})))),kind:"x"}}(t,a,i,l),d=c.widths,h=c.kind,f=d.length-1;return{sizes:l||"w"!==h?l:"100vw",srcSet:d.map((function(e,r){return"".concat(u({config:t,src:n,quality:s,width:e})," ").concat("w"===h?e:r+1).concat(h)})).join(", "),src:u({config:t,src:n,quality:s,width:d[f]})}}function S(e){return"number"===typeof e?e:"string"===typeof e?parseInt(e,10):void 0}function D(e){var t,n=(null==(t=e.config)?void 0:t.loader)||"default",r=b.get(n);if(r)return r(e);throw new Error('Unknown "loader" found in "next.config.js". Expected: '.concat(h.VALID_LOADERS.join(", "),". Received: ").concat(n))}function A(e,t,n,r,i,o){e&&e.src!==_&&e["data-loaded-src"]!==t&&(e["data-loaded-src"]=t,("decode"in e?e.decode():Promise.resolve()).catch((function(){})).then((function(){if(e.parentNode&&(y.add(t),"blur"===r&&o(!0),null==i?void 0:i.current)){var n=e.naturalWidth,a=e.naturalHeight;i.current({naturalWidth:n,naturalHeight:a})}})))}var E=function(e){var t=e.imgAttributes,n=(e.heightInt,e.widthInt),r=e.qualityInt,i=e.layout,o=e.className,s=e.imgStyle,l=e.blurStyle,d=e.isLazy,h=e.placeholder,f=e.loading,p=e.srcString,m=e.config,g=e.unoptimized,v=e.loader,y=e.onLoadingCompleteRef,_=e.setBlurComplete,b=e.setIntersection,x=e.onLoad,S=e.onError,D=(e.isVisible,e.noscriptSizes),E=u(e,["imgAttributes","heightInt","widthInt","qualityInt","layout","className","imgStyle","blurStyle","isLazy","placeholder","loading","srcString","config","unoptimized","loader","onLoadingCompleteRef","setBlurComplete","setIntersection","onLoad","onError","isVisible","noscriptSizes"]);return f=d?"lazy":f,c.default.createElement(c.default.Fragment,null,c.default.createElement("img",Object.assign({},E,t,{decoding:"async","data-nimg":i,className:o,style:a({},s,l),ref:c.useCallback((function(e){b(e),(null==e?void 0:e.complete)&&A(e,p,0,h,y,_)}),[b,p,i,h,y,_]),onLoad:function(e){A(e.currentTarget,p,0,h,y,_),x&&x(e)},onError:function(e){"blur"===h&&_(!0),S&&S(e)}})),(d||"blur"===h)&&c.default.createElement("noscript",null,c.default.createElement("img",Object.assign({},E,w({config:m,src:p,unoptimized:g,layout:i,width:n,quality:r,sizes:D,loader:v}),{decoding:"async","data-nimg":i,style:s,className:o,loading:f}))))};("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7942:function(e,t,n){"use strict";var r=n(85696);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(92648).Z,o=n(17273).Z,a=i(n(67294)),s=n(64957),l=n(57995),u=n(30647),c=n(51992),d=n(90639),h=n(44019),f=n(70227),p={};function m(e,t,n,r){if(e&&s.isLocalURL(t)){Promise.resolve(e.prefetch(t,n,r)).catch((function(e){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;p[t+"%"+n+(i?"%"+i:"")]=!0}}var g=a.default.forwardRef((function(e,t){var n,i=e.href,g=e.as,v=e.children,y=e.prefetch,_=e.passHref,b=e.replace,x=e.shallow,w=e.scroll,S=e.locale,D=e.onClick,A=e.onMouseEnter,E=e.onTouchStart,M=e.legacyBehavior,C=void 0===M?!0!==Boolean(!1):M,T=o(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);n=v,!C||"string"!==typeof n&&"number"!==typeof n||(n=a.default.createElement("a",null,n));var P=!1!==y,R=a.default.useContext(u.RouterContext),k=a.default.useContext(c.AppRouterContext);k&&(R=k);var O,L=a.default.useMemo((function(){var e=s.resolveHref(R,i,!0),t=r(e,2),n=t[0],o=t[1];return{href:n,as:g?s.resolveHref(R,g):o||n}}),[R,i,g]),F=L.href,I=L.as,N=a.default.useRef(F),B=a.default.useRef(I);C&&(O=a.default.Children.only(n));var j=C?O&&"object"===typeof O&&O.ref:t,z=d.useIntersection({rootMargin:"200px"}),U=r(z,3),H=U[0],G=U[1],V=U[2],W=a.default.useCallback((function(e){B.current===I&&N.current===F||(V(),B.current=I,N.current=F),H(e),j&&("function"===typeof j?j(e):"object"===typeof j&&(j.current=e))}),[I,j,F,V,H]);a.default.useEffect((function(){var e=G&&P&&s.isLocalURL(F),t="undefined"!==typeof S?S:R&&R.locale,n=p[F+"%"+I+(t?"%"+t:"")];e&&!n&&m(R,F,I,{locale:t})}),[I,F,G,S,P,R]);var Z={ref:W,onClick:function(e){C||"function"!==typeof D||D(e),C&&O.props&&"function"===typeof O.props.onClick&&O.props.onClick(e),e.defaultPrevented||function(e,t,n,r,i,o,l,u,c,d){if("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&s.isLocalURL(n)){e.preventDefault();var h=function(){"beforePopState"in t?t[i?"replace":"push"](n,r,{shallow:o,locale:u,scroll:l}):t[i?"replace":"push"](n,{forceOptimisticNavigation:!d})};c?a.default.startTransition(h):h()}}(e,R,F,I,b,x,w,S,Boolean(k),P)},onMouseEnter:function(e){C||"function"!==typeof A||A(e),C&&O.props&&"function"===typeof O.props.onMouseEnter&&O.props.onMouseEnter(e),!P&&k||s.isLocalURL(F)&&m(R,F,I,{priority:!0})},onTouchStart:function(e){C||"function"!==typeof E||E(e),C&&O.props&&"function"===typeof O.props.onTouchStart&&O.props.onTouchStart(e),!P&&k||s.isLocalURL(F)&&m(R,F,I,{priority:!0})}};if(!C||_||"a"===O.type&&!("href"in O.props)){var $="undefined"!==typeof S?S:R&&R.locale,q=R&&R.isLocaleDomain&&h.getDomainLocale(I,$,R.locales,R.domainLocales);Z.href=q||f.addBasePath(l.addLocale(I,$,R&&R.defaultLocale))}return C?a.default.cloneElement(O,Z):a.default.createElement("a",Object.assign({},T,Z),n)}));t.default=g,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},86340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeLocalePath=void 0;t.normalizeLocalePath=function(e,t){return n(9625).normalizeLocalePath(e,t)},("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},90639:function(e,t,n){"use strict";var r=n(85696);Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootRef,n=e.rootMargin,u=e.disabled||!a,c=i.useState(!1),d=r(c,2),h=d[0],f=d[1],p=i.useState(null),m=r(p,2),g=m[0],v=m[1];i.useEffect((function(){if(a){if(u||h)return;if(g&&g.tagName){var e=function(e,t,n){var r=function(e){var t,n={root:e.root||null,margin:e.rootMargin||""},r=l.find((function(e){return e.root===n.root&&e.margin===n.margin}));if(r&&(t=s.get(r)))return t;var i=new Map,o=new IntersectionObserver((function(e){e.forEach((function(e){var t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return t={id:n,observer:o,elements:i},l.push(n),s.set(n,t),t}(n),i=r.id,o=r.observer,a=r.elements;return a.set(e,t),o.observe(e),function(){if(a.delete(e),o.unobserve(e),0===a.size){o.disconnect(),s.delete(i);var t=l.findIndex((function(e){return e.root===i.root&&e.margin===i.margin}));t>-1&&l.splice(t,1)}}}(g,(function(e){return e&&f(e)}),{root:null==t?void 0:t.current,rootMargin:n});return e}}else if(!h){var r=o.requestIdleCallback((function(){return f(!0)}));return function(){return o.cancelIdleCallback(r)}}}),[g,u,n,t,h]);var y=i.useCallback((function(){f(!1)}),[]);return[v,h,y]};var i=n(67294),o=n(26286),a="function"===typeof IntersectionObserver,s=new Map,l=[];("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},78e3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmpStateContext=void 0;var r=(0,n(92648).Z)(n(67294)).default.createContext({});t.AmpStateContext=r},9470:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInAmpMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,r=e.hybrid,i=void 0!==r&&r,o=e.hasQuery,a=void 0!==o&&o;return n||i&&a}},51992:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateContext=t.GlobalLayoutRouterContext=t.LayoutRouterContext=t.AppRouterContext=void 0;var r=(0,n(92648).Z)(n(67294)),i=r.default.createContext(null);t.AppRouterContext=i;var o=r.default.createContext(null);t.LayoutRouterContext=o;var a=r.default.createContext(null);t.GlobalLayoutRouterContext=a;var s=r.default.createContext(null);t.TemplateContext=s},72717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHead=c,t.default=void 0;var r=n(6495).Z,i=n(92648).Z,o=(0,n(91598).Z)(n(67294)),a=i(n(11585)),s=n(78e3),l=n(15850),u=n(9470);n(99475);function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(o.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function d(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var h=["name","httpEquiv","charSet","itemProp"];function f(e,t){var n=t.inAmpMode;return e.reduce(d,[]).reverse().concat(c(n).reverse()).filter(function(){var e=new Set,t=new Set,n=new Set,r={};return function(i){var o=!0,a=!1;if(i.key&&"number"!==typeof i.key&&i.key.indexOf("$")>0){a=!0;var s=i.key.slice(i.key.indexOf("$")+1);e.has(s)?o=!1:e.add(s)}switch(i.type){case"title":case"base":t.has(i.type)?o=!1:t.add(i.type);break;case"meta":for(var l=0,u=h.length;l<u;l++){var c=h[l];if(i.props.hasOwnProperty(c))if("charSet"===c)n.has(c)?o=!1:n.add(c);else{var d=i.props[c],f=r[c]||new Set;"name"===c&&a||!f.has(d)?(f.add(d),r[c]=f):o=!1}}}return o}}()).reverse().map((function(e,t){var i=e.key||t;if(!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some((function(t){return e.props.href.startsWith(t)}))){var a=r({},e.props||{});return a["data-href"]=a.href,a.href=void 0,a["data-optimized-fonts"]=!0,o.default.cloneElement(e,a)}return o.default.cloneElement(e,{key:i})}))}var p=function(e){var t=e.children,n=o.useContext(s.AmpStateContext),r=o.useContext(l.HeadManagerContext);return o.default.createElement(a.default,{reduceComponentsToState:f,headManager:r,inAmpMode:u.isInAmpMode(n)},t)};t.default=p,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.headManager,n=e.reduceComponentsToState;function s(){if(t&&t.mountedInstances){var i=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(i,e))}}if(i){var l;null==t||null==(l=t.mountedInstances)||l.add(e.children),s()}return o((function(){var n;return null==t||null==(n=t.mountedInstances)||n.add(e.children),function(){var n;null==t||null==(n=t.mountedInstances)||n.delete(e.children)}})),o((function(){return t&&(t._pendingUpdate=s),function(){t&&(t._pendingUpdate=s)}})),a((function(){return t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),function(){t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)}})),null};var r=(0,n(91598).Z)(n(67294));var i=!1,o=i?function(){}:r.useLayoutEffect,a=i?function(){}:r.useEffect},95006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(59499),i=(n(74831),n(67294)),o=n(13541),a=/iPhone/i,s=/iPod/i,l=/iPad/i,u=/\biOS-universal(?:.+)Mac\b/i,c=/\bAndroid(?:.+)Mobile\b/i,d=/Android/i,h=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,f=/Silk/i,p=/Windows Phone/i,m=/\bWindows(?:.+)ARM\b/i,g=/BlackBerry/i,v=/BB10/i,y=/Opera Mini/i,_=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i,x=function(e){return"undefined"!==typeof e&&"MacIntel"===e.platform&&"number"===typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"===typeof MSStream};function w(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"===typeof navigator?"string"===typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");"undefined"!==typeof r[1]&&(n=r[0]),"undefined"!==typeof(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i(a)&&!i(p),ipod:i(s),tablet:!i(a)&&(i(l)||x(t))&&!i(p),universal:i(u),device:(i(a)||i(s)||i(l)||i(u)||x(t))&&!i(p)},amazon:{phone:i(h),tablet:!i(h)&&i(f),device:i(h)||i(f)},android:{phone:!i(p)&&i(h)||!i(p)&&i(c),tablet:!i(p)&&!i(h)&&!i(c)&&(i(f)||i(d)),device:!i(p)&&(i(h)||i(f)||i(c)||i(d))||i(/\bokhttp\b/i)},windows:{phone:i(p),tablet:i(m),device:i(p)||i(m)},other:{blackberry:i(g),blackberry10:i(v),opera:i(y),firefox:i(b),chrome:i(_),device:i(g)||i(v)||i(y)||i(b)||i(_)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var S=n(11163),D=n(40843),A=n(65929),E=n(49194),M=n(67882),C=n(77843),T=n(9008),P=n.n(T),R=(n(4298),n(85893)),k="A Memorial to the Planet",O="A global memorial to the planet",L="https://images.ctfassets.net/9833dwig2thk/6oO2dXUgv0AIPzkVo2snH5/35c9e9c406da6b75e40b9c194b82b03c/Screen_Shot_2021-05-11_at_4.08.48_PM.png";var F=function(e){var t=e.children,n=e.pageProps,r="What is missing?",i=k,o=L,a=O;if("undefined"!==typeof n){var s=n.metaImage,l=n.title,u=n.description,c=n.metaDescription;i="undefined"===typeof l||null==l?k:l,"undefined"===typeof u||null==u?O:u,o="undefined"===typeof s||null==s?L:s.url,a="undefined"===typeof c||null==c?O:c}return(0,R.jsxs)(P(),{children:[(0,R.jsx)("title",{children:"".concat(r," | ").concat(i)}),(0,R.jsx)("meta",{property:"og:type",content:"website"}),(0,R.jsx)("meta",{property:"og:title",content:r}),(0,R.jsx)("meta",{property:"og:image",content:o}),(0,R.jsx)("meta",{property:"og:description",content:a}),(0,R.jsx)("meta",{name:"description",content:a}),"undefined"!==typeof t&&t.length>0?t.map((function(e){return e})):""]})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=e.Component,n=e.pageProps,r=(0,C.s6)("globalData"),a=(0,C.s6)("setResponsiveVersion"),s=(0,C.s6)("setIsTouchDevice"),l=(0,C.s6)("setWindowBounds"),u=(0,C.s6)("windowBounds"),c=(0,C.s6)("currentPathname"),d=(0,C.s6)("setCurrentPathname"),h=(0,C.s6)("setPrevPathname"),f=(0,C.mv)("currentView"),p=(0,C.s6)("isIntroVisible"),m=(0,S.useRouter)();return(0,i.useEffect)((function(){h(c),d(m.pathname)}),[m.pathname]),(0,o.bt)((function(){var e=w(window.navigator).any;s(e),a(window.innerWidth<901||e?"mobile":"desktop")}),[]),(0,o.bt)((function(){document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px"));var e=function(){window.innerWidth===u.width&&window.innerHeight===u.height||(w(window.navigator).any&&window.innerWidth!==u.width&&document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px")),l({width:window.innerWidth,height:window.innerHeight}))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[u]),(0,R.jsx)(E.F,{value:r,children:(0,R.jsx)(M.k,{children:(0,R.jsxs)(A.Ar,{children:[(0,R.jsx)(D.k2,{}),(0,R.jsx)(F,{pageProps:n.data}),f&&r&&(0,R.jsx)(D.Xz,{}),(0,R.jsx)(t,N({},n)),p&&(0,R.jsx)(D.p2,{}),(0,R.jsx)("div",{className:"js-portals"})]})})})}},60577:function(e,t,n){"use strict";n.d(t,{h:function(){return r},o:function(){return i}});var r=(0,n(36902).ZP)((function(e){return{isDebug:void 0,setIsDebug:function(t){return e((function(e){e.isDebug=t}))},webglStatus:void 0,setWebglStatus:function(t){return e((function(e){e.webglStatus=t}))},isCanvasMounted:!1,setIsCanvasMounted:function(t){return e((function(e){e.isCanvasMounted=t}))},globalData:null,setGlobalData:function(t){return e((function(e){e.globalData=t}))},timelineHighlights:null,setTimelineHighlights:function(t){return e((function(e){e.timelineHighlights=t}))},headerVisible:!1,setHeaderVisible:function(t){return e((function(e){e.headerVisible=t}))},router:null,setRouter:function(t){return e((function(e){e.router=t}))},prevRouter:null,setPrevRouter:function(t){return e((function(e){e.prevRouter=t}))},currentPathname:null,setCurrentPathname:function(t){return e((function(e){e.currentPathname=t}))},prevPathname:null,setPrevPathname:function(t){return e((function(e){e.prevPathname=t}))},isTouchDevice:!1,setIsTouchDevice:function(t){return e((function(e){e.isTouchDevice=t}))},responsiveVersion:!1,setResponsiveVersion:function(t){return e((function(e){e.responsiveVersion=t}))},exitFn:null,setExitFn:function(t){return e((function(e){e.exitFn=t}))},menuOpen:!1,setMenuOpen:function(t){return e((function(e){e.menuOpen=t}))},hamburgerVisible:!1,setHamburgerVisible:function(t){return e((function(e){e.hamburgerVisible=t}))},viewIconsVisible:!1,setViewIconsVisible:function(t){return e((function(e){e.viewIconsVisible=t}))},introTl:null,setIntroTl:function(t){return e((function(e){e.introTl=t}))},isIntroVisible:!1,setIsIntroVisible:function(t){return e((function(e){e.isIntroVisible=t}))},audioArr:null,setAudioArr:function(t){return e((function(e){e.audioArr=t}))},audioPlaying:!1,setAudioPlaying:function(t){return e((function(e){e.audioPlaying=t}))},activeAudio:null,setActiveAudio:function(t){return e((function(e){e.activeAudio=t}))},mobileGlobeCategoryOverlay:null,setMobileGlobeCategoryOverlay:function(t){return e((function(e){e.mobileGlobeCategoryOverlay=t}))},bestPracticesHoverData:!1,setBestPracticesHoverData:function(t){return e((function(e){e.bestPracticesHoverData=t}))},solutionsOverviewHoverData:!1,setSolutionsOverviewHoverData:function(t){return e((function(e){e.solutionsOverviewHoverData=t}))},dotHoverData:!1,setDotHoverData:function(t){return e((function(e){e.dotHoverData=t}))},dotHoverTl:null,setDotHoverTl:function(t){return e((function(e){e.dotHoverTl=t}))},globeBubbleHoverData:!1,setGlobeBubbleHoverData:function(t){return e((function(e){e.globeBubbleHoverData=t}))},dotHoverTransitionTl:null,setDotHoverTransitionTl:function(t){return e((function(e){e.dotHoverTransitionTl=t}))},contentEnterTl:null,setContentEnterTl:function(t){return e((function(e){e.contentEnterTl=t}))},timelineEnterTl:null,setTimelineEnterTl:function(t){return e((function(e){e.timelineEnterTl=t}))},mobileTimelineDotHover:!1,setMobileTimelineDotHover:function(t){return e((function(e){e.mobileTimelineDotHover=t}))},flipContainer:null,setFlipContainer:function(t){return e((function(e){e.flipContainer=t}))},timelineBubbleHoverData:!1,setTimelineBubbleHoverData:function(t){return e((function(e){e.timelineBubbleHoverData=t}))},timelineStatisticHoverData:!1,setTimelineStatisticHoverData:function(t){return e((function(e){e.timelineStatisticHoverData=t}))},activeScrollSmoother:null,setActiveScrollSmoother:function(t){return e((function(e){e.activeScrollSmoother=t}))},dotTimelineModalOpen:!1,setDotTimelineModalOpen:function(t){return e((function(e){e.dotTimelineModalOpen=t}))},windowBounds:!1,setWindowBounds:function(t){return e((function(e){e.windowBounds=t}))}}})),i=function(e){return r((function(t){return t[e]}))}},41055:function(e,t,n){"use strict";n.d(t,{h:function(){return r},o:function(){return i}});var r=(0,n(36902).ZP)((function(e){return{headerRef:null,setHeaderRef:function(t){return e((function(e){e.headerRef=t}))},menuRef:null,setMenuRef:function(t){return e((function(e){e.menuRef=t}))},mobileMenuRef:null,setMobileMenuRef:function(t){return e((function(e){e.mobileMenuRef=t}))},solutionPageRef:null,setSolutionPageRef:function(t){return e((function(e){e.solutionPageRef=t}))},solutionMapRef:null,setSolutionMapRef:function(t){return e((function(e){e.solutionMapRef=t}))},indexPageRef:null,setIndexPageRef:function(t){return e((function(e){e.indexPageRef=t}))},globeFooterRef:null,setGlobeFooterRef:function(t){return e((function(e){e.globeFooterRef=t}))},dotHoverRef:null,setDotHoverRef:function(t){return e((function(e){e.dotHoverRef=t}))},dotTimelineContainerRef:null,setDotTimelineContainerRef:function(t){return e((function(e){e.dotTimelineContainerRef=t}))},shareAMemoryRef:null,setShareAMemoryRef:function(t){return e((function(e){e.shareAMemoryRef=t}))}}})),i=function(e){return r((function(t){return t[e]}))}},86767:function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}n.d(t,{Z:function(){return r}})},62079:function(e,t){!function(e){"use strict";var t,n,r,i,o,a,s,l,u,c="transform",d=c+"Origin",h=function(e){var o=e.ownerDocument||e;!(c in e.style)&&"msTransform"in e.style&&(d=(c="msTransform")+"Origin");for(;o.parentNode&&(o=o.parentNode););if(n=window,s=new A,o){t=o,r=o.documentElement,i=o.body,(l=t.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var a=o.createElement("div"),h=o.createElement("div");i.appendChild(a),a.appendChild(h),a.style.position="static",a.style[c]="translate3d(0,0,1px)",u=h.offsetParent!==a,i.removeChild(a)}return o},f=function(e){for(var t,n;e&&e!==i;)(n=e._gsap)&&n.uncache&&n.get(e,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),t?t.push(n):t=[n]),e=e.parentNode;return t},p=[],m=[],g=function(){return n.pageYOffset||t.scrollTop||r.scrollTop||i.scrollTop||0},v=function(){return n.pageXOffset||t.scrollLeft||r.scrollLeft||i.scrollLeft||0},y=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},_=function e(t){return"fixed"===n.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},b=function e(n,r){if(n.parentNode&&(t||h(n))){var i=y(n),s=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",l=i?r?"rect":"g":"div",u=2!==r?0:100,c=3===r?100:0,d="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",f=t.createElementNS?t.createElementNS(s.replace(/^https/,"http"),l):t.createElement(l);return r&&(i?(a||(a=e(n)),f.setAttribute("width",.01),f.setAttribute("height",.01),f.setAttribute("transform","translate("+u+","+c+")"),a.appendChild(f)):(o||((o=e(n)).style.cssText=d),f.style.cssText=d+"width:0.1px;height:0.1px;top:"+c+"px;left:"+u+"px",o.appendChild(f))),f}throw"Need document and parent."},x=function(e){for(var t=new A,n=0;n<e.numberOfItems;n++)t.multiply(e.getItem(n).matrix);return t},w=function(e){var t,n=e.getCTM();return n||(t=e.style[c],e.style[c]="none",e.appendChild(l),n=l.getCTM(),e.removeChild(l),t?e.style[c]=t:e.style.removeProperty(c.replace(/([A-Z])/g,"-$1").toLowerCase())),n||s.clone()},S=function(e,t){var r,i,l,h,f,g,v=y(e),_=e===v,S=v?p:m,D=e.parentNode;if(e===n)return e;if(S.length||S.push(b(e,1),b(e,2),b(e,3)),r=v?a:o,v)_?(h=-(l=w(e)).e/l.a,f=-l.f/l.d,i=s):(l=e.getBBox(),h=(i=(i=e.transform?e.transform.baseVal:{}).numberOfItems?i.numberOfItems>1?x(i):i.getItem(0).matrix:s).a*l.x+i.c*l.y,f=i.b*l.x+i.d*l.y),t&&"g"===e.tagName.toLowerCase()&&(h=f=0),(_?v:D).appendChild(r),r.setAttribute("transform","matrix("+i.a+","+i.b+","+i.c+","+i.d+","+(i.e+h)+","+(i.f+f)+")");else{if(h=f=0,u)for(i=e.offsetParent,l=e;l&&(l=l.parentNode)&&l!==i&&l.parentNode;)(n.getComputedStyle(l)[c]+"").length>4&&(h=l.offsetLeft,f=l.offsetTop,l=0);if("absolute"!==(g=n.getComputedStyle(e)).position&&"fixed"!==g.position)for(i=e.offsetParent;D&&D!==i;)h+=D.scrollLeft||0,f+=D.scrollTop||0,D=D.parentNode;(l=r.style).top=e.offsetTop-f+"px",l.left=e.offsetLeft-h+"px",l[c]=g[c],l[d]=g[d],l.position="fixed"===g.position?"fixed":"absolute",e.parentNode.appendChild(r)}return r},D=function(e,t,n,r,i,o,a){return e.a=t,e.b=n,e.c=r,e.d=i,e.e=o,e.f=a,e},A=function(){function e(e,t,n,r,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),D(this,e,t,n,r,i,o)}var t=e.prototype;return t.inverse=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=e*r-t*n||1e-10;return D(this,r/a,-t/a,-n/a,e/a,(n*o-r*i)/a,-(e*o-t*i)/a)},t.multiply=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f,s=e.a,l=e.c,u=e.b,c=e.d,d=e.e,h=e.f;return D(this,s*t+u*r,s*n+u*i,l*t+c*r,l*n+c*i,o+d*t+h*r,a+d*n+h*i)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f;return t===e.a&&n===e.b&&r===e.c&&i===e.d&&o===e.e&&a===e.f},t.apply=function(e,t){void 0===t&&(t={});var n=e.x,r=e.y,i=this.a,o=this.b,a=this.c,s=this.d,l=this.e,u=this.f;return t.x=n*i+r*a+l||0,t.y=n*o+r*s+u||0,t},e}();function E(e,n,r,i){if(!e||!e.parentNode||(t||h(e)).documentElement===e)return new A;var o=f(e),a=y(e)?p:m,s=S(e,r),l=a[0].getBoundingClientRect(),u=a[1].getBoundingClientRect(),c=a[2].getBoundingClientRect(),d=s.parentNode,b=!i&&_(e),x=new A((u.left-l.left)/100,(u.top-l.top)/100,(c.left-l.left)/100,(c.top-l.top)/100,l.left+(b?0:v()),l.top+(b?0:g()));if(d.removeChild(s),o)for(l=o.length;l--;)(u=o[l]).scaleX=u.scaleY=0,u.renderTransform(1,u);return n?x.inverse():x}var M,C,T,P,R,k,O,L=1,F=function(e,t){return e.actions.forEach((function(e){return e.vars[t]&&e.vars[t](e)}))},I={},N=180/Math.PI,B=Math.PI/180,j={},z={},U={},H=function(e){return"string"===typeof e?e.split(" ").join("").split(","):e},G=H("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),V=H("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),W=function(e){return M(e)[0]||console.warn("Element not found:",e)},Z=function(e){return Math.round(1e4*e)/1e4||0},$=function(e,t,n){return e.forEach((function(e){return e.classList[n](t)}))},q={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},Y={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},K=function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},X=function(e,t){var n,r={};for(n in e)t[n]||(r[n]=e[n]);return r},Q={},J=function(e){var t=Q[e]=H(e);return U[e]=t.concat(V),t},ee=function(e){var t=e._gsap||C.core.getCache(e);return t.gmCache===C.ticker.frame?t.gMatrix:(t.gmCache=C.ticker.frame,t.gMatrix=E(e,!0,!1,!0))},te=function e(t,n,r){void 0===r&&(r=0);for(var i=t.parentNode,o=1e3*Math.pow(10,r)*(n?-1:1),a=n?900*-o:0;t;)a+=o,t=t.previousSibling;return i?a+e(i,n,r+1):a},ne=function(e,t,n){return e.forEach((function(e){return e.d=te(n?e.element:e.t,t)})),e.sort((function(e,t){return e.d-t.d})),e},re=function(e,t){for(var n,r,i=e.element.style,o=e.css=e.css||[],a=t.length;a--;)r=i[n=t[a]]||i.getPropertyValue(n),o.push(r?n:z[n]||(z[n]=K(n)),r);return i},ie=function(e){var t=e.css,n=e.element.style,r=0;for(e.cache.uncache=1;r<t.length;r+=2)t[r+1]?n[t[r]]=t[r+1]:n.removeProperty(t[r])},oe=function(e,t){e.forEach((function(e){return e.a.cache.uncache=1})),t||e.finalStates.forEach(ie)},ae="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),se=function(e,t,n){var r,i,o,a=e.element,s=e.width,l=e.height,u=e.uncache,c=e.getProp,d=a.style,h=4;if("object"!==typeof t&&(t=e),T&&1!==n)return T._abs.push({t:a,b:e,a:e,sd:0}),T._final.push((function(){return(e.cache.uncache=1)&&ie(e)})),a;for(i="none"===c("display"),e.isVisible&&!i||(i&&(re(e,["display"]).display=t.display),e.matrix=t.matrix,e.width=s=e.width||t.width,e.height=l=e.height||t.height),re(e,ae),o=window.getComputedStyle(a);h--;)d[ae[h]]=o[ae[h]];if(d.gridArea="1 / 1 / 1 / 1",d.transition="none",d.position="absolute",d.width=s+"px",d.height=l+"px",d.top||(d.top="0px"),d.left||(d.left="0px"),u)r=new Ce(a);else if((r=X(e,j)).position="absolute",e.simple){var f=a.getBoundingClientRect();r.matrix=new A(1,0,0,1,f.left+v(),f.top+g())}else r.matrix=E(a,!1,!1,!0);return r=ve(r,e,!0),e.x=k(r.x,.01),e.y=k(r.y,.01),a},le=function(e,t){return!0!==t&&(t=M(t),e=e.filter((function(e){if(-1!==t.indexOf((e.sd<0?e.b:e.a).element))return!0;e.t._gsap.renderTransform(1),e.t.style.width=e.b.width+"px",e.t.style.height=e.b.height+"px"}))),e},ue=function(e){return ne(e,!0).forEach((function(e){return(e.a.isVisible||e.b.isVisible)&&se(e.sd<0?e.b:e.a,e.b,1)}))},ce=function(e,t){return t&&e.idLookup[de(t).id]||e.elementStates[0]},de=function(e,t,n,r){return e instanceof Ce?e:e instanceof Me?ce(e,r):new Ce("string"===typeof e?W(e)||console.warn(e+" not found"):e,t,n)},he=function(e,t){for(var n=C.getProperty(e.element,null,"native"),r=e.props={},i=t.length;i--;)r[t[i]]=(n(t[i])+"").trim();return r.zIndex&&(r.zIndex=parseFloat(r.zIndex)||0),e},fe=function(e,t){var n,r=e.style||e;for(n in t)r[n]=t[n]},pe=function(e){var t=e.getAttribute("data-flip-id");return t||e.setAttribute("data-flip-id",t="auto-"+L++),t},me=function(e){return e.map((function(e){return e.element}))},ge=function(e,t,n){return e&&t.length&&n.add(e(me(t),n,new Me(t,0,!0)),0)},ve=function(e,t,n,r,i,o){var a,s,l,u,c,d,h,f=e.element,p=e.cache,m=e.parent,g=e.x,v=e.y,y=t.width,_=t.height,b=t.scaleX,x=t.scaleY,w=t.rotation,S=t.bounds,D=o&&f.style.cssText,A=o&&f.getBBox&&f.getAttribute("transform"),T=e,P=t.matrix,R=P.e,O=P.f,L=e.bounds.width!==S.width||e.bounds.height!==S.height||e.scaleX!==b||e.scaleY!==x||e.rotation!==w,F=!L&&e.simple&&t.simple&&!i;return F||!m?(b=x=1,w=a=0):(d=(c=ee(m)).clone().multiply(t.ctm?t.matrix.clone().multiply(t.ctm):t.matrix),w=Z(Math.atan2(d.b,d.a)*N),a=Z(Math.atan2(d.c,d.d)*N+w)%360,b=Math.sqrt(Math.pow(d.a,2)+Math.pow(d.b,2)),x=Math.sqrt(Math.pow(d.c,2)+Math.pow(d.d,2))*Math.cos(a*B),i&&(i=M(i)[0],u=C.getProperty(i),h=i.getBBox&&"function"===typeof i.getBBox&&i.getBBox(),T={scaleX:u("scaleX"),scaleY:u("scaleY"),width:h?h.width:Math.ceil(parseFloat(u("width","px"))),height:h?h.height:parseFloat(u("height","px"))}),p.rotation=w+"deg",p.skewX=a+"deg"),n?(b*=y!==T.width&&T.width?y/T.width:1,x*=_!==T.height&&T.height?_/T.height:1,p.scaleX=b,p.scaleY=x):(y=k(y*b/T.scaleX,0),_=k(_*x/T.scaleY,0),f.style.width=y+"px",f.style.height=_+"px"),r&&fe(f,t.props),F||!m?(g+=R-e.matrix.e,v+=O-e.matrix.f):L||m!==t.parent?(p.renderTransform(1,p),d=E(i||f,!1,!1,!0),s=c.apply({x:d.e,y:d.f}),g+=(l=c.apply({x:R,y:O})).x-s.x,v+=l.y-s.y):(c.e=c.f=0,g+=(l=c.apply({x:R-e.matrix.e,y:O-e.matrix.f})).x,v+=l.y),g=k(g,.02),v=k(v,.02),!o||o instanceof Ce?(p.x=g+"px",p.y=v+"px",p.renderTransform(1,p)):(f.style.cssText=D,f.getBBox&&f.setAttribute("transform",A||""),p.uncache=1),o&&(o.x=g,o.y=v,o.rotation=w,o.skewX=a,n?(o.scaleX=b,o.scaleY=x):(o.width=y,o.height=_)),o||p},ye=function(e,t){return e instanceof Me?e:new Me(e,t)},_e=function(e,t,n){var r=e.idLookup[n],i=e.alt[n];return!i.isVisible||(t.getElementState(i.element)||i).isVisible&&r.isVisible?r:i},be=[],xe="width,height,overflowX,overflowY".split(","),we=function(e){if(e!==O){var t=R.style,n=R.clientWidth===window.outerWidth,r=R.clientHeight===window.outerHeight,i=4;if(e&&(n||r)){for(;i--;)be[i]=t[xe[i]];n&&(t.width=R.clientWidth+"px",t.overflowY="hidden"),r&&(t.height=R.clientHeight+"px",t.overflowX="hidden"),O=e}else if(O){for(;i--;)be[i]?t[xe[i]]=be[i]:t.removeProperty(K(xe[i]));O=e}}},Se=function(e,t,n,r){e instanceof Me&&t instanceof Me||console.warn("Not a valid state object.");var i,o,a,s,l,u,c,d,h,f,p,m,g,v,y,_=n=n||{},b=_.clearProps,x=_.onEnter,w=_.onLeave,S=_.absolute,D=_.absoluteOnLeave,A=_.custom,M=_.delay,P=_.paused,R=_.repeat,k=_.repeatDelay,O=_.yoyo,L=_.toggleClass,F=_.nested,I=_.zIndex,N=_.scale,B=_.fade,j=_.stagger,z=_.spin,H=_.prune,W=("props"in n?n:e).props,Z=X(n,q),K=C.timeline({delay:M,paused:P,repeat:R,repeatDelay:k,yoyo:O}),ee=Z,te=[],ie=[],ae=[],se=[],ce=!0===z?1:z||0,de="function"===typeof z?z:function(){return ce},he=e.interrupted||t.interrupted,fe=K[1!==r?"to":"from"];for(o in t.idLookup)p=t.alt[o]?_e(t,e,o):t.idLookup[o],l=p.element,f=e.idLookup[o],e.alt[o]&&l===f.element&&(e.alt[o].isVisible||!p.isVisible)&&(f=e.alt[o]),f?(u={t:l,b:f,a:p,sd:f.element===l?0:p.isVisible?1:-1},ae.push(u),u.sd&&(u.sd<0&&(u.b=p,u.a=f),he&&re(u.b,W?U[W]:V),B&&ae.push(u.swap={t:f.element,b:u.b,a:u.a,sd:-u.sd,swap:u})),l._flip=f.element._flip=T?T.timeline:K):p.isVisible&&(ae.push({t:l,b:X(p,{isVisible:1}),a:p,sd:0,entering:1}),l._flip=T?T.timeline:K);return W&&(Q[W]||J(W)).forEach((function(e){return Z[e]=function(t){return ae[t].a.props[e]}})),ae.finalStates=h=[],m=function(){for(ne(ae),we(!0),s=0;s<ae.length;s++)u=ae[s],g=u.a,v=u.b,!H||g.isDifferent(v)||u.entering?(l=u.t,F&&!(u.sd<0)&&s&&(g.matrix=E(l,!1,!1,!0)),u.sd||v.isVisible&&g.isVisible?(u.sd<0?(c=new Ce(l,W,e.simple),ve(c,g,N,0,0,c),c.matrix=E(l,!1,!1,!0),c.css=u.b.css,u.a=g=c,B&&(l.style.opacity=he?v.opacity:g.opacity),j&&se.push(l)):u.sd>0&&B&&(l.style.opacity=he?g.opacity-v.opacity:"0"),ve(g,v,N,W)):v.isVisible!==g.isVisible&&(v.isVisible?g.isVisible||(v.css=g.css,ie.push(v),ae.splice(s--,1),S&&F&&ve(g,v,N,W)):(g.isVisible&&te.push(g),ae.splice(s--,1))),N||(l.style.maxWidth=Math.max(g.width,v.width)+"px",l.style.maxHeight=Math.max(g.height,v.height)+"px",l.style.minWidth=Math.min(g.width,v.width)+"px",l.style.minHeight=Math.min(g.height,v.height)+"px"),F&&L&&l.classList.add(L)):ae.splice(s--,1),h.push(g);var t;if(L&&(t=h.map((function(e){return e.element})),F&&t.forEach((function(e){return e.classList.remove(L)}))),we(!1),N?(Z.scaleX=function(e){return ae[e].a.scaleX},Z.scaleY=function(e){return ae[e].a.scaleY}):(Z.width=function(e){return ae[e].a.width+"px"},Z.height=function(e){return ae[e].a.height+"px"},Z.autoRound=n.autoRound||!1),Z.x=function(e){return ae[e].a.x+"px"},Z.y=function(e){return ae[e].a.y+"px"},Z.rotation=function(e){return ae[e].a.rotation+(z?360*de(e,d[e],d):0)},Z.skewX=function(e){return ae[e].a.skewX},d=ae.map((function(e){return e.t})),(I||0===I)&&(Z.modifiers={zIndex:function(){return I}},Z.zIndex=I,Z.immediateRender=!1!==n.immediateRender),B&&(Z.opacity=function(e){return ae[e].sd<0?0:ae[e].sd>0?ae[e].a.opacity:"+=0"}),se.length){j=C.utils.distribute(j);var r=d.slice(se.length);Z.stagger=function(e,t){return j(~se.indexOf(t)?d.indexOf(ae[e].swap.t):e,t,r)}}if(G.forEach((function(e){return n[e]&&K.eventCallback(e,n[e],n[e+"Params"])})),A&&d.length)for(o in ee=X(Z,q),"scale"in A&&(A.scaleX=A.scaleY=A.scale,delete A.scale),A)(i=X(A[o],Y))[o]=Z[o],!("duration"in i)&&"duration"in Z&&(i.duration=Z.duration),i.stagger=Z.stagger,fe.call(K,d,i,0),delete ee[o];(d.length||ie.length||te.length)&&(L&&K.add((function(){return $(t,L,K._zTime<0?"remove":"add")}),0)&&!P&&$(t,L,"add"),d.length&&fe.call(K,d,ee,0)),ge(x,te,K),ge(w,ie,K);var f=T&&T.timeline;f&&(f.add(K,0),T._final.push((function(){return oe(ae,!b)}))),a=K.duration(),K.call((function(){var e=K.time()>=a;e&&!f&&oe(ae,!b),L&&$(t,L,e?"remove":"add")}))},D&&(S=ae.filter((function(e){return!e.sd&&!e.a.isVisible&&e.b.isVisible})).map((function(e){return e.a.element}))),T?(S&&(y=T._abs).push.apply(y,le(ae,S)),T._run.push(m)):(S&&ue(le(ae,S)),m()),T?T.timeline:K},De=function e(t){t.vars.onInterrupt&&t.vars.onInterrupt.apply(t,t.vars.onInterruptParams||[]),t.getChildren(!0,!1,!0).forEach(e)},Ae=function(e,t){if(e&&e.progress()<1&&!e.paused())return t&&(De(e),t<2&&e.progress(1),e.kill()),!0},Ee=function(e){for(var t,n=e.idLookup={},r=e.alt={},i=e.elementStates,o=i.length;o--;)n[(t=i[o]).id]?r[t.id]=t:n[t.id]=t},Me=function(){function e(e,t,n){if(this.props=t&&t.props,this.simple=!(!t||!t.simple),n)this.targets=me(e),this.elementStates=e,Ee(this);else{this.targets=M(e);var r=t&&(!1===t.kill||t.batch&&!t.kill);T&&!r&&T._kill.push(this),this.update(r||!!T)}}var t=e.prototype;return t.update=function(e){var t=this;return this.elementStates=this.targets.map((function(e){return new Ce(e,t.props,t.simple)})),Ee(this),this.interrupt(e),this.recordInlineStyles(),this},t.clear=function(){return this.targets.length=this.elementStates.length=0,Ee(this),this},t.fit=function(e,t,n){for(var r,i,o=ne(this.elementStates.slice(0),!1,!0),a=(e||this).idLookup,s=0;s<o.length;s++)r=o[s],n&&(r.matrix=E(r.element,!1,!1,!0)),(i=a[r.id])&&ve(r,i,t,!0,0,r),r.matrix=E(r.element,!1,!1,!0);return this},t.getProperty=function(e,t){var n=this.getElementState(e)||j;return(t in n?n:n.props||j)[t]},t.add=function(e){for(var t,n,r,i=e.targets.length,o=this.idLookup,a=this.alt;i--;)(r=o[(n=e.elementStates[i]).id])&&(n.element===r.element||a[n.id]&&a[n.id].element===n.element)?(t=this.elementStates.indexOf(n.element===r.element?r:a[n.id]),this.targets.splice(t,1,e.targets[i]),this.elementStates.splice(t,1,n)):(this.targets.push(e.targets[i]),this.elementStates.push(n));return e.interrupted&&(this.interrupted=!0),e.simple||(this.simple=!1),Ee(this),this},t.compare=function(e){var t,n,r,i,o,a,s,l,u=e.idLookup,c=this.idLookup,d=[],h=[],f=[],p=[],m=[],g=e.alt,v=this.alt,y=function(e,t,n){return(e.isVisible!==t.isVisible?e.isVisible?f:p:e.isVisible?h:d).push(n)&&m.push(n)},_=function(e,t,n){return m.indexOf(n)<0&&y(e,t,n)};for(r in u)o=g[r],a=v[r],i=(t=o?_e(e,this,r):u[r]).element,n=c[r],a?(l=n.isVisible||!a.isVisible&&i===n.element?n:a,(s=!o||t.isVisible||o.isVisible||l.element!==o.element?t:o).isVisible&&l.isVisible&&s.element!==l.element?((s.isDifferent(l)?h:d).push(s.element,l.element),m.push(s.element,l.element)):y(s,l,s.element),o&&s.element===o.element&&(o=u[r]),_(s.element!==n.element&&o?o:s,n,n.element),_(o&&o.element===a.element?o:s,a,a.element),o&&_(o,a.element===o.element?a:n,o.element)):(n?n.isDifferent(t)?y(t,n,i):d.push(i):f.push(i),o&&_(o,n,o.element));for(r in c)u[r]||(p.push(c[r].element),v[r]&&p.push(v[r].element));return{changed:h,unchanged:d,enter:f,leave:p}},t.recordInlineStyles=function(){for(var e=U[this.props]||V,t=this.elementStates.length;t--;)re(this.elementStates[t],e)},t.interrupt=function(e){var t=this,n=[];this.targets.forEach((function(r){var i=r._flip,o=Ae(i,e?0:1);e&&o&&n.indexOf(i)<0&&i.add((function(){return t.updateVisibility()})),o&&n.push(i)})),!e&&n.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!n.length)},t.updateVisibility=function(){this.elementStates.forEach((function(e){var t=e.element.getBoundingClientRect();e.isVisible=!!(t.width||t.height||t.top||t.left),e.uncache=1}))},t.getElementState=function(e){return this.elementStates[this.targets.indexOf(W(e))]},t.makeAbsolute=function(){return ne(this.elementStates.slice(0),!0,!0).map(se)},e}(),Ce=function(){function e(e,t,n){this.element=e,this.update(t,n)}var t=e.prototype;return t.isDifferent=function(e){var t=this.bounds,n=e.bounds;return t.top!==n.top||t.left!==n.left||t.width!==n.width||t.height!==n.height||!this.matrix.equals(e.matrix)||this.opacity!==e.opacity||this.props&&e.props&&JSON.stringify(this.props)!==JSON.stringify(e.props)},t.update=function(e,t){var n=this,r=n.element,i=C.getProperty(r),o=C.core.getCache(r),a=r.getBoundingClientRect(),s=r.getBBox&&"function"===typeof r.getBBox&&"svg"!==r.nodeName.toLowerCase()&&r.getBBox(),l=t?new A(1,0,0,1,a.left+v(),a.top+g()):E(r,!1,!1,!0);n.getProp=i,n.element=r,n.id=pe(r),n.matrix=l,n.cache=o,n.bounds=a,n.isVisible=!!(a.width||a.height||a.left||a.top),n.display=i("display"),n.position=i("position"),n.parent=r.parentNode,n.x=i("x"),n.y=i("y"),n.scaleX=o.scaleX,n.scaleY=o.scaleY,n.rotation=i("rotation"),n.skewX=i("skewX"),n.opacity=i("opacity"),n.width=s?s.width:k(i("width","px"),.04),n.height=s?s.height:k(i("height","px"),.04),e&&he(n,Q[e]||J(e)),n.ctm=r.getCTM&&"svg"===r.nodeName.toLowerCase()&&w(r).inverse(),n.simple=t||1===Z(l.a)&&!Z(l.b)&&!Z(l.c)&&1===Z(l.d),n.uncache=0},e}(),Te=function(){function e(e,t){this.vars=e,this.batch=t,this.states=[],this.timeline=t.timeline}var t=e.prototype;return t.getStateById=function(e){for(var t=this.states.length;t--;)if(this.states[t].idLookup[e])return this.states[t]},t.kill=function(){this.batch.remove(this)},e}(),Pe=function(){function e(e){this.id=e,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new Me,this.timeline=C.timeline()}var t=e.prototype;return t.add=function(e){var t=this.actions.filter((function(t){return t.vars===e}));return t.length?t[0]:(t=new Te("function"===typeof e?{animate:e}:e,this),this.actions.push(t),t)},t.remove=function(e){var t=this.actions.indexOf(e);return t>=0&&this.actions.splice(t,1),this},t.getState=function(e){var t=this,n=T,r=P;return T=this,this.state.clear(),this._kill.length=0,this.actions.forEach((function(n){n.vars.getState&&(n.states.length=0,P=n,n.state=n.vars.getState(n)),e&&n.states.forEach((function(e){return t.state.add(e)}))})),P=r,T=n,this.killConflicts(),this},t.animate=function(){var e,t,n=this,r=T,i=this.timeline,o=this.actions.length;for(T=this,i.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach((function(e){e.vars.animate&&e.vars.animate(e);var t,n,r=e.vars.onEnter,i=e.vars.onLeave,o=e.targets;o&&o.length&&(r||i)&&(t=new Me,e.states.forEach((function(e){return t.add(e)})),(n=t.compare(Re.getState(o))).enter.length&&r&&r(n.enter),n.leave.length&&i&&i(n.leave))})),ue(this._abs),this._run.forEach((function(e){return e()})),t=i.duration(),e=this._final.slice(0),i.add((function(){t<=i.time()&&(e.forEach((function(e){return e()})),F(n,"onComplete"))})),T=r;o--;)this.actions[o].vars.once&&this.actions[o].kill();return F(this,"onStart"),i.restart(),this},t.loadState=function(e){e||(e=function(){return 0});var t=[];return this.actions.forEach((function(n){if(n.vars.loadState){var r,i=function i(o){o&&(n.targets=o),~(r=t.indexOf(i))&&(t.splice(r,1),t.length||e())};t.push(i),n.vars.loadState(i)}})),t.length||e(),this},t.setState=function(){return this.actions.forEach((function(e){return e.targets=e.vars.setState&&e.vars.setState(e)})),this},t.killConflicts=function(e){return this.state.interrupt(e),this._kill.forEach((function(t){return t.interrupt(e)})),this},t.run=function(e,t){var n=this;return this!==T&&(e||this.getState(t),this.loadState((function(){n._killed||(n.setState(),n.animate())}))),this},t.clear=function(e){this.state.clear(),e||(this.actions.length=0)},t.getStateById=function(e){for(var t,n=this.actions.length;n--;)if(t=this.actions[n].getStateById(e))return t;return this.state.idLookup[e]&&this.state},t.kill=function(){this._killed=1,this.clear(),delete I[this.id]},e}(),Re=function(){function e(){}return e.getState=function(t,n){var r=ye(t,n);return P&&P.states.push(r),n&&n.batch&&e.batch(n.batch).state.add(r),r},e.from=function(e,t){return"clearProps"in(t=t||{})||(t.clearProps=!0),Se(e,ye(t.targets||e.targets,{props:t.props||e.props,simple:t.simple,kill:!!t.kill}),t,-1)},e.to=function(e,t){return Se(e,ye(t.targets||e.targets,{props:t.props||e.props,simple:t.simple,kill:!!t.kill}),t,1)},e.fromTo=function(e,t,n){return Se(e,t,n)},e.fit=function(e,t,n){var r=n?X(n,Y):{},i=n||r,o=i.absolute,a=i.scale,s=i.getVars,l=i.props,u=i.runBackwards,c=i.onComplete,d=i.simple,h=n&&n.fitChild&&W(n.fitChild),f=de(t,l,d,e),p=de(e,0,d,f),m=l?U[l]:V;return l&&fe(r,f.props),u&&(re(p,m),"immediateRender"in r||(r.immediateRender=!0),r.onComplete=function(){ie(p),c&&c.apply(this,arguments)}),o&&se(p,f),r=ve(p,f,a||h,l,h,r.duration||s?r:0),s?r:r.duration?C.to(p.element,r):null},e.makeAbsolute=function(e,t){return(e instanceof Me?e:new Me(e,t)).makeAbsolute()},e.batch=function(e){return e||(e="default"),I[e]||(I[e]=new Pe(e))},e.killFlipsOf=function(e,t){(e instanceof Me?e.targets:M(e)).forEach((function(e){return e&&Ae(e._flip,!1!==t?1:2)}))},e.isFlipping=function(t){var n=e.getByTarget(t);return!!n&&n.isActive()},e.getByTarget=function(e){return(W(e)||j)._flip},e.getElementState=function(e,t){return new Ce(W(e),t)},e.convertCoordinates=function(e,t,n){var r=E(t,!0,!0).multiply(E(e));return n?r.apply(n):r},e.register=function(e){if(R="undefined"!==typeof document&&document.body){C=e,h(R),M=C.utils.toArray;var t=C.utils.snap(.1);k=function(e,n){return t(parseFloat(e)+n)}}},e}();Re.version="3.10.2",window.gsap&&window.gsap.registerPlugin(Re),e.Flip=Re,e.default=Re,Object.defineProperty(e,"__esModule",{value:!0})}(t)},22373:function(e,t){!function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r,i,o,a,s,l,u,c,d,h,f,p,m=function(){return!0},g=function(){return r||m()&&(r=window.gsap)&&r.registerPlugin&&r},v=function(e){return Math.round(1e5*e)/1e5||0},y=function(e,t){var n,r,i=e.parentNode||s,a=e.getBoundingClientRect(),l=i.getBoundingClientRect(),u=l.top-a.top,c=l.bottom-a.bottom,d=(Math.abs(u)>Math.abs(c)?u:c)/(1-t),h=-d*t;return d>0&&(h+=-(r=.5===(n=l.height/(o.innerHeight+l.height))?2*l.height:2*Math.min(l.height,-d*n/(2*n-1)))/2,d+=r),{change:d,offset:h}},_=function(e){var t=a.createElement("div");return t.classList.add("ScrollSmoother-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e),t},b=function(){function e(t){var n=this;i||e.register(r)||console.warn("Please gsap.registerPlugin(ScrollSmoother)"),t=this.vars=t||{},h&&h.kill(),h=this;var s,m,g,b,x,w,S,D,A,E,M,C,T=d.getScrollFunc(o),P=1===d.isTouch?!0===t.smoothTouch?.8:parseFloat(t.smoothTouch)||0:0===t.smooth||!1===t.smooth?0:parseFloat(t.smooth)||.8,R=0,k=0,O=1,L=t.onUpdate,F=t.onStop,I=p(0),N=function(){return I.update(-R)},B={y:0},j=function(){return s.style.overflow="visible"},z=function(e){var t=e.getTween();t&&(t.pause(),t._time=t._dur,t._tTime=t._tDur),M=!1,e.animation.progress(e.progress,!0)},U=function(e,t){(e!==R&&!A||t)&&(P&&(s.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+e+", 0, 1)"),k=e-R,R=e,d.isUpdating||d.update())},H=function(e){return arguments.length?(A&&(R=-e),B.y=-e,M=!0,T(e),this):-R},G=function(e){m.scrollTop=0,d.isInViewport(e.target)||e.target===C||n.scrollTo(e.target,!1,"center center"),C=e.target},V=function(e,t){var n,i,o,a;x.forEach((function(t){n=t.pins,a=t.markers,e.forEach((function(e){e.trigger!==t.trigger&&e.pinnedContainer!==t.trigger||t===e||(i=e.start,o=(i-t.start-t.offset)/t.ratio-(i-t.start),n.forEach((function(e){return o-=e.distance/t.ratio-e.distance})),e.setPositions(i+o,e.end+o),e.markerStart&&a.push(r.quickSetter([e.markerStart,e.markerEnd],"y","px")),e.pin&&e.end>0&&(o=e.end-e.start,n.push({start:e.start,end:e.end,distance:o,trig:e}),t.setPositions(t.start,t.end+o),t.vars.onRefresh(t)))}))}))},W=function(){j(),requestAnimationFrame(j),x&&(x.forEach((function(e){var t=e.start,n=e.auto?Math.min(d.maxScroll(e.scroller),e.end):t+(e.end-t)/e.ratio,r=(n-e.end)/2;t-=r,n-=r,e.offset=r||1e-4,e.pins.length=0,e.setPositions(Math.min(t,n),Math.max(t,n)),e.vars.onRefresh(e)})),V(d.sort())),I.reset()},Z=function(){return x&&x.forEach((function(e){return e.vars.onRefresh(e)}))},$=function(){return x&&x.forEach((function(e){return e.vars.onRefreshInit(e)})),Z},q=function(e,t,n,r){return function(){var i="function"===typeof t?t(n,r):t;return i||0===i||(i=r.getAttribute("data-"+e)||("speed"===e?1:0)),r.setAttribute("data-"+e,i),"auto"===i?i:parseFloat(i)}},Y=function(e,t,n,i){var o,a,s,l,u,h,p=q("speed",t,i,e),g=q("lag",n,i,e),_=r.getProperty(e,"y"),b=e._gsap,w=function(){t=p(),n=g(),o=parseFloat(t)||1,u=(s="auto"===t)?0:.5,l&&l.kill(),l=n&&r.to(e,{ease:f,overwrite:!1,y:"+=0",duration:n}),a&&(a.ratio=o,a.autoSpeed=s)},S=function(){b.y=_+"px",b.renderTransform(1),w()},D=[],A=[],E=0,M=function(t){if(s){S();var n=y(e,c(0,1,-t.start/(t.end-t.start)));E=n.change,h=n.offset}else E=(t.end-t.start)*(1-o),h=0;D.forEach((function(e){return E-=e.distance*(1-o)})),t.vars.onUpdate(t),l&&l.progress(1)};return w(),(1!==o||s||l)&&(M(a=d.create({trigger:s?e.parentNode:e,scroller:m,scrub:!0,refreshPriority:-999,onRefreshInit:S,onRefresh:M,onKill:function(e){var t=x.indexOf(e);t>=0&&x.splice(t,1)},onUpdate:function(e){var t,n,i,o=_+E*(e.progress-u),a=D.length,c=0;if(e.offset){if(a){for(n=-B.y,i=e.end;a--;){if((t=D[a]).trig.isActive||n>=t.start&&n<=t.end)return void(l&&(t.trig.progress+=t.trig.direction<0?.001:-.001,t.trig.update(0,0,1),l.resetTo("y",parseFloat(b.y),-k,!0),O&&l.progress(1)));n>t.end&&(c+=t.distance),i-=t.distance}o=_+c+E*((r.utils.clamp(e.start,e.end,n)-e.start-c)/(i-e.start)-u)}o=v(o+h),A.length&&!s&&A.forEach((function(e){return e(o-c)})),l?(l.resetTo("y",o,-k,!0),O&&l.progress(1)):(b.y=o+"px",b.renderTransform(1))}}})),r.core.getCache(a.trigger).stRevert=$,a.startY=_,a.pins=D,a.markers=A,a.ratio=o,a.autoSpeed=s,e.style.willChange="transform"),a};function K(){return g=s.clientHeight,s.style.overflow="visible",l.style.height=g+"px",g-o.innerHeight}d.addEventListener("refresh",W),r.delayedCall(.5,(function(){return O=0})),this.scrollTop=H,this.scrollTo=function(e,t,i){var a=r.utils.clamp(0,d.maxScroll(o),isNaN(e)?n.offset(e,i):+e);t?A?r.to(n,{duration:P,scrollTop:a,overwrite:"auto",ease:f}):T(a):H(a)},this.offset=function(e,t){e=u(e)[0];var n,i=r.getProperty(e,"y"),o=d.create({trigger:e,start:t||"top top"});return x&&V([o]),n=o.start,o.kill(!1),r.set(e,{y:i}),n},this.content=function(e){return arguments.length?(s=u(e||"#smooth-content")[0]||l.children[0],D=s.getAttribute("style")||"",r.set(s,{overflow:"visible",width:"100%"}),this):s},this.wrapper=function(e){return arguments.length?(m=u(e||"#smooth-wrapper")[0]||_(s),S=m.getAttribute("style")||"",K(),r.set(m,P?{overflow:"hidden",position:"fixed",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0}:{overflow:"visible",position:"relative",width:"100%",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"}),this):m},this.effects=function(e,t){var n;if(x||(x=[]),!e)return x.slice(0);(e=u(e)).forEach((function(e){for(var t=x.length;t--;)x[t].trigger===e&&(x[t].kill(),x.splice(t,1))}));var r,i,o=t=t||{},a=o.speed,s=o.lag,l=[];for(r=0;r<e.length;r++)(i=Y(e[r],a,s,r))&&l.push(i);return(n=x).push.apply(n,l),l},this.content(t.content),this.wrapper(t.wrapper),this.render=function(e){return U(e||0===e?e:R)},this.getVelocity=function(){return I.getVelocity(-R)},d.scrollerProxy(m,{scrollTop:H,scrollHeight:function(){return l.scrollHeight},fixedMarkers:!1!==t.fixedMarkers&&!!P,content:s,getBoundingClientRect:function(){return{top:0,left:0,width:o.innerWidth,height:o.innerHeight}}}),d.defaults({scroller:m});var X=d.getAll().filter((function(e){return e.scroller===o||e.scroller===m}));X.forEach((function(e){return e.revert(!0)})),b=d.create({animation:r.to(B,{y:function(){return o.innerHeight-g},ease:"none",data:"ScrollSmoother",duration:100,onUpdate:function(){var e=M;e&&(B.y=R,z(b)),U(B.y,e),N(),L&&!A&&L(n)}}),onRefreshInit:function(){return B.y=0},id:"ScrollSmoother",scroller:o,invalidateOnRefresh:!0,start:0,refreshPriority:-9999,end:K,onScrubComplete:function(){I.reset(),F&&F(n)},scrub:P||!0,onRefresh:function(e){z(e),U(B.y)}}),this.smooth=function(e){return P=e,arguments.length?b.scrubDuration(e):b.getTween()?b.getTween().duration():0},b.getTween()&&(b.getTween().vars.ease=t.ease||f),this.scrollTrigger=b,t.effects&&this.effects(!0===t.effects?"[data-speed], [data-lag]":t.effects,{}),X.forEach((function(e){e.vars.scroller=m,e.init(e.vars,e.animation)})),this.paused=function(e){return arguments.length?(!!A!==e&&(e?(b.getTween()&&b.getTween().pause(),T(-R),I.reset(),(E=d.normalizeScroll())&&E.disable(),A=d.observe({preventDefault:!0,type:"wheel,touch,scroll",debounce:!1,onChangeY:function(){return H(-R)}})):(A.kill(),A=0,E&&E.enable(),b.progress=(-R-b.start)/(b.end-b.start),z(b))),this):!!A},this.kill=function(){n.paused(!1),z(b),b.kill();for(var e=x?x.length:0;e--;)x[e].kill();d.scrollerProxy(m),d.removeEventListener("refresh",W),m.style.cssText=S,s.style.cssText=D;var t=d.defaults({});t&&t.scroller===m&&d.defaults({scroller:o}),n.observer&&d.normalizeScroll(!1),clearInterval(w),h=null,o.removeEventListener("focusin",G)},t.normalizeScroll&&(this.observer=d.normalizeScroll({debounce:!0})),d.config(t),"overscrollBehavior"in o.getComputedStyle(l)&&r.set(l,{overscrollBehavior:"none"}),o.addEventListener("focusin",G),w=setInterval(N,250),"loading"===a.readyState||requestAnimationFrame((function(){return d.refresh()}))}return e.register=function(t){return i||(r=t||g(),m()&&window.document&&(o=window,a=document,s=a.documentElement,l=a.body),r&&(u=r.utils.toArray,c=r.utils.clamp,f=r.parseEase("expo"),d=r.core.globals().ScrollTrigger,r.core.globals("ScrollSmoother",e),l&&d&&(p=d.core._getVelocityProp,i=1))),i},n(e,[{key:"progress",get:function(){return this.scrollTrigger.animation._time/100}}]),e}();b.version="3.10.2",b.create=function(e){return h&&e&&h.content()===u(e.content)[0]?h:new b(e)},b.get=function(){return h},g()&&r.registerPlugin(b),e.ScrollSmoother=b,e.default=b,window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete window.default}(t)},68809:function(e,t){!function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r,i,o,a,s,l,u,c,d,h,f,p=function(){return r||(r=window.gsap)&&r.registerPlugin&&r},m=1,g=[],v=[],y=[],_=Date.now,b=function(e,t){return t},x=function(){var e=d.core,t=e.bridge||{},n=e._scrollers,r=e._proxies;n.push.apply(n,v),r.push.apply(r,y),v=n,y=r,b=function(e,n){return t[e](n)}},w=function(e,t){return~y.indexOf(e)&&y[y.indexOf(e)+1][t]},S=function(e){return!!~h.indexOf(e)},D=function(e,t,n,r){return e.addEventListener(t,n,{passive:!r})},A=function(e,t,n){return e.removeEventListener(t,n)},E="scrollLeft",M="scrollTop",C=function(){return f&&f.isPressed||v.cache++},T=function(e){return function(t){return t||0===t?(m&&(o.history.scrollRestoration="manual"),e(t),e.v=t,e.c=v.cache,f&&f.isPressed&&b("ss",t)):(v.cache!==e.c||b("ref"))&&(e.c=v.cache,e.v=e()),e.v}},P={s:E,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:T((function(e){return arguments.length?o.scrollTo(e,R.sc()):o.pageXOffset||a[E]||s[E]||l[E]||0}))},R={s:M,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:P,sc:T((function(e){return arguments.length?o.scrollTo(P.sc(),e):o.pageYOffset||a[M]||s[M]||l[M]||0}))},k=function(e){return r.utils.toArray(e)[0]||("string"===typeof e&&!1!==r.config().nullTargetWarn?console.warn("Element not found:",e):null)},O=function(e,t){var n=t.s,r=t.sc,i=v.indexOf(e),o=r===R.sc?1:2;return!~i&&(i=v.push(e)-1),v[i+o]||(v[i+o]=w(e,n)||(S(e)?r:function(t){return arguments.length?e[n]=t:e[n]}))},L=function(e,t,n){var r=e,i=e,o=_(),a=o,s=t||50,l=Math.max(500,3*s),u=function(e,t){var l=_();t||l-o>s?(i=r,r=e,a=o,o=l):n?r+=e:r=i+(e-i)/(l-a)*(o-a)},c=function(e){var t=a,s=i,c=_();return(e||0===e)&&e!==r&&u(e),o===a||c-a>l?0:(r+(n?s:-s))/((n?c:o)-t)*1e3};return{update:u,reset:function(){i=r=n?0:r,a=o=0},getVelocity:c}},F=function(e,t){return t&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},I=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},N=function(e){return(r=e||p())&&!i&&"undefined"!==typeof document&&document.body&&(o=window,a=document,s=a.documentElement,l=a.body,h=[o,a,s,l],r.utils.clamp,c="onpointerenter"in l?"pointer":"mouse",u=B.isTouch=o.matchMedia&&o.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in o||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,setTimeout((function(){return m=0}),500),i=1),i};P.op=R,v.cache=0;var B=function(){function e(e){this.init(e)}return e.prototype.init=function(e){i||N(r)||console.warn("Please gsap.registerPlugin(Observer)"),d||(d=r.core.globals().ScrollTrigger)&&d.core&&x();var t=e.tolerance,n=e.dragMinimum,h=e.type,p=e.target,m=e.lineHeight,v=e.debounce,y=e.preventDefault,_=e.onStop,b=e.onStopDelay,w=e.ignore,E=e.wheelSpeed,M=e.event,T=e.onDragStart,B=e.onDragEnd,j=e.onDrag,z=e.onPress,U=e.onRelease,H=e.onRight,G=e.onLeft,V=e.onUp,W=e.onDown,Z=e.onChangeX,$=e.onChangeY,q=e.onChange,Y=e.onToggleX,K=e.onToggleY,X=e.onHover,Q=e.onHoverEnd,J=e.onMove,ee=e.ignoreCheck,te=e.isNormalizer,ne=e.onGestureStart,re=e.onGestureEnd,ie=e.onWheel,oe=e.onEnable,ae=e.onDisable,se=e.onClick,le=e.scrollSpeed;this.target=p=k(p)||s,this.vars=e,w&&(w=r.utils.toArray(w)),t=t||0,n=n||0,E=E||1,le=le||1,h=h||"wheel,touch,pointer",v=!1!==v,m||(m=parseFloat(o.getComputedStyle(l).lineHeight)||22);var ue,ce,de,he,fe,pe=this,me=0,ge=0,ve=O(p,P),ye=O(p,R),_e=ve(),be=ye(),xe=("ontouchstart"in s?"touchstart,touchmove,touchcancel,touchend":h.indexOf("pointer")>=0&&!("onpointerdown"in s)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(","),we=~h.indexOf("touch")&&!~h.indexOf("pointer")&&"pointerdown"===xe[0],Se=S(p),De=p.ownerDocument||a,Ae=[0,0,0],Ee=[0,0,0],Me=function(e,t){return(pe.event=e)&&w&&~w.indexOf(e.target)||t&&we&&"touch"!==e.pointerType||ee&&ee(e)},Ce=function(){pe._vx.reset(),pe._vy.reset(),ce.pause(),_&&_(pe)},Te=function(){var e=pe.deltaX=I(Ae),n=pe.deltaY=I(Ee),r=Math.abs(e)>=t,i=Math.abs(n)>=t;q&&(r||i)&&q(pe,e,n,Ae,Ee),r&&(H&&pe.deltaX>0&&H(pe),G&&pe.deltaX<0&&G(pe),Z&&Z(pe),Y&&pe.deltaX<0!==me<0&&Y(pe),me=pe.deltaX,Ae[0]=Ae[1]=Ae[2]=0),i&&(W&&pe.deltaY>0&&W(pe),V&&pe.deltaY<0&&V(pe),$&&$(pe),K&&pe.deltaY<0!==ge<0&&K(pe),ge=pe.deltaY,Ee[0]=Ee[1]=Ee[2]=0),he&&(J(pe),he=!1),de&&(j(pe),de=!1),fe&&(ie(pe),fe=!1),ue=0},Pe=function(e,t,n){Ae[n]+=e,Ee[n]+=t,pe._vx.update(e,2===n),pe._vy.update(t,2===n),v?ue||(ue=requestAnimationFrame(Te)):Te()},Re=function(e){if(!Me(e,1)){var t=(e=F(e,y)).clientX,r=e.clientY,i=t-pe.x,o=r-pe.y,a=pe.isDragging;pe.x=t,pe.y=r,(a||Math.abs(pe.startX-t)>=n||Math.abs(pe.startY-r)>=n)&&(j&&(de=!0),a||(pe.isDragging=!0),Pe(i,o,2),a||T&&T(pe))}},ke=pe.onPress=function(e){Me(e,1)||(ce.pause(),pe.isPressed=!0,e=F(e,y),me=ge=0,pe.startX=pe.x=e.clientX,pe.startY=pe.y=e.clientY,pe._vx.reset(),pe._vy.reset(),D(te?p:De,xe[1],Re,y),pe.deltaX=pe.deltaY=0,z&&z(pe))},Oe=function(e){if(!Me(e,1)){A(te?p:De,xe[1],Re);var t=pe.isDragging;t||(pe._vx.reset(),pe._vy.reset()),pe.isDragging=pe.isGesturing=pe.isPressed=!1,_&&!te&&ce.restart(!0),B&&t&&B(pe),U&&U(pe,t)}},Le=function(e){return e.touches&&e.touches.length>1&&(pe.isGesturing=!0)&&ne(e,pe.isDragging)},Fe=function(){return(pe.isGesturing=!1)||re(pe)},Ie=function(e){if(!Me(e)){var t=ve(),n=ye();Pe((t-_e)*le,(n-be)*le,1),_e=t,be=n,_&&ce.restart(!0)}},Ne=function(e){if(!Me(e)){e=F(e,y),ie&&(fe=!0);var t=(1===e.deltaMode?m:2===e.deltaMode?o.innerHeight:1)*E;Pe(e.deltaX*t,e.deltaY*t,0),_&&!te&&ce.restart(!0)}},Be=function(e){if(!Me(e)){var t=e.clientX,n=e.clientY,r=t-pe.x,i=n-pe.y;pe.x=t,pe.y=n,J&&(he=!0),(r||i)&&Pe(r,i,2)}},je=function(e){pe.event=e,X(pe)},ze=function(e){pe.event=e,Q(pe)},Ue=function(e){return Me(e)||F(e,y)&&se(pe)};ce=pe._dc=r.delayedCall(b||.25,Ce).pause(),pe.deltaX=pe.deltaY=0,pe._vx=L(0,50,!0),pe._vy=L(0,50,!0),pe.scrollX=ve,pe.scrollY=ye,pe.isDragging=pe.isGesturing=pe.isPressed=!1,pe.enable=function(e){return pe.isEnabled||(D(Se?De:p,"scroll",C),h.indexOf("scroll")>=0&&D(Se?De:p,"scroll",Ie,y),h.indexOf("wheel")>=0&&D(p,"wheel",Ne,y),(h.indexOf("touch")>=0&&u||h.indexOf("pointer")>=0)&&(D(p,xe[0],ke,y),D(De,xe[2],Oe),D(De,xe[3],Oe),se&&D(p,"click",Ue),ne&&D(De,"gesturestart",Le),re&&D(De,"gestureend",Fe),X&&D(p,c+"enter",je),Q&&D(p,c+"leave",ze),J&&D(p,c+"move",Be)),pe.isEnabled=!0,e&&e.type&&ke(e),oe&&oe(pe)),pe},pe.disable=function(){pe.isEnabled&&(g.filter((function(e){return e!==pe&&S(e.target)})).length||A(Se?De:p,"scroll",C),A(Se?De:p,"scroll",Ie),A(p,"wheel",Ne),A(p,xe[0],ke),A(De,xe[2],Oe),A(De,xe[3],Oe),A(p,"click",Ue),A(De,"gesturestart",Le),A(De,"gestureend",Fe),A(p,c+"enter",je),A(p,c+"leave",ze),A(p,c+"move",Be),pe.isEnabled=!1,ae&&ae(pe))},pe.kill=function(){pe.disable();var e=g.indexOf(pe);e>=0&&g.splice(e,1),f===pe&&(f=0)},g.push(pe),te&&(f=pe),pe.enable(M)},n(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();B.version="3.10.2",B.create=function(e){return new B(e)},B.register=N,B.getAll=function(){return g.slice()},B.getById=function(e){return g.filter((function(t){return t.vars.id===e}))[0]},p()&&r.registerPlugin(B);var j,z,U,H,G,V,W,Z,$,q,Y,K,X,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,he,fe,pe,me,ge,ve=1,ye=Date.now,_e=ye(),be=0,xe=0,we=function(){return Q=1},Se=function(){return Q=0},De=function(e){return e},Ae=function(e){return Math.round(1e5*e)/1e5||0},Ee=function(){return!0},Me=function(){return j||Ee()&&(j=window.gsap)&&j.registerPlugin&&j},Ce=function(e){return!!~W.indexOf(e)},Te=function(e){return w(e,"getBoundingClientRect")||(Ce(e)?function(){return Xt.width=U.innerWidth,Xt.height=U.innerHeight,Xt}:function(){return st(e)})},Pe=function(e,t,n){var r=n.d,i=n.d2,o=n.a;return(o=w(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?U["inner"+i]:e["client"+i])||0}},Re=function(e,t){return!t||~y.indexOf(e)?Te(e):function(){return Xt}},ke=function(e,t){var n=t.s,r=t.d2,i=t.d,o=t.a;return(n="scroll"+r)&&(o=w(e,n))?o()-Te(e)()[i]:Ce(e)?(G[n]||V[n])-(U["inner"+r]||G["client"+r]||V["client"+r]):e[n]-e["offset"+r]},Oe=function(e,t){for(var n=0;n<re.length;n+=3)(!t||~t.indexOf(re[n+1]))&&e(re[n],re[n+1],re[n+2])},Le=function(e){return"string"===typeof e},Fe=function(e){return"function"===typeof e},Ie=function(e){return"number"===typeof e},Ne=function(e){return"object"===typeof e},Be=function(e){return Fe(e)&&e()},je=function(e,t){return function(){var n=Be(e),r=Be(t);return function(){Be(n),Be(r)}}},ze=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},Ue=function(e,t){if(e.enabled){var n=t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},He=Math.abs,Ge="left",Ve="top",We="right",Ze="bottom",$e="width",qe="height",Ye="Right",Ke="Left",Xe="Top",Qe="Bottom",Je="padding",et="margin",tt="Width",nt="Height",rt="px",it=function(e){return U.getComputedStyle(e)},ot=function(e){var t=it(e).position;e.style.position="absolute"===t||"fixed"===t?t:"relative"},at=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},st=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==it(e)[J]&&j.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},lt=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},ut=function(e){var t,n=[],r=e.labels,i=e.duration();for(t in r)n.push(r[t]/i);return n},ct=function(e){return function(t){return j.utils.snap(ut(e),t)}},dt=function(e){var t=j.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort((function(e,t){return e-t}));return n?function(e,r,i){var o;if(void 0===i&&(i=.001),!r)return t(e);if(r>0){for(e-=i,o=0;o<n.length;o++)if(n[o]>=e)return n[o];return n[o-1]}for(o=n.length,e+=i;o--;)if(n[o]<=e)return n[o];return n[0]}:function(n,r,i){void 0===i&&(i=.001);var o=t(n);return!r||Math.abs(o-n)<i||o-n<0===r<0?o:t(r<0?n-e:n+e)}},ht=function(e){return function(t,n){return dt(ut(e))(t,n.direction)}},ft=function(e,t,n,r){return n.split(",").forEach((function(n){return e(t,n,r)}))},pt=function(e,t,n,r){return e.addEventListener(t,n,{passive:!r})},mt=function(e,t,n){return e.removeEventListener(t,n)},gt=function(e,t,n){return n&&n.wheelHandler&&e(t,"wheel",n)},vt={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},yt={toggleActions:"play",anticipatePin:0},_t={top:0,left:0,center:.5,bottom:1,right:1},bt=function(e,t){if(Le(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in _t?_t[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},xt=function(e,t,n,r,i,o,a,s){var l=i.startColor,u=i.endColor,c=i.fontSize,d=i.indent,h=i.fontWeight,f=H.createElement("div"),p=Ce(n)||"fixed"===w(n,"pinType"),m=-1!==e.indexOf("scroller"),g=p?V:n,v=-1!==e.indexOf("start"),y=v?l:u,_="border-color:"+y+";font-size:"+c+";color:"+y+";font-weight:"+h+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return _+="position:"+((m||s)&&p?"fixed;":"absolute;"),(m||s||!p)&&(_+=(r===R?We:Ze)+":"+(o+parseFloat(d))+"px;"),a&&(_+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),f._isStart=v,f.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),f.style.cssText=_,f.innerText=t||0===t?e+"-"+t:e,g.children[0]?g.insertBefore(f,g.children[0]):g.appendChild(f),f._offset=f["offset"+r.op.d2],wt(f,0,r,v),f},wt=function(e,t,n,r){var i={display:"block"},o=n[r?"os2":"p2"],a=n[r?"p2":"os2"];e._isFlipped=r,i[n.a+"Percent"]=r?-100:0,i[n.a]=r?"1px":0,i["border"+o+tt]=1,i["border"+a+tt]=0,i[n.p]=t+"px",j.set(e,i)},St=[],Dt={},At=function(){return ye()-be>34&&Ht()},Et=function(){se&&se.isPressed||(v.cache++,he||(he=requestAnimationFrame(Ht)),be||Ot("scrollStart"),be=ye())},Mt=function(){v.cache++,!X&&!ae&&!H.fullscreenElement&&(!le||ce!==U.innerWidth||Math.abs(U.innerHeight-ue)>.25*U.innerHeight)&&Z.restart(!0)},Ct={},Tt=[],Pt=[],Rt=function(e){var t,n=j.ticker.frame,r=[],i=0;if(pe!==n||ve){for(It();i<Pt.length;i+=4)(t=U.matchMedia(Pt[i]).matches)!==Pt[i+3]&&(Pt[i+3]=t,t?r.push(i):It(1,Pt[i])||Fe(Pt[i+2])&&Pt[i+2]());for(Ft(),i=0;i<r.length;i++)t=r[i],fe=Pt[t],Pt[t+2]=Pt[t+1](e);fe=0,z&&jt(0,1),pe=n,Ot("matchMedia")}},kt=function e(){return mt(nn,"scrollEnd",e)||jt(!0)},Ot=function(e){return Ct[e]&&Ct[e].map((function(e){return e()}))||Tt},Lt=[],Ft=function(e){for(var t=0;t<Lt.length;t+=5)e&&Lt[t+4]!==e||(Lt[t].style.cssText=Lt[t+1],Lt[t].getBBox&&Lt[t].setAttribute("transform",Lt[t+2]||""),Lt[t+3].uncache=1)},It=function(e,t){var n;for(ee=0;ee<St.length;ee++)n=St[ee],t&&n.media!==t||(e?n.kill(1):n.revert());t&&Ft(t),t||Ot("revert")},Nt=function(){return v.cache++&&v.forEach((function(e){return"function"===typeof e&&(e.rec=0)}))},Bt=0,jt=function(e,t){if(!be||e){me=!0;var n=Ot("refreshInit");ie&&nn.sort(),t||It(),St.slice(0).forEach((function(e){return e.refresh()})),St.forEach((function(e){return"max"===e.vars.end&&e.setPositions(e.start,ke(e.scroller,e._dir))})),n.forEach((function(e){return e&&e.render&&e.render(-1)})),Nt(),Z.pause(),Bt++,me=!1,Ot("refresh")}else pt(nn,"scrollEnd",kt)},zt=0,Ut=1,Ht=function(){if(!me){ge&&ge.update(0),nn.isUpdating=!0;var e=St.length,t=ye(),n=t-_e>=50,r=e&&St[0].scroll();if(Ut=zt>r?-1:1,zt=r,n&&(be&&!Q&&t-be>200&&(be=0,Ot("scrollEnd")),Y=_e,_e=t),Ut<0){for(ee=e;ee-->0;)St[ee]&&St[ee].update(0,n);Ut=1}else for(ee=0;ee<e;ee++)St[ee]&&St[ee].update(0,n);nn.isUpdating=!1}he=0},Gt=[Ge,Ve,Ze,We,et+Qe,et+Ye,et+Xe,et+Ke,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Vt=Gt.concat([$e,qe,"boxSizing","max"+tt,"max"+nt,"position",et,Je,Je+Xe,Je+Ye,Je+Qe,Je+Ke]),Wt=function(e,t,n){qt(n);var r=e._gsap;if(r.spacerIsNative)qt(r.spacerState);else if(e.parentNode===t){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}},Zt=function(e,t,n,r){if(e.parentNode!==t){for(var i,o=Gt.length,a=t.style,s=e.style;o--;)a[i=Gt[o]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),s[Ze]=s[We]=a.flexBasis="auto",a.overflow="visible",a.boxSizing="border-box",a[$e]=lt(e,P)+rt,a[qe]=lt(e,R)+rt,a[Je]=s[et]=s[Ve]=s[Ge]="0",qt(r),s[$e]=s["max"+tt]=n[$e],s[qe]=s["max"+nt]=n[qe],s[Je]=n[Je],e.parentNode.insertBefore(t,e),t.appendChild(e)}},$t=/([A-Z])/g,qt=function(e){if(e){var t,n,r=e.t.style,i=e.length,o=0;for((e.t._gsap||j.core.getCache(e.t)).uncache=1;o<i;o+=2)n=e[o+1],t=e[o],n?r[t]=n:r[t]&&r.removeProperty(t.replace($t,"-$1").toLowerCase())}},Yt=function(e){for(var t=Vt.length,n=e.style,r=[],i=0;i<t;i++)r.push(Vt[i],n[Vt[i]]);return r.t=e,r},Kt=function(e,t,n){for(var r,i=[],o=e.length,a=n?8:0;a<o;a+=2)r=e[a],i.push(r,r in t?t[r]:e[a+1]);return i.t=e.t,i},Xt={left:0,top:0},Qt=function(e,t,n,r,i,o,a,s,l,u,c,d,h){Fe(e)&&(e=e(s)),Le(e)&&"max"===e.substr(0,3)&&(e=d+("="===e.charAt(4)?bt("0"+e.substr(3),n):0));var f,p,m,g=h?h.time():0;if(h&&h.seek(0),Ie(e))a&&wt(a,n,r,!0);else{Fe(t)&&(t=t(s));var v,y,_,b,x=e.split(" ");m=k(t)||V,(v=st(m)||{})&&(v.left||v.top)||"none"!==it(m).display||(b=m.style.display,m.style.display="block",v=st(m),b?m.style.display=b:m.style.removeProperty("display")),y=bt(x[0],v[r.d]),_=bt(x[1]||"0",n),e=v[r.p]-l[r.p]-u+y+i-_,a&&wt(a,_,r,n-_<20||a._isStart&&_>20),n-=n-_}if(o){var w=e+n,S=o._isStart;f="scroll"+r.d2,wt(o,w,r,S&&w>20||!S&&(c?Math.max(V[f],G[f]):o.parentNode[f])<=w+1),c&&(l=st(a),c&&(o.style[r.op.p]=l[r.op.p]-r.op.m-o._offset+rt))}return h&&m&&(f=st(m),h.seek(d),p=st(m),h._caScrollDist=f[r.p]-p[r.p],e=e/h._caScrollDist*d),h&&h.seek(g),h?e:Math.round(e)},Jt=/(webkit|moz|length|cssText|inset)/i,en=function(e,t,n,r){if(e.parentNode!==t){var i,o,a=e.style;if(t===V){for(i in e._stOrig=a.cssText,o=it(e))+i||Jt.test(i)||!o[i]||"string"!==typeof a[i]||"0"===i||(a[i]=o[i]);a.top=n,a.left=r}else a.cssText=e._stOrig;j.core.getCache(e).uncache=1,t.appendChild(e)}},tn=function(e,t){var n,r,i=O(e,t),o="_scroll"+t.p2,a=function t(a,s,l,u,c){var d=t.tween,h=s.onComplete,f={};return l=l||i(),c=u&&c||0,u=u||a-l,d&&d.kill(),n=Math.round(l),s[o]=a,s.modifiers=f,f[o]=function(e){return(e=Ae(i()))!==n&&e!==r&&Math.abs(e-n)>2&&Math.abs(e-r)>2?(d.kill(),t.tween=0):e=l+u*d.ratio+c*d.ratio*d.ratio,r=n,n=Ae(e)},s.onComplete=function(){t.tween=0,h&&h.call(d)},d=t.tween=j.to(e,s)};return e[o]=i,i.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},pt(e,"wheel",i.wheelHandler),a},nn=function(){function e(t,n){z||e.register(j)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),xe){var r,i,o,a,s,l,u,c,d,h,f,p,m,g,v,_,b,x,S,D,A,E,M,C,T,L,F,I,N,B,z,W,Z,K,J,te,ne,re,ae=t=at(Le(t)||Ie(t)||t.nodeType?{trigger:t}:t,yt),se=ae.onUpdate,le=ae.toggleClass,ue=ae.id,ce=ae.onToggle,he=ae.onRefresh,pe=ae.scrub,_e=ae.trigger,we=ae.pin,Se=ae.pinSpacing,Ee=ae.invalidateOnRefresh,Me=ae.anticipatePin,Te=ae.onScrubComplete,Oe=ae.onSnapComplete,Be=ae.once,je=ae.snap,Ge=ae.pinReparent,Ve=ae.pinSpacer,We=ae.containerAnimation,Ze=ae.fastScrollEnd,ut=ae.preventOverlaps,ft=t.horizontal||t.containerAnimation&&!1!==t.horizontal?P:R,gt=!pe&&0!==pe,_t=k(t.scroller||U),wt=j.core.getCache(_t),At=Ce(_t),Ct="fixed"===("pinType"in t?t.pinType:w(_t,"pinType")||At&&"fixed"),Tt=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Pt=gt&&t.toggleActions.split(" "),Rt="markers"in t?t.markers:yt.markers,Ot=At?0:parseFloat(it(_t)["border"+ft.p2+tt])||0,Lt=this,Ft=t.onRefreshInit&&function(){return t.onRefreshInit(Lt)},It=Pe(_t,At,ft),Nt=Re(_t,At),Bt=0,jt=O(_t,ft);if(Lt.media=fe,Lt._dir=ft,Me*=45,Lt.scroller=_t,Lt.scroll=We?We.time.bind(We):jt,a=jt(),Lt.vars=t,n=n||t.animation,"refreshPriority"in t&&(ie=1,-9999===t.refreshPriority&&(ge=Lt)),wt.tweenScroll=wt.tweenScroll||{top:tn(_t,R),left:tn(_t,P)},Lt.tweenTo=r=wt.tweenScroll[ft.p],Lt.scrubDuration=function(e){(z=Ie(e)&&e)?B?B.duration(e):B=j.to(n,{ease:"expo",totalProgress:"+=0.001",duration:z,paused:!0,onComplete:function(){return Te&&Te(Lt)}}):(B&&B.progress(1).kill(),B=0)},n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.render(0,!0,!0),Lt.animation=n.pause(),n.scrollTrigger=Lt,Lt.scrubDuration(pe),I=0,ue||(ue=n.vars.id)),St.push(Lt),je&&(Ne(je)&&!je.push||(je={snapTo:je}),"scrollBehavior"in V.style&&j.set(At?[V,G]:_t,{scrollBehavior:"auto"}),o=Fe(je.snapTo)?je.snapTo:"labels"===je.snapTo?ct(n):"labelsDirectional"===je.snapTo?ht(n):!1!==je.directional?function(e,t){return dt(je.snapTo)(e,X?0:t.direction)}:j.utils.snap(je.snapTo),W=je.duration||{min:.1,max:2},W=Ne(W)?q(W.min,W.max):q(W,W),Z=j.delayedCall(je.delay||z/2||.1,(function(){if(Math.abs(Lt.getVelocity())<10&&!Q&&Bt!==jt()){var e=n&&!gt?n.totalProgress():Lt.progress,t=(e-N)/(ye()-Y)*1e3||0,i=j.utils.clamp(-Lt.progress,1-Lt.progress,He(t/2)*t/.185),a=Lt.progress+(!1===je.inertia?0:i),s=q(0,1,o(a,Lt)),c=jt(),d=Math.round(l+s*m),h=je,f=h.onStart,p=h.onInterrupt,g=h.onComplete,v=r.tween;if(c<=u&&c>=l&&d!==c){if(v&&!v._initted&&v.data<=He(d-c))return;!1===je.inertia&&(i=s-Lt.progress),r(d,{duration:W(He(.185*Math.max(He(a-e),He(s-e))/t/.05||0)),ease:je.ease||"power3",data:He(d-c),onInterrupt:function(){return Z.restart(!0)&&p&&p(Lt)},onComplete:function(){Lt.update(),Bt=jt(),I=N=n&&!gt?n.totalProgress():Lt.progress,Oe&&Oe(Lt),g&&g(Lt)}},c,i*m,d-c-i*m),f&&f(Lt,r.tween)}}else Lt.isActive&&Z.restart(!0)})).pause()),ue&&(Dt[ue]=Lt),(re=(_e=Lt.trigger=k(_e||we))&&_e._gsap&&_e._gsap.stRevert)&&(re=re(Lt)),we=!0===we?_e:k(we),Le(le)&&(le={targets:_e,className:le}),we&&(!1===Se||Se===et||(Se=!(!Se&&"flex"===it(we.parentNode).display)&&Je),Lt.pin=we,!1!==t.force3D&&j.set(we,{force3D:!0}),(i=j.core.getCache(we)).spacer?g=i.pinState:(Ve&&((Ve=k(Ve))&&!Ve.nodeType&&(Ve=Ve.current||Ve.nativeElement),i.spacerIsNative=!!Ve,Ve&&(i.spacerState=Yt(Ve))),i.spacer=b=Ve||H.createElement("div"),b.classList.add("pin-spacer"),ue&&b.classList.add("pin-spacer-"+ue),i.pinState=g=Yt(we)),Lt.spacer=b=i.spacer,F=it(we),M=F[Se+ft.os2],S=j.getProperty(we),D=j.quickSetter(we,ft.a,rt),Zt(we,b,F),_=Yt(we)),Rt){p=Ne(Rt)?at(Rt,vt):vt,h=xt("scroller-start",ue,_t,ft,p,0),f=xt("scroller-end",ue,_t,ft,p,0,h),x=h["offset"+ft.op.d2];var zt=k(w(_t,"content")||_t);c=this.markerStart=xt("start",ue,zt,ft,p,x,0,We),d=this.markerEnd=xt("end",ue,zt,ft,p,x,0,We),We&&(ne=j.quickSetter([c,d],ft.a,rt)),Ct||y.length&&!0===w(_t,"fixedMarkers")||(ot(At?V:_t),j.set([h,f],{force3D:!0}),T=j.quickSetter(h,ft.a,rt),L=j.quickSetter(f,ft.a,rt))}if(We){var Ht=We.vars.onUpdate,Gt=We.vars.onUpdateParams;We.eventCallback("onUpdate",(function(){Lt.update(0,0,1),Ht&&Ht.apply(Gt||[])}))}Lt.previous=function(){return St[St.indexOf(Lt)-1]},Lt.next=function(){return St[St.indexOf(Lt)+1]},Lt.revert=function(e){var t=!1!==e||!Lt.enabled,r=X;t!==Lt.isReverted&&(t&&(Lt.scroll.rec||!X||!me||(Lt.scroll.rec=jt()),J=Math.max(jt(),Lt.scroll.rec||0),K=Lt.progress,te=n&&n.progress()),c&&[c,d,h,f].forEach((function(e){return e.style.display=t?"none":"block"})),t&&(X=1),Lt.update(t),X=r,we&&(t?Wt(we,b,g):(!Ge||!Lt.isActive)&&Zt(we,b,it(we),C)),Lt.isReverted=t)},Lt.refresh=function(r,i){if(!X&&Lt.enabled||i)if(we&&r&&be)pt(e,"scrollEnd",kt);else{!me&&Ft&&Ft(Lt),X=1,B&&B.pause(),Ee&&n&&n.time(-.01,!0).invalidate(),Lt.isReverted||Lt.revert();for(var o,p,y,x,w,D,M,T,L,F,I=It(),N=Nt(),z=We?We.duration():ke(_t,ft),U=0,H=0,G=t.end,W=t.endTrigger||_e,$=t.start||(0!==t.start&&_e?we?"0 0":"0 100%":0),q=Lt.pinnedContainer=t.pinnedContainer&&k(t.pinnedContainer),Y=_e&&Math.max(0,St.indexOf(Lt))||0,Q=Y;Q--;)(D=St[Q]).end||D.refresh(0,1)||(X=1),!(M=D.pin)||M!==_e&&M!==we||D.isReverted||(F||(F=[]),F.unshift(D),D.revert()),D!==St[Q]&&(Y--,Q--);for(Fe($)&&($=$(Lt)),l=Qt($,_e,I,ft,jt(),c,h,Lt,N,Ot,Ct,z,We)||(we?-.001:0),Fe(G)&&(G=G(Lt)),Le(G)&&!G.indexOf("+=")&&(~G.indexOf(" ")?G=(Le($)?$.split(" ")[0]:"")+G:(U=bt(G.substr(2),I),G=Le($)?$:l+U,W=_e)),u=Math.max(l,Qt(G||(W?"100% 0":z),W,I,ft,jt()+U,d,f,Lt,N,Ot,Ct,z,We))||-.001,m=u-l||(l-=.01)&&.001,U=0,Q=Y;Q--;)(M=(D=St[Q]).pin)&&D.start-D._pinPush<l&&!We&&D.end>0&&(o=D.end-D.start,M!==_e&&M!==q||Ie($)||(U+=o*(1-D.progress)),M===we&&(H+=o));if(l+=U,u+=U,Lt._pinPush=H,c&&U&&((o={})[ft.a]="+="+U,q&&(o[ft.p]="-="+jt()),j.set([c,d],o)),we)o=it(we),x=ft===R,y=jt(),A=parseFloat(S(ft.a))+H,!z&&u>1&&((At?V:_t).style["overflow-"+ft.a]="scroll"),Zt(we,b,o),_=Yt(we),p=st(we,!0),T=Ct&&O(_t,x?P:R)(),Se&&((C=[Se+ft.os2,m+H+rt]).t=b,(Q=Se===Je?lt(we,ft)+m+H:0)&&C.push(ft.d,Q+rt),qt(C),Ct&&jt(J)),Ct&&((w={top:p.top+(x?y-l:T)+rt,left:p.left+(x?T:y-l)+rt,boxSizing:"border-box",position:"fixed"})[$e]=w["max"+tt]=Math.ceil(p.width)+rt,w[qe]=w["max"+nt]=Math.ceil(p.height)+rt,w[et]=w[et+Xe]=w[et+Ye]=w[et+Qe]=w[et+Ke]="0",w[Je]=o[Je],w[Je+Xe]=o[Je+Xe],w[Je+Ye]=o[Je+Ye],w[Je+Qe]=o[Je+Qe],w[Je+Ke]=o[Je+Ke],v=Kt(g,w,Ge)),n?(L=n._initted,oe(1),n.render(n.duration(),!0,!0),E=S(ft.a)-A+m+H,m!==E&&v.splice(v.length-2,2),n.render(0,!0,!0),L||n.invalidate(),oe(0)):E=m;else if(_e&&jt()&&!We)for(p=_e.parentNode;p&&p!==V;)p._pinOffset&&(l-=p._pinOffset,u-=p._pinOffset),p=p.parentNode;F&&F.forEach((function(e){return e.revert(!1)})),Lt.start=l,Lt.end=u,a=s=jt(),We||(a<J&&jt(J),Lt.scroll.rec=0),Lt.revert(!1),Z&&Lt.isActive&&jt(l+m*K),X=0,n&&gt&&(n._initted||te)&&n.progress()!==te&&n.progress(te,!0).render(n.time(),!0,!0),(K!==Lt.progress||We)&&(n&&!gt&&n.totalProgress(K,!0),Lt.progress=K,Lt.update(0,0,1)),we&&Se&&(b._pinOffset=Math.round(Lt.progress*E)),he&&he(Lt)}},Lt.getVelocity=function(){return(jt()-s)/(ye()-Y)*1e3||0},Lt.endAnimation=function(){ze(Lt.callbackAnimation),n&&(B?B.progress(1):n.paused()?gt||ze(n,Lt.direction<0,1):ze(n,n.reversed()))},Lt.labelToScroll=function(e){return n&&n.labels&&(l||Lt.refresh()||l)+n.labels[e]/n.duration()*m||0},Lt.getTrailing=function(e){var t=St.indexOf(Lt),n=Lt.direction>0?St.slice(0,t).reverse():St.slice(t+1);return(Le(e)?n.filter((function(t){return t.vars.preventOverlaps===e})):n).filter((function(e){return Lt.direction>0?e.end<=l:e.start>=u}))},Lt.update=function(e,t,i){if(!We||i||e){var o,c,d,f,p,g,y,x=Lt.scroll(),w=e?0:(x-l)/m,S=w<0?0:w>1?1:w||0,C=Lt.progress;if(t&&(s=a,a=We?jt():x,je&&(N=I,I=n&&!gt?n.totalProgress():S)),Me&&!S&&we&&!X&&!ve&&be&&l<x+(x-s)/(ye()-Y)*Me&&(S=1e-4),S!==C&&Lt.enabled){if(f=(p=(o=Lt.isActive=!!S&&S<1)!==(!!C&&C<1))||!!S!==!!C,Lt.direction=S>C?1:-1,Lt.progress=S,f&&!X&&(c=S&&!C?0:1===S?1:1===C?2:3,gt&&(d=!p&&"none"!==Pt[c+1]&&Pt[c+1]||Pt[c],y=n&&("complete"===d||"reset"===d||d in n))),ut&&(p||y)&&(y||pe||!n)&&(Fe(ut)?ut(Lt):Lt.getTrailing(ut).forEach((function(e){return e.endAnimation()}))),gt||(!B||X||ve?n&&n.totalProgress(S,!!X):((We||ge&&ge!==Lt)&&B.render(B._dp._time-B._start),B.resetTo?B.resetTo("totalProgress",S,n._tTime/n._tDur):(B.vars.totalProgress=S,B.invalidate().restart()))),we)if(e&&Se&&(b.style[Se+ft.os2]=M),Ct){if(f){if(g=!e&&S>C&&u+1>x&&x+1>=ke(_t,ft),Ge)if(e||!o&&!g)en(we,b);else{var P=st(we,!0),k=x-l;en(we,V,P.top+(ft===R?k:0)+rt,P.left+(ft===R?0:k)+rt)}qt(o||g?v:_),E!==m&&S<1&&o||D(A+(1!==S||g?0:E))}}else D(Ae(A+E*S));je&&!r.tween&&!X&&!ve&&Z.restart(!0),le&&(p||Be&&S&&(S<1||!de))&&$(le.targets).forEach((function(e){return e.classList[o||Be?"add":"remove"](le.className)})),se&&!gt&&!e&&se(Lt),f&&!X?(gt&&(y&&("complete"===d?n.pause().totalProgress(1):"reset"===d?n.restart(!0).pause():"restart"===d?n.restart(!0):n[d]()),se&&se(Lt)),!p&&de||(ce&&p&&Ue(Lt,ce),Tt[c]&&Ue(Lt,Tt[c]),Be&&(1===S?Lt.kill(!1,1):Tt[c]=0),p||Tt[c=1===S?1:3]&&Ue(Lt,Tt[c])),Ze&&!o&&Math.abs(Lt.getVelocity())>(Ie(Ze)?Ze:2500)&&(ze(Lt.callbackAnimation),B?B.progress(1):ze(n,!S,1))):gt&&se&&!X&&se(Lt)}if(L){var O=We?x/We.duration()*(We._caScrollDist||0):x;T(O+(h._isFlipped?1:0)),L(O)}ne&&ne(-x/We.duration()*(We._caScrollDist||0))}},Lt.enable=function(t,n){Lt.enabled||(Lt.enabled=!0,pt(_t,"resize",Mt),pt(At?H:_t,"scroll",Et),Ft&&pt(e,"refreshInit",Ft),!1!==t&&(Lt.progress=K=0,a=s=Bt=jt()),!1!==n&&Lt.refresh())},Lt.getTween=function(e){return e&&r?r.tween:B},Lt.setPositions=function(e,t){we&&(A+=e-l,E+=t-e-m),Lt.start=l=e,Lt.end=u=t,m=t-e,Lt.update()},Lt.disable=function(t,n){if(Lt.enabled&&(!1!==t&&Lt.revert(),Lt.enabled=Lt.isActive=!1,n||B&&B.pause(),J=0,i&&(i.uncache=1),Ft&&mt(e,"refreshInit",Ft),Z&&(Z.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!At)){for(var o=St.length;o--;)if(St[o].scroller===_t&&St[o]!==Lt)return;mt(_t,"resize",Mt),mt(_t,"scroll",Et)}},Lt.kill=function(e,r){Lt.disable(e,r),B&&!r&&B.kill(),ue&&delete Dt[ue];var o=St.indexOf(Lt);o>=0&&St.splice(o,1),o===ee&&Ut>0&&ee--,o=0,St.forEach((function(e){return e.scroller===Lt.scroller&&(o=1)})),o||(Lt.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.render(-1),r||n.kill()),c&&[c,d,h,f].forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),we&&(i&&(i.uncache=1),o=0,St.forEach((function(e){return e.pin===we&&o++})),o||(i.spacer=0)),t.onKill&&t.onKill(Lt)},Lt.enable(!1,!1),re&&re(Lt),n&&n.add&&!m?j.delayedCall(.01,(function(){return l||u||Lt.refresh()}))&&(m=.01)&&(l=u=0):Lt.refresh()}else this.update=this.refresh=this.kill=De},e.register=function(t){return z||(j=t||Me(),Ee()&&window.document&&e.enable(),z=xe),z},e.defaults=function(e){if(e)for(var t in e)yt[t]=e[t];return yt},e.disable=function(e,t){xe=0,St.forEach((function(n){return n[t?"kill":"disable"](e)})),mt(U,"wheel",Et),mt(H,"scroll",Et),clearInterval(K),mt(H,"touchcancel",De),mt(V,"touchstart",De),ft(mt,H,"pointerdown,touchstart,mousedown",we),ft(mt,H,"pointerup,touchend,mouseup",Se),Z.kill(),Oe(mt);for(var n=0;n<v.length;n+=3)gt(mt,v[n],v[n+1]),gt(mt,v[n],v[n+2])},e.enable=function(){if(U=window,H=document,G=H.documentElement,V=H.body,j&&($=j.utils.toArray,q=j.utils.clamp,oe=j.core.suppressOverwrites||De,j.core.globals("ScrollTrigger",e),V)){xe=1,e.isTouch=U.matchMedia&&U.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in U||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,W=[U,H,G,V],ue=U.innerHeight,ce=U.innerWidth,B.register(j),pt(H,"scroll",Et);var t,n,r=V.style,i=r.borderTopStyle;for(r.borderTopStyle="solid",t=st(V),R.m=Math.round(t.top+R.sc())||0,P.m=Math.round(t.left+P.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),K=setInterval(At,250),j.delayedCall(.5,(function(){return ve=0})),pt(H,"touchcancel",De),pt(V,"touchstart",De),ft(pt,H,"pointerdown,touchstart,mousedown",we),ft(pt,H,"pointerup,touchend,mouseup",Se),J=j.utils.checkPrefix("transform"),Vt.push(J),z=ye(),Z=j.delayedCall(.2,jt).pause(),re=[H,"visibilitychange",function(){var e=U.innerWidth,t=U.innerHeight;H.hidden?(te=e,ne=t):te===e&&ne===t||Mt()},H,"DOMContentLoaded",jt,U,"load",jt,U,"resize",Mt],Oe(pt),St.forEach((function(e){return e.enable(0,1)})),n=0;n<v.length;n+=3)gt(mt,v[n],v[n+1]),gt(mt,v[n],v[n+2])}},e.config=function(t){"limitCallbacks"in t&&(de=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(K)||(K=n)&&setInterval(At,n),"ignoreMobileResize"in t&&(le=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Oe(mt)||Oe(pt,t.autoRefreshEvents||"none"),ae=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=k(e),r=v.indexOf(n),i=Ce(n);~r&&v.splice(r,i?6:2),t&&(i?y.unshift(U,t,V,t,G,t):y.unshift(n,t))},e.matchMedia=function(e){var t,n,r,i,o;for(n in e)r=Pt.indexOf(n),i=e[n],fe=n,"all"===n?i():(t=U.matchMedia(n))&&(t.matches&&(o=i()),~r?(Pt[r+1]=je(Pt[r+1],i),Pt[r+2]=je(Pt[r+2],o)):(r=Pt.length,Pt.push(n,i,o),t.addListener?t.addListener(Rt):t.addEventListener("change",Rt)),Pt[r+3]=t.matches),fe=0;return Pt},e.clearMatchMedia=function(e){e||(Pt.length=0),(e=Pt.indexOf(e))>=0&&Pt.splice(e,4)},e.isInViewport=function(e,t,n){var r=(Le(e)?k(e):e).getBoundingClientRect(),i=r[n?$e:qe]*t||0;return n?r.right-i>0&&r.left+i<U.innerWidth:r.bottom-i>0&&r.top+i<U.innerHeight},e.positionInViewport=function(e,t,n){Le(e)&&(e=k(e));var r=e.getBoundingClientRect(),i=r[n?$e:qe],o=null==t?i/2:t in _t?_t[t]*i:~t.indexOf("%")?parseFloat(t)*i/100:parseFloat(t)||0;return n?(r.left+o)/U.innerWidth:(r.top+o)/U.innerHeight},e}();nn.version="3.10.2",nn.saveStyles=function(e){return e?$(e).forEach((function(e){if(e&&e.style){var t=Lt.indexOf(e);t>=0&&Lt.splice(t,5),Lt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),j.core.getCache(e),fe)}})):Lt},nn.revert=function(e,t){return It(!e,t)},nn.create=function(e,t){return new nn(e,t)},nn.refresh=function(e){return e?Mt():(z||nn.register())&&jt(!0)},nn.update=Ht,nn.clearScrollMemory=Nt,nn.maxScroll=function(e,t){return ke(e,t?P:R)},nn.getScrollFunc=function(e,t){return O(k(e),t?P:R)},nn.getById=function(e){return Dt[e]},nn.getAll=function(){return St.filter((function(e){return"ScrollSmoother"!==e.vars.id}))},nn.isScrolling=function(){return!!be},nn.snapDirectional=dt,nn.addEventListener=function(e,t){var n=Ct[e]||(Ct[e]=[]);~n.indexOf(t)||n.push(t)},nn.removeEventListener=function(e,t){var n=Ct[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},nn.batch=function(e,t){var n,r=[],i={},o=t.interval||.016,a=t.batchMax||1e9,s=function(e,t){var n=[],r=[],i=j.delayedCall(o,(function(){t(n,r),n=[],r=[]})).pause();return function(e){n.length||i.restart(!0),n.push(e.trigger),r.push(e),a<=n.length&&i.progress(1)}};for(n in t)i[n]="on"===n.substr(0,2)&&Fe(t[n])&&"onRefreshInit"!==n?s(n,t[n]):t[n];return Fe(a)&&(a=a(),pt(nn,"refresh",(function(){return a=t.batchMax()}))),$(e).forEach((function(e){var t={};for(n in i)t[n]=i[n];t.trigger=e,r.push(nn.create(t))})),r};var rn=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},on=function(e){!0===e?(V.style.removeProperty("touch-action"),G.style.removeProperty("touch-action")):V.style.touchAction=G.style.touchAction=e?"pan-"+e:"none"},an=function(e){Ne(e)||(e={}),e.preventDefault=e.isNormalizer=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,r,i,o,a,s,l,u,c=e,d=c.normalizeScrollX,h=c.momentum,f=0,p=O(G,R),m=O(G,P),g=1,v=Fe(h)?function(){return h(t)}:function(){return h||2.8},y=function(){return f=ye()},_=function(){return r=!1},b=De,x=De,w=function(){n=ke(G,R),x=q(0,n),d&&(b=q(0,ke(G,P))),i=Bt},S=nn.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),D=function(){if(r)return requestAnimationFrame(_),!0;r=!0},A=function(){w(),o.isActive()&&o.vars.scrollY>n&&o.resetTo("scrollY",ke(G,R))};return e.ignoreCheck=function(e){return S&&"touchmove"===e.type&&D()||g>1||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){var e=g;g=U.visualViewport&&U.visualViewport.scale||1,o.pause(),e!==g&&on(g>1||!d&&"x"),r=!1,a=m(),s=p(),w(),i=Bt},e.onRelease=e.onGestureStart=function(e,t){var n=e.event,r=n.changedTouches?n.changedTouches[0]:n;if(!t||Math.abs(e.x-e.startX)<=3&&Math.abs(e.y-e.startY)<=3)j.delayedCall(.05,(function(){if(ye()-f>300&&!n.defaultPrevented)if(n.target.click)n.target.click();else if(l.createEvent){var e=l.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,U,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}})),u.restart(!0);else{var i,a,s=v();d&&(a=(i=m())+.05*s*-e.velocityX/.227/g,s*=rn(m,i,a,ke(G,P)),o.vars.scrollX=b(a)),a=(i=p())+.05*s*-e.velocityY/.227/g,s*=rn(p,i,a,ke(G,R)),o.vars.scrollY=x(a),o.invalidate().duration(s).play(.01)}},e.onWheel=function(){return o._ts&&o.pause()},e.onChange=function(e,t,n,r,o){Bt!==i&&w(),t&&d&&m(b(r[2]===t?a+(e.startX-e.x)/g:m()+t-r[1])),n&&p(x(o[2]===n?s+(e.startY-e.y)/g:p()+n-o[1])),Ht()},e.onEnable=function(e){on(!d&&"x"),pt(U,"resize",A),e.target.addEventListener("click",y,{capture:!0})},e.onDisable=function(e){on(!0),mt(U,"resize",A),mt(e.target,"click",y)},t=new B(e),l=t.target.ownerDocument||H,u=t._dc,o=j.to(t,{ease:"power4",paused:!0,scrollX:d?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:u.vars.onComplete}),t};nn.sort=function(e){return St.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},nn.observe=function(e){return new B(e)},nn.normalizeScroll=function(e){if("undefined"===typeof e)return se;if(!0===e&&se)return se.enable();var t=e instanceof B;return se&&(!1===e||t&&e!==se)&&se.kill(),e&&!t&&(e=an(e)),se=e&&e.enable()},nn.core={_getVelocityProp:L,_scrollers:v,_proxies:y,bridge:{ss:function(){be||Ot("scrollStart"),be=ye()},ref:function(){return X}}},Me()&&j.registerPlugin(nn),e.ScrollTrigger=nn,e.default=nn,window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete window.default}(t)},78336:function(e,t){!function(e){"use strict";var t=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function n(e){var t=e.nodeType,r="";if(1===t||9===t||11===t){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===t||4===t)return e.nodeValue;return r}var r,i,o,a=/(?:\r|\n|\t\t)/g,s=/(?:\s\s+)/g,l=function(){r=document,i=window,o=1},u=function(e){return i.getComputedStyle(e)},c=Array.isArray,d=[].slice,h=function(e,t){var n;return c(e)?e:"string"===(n=typeof e)&&!t&&e?d.call(r.querySelectorAll(e),0):e&&"object"===n&&"length"in e?d.call(e,0):e?[e]:[]},f=function(e){return"absolute"===e.position||!0===e.absolute},p=function(e,t){for(var n,r=t.length;--r>-1;)if(n=t[r],e.substr(0,n.length)===n)return n.length},m=" style='position:relative;display:inline-block;'",g=function(e,t){void 0===e&&(e="");var n=~e.indexOf("++"),r=1;return n&&(e=e.split("++").join("")),function(){return"<"+t+m+(e?" class='"+e+(n?r++:"")+"'>":">")}},v=function e(t,n,r){var i=t.nodeType;if(1===i||9===i||11===i)for(t=t.firstChild;t;t=t.nextSibling)e(t,n,r);else 3!==i&&4!==i||(t.nodeValue=t.nodeValue.split(n).join(r))},y=function(e,t){for(var n=t.length;--n>-1;)e.push(t[n])},_=function(e,t,n){for(var r;e&&e!==t;){if(r=e._next||e.nextSibling)return r.textContent.charAt(0)===n;e=e.parentNode||e._parent}},b=function e(t){var n,r,i=h(t.childNodes),o=i.length;for(n=0;n<o;n++)(r=i[n])._isSplit?e(r):n&&r.previousSibling&&3===r.previousSibling.nodeType?(r.previousSibling.nodeValue+=3===r.nodeType?r.nodeValue:r.firstChild.nodeValue,t.removeChild(r)):3!==r.nodeType&&(t.insertBefore(r.firstChild,r),t.removeChild(r))},x=function(e,t){return parseFloat(t[e])||0},w=function(e,t,n,i,o,a,s){var l,c,d,h,p,m,g,w,S,D,A,E,M=u(e),C=x("paddingLeft",M),T=-999,P=x("borderBottomWidth",M)+x("borderTopWidth",M),R=x("borderLeftWidth",M)+x("borderRightWidth",M),k=x("paddingTop",M)+x("paddingBottom",M),O=x("paddingLeft",M)+x("paddingRight",M),L=x("fontSize",M)*(t.lineThreshold||.2),F=M.textAlign,I=[],N=[],B=[],j=t.wordDelimiter||" ",z=t.tag?t.tag:t.span?"span":"div",U=t.type||t.split||"chars,words,lines",H=o&&~U.indexOf("lines")?[]:null,G=~U.indexOf("words"),V=~U.indexOf("chars"),W=f(t),Z=t.linesClass,$=~(Z||"").indexOf("++"),q=[],Y="flex"===M.display,K=e.style.display;for($&&(Z=Z.split("++").join("")),Y&&(e.style.display="block"),d=(c=e.getElementsByTagName("*")).length,p=[],l=0;l<d;l++)p[l]=c[l];if(H||W)for(l=0;l<d;l++)((m=(h=p[l]).parentNode===e)||W||V&&!G)&&(E=h.offsetTop,H&&m&&Math.abs(E-T)>L&&("BR"!==h.nodeName||0===l)&&(g=[],H.push(g),T=E),W&&(h._x=h.offsetLeft,h._y=E,h._w=h.offsetWidth,h._h=h.offsetHeight),H&&((h._isSplit&&m||!V&&m||G&&m||!G&&h.parentNode.parentNode===e&&!h.parentNode._isSplit)&&(g.push(h),h._x-=C,_(h,e,j)&&(h._wordEnd=!0)),"BR"===h.nodeName&&(h.nextSibling&&"BR"===h.nextSibling.nodeName||0===l)&&H.push([])));for(l=0;l<d;l++)if(m=(h=p[l]).parentNode===e,"BR"!==h.nodeName)if(W&&(S=h.style,G||m||(h._x+=h.parentNode._x,h._y+=h.parentNode._y),S.left=h._x+"px",S.top=h._y+"px",S.position="absolute",S.display="block",S.width=h._w+1+"px",S.height=h._h+"px"),!G&&V)if(h._isSplit)for(h._next=c=h.nextSibling,h.parentNode.appendChild(h);c&&3===c.nodeType&&" "===c.textContent;)h._next=c.nextSibling,h.parentNode.appendChild(c),c=c.nextSibling;else h.parentNode._isSplit?(h._parent=h.parentNode,!h.previousSibling&&h.firstChild&&(h.firstChild._isFirst=!0),h.nextSibling&&" "===h.nextSibling.textContent&&!h.nextSibling.nextSibling&&q.push(h.nextSibling),h._next=h.nextSibling&&h.nextSibling._isFirst?null:h.nextSibling,h.parentNode.removeChild(h),p.splice(l--,1),d--):m||(E=!h.nextSibling&&_(h.parentNode,e,j),h.parentNode._parent&&h.parentNode._parent.appendChild(h),E&&h.parentNode.appendChild(r.createTextNode(" ")),"span"===z&&(h.style.display="inline"),I.push(h));else h.parentNode._isSplit&&!h._isSplit&&""!==h.innerHTML?N.push(h):V&&!h._isSplit&&("span"===z&&(h.style.display="inline"),I.push(h));else H||W?(h.parentNode&&h.parentNode.removeChild(h),p.splice(l--,1),d--):G||e.appendChild(h);for(l=q.length;--l>-1;)q[l].parentNode.removeChild(q[l]);if(H){for(W&&(D=r.createElement(z),e.appendChild(D),A=D.offsetWidth+"px",E=D.offsetParent===e?0:e.offsetLeft,e.removeChild(D)),S=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(w=" "===j&&(!W||!G&&!V),l=0;l<H.length;l++){for(g=H[l],(D=r.createElement(z)).style.cssText="display:block;text-align:"+F+";position:"+(W?"absolute;":"relative;"),Z&&(D.className=Z+($?l+1:"")),B.push(D),d=g.length,c=0;c<d;c++)"BR"!==g[c].nodeName&&(h=g[c],D.appendChild(h),w&&h._wordEnd&&D.appendChild(r.createTextNode(" ")),W&&(0===c&&(D.style.top=h._y+"px",D.style.left=C+E+"px"),h.style.top="0px",E&&(h.style.left=h._x-E+"px")));0===d?D.innerHTML="&nbsp;":G||V||(b(D),v(D,String.fromCharCode(160)," ")),W&&(D.style.width=A,D.style.height=h._h+"px"),e.appendChild(D)}e.style.cssText=S}W&&(s>e.clientHeight&&(e.style.height=s-k+"px",e.clientHeight<s&&(e.style.height=s+P+"px")),a>e.clientWidth&&(e.style.width=a-O+"px",e.clientWidth<a&&(e.style.width=a+R+"px"))),Y&&(K?e.style.display=K:e.style.removeProperty("display")),y(n,I),G&&y(i,N),y(o,B)},S=function(e,i,o,l){var u,c,d,h,m,g,y,_,b=i.tag?i.tag:i.span?"span":"div",x=~(i.type||i.split||"chars,words,lines").indexOf("chars"),w=f(i),S=i.wordDelimiter||" ",D=" "!==S?"":w?"&#173; ":" ",A="</"+b+">",E=1,M=i.specialChars?"function"===typeof i.specialChars?i.specialChars:p:null,C=r.createElement("div"),T=e.parentNode;for(T.insertBefore(C,e),C.textContent=e.nodeValue,T.removeChild(e),y=-1!==(u=n(e=C)).indexOf("<"),!1!==i.reduceWhiteSpace&&(u=u.replace(s," ").replace(a,"")),y&&(u=u.split("<").join("{{LT}}")),m=u.length,c=(" "===u.charAt(0)?D:"")+o(),d=0;d<m;d++)if(g=u.charAt(d),M&&(_=M(u.substr(d),i.specialChars)))g=u.substr(d,_||1),c+=x&&" "!==g?l()+g+"</"+b+">":g,d+=_-1;else if(g===S&&u.charAt(d-1)!==S&&d){for(c+=E?A:"",E=0;u.charAt(d+1)===S;)c+=D,d++;d===m-1?c+=D:")"!==u.charAt(d+1)&&(c+=D+o(),E=1)}else"{"===g&&"{{LT}}"===u.substr(d,6)?(c+=x?l()+"{{LT}}</"+b+">":"{{LT}}",d+=5):g.charCodeAt(0)>=55296&&g.charCodeAt(0)<=56319||u.charCodeAt(d+1)>=65024&&u.charCodeAt(d+1)<=65039?(h=((u.substr(d,12).split(t)||[])[1]||"").length||2,c+=x&&" "!==g?l()+u.substr(d,h)+"</"+b+">":u.substr(d,h),d+=h-1):c+=x&&" "!==g?l()+g+"</"+b+">":g;e.outerHTML=c+(E?A:""),y&&v(T,"{{LT}}","<")},D=function e(t,n,r,i){var o,a,s=h(t.childNodes),l=s.length,c=f(n);if(3!==t.nodeType||l>1){for(n.absolute=!1,o=0;o<l;o++)(a=s[o])._next=a._isFirst=a._parent=a._wordEnd=null,(3!==a.nodeType||/\S+/.test(a.nodeValue))&&(c&&3!==a.nodeType&&"inline"===u(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,e(a,n,r,i));return n.absolute=c,void(t._isSplit=!0)}S(t,n,r,i)},A=function(){function e(e,t){o||l(),this.elements=h(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)}var t=e.prototype;return t.split=function(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t,n,r,i=this.elements.length,o=e.tag?e.tag:e.span?"span":"div",a=g(e.wordsClass,o),s=g(e.charsClass,o);--i>-1;)r=this.elements[i],this._originals[i]=r.innerHTML,t=r.clientHeight,n=r.clientWidth,D(r,e,a,s),w(r,e,this.chars,this.words,this.lines,n,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},t.revert=function(){var e=this._originals;if(!e)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(t,n){return t.innerHTML=e[n]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},e.create=function(t,n){return new e(t,n)},e}();A.version="3.10.2",e.SplitText=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}(t)},94542:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{$i:function(){return K},DY:function(){return ne},Fc:function(){return p},Fo:function(){return en},GN:function(){return dt},JV:function(){return Jt},Ks:function(){return qt},Ll:function(){return an},Ok:function(){return re},Pr:function(){return oe},S5:function(){return Wt},SI:function(){return L},UI:function(){return Je},Wy:function(){return He},ZP:function(){return on},bQ:function(){return N},cy:function(){return se},d4:function(){return F},fS:function(){return ie},if:function(){return Lt},kr:function(){return ft},l1:function(){return Mt},lC:function(){return G},m2:function(){return M},p8:function(){return on},r9:function(){return D},xr:function(){return pt}});var o,a,s,l,u,c,d,h,f,p={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},m={duration:.5,overwrite:!1,delay:0},g=1e8,v=1e-8,y=2*Math.PI,_=y/4,b=0,x=Math.sqrt,w=Math.cos,S=Math.sin,D=function(e){return"string"===typeof e},A=function(e){return"function"===typeof e},E=function(e){return"number"===typeof e},M=function(e){return"undefined"===typeof e},C=function(e){return"object"===typeof e},T=function(e){return!1!==e},P=function(e){return A(e)||D(e)},R="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},k=Array.isArray,O=/(?:-?\.?\d|\.)+/gi,L=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,F=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,I=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,N=/[+-]=-?[.\d]+/,B=/[^,'"\[\]\s]+/gi,j=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,z={},U={},H=function(e){return(U=pe(e,z))&&on},G=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},V=function(e,t){return!t&&console.warn(e)},W=function(e,t){return e&&(z[e]=t)&&U&&(U[e]=t)||z},Z=function(){return 0},$={},q=[],Y={},K={},X={},Q=30,J=[],ee="",te=function(e){var t,n,r=e[0];if(C(r)||A(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=J.length;n--&&!J[n].targetTest(r););t=J[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Mt(e[n],t)))||e.splice(n,1);return e},ne=function(e){return e._gsap||te(Ze(e))[0]._gsap},re=function(e,t,n){return(n=e[t])&&A(n)?e[t]():M(n)&&e.getAttribute&&e.getAttribute(t)||n},ie=function(e,t){return(e=e.split(",")).forEach(t)||e},oe=function(e){return Math.round(1e5*e)/1e5||0},ae=function(e){return Math.round(1e7*e)/1e7||0},se=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},le=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},ue=function(){var e,t,n=q.length,r=q.slice(0);for(Y={},q.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},ce=function(e,t,n,r){q.length&&ue(),e.render(t,n,r),q.length&&ue()},de=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(B).length<2?t:D(e)?e.trim():e},he=function(e){return e},fe=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},pe=function(e,t){for(var n in t)e[n]=t[n];return e},me=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=C(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},ge=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},ve=function(e){var t,n=e.parent||a,r=e.keyframes?(t=k(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):fe;if(T(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},ye=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=e[r];if(i)for(o=t[i];a&&a[i]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},_e=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},be=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},xe=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},we=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Se=function e(t){return!t||t._ts&&e(t.parent)},De=function(e){return e._repeat?Ae(e._tTime,e=e.duration()+e._rDelay)*e:0},Ae=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Ee=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Me=function(e){return e._end=ae(e._start+(e._tDur/Math.abs(e._ts||e._rts||v)||0))},Ce=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ae(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Me(e),n._dirty||xe(n,e)),e},Te=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=Ee(e.rawTime(),t),(!t._dur||Ue(0,t.totalDuration(),n)-t._tTime>v)&&t.render(n,!0)),xe(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Pe=function(e,t,n,r){return t.parent&&be(t),t._start=ae((E(n)?n:n||e!==a?Be(e,n,t):e._time)+t._delay),t._end=ae(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),ye(e,t,"_first","_last",e._sort?"_start":0),Le(t)||(e._recent=t),r||Te(e,t),e},Re=function(e,t){return(z.ScrollTrigger||G("scrollTrigger",t))&&z.ScrollTrigger.create(t,e)},ke=function(e,t,n,r){return Ft(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&d!==pt.frame?(q.push(e),e._lazy=[t,r],1):void 0:1},Oe=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Le=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Fe=function(e,t,n,r){var i=e._repeat,o=ae(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:ae(o*(i+1)+e._rDelay*i):o,a>0&&!r?Ce(e,e._tTime=e._tDur*a):e.parent&&Me(e),n||xe(e.parent,e),e},Ie=function(e){return e instanceof Tt?xe(e):Fe(e,e._dur)},Ne={_start:0,endTime:Z,totalDuration:Z},Be=function e(t,n,r){var i,o,a,s=t.labels,l=t._recent||Ne,u=t.duration()>=g?l.endTime(!1):t._dur;return D(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?l:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=u),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(k(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+o:u+o)):null==n?u:+n},je=function(e,t,n){var r,i,o=E(t[1]),a=(o?2:1)+(e<2?0:1),s=t[a];if(o&&(s.duration=t[1]),s.parent=n,e){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=T(i.vars.inherit)&&i.parent;s.immediateRender=T(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[a-1]}return new zt(t[0],s,t[a+1])},ze=function(e,t){return e||0===e?t(e):t},Ue=function(e,t,n){return n<e?e:n>t?t:n},He=function(e,t){return D(e)&&(t=j.exec(e))?t[1]:""},Ge=[].slice,Ve=function(e,t){return e&&C(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&C(e[0]))&&!e.nodeType&&e!==s},We=function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return D(e)&&!t||Ve(e,1)?(r=n).push.apply(r,Ze(e)):n.push(e)}))||n},Ze=function(e,t,n){return!D(e)||n||!l&&mt()?k(e)?We(e,n):Ve(e)?Ge.call(e,0):e?[e]:[]:Ge.call((t||u).querySelectorAll(e),0)},$e=function(e){return e.sort((function(){return.5-Math.random()}))},qe=function(e){if(A(e))return e;var t=C(e)?e:{each:e},n=wt(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,l=t.axis,u=r,c=r;return D(r)?u=c={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(u=r[0],c=r[1]),function(e,a,d){var h,f,p,m,v,y,_,b,w,S=(d||t).length,D=o[S];if(!D){if(!(w="auto"===t.grid?0:(t.grid||[1,g])[1])){for(_=-g;_<(_=d[w++].getBoundingClientRect().left)&&w<S;);w--}for(D=o[S]=[],h=s?Math.min(w,S)*u-.5:r%w,f=w===g?0:s?S*c/w-.5:r/w|0,_=0,b=g,y=0;y<S;y++)p=y%w-h,m=f-(y/w|0),D[y]=v=l?Math.abs("y"===l?m:p):x(p*p+m*m),v>_&&(_=v),v<b&&(b=v);"random"===r&&$e(D),D.max=_-b,D.min=b,D.v=S=(parseFloat(t.amount)||parseFloat(t.each)*(w>S?S-1:l?"y"===l?S/w:w:Math.max(w,S/w))||0)*("edges"===r?-1:1),D.b=S<0?i-S:i,D.u=He(t.amount||t.each)||0,n=n&&S<0?bt(n):n}return S=(D[e]-D.min)/D.max||0,ae(D.b+(n?n(S):S)*D.v)+D.u}},Ye=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(E(n)?0:He(n))}},Ke=function(e,t){var n,r,i=k(e);return!i&&C(e)&&(n=i=e.radius||g,e.values?(e=Ze(e.values),(r=!E(e[0]))&&(n*=n)):e=Ye(e.increment)),ze(t,i?A(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,o,a=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),l=g,u=0,c=e.length;c--;)(i=r?(i=e[c].x-a)*i+(o=e[c].y-s)*o:Math.abs(e[c]-a))<l&&(l=i,u=c);return u=!n||l<=n?e[u]:t,r||u===t||E(t)?u:u+He(t)}:Ye(e))},Xe=function(e,t,n,r){return ze(k(e)?!t:!0===n?!!(n=0):!r,(function(){return k(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},Qe=function(e,t,n){return ze(n,(function(n){return e[~~t(n)]}))},Je=function(e){for(var t,n,r,i,o=0,a="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?B:O),a+=e.substr(o,t-o)+Xe(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+e.substr(o,e.length-o)},et=function(e,t,n,r,i){var o=t-e,a=r-n;return ze(i,(function(t){return n+((t-e)/o*a||0)}))},tt=function(e,t,n){var r,i,o,a=e.labels,s=g;for(r in a)(i=a[r]-t)<0===!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},nt=function(e,t,n){var r,i,o=e.vars,a=o[t];if(a)return r=o[t+"Params"],i=o.callbackScope||e,n&&q.length&&ue(),r?a.apply(i,r):a.call(i)},rt=function(e){return be(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&nt(e,"onInterrupt"),e},it=function(e){var t=(e=!e.name&&e.default||e).name,n=A(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:Z,render:Yt,add:Ot,kill:Xt,modifier:Kt,rawVars:0},o={targetTest:0,get:0,getSetter:Wt,aliases:{},register:0};if(mt(),e!==r){if(K[t])return;fe(r,fe(ge(e,i),o)),pe(r.prototype,pe(i,ge(e,o))),K[r.prop=t]=r,e.targetTest&&(J.push(r),$[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}W(t,r),e.register&&e.register(on,r,en)},ot=255,at={aqua:[0,ot,ot],lime:[0,ot,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ot],navy:[0,0,128],white:[ot,ot,ot],olive:[128,128,0],yellow:[ot,ot,0],orange:[ot,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ot,0,0],pink:[ot,192,203],cyan:[0,ot,ot],transparent:[ot,ot,ot,0]},st=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*ot+.5|0},lt=function(e,t,n){var r,i,o,a,s,l,u,c,d,h,f=e?E(e)?[e>>16,e>>8&ot,e&ot]:0:at.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),at[e])f=at[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&ot,f&ot,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&ot,e&ot]}else if("hsl"===e.substr(0,3))if(f=h=e.match(O),t){if(~e.indexOf("="))return f=e.match(L),n&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,s=+f[1]/100,r=2*(l=+f[2]/100)-(i=l<=.5?l*(s+1):l+s-l*s),f.length>3&&(f[3]*=1),f[0]=st(a+1/3,r,i),f[1]=st(a,r,i),f[2]=st(a-1/3,r,i);else f=e.match(O)||at.transparent;f=f.map(Number)}return t&&!h&&(r=f[0]/ot,i=f[1]/ot,o=f[2]/ot,l=((u=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,u===c?a=s=0:(d=u-c,s=l>.5?d/(2-u-c):d/(u+c),a=u===r?(i-o)/d+(i<o?6:0):u===i?(o-r)/d+2:(r-i)/d+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*s+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},ut=function(e){var t=[],n=[],r=-1;return e.split(dt).forEach((function(e){var i=e.match(F)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},ct=function(e,t,n){var r,i,o,a,s="",l=(e+s).match(dt),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map((function(e){return(e=lt(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=ut(e),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=e.replace(dt,"1").split(F)).length-1;c<a;c++)s+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(a=(i=e.split(dt)).length-1;c<a;c++)s+=i[c]+l[c];return s+i[a]},dt=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in at)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),ht=/hsl[a]?\(/,ft=function(e){var t,n=e.join(" ");if(dt.lastIndex=0,dt.test(n))return t=ht.test(n),e[1]=ct(e[1],t),e[0]=ct(e[0],t,ut(e[1])),!0},pt=function(){var e,t,n,r,i,o,a=Date.now,d=500,h=33,p=a(),m=p,g=1e3/240,v=g,y=[],_=function n(s){var l,u,c,f,_=a()-m,b=!0===s;if(_>d&&(p+=_-h),((l=(c=(m+=_)-p)-v)>0||b)&&(f=++r.frame,i=c-1e3*r.time,r.time=c/=1e3,v+=l+(l>=g?4:g-l),u=1),b||(e=t(n)),u)for(o=0;o<y.length;o++)y[o](c,i,f,s)};return r={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){c&&(l||(s=l=window,u=s.document||{},z.gsap=on,(s.gsapVersions||(s.gsapVersions=[])).push(on.version),H(U||s.GreenSockGlobals||!s.gsap&&s||{}),n=s.requestAnimationFrame),e&&r.sleep(),t=n||function(e){return setTimeout(e,v-1e3*r.time+1|0)},f=1,_(2))},sleep:function(){(n?s.cancelAnimationFrame:clearTimeout)(e),f=0,t=Z},lagSmoothing:function(e,t){d=e||1e8,h=Math.min(t,d,0)},fps:function(e){g=1e3/(e||240),v=1e3*r.time+g},add:function(e,t,n){var i=t?function(t,n,o,a){e(t,n,o,a),r.remove(i)}:e;return r.remove(e),y[n?"unshift":"push"](i),mt(),i},remove:function(e,t){~(t=y.indexOf(e))&&y.splice(t,1)&&o>=t&&o--},_listeners:y}}(),mt=function(){return!f&&pt.wake()},gt={},vt=/^[\d.\-M][\d.\-,\s]/,yt=/["']/g,_t=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),a=o[0],s=1,l=o.length;s<l;s++)n=o[s],t=s!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(yt,"").trim():+r,a=n.substr(t+1).trim();return i},bt=function(e){return function(t){return 1-e(1-t)}},xt=function e(t,n){for(var r,i=t._first;i;)i instanceof Tt?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},wt=function(e,t){return e&&(A(e)?e:gt[e]||function(e){var t=(e+"").split("("),n=gt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[_t(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(de)):gt._CE&&vt.test(e)?gt._CE("",e):n}(e))||t},St=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,o={easeIn:t,easeOut:n,easeInOut:r};return ie(e,(function(e){for(var t in gt[e]=z[e]=o,gt[i=e.toLowerCase()]=n,o)gt[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=gt[e+"."+t]=o[t]})),o},Dt=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},At=function e(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),a=o/y*(Math.asin(1/i)||0),s=function(e){return 1===e?1:i*Math.pow(2,-10*e)*S((e-a)*o)+1},l="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Dt(s);return o=y/o,l.config=function(n,r){return e(t,n,r)},l},Et=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Dt(r);return i.config=function(n){return e(t,n)},i};ie("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;St(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),gt.Linear.easeNone=gt.none=gt.Linear.easeIn,St("Elastic",At("in"),At("out"),At()),function(e,t){var n=1/t,r=function(r){return r<n?e*r*r:r<.7272727272727273?e*Math.pow(r-1.5/t,2)+.75:r<.9090909090909092?e*(r-=2.25/t)*r+.9375:e*Math.pow(r-2.625/t,2)+.984375};St("Bounce",(function(e){return 1-r(1-e)}),r)}(7.5625,2.75),St("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),St("Circ",(function(e){return-(x(1-e*e)-1)})),St("Sine",(function(e){return 1===e?1:1-w(e*_)})),St("Back",Et("in"),Et("out"),Et()),gt.SteppedEase=gt.steps=z.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*Ue(0,.99999999,e)|0)+i)*n}}},m.ease=gt["quad.out"],ie("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return ee+=e+","+e+"Params,"}));var Mt=function(e,t){this.id=b++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:re,this.set=t?t.getSetter:Wt},Ct=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Fe(this,+e.duration,1,1),this.data=e.data,f||pt.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Fe(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(mt(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ce(this,e),!n._dp||n.parent||Te(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Pe(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===v||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ce(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+De(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+De(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Ae(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Ee(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(Ue(-this._delay,this._tDur,t),!0),Me(this),we(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(mt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==v&&(this._tTime-=v)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Pe(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(T(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ee(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Ie(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Ie(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Be(this,e),T(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,T(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-v))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=A(e)?e:he,i=function(){var e=t.then;t.then=null,A(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){rt(this)},e}();fe(Ct.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Tt=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=T(t.sortChildren),a&&Pe(t.parent||a,r(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&Re(r(i),t.scrollTrigger),i}i(t,e);var n=t.prototype;return n.to=function(e,t,n){return je(0,arguments,this),this},n.from=function(e,t,n){return je(1,arguments,this),this},n.fromTo=function(e,t,n,r){return je(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,ve(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new zt(e,t,Be(this,n),1),this},n.call=function(e,t,n){return Pe(this,zt.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,o,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new zt(e,n,Be(this,i)),this},n.staggerFrom=function(e,t,n,r,i,o,a){return n.runBackwards=1,ve(n).immediateRender=T(n.immediateRender),this.staggerTo(e,t,n,r,i,o,a)},n.staggerFromTo=function(e,t,n,r,i,o,a,s){return r.startAt=n,ve(r).immediateRender=T(r.immediateRender),this.staggerTo(e,t,r,i,o,a,s)},n.render=function(e,t,n){var r,i,o,s,l,u,c,d,h,f,p,m,g=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,b=e<=0?0:ae(e),x=this._zTime<0!==e<0&&(this._initted||!_);if(this!==a&&b>y&&e>=0&&(b=y),b!==this._tTime||n||x){if(g!==this._time&&_&&(b+=this._time-g,e+=this._time-g),r=b,h=this._start,u=!(d=this._ts),x&&(_||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,l=_+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*l+e,t,n);if(r=ae(b%l),b===y?(s=this._repeat,r=_):((s=~~(b/l))&&s===b/l&&(r=_,s--),r>_&&(r=_)),f=Ae(this._tTime,l),!g&&this._tTime&&f!==s&&(f=s),p&&1&s&&(r=_-r,m=1),s!==f&&!this._lock){var w=p&&1&f,S=w===(p&&1&s);if(s<f&&(w=!w),g=w?0:_,this._lock=1,this.render(g||(m?0:ae(s*l)),t,!_)._lock=0,this._tTime=b,!t&&this.parent&&nt(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),g&&g!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,y=this._tDur,S&&(this._lock=2,g=w?_:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;xt(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,ae(g),ae(r)),c&&(b-=r-(r=c._start))),this._tTime=b,this._time=r,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&r&&!t&&(nt(this,"onStart"),this._tTime!==b))return this;if(r>=g&&e>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){c=0,o&&(b+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var D=e<0?e:r;i;){if(o=i._prev,(i._act||D<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(D-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(D-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){c=0,o&&(b+=this._zTime=D?-1e-8:v);break}}i=o}}if(c&&!t&&(this.pause(),c.render(r>=g?0:-1e-8)._zTime=r>=g?1:-1,this._ts))return this._start=h,Me(this),this.render(e,t,n);this._onUpdate&&!t&&nt(this,"onUpdate",!0),(b===y&&this._tTime>=this.totalDuration()||!b&&g)&&(h!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((e||!_)&&(b===y&&this._ts>0||!b&&this._ts<0)&&be(this,1),t||e<0&&!g||!b&&!g&&y||(nt(this,b===y&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(E(t)||(t=Be(this,t,e)),!(e instanceof Ct)){if(k(e))return e.forEach((function(e){return n.add(e,t)})),this;if(D(e))return this.addLabel(e,t);if(!A(e))return this;e=zt.delayedCall(0,e)}return this!==e?Pe(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-g);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof zt?t&&i.push(o):(n&&i.push(o),e&&i.push.apply(i,o.getChildren(!0,t,n)))),o=o._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return D(e)?this.removeLabel(e):A(e)?this.killTweensOf(e):(_e(this,e),e===this._recent&&(this._recent=this._last),xe(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ae(pt.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=Be(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=zt.delayedCall(0,t||Z,n);return r.data="isPause",this._hasPause=1,Pe(this,r,Be(this,e))},n.removePause=function(e){var t=this._first;for(e=Be(this,e);t;)t._start===e&&"isPause"===t.data&&be(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)Pt!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=Ze(e),o=this._first,a=E(t);o;)o instanceof zt?le(o._targets,i)&&(a?(!Pt||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=Be(r,e),o=t,a=o.startAt,s=o.onStart,l=o.onStartParams,u=o.immediateRender,c=zt.to(r,fe({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||v,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());c._dur!==e&&Fe(c,e,0,1).render(c._time,!0,!0),n=1}s&&s.apply(c,l||[])}},t));return u?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,fe({startAt:{time:Be(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),tt(this,Be(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),tt(this,Be(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+v)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return xe(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),xe(this)},n.totalDuration=function(e){var t,n,r,i=0,o=this,s=o._last,l=g;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>l&&o._sort&&s._ts&&!o._lock?(o._lock=1,Pe(o,s,n-s._delay,1)._lock=0):l=n,n<0&&s._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),l=0),s._end>i&&s._ts&&(i=s._end),s=t;Fe(o,o===a&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(a._ts&&(ce(a,Ee(e,a)),d=pt.frame),pt.frame>=Q){Q+=p.autoSleep||120;var t=a._first;if((!t||!t._ts)&&p.autoSleep&&pt._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||pt.sleep()}}},t}(Ct);fe(Tt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Pt,Rt,kt=function(e,t,n,r,i,o,a){var s,l,u,c,d,h,f,p,m=new en(this._pt,e,t,0,1,qt,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(f=~(r+="").indexOf("random("))&&(r=Je(r)),o&&(o(p=[n,r],e,t),n=p[0],r=p[1]),l=n.match(I)||[];s=I.exec(r);)c=s[0],d=r.substring(g,s.index),u?u=(u+1)%5:"rgba("===d.substr(-5)&&(u=1),c!==l[v++]&&(h=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:d||1===v?d:",",s:h,c:"="===c.charAt(1)?se(h,c)-h:parseFloat(c)-h,m:u&&u<4?Math.round:0},g=I.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(N.test(r)||f)&&(m.e=0),this._pt=m,m},Ot=function(e,t,n,r,i,o,a,s,l){A(r)&&(r=r(i||0,e,o));var u,c=e[t],d="get"!==n?n:A(c)?l?e[t.indexOf("set")||!A(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():c,h=A(c)?l?Gt:Ht:Ut;if(D(r)&&(~r.indexOf("random(")&&(r=Je(r)),"="===r.charAt(1)&&((u=se(d,r)+(He(d)||0))||0===u)&&(r=u)),d!==r||Rt)return isNaN(d*r)||""===r?(!c&&!(t in e)&&G(t,r),kt.call(this,e,t,d,r,h,s||p.stringFilter,l)):(u=new en(this._pt,e,t,+d||0,r-(d||0),"boolean"===typeof c?$t:Zt,0,h),l&&(u.fp=l),a&&u.modifier(a,this,e),this._pt=u)},Lt=function(e,t,n,r,i,o){var a,s,l,u;if(K[e]&&!1!==(a=new K[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(A(e)&&(e=Nt(e,i,t,n,r)),!C(e)||e.style&&e.nodeType||k(e)||R(e))return D(e)?Nt(e,i,t,n,r):e;var o,a={};for(o in e)a[o]=Nt(e[o],i,t,n,r);return a}(t[e],r,i,o,n),n,r,o)&&(n._pt=s=new en(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==h))for(l=n._ptLookup[n._targets.indexOf(i)],u=a._props.length;u--;)l[a._props[u]]=s;return a},Ft=function e(t,n){var r,i,s,l,u,c,d,h,f,p,y,_,b,x=t.vars,w=x.ease,S=x.startAt,D=x.immediateRender,A=x.lazy,E=x.onUpdate,M=x.onUpdateParams,C=x.callbackScope,P=x.runBackwards,R=x.yoyoEase,k=x.keyframes,O=x.autoRevert,L=t._dur,F=t._startAt,I=t._targets,N=t.parent,B=N&&"nested"===N.data?N.parent._targets:I,j="auto"===t._overwrite&&!o,z=t.timeline;if(z&&(!k||!w)&&(w="none"),t._ease=wt(w,m.ease),t._yEase=R?bt(wt(!0===R?w:R,m.ease)):0,R&&t._yoyo&&!t._repeat&&(R=t._yEase,t._yEase=t._ease,t._ease=R),t._from=!z&&!!x.runBackwards,!z||k&&!x.stagger){if(_=(h=I[0]?ne(I[0]).harness:0)&&x[h.prop],r=ge(x,$),F&&(be(F.render(-1,!0)),F._lazy=0),S)if(be(t._startAt=zt.set(I,fe({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:T(A),startAt:null,delay:0,onUpdate:E,onUpdateParams:M,callbackScope:C,stagger:0},S))),n<0&&!D&&!O&&t._startAt.render(-1,!0),D){if(n>0&&!O&&(t._startAt=0),L&&n<=0)return void(n&&(t._zTime=n))}else!1===O&&(t._startAt=0);else if(P&&L)if(F)!O&&(t._startAt=0);else if(n&&(D=!1),s=fe({overwrite:!1,data:"isFromStart",lazy:D&&T(A),immediateRender:D,stagger:0,parent:N},r),_&&(s[h.prop]=_),be(t._startAt=zt.set(I,s)),n<0&&t._startAt.render(-1,!0),t._zTime=n,D){if(!n)return}else e(t._startAt,v);for(t._pt=t._ptCache=0,A=L&&T(A)||A&&!L,i=0;i<I.length;i++){if(d=(u=I[i])._gsap||te(I)[i]._gsap,t._ptLookup[i]=p={},Y[d.id]&&q.length&&ue(),y=B===I?i:B.indexOf(u),h&&!1!==(f=new h).init(u,_||r,t,y,B)&&(t._pt=l=new en(t._pt,u,f.name,0,1,f.render,f,0,f.priority),f._props.forEach((function(e){p[e]=l})),f.priority&&(c=1)),!h||_)for(s in r)K[s]&&(f=Lt(s,r,t,y,u,B))?f.priority&&(c=1):p[s]=l=Ot.call(t,u,s,"get",r[s],y,B,0,x.stringFilter);t._op&&t._op[i]&&t.kill(u,t._op[i]),j&&t._pt&&(Pt=t,a.killTweensOf(u,p,t.globalTime(n)),b=!t.parent,Pt=0),t._pt&&A&&(Y[d.id]=1)}c&&Jt(t),t._onInit&&t._onInit(t)}t._onUpdate=E,t._initted=(!t._op||t._pt)&&!b,k&&n<=0&&z.render(g,!0,!0)},It=function(e,t,n,r){var i,o,a=t.ease||r||"power1.inOut";if(k(t))o=n[e]||(n[e]=[]),t.forEach((function(e,n){return o.push({t:n/(t.length-1)*100,v:e,e:a})}));else for(i in t)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(e),v:t[i],e:a})},Nt=function(e,t,n,r,i){return A(e)?e.call(t,n,r,i):D(e)&&~e.indexOf("random(")?Je(e):e},Bt=ee+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",jt={};ie(Bt+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return jt[e]=1}));var zt=function(e){function t(t,n,i,s){var l;"number"===typeof n&&(i.duration=n,n=i,i=null);var u,c,d,h,f,m,g,v,y=(l=e.call(this,s?n:ve(n))||this).vars,_=y.duration,b=y.delay,x=y.immediateRender,w=y.stagger,S=y.overwrite,D=y.keyframes,A=y.defaults,M=y.scrollTrigger,O=y.yoyoEase,L=n.parent||a,F=(k(t)||R(t)?E(t[0]):"length"in n)?[t]:Ze(t);if(l._targets=F.length?te(F):V("GSAP target "+t+" not found. https://greensock.com",!p.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=S,D||w||P(_)||P(b)){if(n=l.vars,(u=l.timeline=new Tt({data:"nested",defaults:A||{}})).kill(),u.parent=u._dp=r(l),u._start=0,w||P(_)||P(b)){if(h=F.length,g=w&&qe(w),C(w))for(f in w)~Bt.indexOf(f)&&(v||(v={}),v[f]=w[f]);for(c=0;c<h;c++)(d=ge(n,jt)).stagger=0,O&&(d.yoyoEase=O),v&&pe(d,v),m=F[c],d.duration=+Nt(_,r(l),c,m,F),d.delay=(+Nt(b,r(l),c,m,F)||0)-l._delay,!w&&1===h&&d.delay&&(l._delay=b=d.delay,l._start+=b,d.delay=0),u.to(m,d,g?g(c,m,F):0),u._ease=gt.none;u.duration()?_=b=0:l.timeline=0}else if(D){ve(fe(u.vars.defaults,{ease:"none"})),u._ease=wt(D.ease||n.ease||"none");var I,N,B,j=0;if(k(D))D.forEach((function(e){return u.to(F,e,">")}));else{for(f in d={},D)"ease"===f||"easeEach"===f||It(f,D[f],d,D.easeEach);for(f in d)for(I=d[f].sort((function(e,t){return e.t-t.t})),j=0,c=0;c<I.length;c++)(B={ease:(N=I[c]).e,duration:(N.t-(c?I[c-1].t:0))/100*_})[f]=N.v,u.to(F,B,j),j+=B.duration;u.duration()<_&&u.to({},{duration:_-u.duration()})}}_||l.duration(_=u.duration())}else l.timeline=0;return!0!==S||o||(Pt=r(l),a.killTweensOf(F),Pt=0),Pe(L,r(l),i),n.reversed&&l.reverse(),n.paused&&l.paused(!0),(x||!_&&!D&&l._start===ae(L._time)&&T(x)&&Se(r(l))&&"nested"!==L.data)&&(l._tTime=-1e-8,l.render(Math.max(0,-b))),M&&Re(r(l),M),l}i(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,o,a,s,l,u,c,d,h=this._time,f=this._tDur,p=this._dur,m=e>f-v&&e>=0?f:e<v?0:e;if(p){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==e<0){if(r=m,c=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=ae(m%a),m===f?(o=this._repeat,r=p):((o=~~(m/a))&&o===m/a&&(r=p,o--),r>p&&(r=p)),(l=this._yoyo&&1&o)&&(d=this._yEase,r=p-r),s=Ae(this._tTime,a),r===h&&!n&&this._initted)return this._tTime=m,this;o!==s&&(c&&this._yEase&&xt(c,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(ae(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(ke(this,e<0?e:r,n,t))return this._tTime=0,this;if(h!==this._time)return this;if(p!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(d||this._ease)(r/p),this._from&&(this.ratio=u=1-u),r&&!h&&!t&&(nt(this,"onStart"),this._tTime!==m))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(e<0?e:!r&&l?-1e-8:c._dur*c._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),nt(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!t&&this.parent&&nt(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!p)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&be(this,1),t||e<0&&!h||!m&&!h||(nt(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,o,a,s=e.ratio,l=t<0||!t&&(!e._start&&Oe(e)&&(e._initted||!Le(e))||(e._ts<0||e._dp._ts<0)&&!Le(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(c=Ue(0,e._tDur,t),o=Ae(c,u),e._yoyo&&1&o&&(l=1-l),o!==Ae(e._tTime,u)&&(s=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==s||r||e._zTime===v||!t&&e._zTime){if(!e._initted&&ke(e,t,r,n))return;for(a=e._zTime,e._zTime=t||(n?v:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,i=e._pt;i;)i.r(l,i.d),i=i._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&nt(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&nt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&be(e,1),n||(nt(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.resetTo=function(e,t,n,r){f||pt.wake(),this._ts||this.play();var i=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Ft(this,i),function(e,t,n,r,i,o,a){var s,l,u,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],l=e._ptLookup,u=e._targets.length;u--;){if((s=l[u][t])&&s.d&&s.d._pt)for(s=s.d._pt;s&&s.p!==t;)s=s._next;if(!s)return Rt=1,e.vars[t]="+=0",Ft(e,a),Rt=0,1;c.push(s)}for(u=c.length;u--;)(s=c[u]).s=!r&&0!==r||i?s.s+(r||0)+o*s.c:r,s.c=n-s.s,s.e&&(s.e=oe(n)+He(s.e)),s.b&&(s.b=s.s+He(s.b))}(this,e,t,n,r,this._ease(i/this._dur),i)?this.resetTo(e,t,n,r):(Ce(this,0),this.parent||ye(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?rt(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Pt&&!0!==Pt.vars.overwrite)._first||rt(this),this.parent&&n!==this.timeline.totalDuration()&&Fe(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,l,u,c=this._targets,d=e?Ze(e):c,h=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(c,d))return"all"===t&&(this._pt=0),rt(this);for(r=this._op=this._op||[],"all"!==t&&(D(t)&&(s={},ie(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,i,o,a=e[0]?ne(e[0]).harness:0,s=a&&a.aliases;if(!s)return t;for(r in n=pe({},t),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,t)),u=c.length;u--;)if(~d.indexOf(c[u]))for(s in i=h[u],"all"===t?(r[u]=t,a=i,o={}):(o=r[u]=r[u]||{},a=t),a)(l=i&&i[s])&&("kill"in l.d&&!0!==l.d.kill(s)||_e(this,l,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&f&&rt(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return je(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return je(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return a.killTweensOf(e,t,n)},t}(Ct);fe(zt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ie("staggerTo,staggerFrom,staggerFromTo",(function(e){zt[e]=function(){var t=new Tt,n=Ge.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var Ut=function(e,t,n){return e[t]=n},Ht=function(e,t,n){return e[t](n)},Gt=function(e,t,n,r){return e[t](r.fp,n)},Vt=function(e,t,n){return e.setAttribute(t,n)},Wt=function(e,t){return A(e[t])?Ht:M(e[t])&&e.setAttribute?Vt:Ut},Zt=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},$t=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},qt=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Yt=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Kt=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},Xt=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?_e(this,r,"_pt"):r.dep||(t=1),r=n;return!t},Qt=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Jt=function(e){for(var t,n,r,i,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=t}e._pt=r},en=function(){function e(e,t,n,r,i,o,a,s,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=o||Zt,this.d=a||this,this.set=s||Ut,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=Qt,this.m=e,this.mt=n,this.tween=t},e}();ie(ee+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return $[e]=1})),z.TweenMax=z.TweenLite=zt,z.TimelineLite=z.TimelineMax=Tt,a=new Tt({sortChildren:!1,defaults:m,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),p.stringFilter=ft;var tn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return it(e)}))},timeline:function(e){return new Tt(e)},getTweensOf:function(e,t){return a.getTweensOf(e,t)},getProperty:function(e,t,n,r){D(e)&&(e=Ze(e)[0]);var i=ne(e||{}).get,o=n?he:de;return"native"===n&&(n=""),e?t?o((K[t]&&K[t].get||i)(e,t,n,r)):function(t,n,r){return o((K[t]&&K[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=Ze(e)).length>1){var r=e.map((function(e){return on.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var o=K[t],a=ne(e),s=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(t){var r=new o;h._pt=0,r.init(e,n?t+n:t,h,0,[e]),r.render(1,r),h._pt&&Yt(1,h)}:a.set(e,s);return o?l:function(t){return l(e,s,n?t+n:t,a,1)}},quickTo:function(e,t,n){var r,i=on.to(e,pe(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),o=function(e,n,r){return i.resetTo(t,e,n,r)};return o.tween=i,o},isTweening:function(e){return a.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=wt(e.ease,m.ease)),me(m,e||{})},config:function(e){return me(p,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!K[e]&&!z[e]&&V(t+" effect requires "+e+" plugin.")})),X[t]=function(e,t,r){return n(Ze(e),fe(t||{},i),r)},o&&(Tt.prototype[t]=function(e,n,r){return this.add(X[t](e,C(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){gt[e]=wt(t)},parseEase:function(e,t){return arguments.length?wt(e,t):gt},getById:function(e){return a.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new Tt(e);for(i.smoothChildTiming=T(e.smoothChildTiming),a.remove(i),i._dp=0,i._time=i._tTime=a._time,n=a._first;n;)r=n._next,!t&&!n._dur&&n instanceof zt&&n.vars.onComplete===n._targets[0]||Pe(i,n,n._start-n._delay),n=r;return Pe(a,i,0),i},utils:{wrap:function e(t,n,r){var i=n-t;return k(t)?Qe(t,e(0,t.length),n):ze(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,o=2*i;return k(t)?Qe(t,e(0,t.length-1),n):ze(r,(function(e){return t+((e=(o+(e-t)%o)%o||0)>i?o-e:e)}))},distribute:qe,random:Xe,snap:Ke,normalize:function(e,t,n){return et(e,t,0,1,n)},getUnit:He,clamp:function(e,t,n){return ze(n,(function(n){return Ue(e,t,n)}))},splitColor:lt,toArray:Ze,selector:function(e){return e=Ze(e)[0]||V("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Ze(t,n.querySelectorAll?n:n===e?V("Invalid scope")||u.createElement("div"):e)}},mapRange:et,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||He(n))}},interpolate:function e(t,n,r,i){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var a,s,l,u,c,d=D(t),h={};if(!0===r&&(i=1)&&(r=null),d)t={p:t},n={p:n};else if(k(t)&&!k(n)){for(l=[],u=t.length,c=u-2,s=1;s<u;s++)l.push(e(t[s-1],t[s]));u--,o=function(e){e*=u;var t=Math.min(c,~~e);return l[t](e-t)},r=n}else i||(t=pe(k(t)?[]:{},t));if(!l){for(a in n)Ot.call(h,t,a,"get",n[a]);o=function(e){return Yt(e,h)||(d?t.p:t)}}}return ze(r,o)},shuffle:$e},install:H,effects:X,ticker:pt,updateRoot:Tt.updateRoot,plugins:K,globalTimeline:a,core:{PropTween:en,globals:W,Tween:zt,Timeline:Tt,Animation:Ct,getCache:ne,_removeLinkedListItem:_e,suppressOverwrites:function(e){return o=e}}};ie("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return tn[e]=zt[e]})),pt.add(Tt.updateRoot),h=tn.to({},{duration:0});var nn=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},rn=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(D(n)&&(r={},ie(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,o=e._targets;for(n in t)for(r=o.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=nn(i,n)),i&&i.modifier&&i.modifier(t[n],e,o[r],n))}(e,n)}}}},on=tn.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,a;for(o in t)(a=this.add(e,"setAttribute",(e.getAttribute(o)||0)+"",t[o],r,i,0,0,o))&&(a.op=o),this._props.push(o)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},rn("roundProps",Ye),rn("modifiers"),rn("snap",Ke))||tn;zt.version=Tt.version=on.version="3.10.2",c=1,mt();gt.Power0,gt.Power1,gt.Power2,gt.Power3,gt.Power4,gt.Linear,gt.Quad;var an=gt.Cubic;gt.Quart,gt.Quint,gt.Strong,gt.Elastic,gt.Back,gt.SteppedEase,gt.Bounce,gt.Sine,gt.Expo,gt.Circ},19608:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ve},p8:function(){return ve}});var r,i,o,a,s,l,u,c=n(94542),d={},h=180/Math.PI,f=Math.PI/180,p=Math.atan2,m=/([A-Z])/g,g=/(left|right|width|margin|padding|x)/i,v=/[\s,\(]\S/,y={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},b=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},x=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},w=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},S=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},D=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},A=function(e,t,n){return e.style[t]=n},E=function(e,t,n){return e.style.setProperty(t,n)},M=function(e,t,n){return e._gsap[t]=n},C=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},T=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},P=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},R="transform",k=R+"Origin",O=function(e,t){var n=i.createElementNS?i.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):i.createElement(e);return n.style?n:i.createElement(e)},L=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(m,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,I(n)||n,1)||""},F="O,Moz,ms,Ms,Webkit".split(","),I=function(e,t,n){var r=(t||s).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(F[i]+e in r););return i<0?null:(3===i?"ms":i>=0?F[i]:"")+e},N=function(){window.document&&(r=window,i=r.document,o=i.documentElement,s=O("div")||{style:{}},O("div"),R=I(R),k=R+"Origin",s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",u=!!I("perspective"),a=1)},B=function e(t){var n,r=O("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(o.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(l){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),o.removeChild(r),this.style.cssText=s,n},j=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},z=function(e){var t;try{t=e.getBBox()}catch(n){t=B.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===B||(t=B.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+j(e,["x","cx","x1"])||0,y:+j(e,["y","cy","y1"])||0,width:0,height:0}},U=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!z(e))},H=function(e,t){if(t){var n=e.style;t in d&&t!==k&&(t=R),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(m,"-$1").toLowerCase())):n.removeAttribute(t)}},G=function(e,t,n,r,i,o){var a=new c.Fo(e._pt,t,n,0,1,o?D:S);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},V={deg:1,rad:1,turn:1},W=function e(t,n,r,o){var a,l,u,h,f=parseFloat(r)||0,p=(r+"").trim().substr((f+"").length)||"px",m=s.style,v=g.test(n),y="svg"===t.tagName.toLowerCase(),_=(y?"client":"offset")+(v?"Width":"Height"),b=100,x="px"===o,w="%"===o;return o===p||!f||V[o]||V[p]?f:("px"!==p&&!x&&(f=e(t,n,r,"px")),h=t.getCTM&&U(t),!w&&"%"!==p||!d[n]&&!~n.indexOf("adius")?(m[v?"width":"height"]=b+(x?p:o),l=~n.indexOf("adius")||"em"===o&&t.appendChild&&!y?t:t.parentNode,h&&(l=(t.ownerSVGElement||{}).parentNode),l&&l!==i&&l.appendChild||(l=i.body),(u=l._gsap)&&w&&u.width&&v&&u.time===c.xr.time?(0,c.Pr)(f/u.width*b):((w||"%"===p)&&(m.position=L(t,"position")),l===t&&(m.position="static"),l.appendChild(s),a=s[_],l.removeChild(s),m.position="absolute",v&&w&&((u=(0,c.DY)(l)).time=c.xr.time,u.width=l[_]),(0,c.Pr)(x?a*f/b:a&&f?b/a*f:0))):(a=h?t.getBBox()[v?"width":"height"]:t[_],(0,c.Pr)(w?f/a*b:f/100*a)))},Z=function(e,t,n,r){var i;return a||N(),t in y&&"transform"!==t&&~(t=y[t]).indexOf(",")&&(t=t.split(",")[0]),d[t]&&"transform"!==t?(i=ie(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:oe(L(e,k))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=X[t]&&X[t](e,t,n)||L(e,t)||(0,c.Ok)(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?W(e,t,i,n)+n:i},$=function(e,t,n,r){if(!n||"none"===n){var i=I(t,e,1),o=i&&L(e,i,1);o&&o!==n?(t=i,n=o):"borderColor"===t&&(n=L(e,"borderTopColor"))}var a,s,l,u,d,h,f,p,m,g,v,y=new c.Fo(this._pt,e.style,t,0,1,c.Ks),_=0,b=0;if(y.b=n,y.e=r,n+="","auto"===(r+="")&&(e.style[t]=r,r=L(e,t)||r,e.style[t]=n),a=[n,r],(0,c.kr)(a),r=a[1],l=(n=a[0]).match(c.d4)||[],(r.match(c.d4)||[]).length){for(;s=c.d4.exec(r);)f=s[0],m=r.substring(_,s.index),d?d=(d+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(d=1),f!==(h=l[b++]||"")&&(u=parseFloat(h)||0,v=h.substr((u+"").length),"="===f.charAt(1)&&(f=(0,c.cy)(u,f)+v),p=parseFloat(f),g=f.substr((p+"").length),_=c.d4.lastIndex-g.length,g||(g=g||c.Fc.units[t]||v,_===r.length&&(r+=g,y.e+=g)),v!==g&&(u=W(e,t,h,g)||0),y._pt={_next:y._pt,p:m||1===b?m:",",s:u,c:p-u,m:d&&d<4||"zIndex"===t?Math.round:0});y.c=_<r.length?r.substring(_,r.length):""}else y.r="display"===t&&"none"===r?D:S;return c.bQ.test(r)&&(y.e=0),this._pt=y,y},q={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Y=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=q[n]||n,t[1]=q[r]||r,t.join(" ")},K=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,o=t.t,a=o.style,s=t.u,l=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],d[n]&&(r=1,n="transformOrigin"===n?k:R),H(o,n);r&&(H(o,R),l&&(l.svg&&o.removeAttribute("transform"),ie(o,1),l.uncache=1))}},X={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var o=e._pt=new c.Fo(e._pt,t,n,0,0,K);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},Q=[1,0,0,1,0,0],J={},ee=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},te=function(e){var t=L(e,R);return ee(t)?Q:t.substr(7).match(c.SI).map(c.Pr)},ne=function(e,t){var n,r,i,a,s=e._gsap||(0,c.DY)(e),l=e.style,u=te(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Q:u:(u!==Q||e.offsetParent||e===o||s.svg||(i=l.display,l.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,r=e.nextSibling,o.appendChild(e)),u=te(e),i?l.display=i:H(e,"display"),a&&(r?n.insertBefore(e,r):n?n.appendChild(e):o.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},re=function(e,t,n,r,i,o){var a,s,l,u=e._gsap,c=i||ne(e,!0),d=u.xOrigin||0,h=u.yOrigin||0,f=u.xOffset||0,p=u.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],_=c[4],b=c[5],x=t.split(" "),w=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?c!==Q&&(s=m*y-g*v)&&(l=w*(-g/s)+S*(m/s)-(m*b-g*_)/s,w=w*(y/s)+S*(-v/s)+(v*b-y*_)/s,S=l):(w=(a=z(e)).x+(~x[0].indexOf("%")?w/100*a.width:w),S=a.y+(~(x[1]||x[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&u.smooth?(_=w-d,b=S-h,u.xOffset=f+(_*m+b*v)-_,u.yOffset=p+(_*g+b*y)-b):u.xOffset=u.yOffset=0,u.xOrigin=w,u.yOrigin=S,u.smooth=!!r,u.origin=t,u.originIsAbsolute=!!n,e.style[k]="0px 0px",o&&(G(o,u,"xOrigin",d,w),G(o,u,"yOrigin",h,S),G(o,u,"xOffset",f,u.xOffset),G(o,u,"yOffset",p,u.yOffset)),e.setAttribute("data-svg-origin",w+" "+S)},ie=function(e,t){var n=e._gsap||new c.l1(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,o,a,s,l,d,m,g,v,y,_,b,x,w,S,D,A,E,M,C,T,P,O,F,I,N,B,j,z,H,G,V=e.style,W=n.scaleX<0,Z="px",$="deg",q=L(e,k)||"0";return r=i=o=l=d=m=g=v=y=0,a=s=1,n.svg=!(!e.getCTM||!U(e)),x=ne(e,n.svg),n.svg&&(O=(!n.uncache||"0px 0px"===q)&&!t&&e.getAttribute("data-svg-origin"),re(e,O||q,!!O||n.originIsAbsolute,!1!==n.smooth,x)),_=n.xOrigin||0,b=n.yOrigin||0,x!==Q&&(A=x[0],E=x[1],M=x[2],C=x[3],r=T=x[4],i=P=x[5],6===x.length?(a=Math.sqrt(A*A+E*E),s=Math.sqrt(C*C+M*M),l=A||E?p(E,A)*h:0,(g=M||C?p(M,C)*h+l:0)&&(s*=Math.abs(Math.cos(g*f))),n.svg&&(r-=_-(_*A+b*M),i-=b-(_*E+b*C))):(G=x[6],z=x[7],N=x[8],B=x[9],j=x[10],H=x[11],r=x[12],i=x[13],o=x[14],d=(w=p(G,j))*h,w&&(O=T*(S=Math.cos(-w))+N*(D=Math.sin(-w)),F=P*S+B*D,I=G*S+j*D,N=T*-D+N*S,B=P*-D+B*S,j=G*-D+j*S,H=z*-D+H*S,T=O,P=F,G=I),m=(w=p(-M,j))*h,w&&(S=Math.cos(-w),H=C*(D=Math.sin(-w))+H*S,A=O=A*S-N*D,E=F=E*S-B*D,M=I=M*S-j*D),l=(w=p(E,A))*h,w&&(O=A*(S=Math.cos(w))+E*(D=Math.sin(w)),F=T*S+P*D,E=E*S-A*D,P=P*S-T*D,A=O,T=F),d&&Math.abs(d)+Math.abs(l)>359.9&&(d=l=0,m=180-m),a=(0,c.Pr)(Math.sqrt(A*A+E*E+M*M)),s=(0,c.Pr)(Math.sqrt(P*P+G*G)),w=p(T,P),g=Math.abs(w)>2e-4?w*h:0,y=H?1/(H<0?-H:H):0),n.svg&&(O=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!ee(L(e,R)),O&&e.setAttribute("transform",O))),Math.abs(g)>90&&Math.abs(g)<270&&(W?(a*=-1,g+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,g+=g<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+Z,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+Z,n.z=o+Z,n.scaleX=(0,c.Pr)(a),n.scaleY=(0,c.Pr)(s),n.rotation=(0,c.Pr)(l)+$,n.rotationX=(0,c.Pr)(d)+$,n.rotationY=(0,c.Pr)(m)+$,n.skewX=g+$,n.skewY=v+$,n.transformPerspective=y+Z,(n.zOrigin=parseFloat(q.split(" ")[2])||0)&&(V[k]=oe(q)),n.xOffset=n.yOffset=0,n.force3D=c.Fc.force3D,n.renderTransform=n.svg?he:u?de:se,n.uncache=0,n},oe=function(e){return(e=e.split(" "))[0]+" "+e[1]},ae=function(e,t,n){var r=(0,c.Wy)(t);return(0,c.Pr)(parseFloat(t)+parseFloat(W(e,"x",n+"px",r)))+r},se=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,de(e,t)},le="0deg",ue="0px",ce=") ",de=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,d=n.skewX,h=n.skewY,p=n.scaleX,m=n.scaleY,g=n.transformPerspective,v=n.force3D,y=n.target,_=n.zOrigin,b="",x="auto"===v&&e&&1!==e||!0===v;if(_&&(c!==le||u!==le)){var w,S=parseFloat(u)*f,D=Math.sin(S),A=Math.cos(S);S=parseFloat(c)*f,w=Math.cos(S),o=ae(y,o,D*w*-_),a=ae(y,a,-Math.sin(S)*-_),s=ae(y,s,A*w*-_+_)}g!==ue&&(b+="perspective("+g+ce),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(x||o!==ue||a!==ue||s!==ue)&&(b+=s!==ue||x?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+ce),l!==le&&(b+="rotate("+l+ce),u!==le&&(b+="rotateY("+u+ce),c!==le&&(b+="rotateX("+c+ce),d===le&&h===le||(b+="skew("+d+", "+h+ce),1===p&&1===m||(b+="scale("+p+", "+m+ce),y.style[R]=b||"translate(0, 0)"},he=function(e,t){var n,r,i,o,a,s=t||this,l=s.xPercent,u=s.yPercent,d=s.x,h=s.y,p=s.rotation,m=s.skewX,g=s.skewY,v=s.scaleX,y=s.scaleY,_=s.target,b=s.xOrigin,x=s.yOrigin,w=s.xOffset,S=s.yOffset,D=s.forceCSS,A=parseFloat(d),E=parseFloat(h);p=parseFloat(p),m=parseFloat(m),(g=parseFloat(g))&&(m+=g=parseFloat(g),p+=g),p||m?(p*=f,m*=f,n=Math.cos(p)*v,r=Math.sin(p)*v,i=Math.sin(p-m)*-y,o=Math.cos(p-m)*y,m&&(g*=f,a=Math.tan(m-g),i*=a=Math.sqrt(1+a*a),o*=a,g&&(a=Math.tan(g),n*=a=Math.sqrt(1+a*a),r*=a)),n=(0,c.Pr)(n),r=(0,c.Pr)(r),i=(0,c.Pr)(i),o=(0,c.Pr)(o)):(n=v,o=y,r=i=0),(A&&!~(d+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(A=W(_,"x",d,"px"),E=W(_,"y",h,"px")),(b||x||w||S)&&(A=(0,c.Pr)(A+b-(b*n+x*i)+w),E=(0,c.Pr)(E+x-(b*r+x*o)+S)),(l||u)&&(a=_.getBBox(),A=(0,c.Pr)(A+l/100*a.width),E=(0,c.Pr)(E+u/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+A+","+E+")",_.setAttribute("transform",a),D&&(_.style[R]=a)},fe=function(e,t,n,r,i){var o,a,s=360,l=(0,c.r9)(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?h:1)-r,d=r+u+"deg";return l&&("short"===(o=i.split("_")[1])&&(u%=s)!==u%180&&(u+=u<0?s:-360),"cw"===o&&u<0?u=(u+36e9)%s-~~(u/s)*s:"ccw"===o&&u>0&&(u=(u-36e9)%s-~~(u/s)*s)),e._pt=a=new c.Fo(e._pt,t,n,r,u,b),a.e=d,a.u="deg",e._props.push(n),a},pe=function(e,t){for(var n in t)e[n]=t[n];return e},me=function(e,t,n){var r,i,o,a,s,l,u,h=pe({},n._gsap),f=n.style;for(i in h.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),f[R]=t,r=ie(n,1),H(n,R),n.setAttribute("transform",o)):(o=getComputedStyle(n)[R],f[R]=t,r=ie(n,1),f[R]=o),d)(o=h[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=(0,c.Wy)(o)!==(u=(0,c.Wy)(a))?W(n,i,o,u):parseFloat(o),l=parseFloat(a),e._pt=new c.Fo(e._pt,r,i,s,l-s,_),e._pt.u=u||0,e._props.push(i));pe(r,h)};(0,c.fS)("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",o="Left",a=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return t<2?e+n:"border"+n+e}));X[t>1?"border"+e:e]=function(e,t,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(t){return Z(e,t,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(e,t){return s[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,s,i)}}));var ge={name:"css",register:N,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o,s,l,u,h,f,p,m,g,b,S,D,A,E,M,C=this._props,T=e.style,P=n.vars.startAt;for(p in a||N(),t)if("autoRound"!==p&&(s=t[p],!c.$i[p]||!(0,c.if)(p,t,n,r,e,i)))if(h=typeof s,f=X[p],"function"===h&&(h=typeof(s=s.call(n,r,e,i))),"string"===h&&~s.indexOf("random(")&&(s=(0,c.UI)(s)),f)f(this,e,p,s,n)&&(M=1);else if("--"===p.substr(0,2))o=(getComputedStyle(e).getPropertyValue(p)+"").trim(),s+="",c.GN.lastIndex=0,c.GN.test(o)||(m=(0,c.Wy)(o),g=(0,c.Wy)(s)),g?m!==g&&(o=W(e,p,o,g)+g):m&&(s+=m),this.add(T,"setProperty",o,s,r,i,0,0,p),C.push(p);else if("undefined"!==h){if(P&&p in P?(o="function"===typeof P[p]?P[p].call(n,r,e,i):P[p],(0,c.r9)(o)&&~o.indexOf("random(")&&(o=(0,c.UI)(o)),(0,c.Wy)(o+"")||(o+=c.Fc.units[p]||(0,c.Wy)(Z(e,p))||""),"="===(o+"").charAt(1)&&(o=Z(e,p))):o=Z(e,p),u=parseFloat(o),(b="string"===h&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),l=parseFloat(s),p in y&&("autoAlpha"===p&&(1===u&&"hidden"===Z(e,"visibility")&&l&&(u=0),G(this,T,"visibility",u?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==p&&"transform"!==p&&~(p=y[p]).indexOf(",")&&(p=p.split(",")[0])),S=p in d)if(D||((A=e._gsap).renderTransform&&!t.parseTransform||ie(e,t.parseTransform),E=!1!==t.smoothOrigin&&A.smooth,(D=this._pt=new c.Fo(this._pt,T,R,0,1,A.renderTransform,A,0,-1)).dep=1),"scale"===p)this._pt=new c.Fo(this._pt,A,"scaleY",A.scaleY,(b?(0,c.cy)(A.scaleY,b+l):l)-A.scaleY||0),C.push("scaleY",p),p+="X";else{if("transformOrigin"===p){s=Y(s),A.svg?re(e,s,0,E,0,this):((g=parseFloat(s.split(" ")[2])||0)!==A.zOrigin&&G(this,A,"zOrigin",A.zOrigin,g),G(this,T,p,oe(o),oe(s)));continue}if("svgOrigin"===p){re(e,s,1,E,0,this);continue}if(p in J){fe(this,A,p,u,b?(0,c.cy)(u,b+s):s);continue}if("smoothOrigin"===p){G(this,A,"smooth",A.smooth,s);continue}if("force3D"===p){A[p]=s;continue}if("transform"===p){me(this,s,e);continue}}else p in T||(p=I(p)||p);if(S||(l||0===l)&&(u||0===u)&&!v.test(s)&&p in T)l||(l=0),(m=(o+"").substr((u+"").length))!==(g=(0,c.Wy)(s)||(p in c.Fc.units?c.Fc.units[p]:m))&&(u=W(e,p,o,g)),this._pt=new c.Fo(this._pt,S?A:T,p,u,(b?(0,c.cy)(u,b+l):l)-u,S||"px"!==g&&"zIndex"!==p||!1===t.autoRound?_:w),this._pt.u=g||0,m!==g&&"%"!==g&&(this._pt.b=o,this._pt.r=x);else if(p in T)$.call(this,e,p,o,b?b+s:s);else{if(!(p in e)){(0,c.lC)(p,s);continue}this.add(e,p,o||e[p],b?b+s:s,r,i)}C.push(p)}M&&(0,c.JV)(this)},get:Z,aliases:y,getSetter:function(e,t,n){var r=y[t];return r&&r.indexOf(",")<0&&(t=r),t in d&&t!==k&&(e._gsap.x||Z(e,"x"))?n&&l===n?"scale"===t?C:M:(l=n||{})&&("scale"===t?T:P):e.style&&!(0,c.m2)(e.style[t])?A:~t.indexOf("-")?E:(0,c.S5)(e,t)},core:{_removeProperty:H,_getMatrix:ne}};c.p8.utils.checkPrefix=I,function(e,t,n,r){var i=(0,c.fS)(e+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){d[e]=1}));(0,c.fS)(t,(function(e){c.Fc.units[e]="deg",J[e]=1})),y[i[13]]=e+","+t,(0,c.fS)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");y[t[1]]=i[t[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),(0,c.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){c.Fc.units[e]="px"})),c.p8.registerPlugin(ge);var ve=c.p8.registerPlugin(ge)||c.p8;ve.core.Tween},82777:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=function(){this.__data__=[],this.size=0},i=n(60076);var o=function(e,t){for(var n=e.length;n--;)if((0,i.Z)(e[n][0],t))return n;return-1},a=Array.prototype.splice;var s=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)};var l=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]};var u=function(e){return o(this.__data__,e)>-1};var c=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=l,d.prototype.has=u,d.prototype.set=c;var h=d},2723:function(e,t,n){"use strict";var r=n(85929),i=n(14943),o=(0,r.Z)(i.Z,"Map");t.Z=o},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=(0,n(85929).Z)(Object,"create");var i=function(){this.__data__=r?r(null):{},this.size=0};var o=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},a=Object.prototype.hasOwnProperty;var s=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0},l=Object.prototype.hasOwnProperty;var u=function(e){var t=this.__data__;return r?void 0!==t[e]:l.call(t,e)};var c=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=i,d.prototype.delete=o,d.prototype.get=s,d.prototype.has=u,d.prototype.set=c;var h=d,f=n(82777),p=n(2723);var m=function(){this.size=0,this.__data__={hash:new h,map:new(p.Z||f.Z),string:new h}};var g=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var v=function(e,t){var n=e.__data__;return g(t)?n["string"==typeof t?"string":"hash"]:n.map};var y=function(e){var t=v(this,e).delete(e);return this.size-=t?1:0,t};var _=function(e){return v(this,e).get(e)};var b=function(e){return v(this,e).has(e)};var x=function(e,t){var n=v(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function w(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=m,w.prototype.delete=y,w.prototype.get=_,w.prototype.has=b,w.prototype.set=x;var S=w},11179:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(82777);var i=function(){this.__data__=new r.Z,this.size=0};var o=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var a=function(e){return this.__data__.get(e)};var s=function(e){return this.__data__.has(e)},l=n(2723),u=n(9388);var c=function(e,t){var n=this.__data__;if(n instanceof r.Z){var i=n.__data__;if(!l.Z||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new u.Z(i)}return n.set(e,t),this.size=n.size,this};function d(e){var t=this.__data__=new r.Z(e);this.size=t.size}d.prototype.clear=i,d.prototype.delete=o,d.prototype.get=a,d.prototype.has=s,d.prototype.set=c;var h=d},58878:function(e,t,n){"use strict";var r=n(14943).Z.Symbol;t.Z=r},44857:function(e,t,n){"use strict";var r=n(14943).Z.Uint8Array;t.Z=r},9643:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},i=n(67477),o=n(93217),a=n(33182),s=n(4821),l=n(86890),u=Object.prototype.hasOwnProperty;var c=function(e,t){var n=(0,o.Z)(e),c=!n&&(0,i.Z)(e),d=!n&&!c&&(0,a.Z)(e),h=!n&&!c&&!d&&(0,l.Z)(e),f=n||c||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!u.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,s.Z)(g,m))||p.push(g);return p}},32931:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},95061:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},19541:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(85929),i=function(){try{var e=(0,r.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var o=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},80282:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}(),i=n(38855);var o=function(e,t){return e&&r(e,t,i.Z)},a=n(17922);var s=function(e,t){return function(n,r){if(null==n)return n;if(!(0,a.Z)(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}(o)},67020:function(e,t,n){"use strict";var r=n(4397);t.Z=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s===s&&!(0,r.Z)(s):n(s,l)))var l=s,u=a}return u}},36633:function(e,t,n){"use strict";var r=n(96437),i=n(93235);t.Z=function(e,t){for(var n=0,o=(t=(0,r.Z)(t,e)).length;null!=e&&n<o;)e=e[(0,i.Z)(t[n++])];return n&&n==o?e:void 0}},91122:function(e,t,n){"use strict";var r=n(95061),i=n(93217);t.Z=function(e,t,n){var o=t(e);return(0,i.Z)(e)?o:(0,r.Z)(o,n(e))}},96539:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(58878),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.Z?r.Z.toStringTag:void 0;var l=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i},u=Object.prototype.toString;var c=function(e){return u.call(e)},d=r.Z?r.Z.toStringTag:void 0;var h=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?l(e):c(e)}},71262:function(e,t){"use strict";t.Z=function(e,t){return e>t}},79546:function(e,t,n){"use strict";n.d(t,{Z:function(){return re}});var r=n(11179),i=n(9388);var o=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var a=function(e){return this.__data__.has(e)};function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i.Z;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=a;var l=s;var u=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var c=function(e,t){return e.has(t)};var d=function(e,t,n,r,i,o){var a=1&n,s=e.length,d=t.length;if(s!=d&&!(a&&d>s))return!1;var h=o.get(e),f=o.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new l:void 0;for(o.set(e,t),o.set(t,e);++p<s;){var v=e[p],y=t[p];if(r)var _=a?r(y,v,p,t,e,o):r(v,y,p,e,t,o);if(void 0!==_){if(_)continue;m=!1;break}if(g){if(!u(t,(function(e,t){if(!c(g,t)&&(v===e||i(v,e,n,r,o)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!i(v,y,n,r,o)){m=!1;break}}return o.delete(e),o.delete(t),m},h=n(58878),f=n(44857),p=n(60076);var m=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var g=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},v=h.Z?h.Z.prototype:void 0,y=v?v.valueOf:void 0;var _=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new f.Z(e),new f.Z(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,p.Z)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=m;case"[object Set]":var l=1&r;if(s||(s=g),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=d(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(y)return y.call(e)==y.call(t)}return!1},b=n(99312),x=Object.prototype.hasOwnProperty;var w=function(e,t,n,r,i,o){var a=1&n,s=(0,b.Z)(e),l=s.length;if(l!=(0,b.Z)(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:x.call(t,c)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<l;){var m=e[c=s[u]],g=t[c];if(r)var v=a?r(g,m,c,t,e,o):r(m,g,c,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(e),o.delete(t),f},S=n(17194),D=n(93217),A=n(33182),E=n(86890),M="[object Arguments]",C="[object Array]",T="[object Object]",P=Object.prototype.hasOwnProperty;var R=function(e,t,n,i,o,a){var s=(0,D.Z)(e),l=(0,D.Z)(t),u=s?C:(0,S.Z)(e),c=l?C:(0,S.Z)(t),h=(u=u==M?T:u)==T,f=(c=c==M?T:c)==T,p=u==c;if(p&&(0,A.Z)(e)){if(!(0,A.Z)(t))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new r.Z),s||(0,E.Z)(e)?d(e,t,n,i,o,a):_(e,t,u,n,i,o,a);if(!(1&n)){var m=h&&P.call(e,"__wrapped__"),g=f&&P.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,y=g?t.value():t;return a||(a=new r.Z),o(v,y,n,i,a)}}return!!p&&(a||(a=new r.Z),w(e,t,n,i,o,a))},k=n(75720);var O=function e(t,n,r,i,o){return t===n||(null==t||null==n||!(0,k.Z)(t)&&!(0,k.Z)(n)?t!==t&&n!==n:R(t,n,r,i,e,o))};var L=function(e,t,n,i){var o=n.length,a=o,s=!i;if(null==e)return!a;for(e=Object(e);o--;){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var u=(l=n[o])[0],c=e[u],d=l[1];if(s&&l[2]){if(void 0===c&&!(u in e))return!1}else{var h=new r.Z;if(i)var f=i(c,d,u,e,t,h);if(!(void 0===f?O(d,c,3,i,h):f))return!1}}return!0},F=n(24642);var I=function(e){return e===e&&!(0,F.Z)(e)},N=n(38855);var B=function(e){for(var t=(0,N.Z)(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,I(i)]}return t};var j=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var z=function(e){var t=B(e);return 1==t.length&&t[0][2]?j(t[0][0],t[0][1]):function(n){return n===e||L(n,e,t)}},U=n(36633);var H=function(e,t,n){var r=null==e?void 0:(0,U.Z)(e,t);return void 0===r?n:r};var G=function(e,t){return null!=e&&t in Object(e)},V=n(96437),W=n(67477),Z=n(4821),$=n(66845),q=n(93235);var Y=function(e,t,n){for(var r=-1,i=(t=(0,V.Z)(t,e)).length,o=!1;++r<i;){var a=(0,q.Z)(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&(0,$.Z)(i)&&(0,Z.Z)(a,i)&&((0,D.Z)(e)||(0,W.Z)(e))};var K=function(e,t){return null!=e&&Y(e,t,G)},X=n(92359);var Q=function(e,t){return(0,X.Z)(e)&&I(t)?j((0,q.Z)(e),t):function(n){var r=H(n,e);return void 0===r&&r===t?K(n,e):O(t,r,3)}},J=n(78052);var ee=function(e){return function(t){return null==t?void 0:t[e]}};var te=function(e){return function(t){return(0,U.Z)(t,e)}};var ne=function(e){return(0,X.Z)(e)?ee((0,q.Z)(e)):te(e)};var re=function(e){return"function"==typeof e?e:null==e?J.Z:"object"==typeof e?(0,D.Z)(e)?Q(e[0],e[1]):z(e):ne(e)}},5730:function(e,t){"use strict";var n=Math.floor,r=Math.random;t.Z=function(e,t){return e+n(r()*(t-e+1))}},17182:function(e,t){"use strict";t.Z=function(e){return function(t){return e(t)}}},96437:function(e,t,n){"use strict";var r=n(93217),i=n(92359),o=n(98957),a=n(93204);t.Z=function(e,t){return(0,r.Z)(e)?e:(0,i.Z)(e,t)?[e]:(0,o.Z)((0,a.Z)(e))}},34701:function(e,t,n){"use strict";var r=n(14943);e=n.hmd(e);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Z.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.Z=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},15778:function(e,t,n){"use strict";var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.Z=r},99312:function(e,t,n){"use strict";var r=n(91122),i=n(70135),o=n(38855);t.Z=function(e){return(0,r.Z)(e,o.Z,i.Z)}},85929:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(95077),i=n(14943).Z["__core-js_shared__"],o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var a=function(e){return!!o&&o in e},s=n(24642),l=n(28613),u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,h=c.toString,f=d.hasOwnProperty,p=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var m=function(e){return!(!(0,s.Z)(e)||a(e))&&((0,r.Z)(e)?p:u).test((0,l.Z)(e))};var g=function(e,t){return null==e?void 0:e[t]};var v=function(e,t){var n=g(e,t);return m(n)?n:void 0}},70135:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},i=n(41876),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i.Z},17194:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(85929),i=n(14943),o=(0,r.Z)(i.Z,"DataView"),a=n(2723),s=(0,r.Z)(i.Z,"Promise"),l=(0,r.Z)(i.Z,"Set"),u=(0,r.Z)(i.Z,"WeakMap"),c=n(96539),d=n(28613),h="[object Map]",f="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",v=(0,d.Z)(o),y=(0,d.Z)(a.Z),_=(0,d.Z)(s),b=(0,d.Z)(l),x=(0,d.Z)(u),w=c.Z;(o&&w(new o(new ArrayBuffer(1)))!=g||a.Z&&w(new a.Z)!=h||s&&w(s.resolve())!=f||l&&w(new l)!=p||u&&w(new u)!=m)&&(w=function(e){var t=(0,c.Z)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,d.Z)(n):"";if(r)switch(r){case v:return g;case y:return h;case _:return f;case b:return p;case x:return m}return t});var S=w},4821:function(e,t){"use strict";var n=/^(?:0|[1-9]\d*)$/;t.Z=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},92359:function(e,t,n){"use strict";var r=n(93217),i=n(4397),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.Z=function(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,i.Z)(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},43959:function(e,t){"use strict";var n=Object.prototype;t.Z=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},56790:function(e,t,n){"use strict";var r=n(15778);e=n.hmd(e);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.Z.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();t.Z=s},77765:function(e,t){"use strict";t.Z=function(e,t){return function(n){return e(t(n))}}},14943:function(e,t,n){"use strict";var r=n(15778),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.Z||i||Function("return this")();t.Z=o},98957:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(9388);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r.Z),n}i.Cache=r.Z;var o=i;var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,l=function(e){var t=o(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)})),t}))},93235:function(e,t,n){"use strict";var r=n(4397);t.Z=function(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},28613:function(e,t){"use strict";var n=Function.prototype.toString;t.Z=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},75486:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},i=n(535);var o=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=(0,i.Z)(n))===n?n:0),void 0!==t&&(t=(t=(0,i.Z)(t))===t?t:0),r((0,i.Z)(e),t,n)}},60076:function(e,t){"use strict";t.Z=function(e,t){return e===t||e!==e&&t!==t}},61420:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(19541);var i=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},o=n(80282);var a=function(e,t,n,r){return(0,o.Z)(e,(function(e,i,o){t(r,e,n(e),o)})),r},s=n(79546),l=n(93217);var u=function(e,t){return function(n,r){var o=(0,l.Z)(n)?i:a,u=t?t():{};return o(n,e,(0,s.Z)(r,2),u)}},c=Object.prototype.hasOwnProperty,d=u((function(e,t,n){c.call(e,n)?e[n].push(t):(0,r.Z)(e,n,[t])}))},78052:function(e,t){"use strict";t.Z=function(e){return e}},67477:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(96539),i=n(75720);var o=function(e){return(0,i.Z)(e)&&"[object Arguments]"==(0,r.Z)(e)},a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(e){return(0,i.Z)(e)&&s.call(e,"callee")&&!l.call(e,"callee")},c=u},93217:function(e,t){"use strict";var n=Array.isArray;t.Z=n},17922:function(e,t,n){"use strict";var r=n(95077),i=n(66845);t.Z=function(e){return null!=e&&(0,i.Z)(e.length)&&!(0,r.Z)(e)}},33182:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(14943);var i=function(){return!1};e=n.hmd(e);var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Z.Buffer:void 0,l=(s?s.isBuffer:void 0)||i},95077:function(e,t,n){"use strict";var r=n(96539),i=n(24642);t.Z=function(e){if(!(0,i.Z)(e))return!1;var t=(0,r.Z)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},66845:function(e,t){"use strict";t.Z=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},24642:function(e,t){"use strict";t.Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},75720:function(e,t){"use strict";t.Z=function(e){return null!=e&&"object"==typeof e}},4397:function(e,t,n){"use strict";var r=n(96539),i=n(75720);t.Z=function(e){return"symbol"==typeof e||(0,i.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},86890:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(96539),i=n(66845),o=n(75720),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=function(e){return(0,o.Z)(e)&&(0,i.Z)(e.length)&&!!a[(0,r.Z)(e)]},l=n(17182),u=n(56790),c=u.Z&&u.Z.isTypedArray,d=c?(0,l.Z)(c):s},38855:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(9643),i=n(43959),o=(0,n(77765).Z)(Object.keys,Object),a=Object.prototype.hasOwnProperty;var s=function(e){if(!(0,i.Z)(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t},l=n(17922);var u=function(e){return(0,l.Z)(e)?(0,r.Z)(e):s(e)}},26870:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(32931),i=n(36633),o=n(79546),a=n(80282),s=n(17922);var l=function(e,t){var n=-1,r=(0,s.Z)(e)?Array(e.length):[];return(0,a.Z)(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};var u=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},c=n(17182),d=n(4397);var h=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,o=(0,d.Z)(e),a=void 0!==t,s=null===t,l=t===t,u=(0,d.Z)(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0};var f=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=h(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},p=n(78052),m=n(93217);var g=function(e,t,n){t=t.length?(0,r.Z)(t,(function(e){return(0,m.Z)(e)?function(t){return(0,i.Z)(t,1===e.length?e[0]:e)}:e})):[p.Z];var a=-1;t=(0,r.Z)(t,(0,c.Z)(o.Z));var s=l(e,(function(e,n,i){return{criteria:(0,r.Z)(t,(function(t){return t(e)})),index:++a,value:e}}));return u(s,(function(e,t){return f(e,t,n)}))};var v=function(e,t,n,r){return null==e?[]:((0,m.Z)(t)||(t=null==t?[]:[t]),n=r?void 0:n,(0,m.Z)(n)||(n=null==n?[]:[n]),g(e,t,n))}},41876:function(e,t){"use strict";t.Z=function(){return[]}},535:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=/\s/;var i=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t},o=/^\s+/;var a=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e},s=n(24642),l=n(4397),u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt;var f=function(e){if("number"==typeof e)return e;if((0,l.Z)(e))return NaN;if((0,s.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=c.test(e);return n||d.test(e)?h(e.slice(2),n?2:8):u.test(e)?NaN:+e}},93204:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(58878),i=n(32931),o=n(93217),a=n(4397),s=r.Z?r.Z.prototype:void 0,l=s?s.toString:void 0;var u=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return(0,i.Z)(t,e)+"";if((0,a.Z)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var c=function(e){return null==e?"":u(e)}},83454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"===typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(77663)},91118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(95006)}])},930:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},37706:function(e){e.exports={backArrowContainer:"BackButton_backArrowContainer__6Xjpz","backArrowContainer--circle-image":"BackButton_backArrowContainer--circle-image__3RCPf"}},28832:function(e){e.exports={globeHover:"BestPracticeHover_globeHover__IJ3us",globeHover__content:"BestPracticeHover_globeHover__content__kFoZo","is--left":"BestPracticeHover_is--left__JIkAv",circleContainer:"BestPracticeHover_circleContainer__rs2m1","circleContainer--timeline":"BestPracticeHover_circleContainer--timeline__JsXyL",imageContainer:"BestPracticeHover_imageContainer__vZCnU","imageContainer--timeline":"BestPracticeHover_imageContainer--timeline__g8AyM",image:"BestPracticeHover_image__uVyiK","image--full-size":"BestPracticeHover_image--full-size___FX8X",circleOutline:"BestPracticeHover_circleOutline__0coG0","circleOutline--timeline":"BestPracticeHover_circleOutline--timeline__ICmtH",subtype:"BestPracticeHover_subtype__hDB0w",year:"BestPracticeHover_year__1Mcn4",title:"BestPracticeHover_title__DU3pn"}},52481:function(e){e.exports={filterButton:"CategoryFilters_filterButton__6b6g0",circle:"CategoryFilters_circle__37VgF","circle--blue":"CategoryFilters_circle--blue__sjLbH","circle--green":"CategoryFilters_circle--green__VCXS1","circle--brown":"CategoryFilters_circle--brown__k5_bg",indexIcon:"CategoryFilters_indexIcon__XfLES",notSelected:"CategoryFilters_notSelected__d6_pr"}},18971:function(e){e.exports={globeHover:"DotHover_globeHover__SYJrs",globeHover__content:"DotHover_globeHover__content__XePH8","globeHover__content--left":"DotHover_globeHover__content--left__jB1mQ",circleContainer:"DotHover_circleContainer__ESNEM","circleContainer--timeline":"DotHover_circleContainer--timeline__phN_0","globeHover__content--right":"DotHover_globeHover__content--right__1KrlT",imageContainer:"DotHover_imageContainer__wP9ES","imageContainer--timeline":"DotHover_imageContainer--timeline__h4of2",image:"DotHover_image__aaX3V","image--full-size":"DotHover_image--full-size__kQpss",circleOutline:"DotHover_circleOutline__8T7yY","circleOutline--timeline":"DotHover_circleOutline--timeline__khM_O",subtype:"DotHover_subtype__E51UK",year:"DotHover_year___YjCr",title:"DotHover_title__5y1rR"}},47877:function(e){e.exports={container:"ImageVideoBlock_container__MMoX5","container--what-if":"ImageVideoBlock_container--what-if__PF_3D",textOverlay:"ImageVideoBlock_textOverlay__TBWdr",gradient:"ImageVideoBlock_gradient__qa_r9"}},71647:function(e){e.exports={container:"ListBlock_container__xngO6","container--with-thumbnail":"ListBlock_container--with-thumbnail__kil8_",imageContainer:"ListBlock_imageContainer__lUb2g",copyContainer:"ListBlock_copyContainer__oe6KH",title:"ListBlock_title__H7i31",copy:"ListBlock_copy__SFrkH",externalLink:"ListBlock_externalLink__SpuEC"}},33645:function(e){e.exports={container:"ParagraphBlock_container__ptRG_","container--what-if":"ParagraphBlock_container--what-if__PbhTY",imageContainer:"ParagraphBlock_imageContainer__TAHP1"}},88987:function(e){e.exports={checkboxLabel:"RadioButton_checkboxLabel__uWE8H",checkboxContainer:"RadioButton_checkboxContainer__XXB2c",checkmark:"RadioButton_checkmark__6b0F9",checkboxCopy:"RadioButton_checkboxCopy__SgA11"}},34147:function(e){e.exports={root:"SolutionNextLink_root__P2d_T",link:"SolutionNextLink_link__XmhVQ",arrowContainer:"SolutionNextLink_arrowContainer__vO2DV",title:"SolutionNextLink_title__JATlI",image:"SolutionNextLink_image__WrQHl",gradient:"SolutionNextLink_gradient__gtJMn"}},48717:function(e){e.exports={root:"SolutionsBackArrow_root__hlko8"}},18557:function(e){e.exports={root:"Single_root__L_F8J",trigger:"Single_trigger__3VjrY",arrowContainer:"Single_arrowContainer__d_wWS",info:"Single_info__MWyl5",description:"Single_description__yN22U",links__wrapper:"Single_links__wrapper__ChjeM",links__container:"Single_links__container__00_l4",link__single:"Single_link__single__jnqyB"}},5224:function(e){e.exports={root:"SolutionsListBlock_root__tkyZR"}},15606:function(e){e.exports={solutionsOverviewHover:"SolutionsOverviewHover_solutionsOverviewHover__aUJNl","is--Active":"SolutionsOverviewHover_is--Active__bJoz4","solutionsOverviewHover--mobile":"SolutionsOverviewHover_solutionsOverviewHover--mobile__LsfXY",solutionOverviewHover__subTitle:"SolutionsOverviewHover_solutionOverviewHover__subTitle__ZwgyM",solutionsOverviewHover__content:"SolutionsOverviewHover_solutionsOverviewHover__content__P31JS","solutionsOverviewHover__content--right":"SolutionsOverviewHover_solutionsOverviewHover__content--right___XZi6","solutionsOverviewHover__content--left":"SolutionsOverviewHover_solutionsOverviewHover__content--left__G76qn",solutionOverviewHover__title:"SolutionsOverviewHover_solutionOverviewHover__title__ASoTs"}},94435:function(e){e.exports={timelineHover:"TimelineBubbleHover_timelineHover__Mz64d","is--Active":"TimelineBubbleHover_is--Active__momuU",timelineHover__content:"TimelineBubbleHover_timelineHover__content__pI5CE",title:"TimelineBubbleHover_title__jaLvL",year:"TimelineBubbleHover_year__WtRBM"}},26843:function(e){e.exports={timelineStatisticHover:"TimelineStatisticHover_timelineStatisticHover__TpAYm","is--Active":"TimelineStatisticHover_is--Active__QVFYz",timelineStatisticHover__content:"TimelineStatisticHover_timelineStatisticHover__content__SPw0C",number:"TimelineStatisticHover_number__GqUbw"}},66264:function(e){e.exports={filterButton:"TypeFilters_filterButton__UMHKj",iconContainer:"TypeFilters_iconContainer__AXmHv",indexIcon:"TypeFilters_indexIcon__skSjx",notSelected:"TypeFilters_notSelected__JOTqm"}},98483:function(e){e.exports={root:"Modal_root__F1qT_",video__wrapper:"Modal_video__wrapper__GBNT6",close:"Modal_close__bmtcU"}},64534:function(e){e.exports={root:"VideoBlock_root__0ZT4C",video__container:"VideoBlock_video__container__IDo5s",thumbnail:"VideoBlock_thumbnail__jv5N5","thumbnail--no-video":"VideoBlock_thumbnail--no-video__hKuo2",thumbnail__icon:"VideoBlock_thumbnail__icon__p_uvm",thumbnail__stroke:"VideoBlock_thumbnail__stroke__liFIT",description:"VideoBlock_description__dY0OW",caption:"VideoBlock_caption__nmDgA"}},87451:function(e){e.exports={container:"BackArrow_container__Chtz_"}},54522:function(e){e.exports={container:"ExploreBottomBar_container__y2ceZ",inner:"ExploreBottomBar_inner__ANKC3",right:"ExploreBottomBar_right__eG7Hx",solutionsLink:"ExploreBottomBar_solutionsLink__ieFBu",arrowContainer:"ExploreBottomBar_arrowContainer__F1gQT"}},10461:function(e){e.exports={container:"ExploreBottomBarMobile_container__fnpoA",button:"ExploreBottomBarMobile_button__luKy9",viewButton:"ExploreBottomBarMobile_viewButton__F9Du9",viewButtonSelected:"ExploreBottomBarMobile_viewButtonSelected__3nXOh"}},40490:function(e){e.exports={left:"ExploreBottomGlobeFilter_left__LCleY",leftInner:"ExploreBottomGlobeFilter_leftInner__S4Eqp",filterButton:"ExploreBottomGlobeFilter_filterButton__A6dxE",notAButton:"ExploreBottomGlobeFilter_notAButton__M_NPW",clearButton:"ExploreBottomGlobeFilter_clearButton__Rqgwt",indexIcon:"ExploreBottomGlobeFilter_indexIcon__TN1IW"}},17712:function(e){e.exports={left:"ExploreBottomTimelineFilter_left__iYnyI",leftInner:"ExploreBottomTimelineFilter_leftInner__dhiVV",filterButton:"ExploreBottomTimelineFilter_filterButton__veyG7",notAButton:"ExploreBottomTimelineFilter_notAButton__Z3Vyu",catType:"ExploreBottomTimelineFilter_catType__qJisA",separator:"ExploreBottomTimelineFilter_separator__1nwfB",clearButton:"ExploreBottomTimelineFilter_clearButton__Ez3ba",indexIcon:"ExploreBottomTimelineFilter_indexIcon__WNtSu"}},76828:function(e){e.exports={root:"ExploreGlobeFilter_root__90Bah",root__clearFilter:"ExploreGlobeFilter_root__clearFilter__TupES","root__circle-container":"ExploreGlobeFilter_root__circle-container__9VLtd","root__circle-outline":"ExploreGlobeFilter_root__circle-outline__Oy0l7",root__image:"ExploreGlobeFilter_root__image__D44lR","root__image-inner":"ExploreGlobeFilter_root__image-inner__sEMfC",root__title:"ExploreGlobeFilter_root__title__1iyDO",root__description:"ExploreGlobeFilter_root__description__nQxFv"}},23178:function(e){e.exports={container:"ExploreMore_container___0gSL",header:"ExploreMore_header__zOmVX","header--top-margin":"ExploreMore_header--top-margin__mfx2R",grid:"ExploreMore_grid__iHN8a",firstBox:"ExploreMore_firstBox__M1Qcc",secondBox:"ExploreMore_secondBox__Sd3Qr",thirdBox:"ExploreMore_thirdBox__pzpHk",thirdImageSpacer:"ExploreMore_thirdImageSpacer__C0eZg",largeImageContainer:"ExploreMore_largeImageContainer__HDnTm",smallImageContainer:"ExploreMore_smallImageContainer__gKn9Z",image:"ExploreMore_image__czrMO",copyContainer:"ExploreMore_copyContainer__MNREh",category:"ExploreMore_category__Q1aE0",title:"ExploreMore_title___npE1",timeSpan:"ExploreMore_timeSpan__RfAAF"}},47558:function(e){e.exports={block:"ListBlocks_block__juuN_",blockGrid:"ListBlocks_blockGrid__5sPsi",title:"ListBlocks_title___8T71",paragraphBlockContainer:"ListBlocks_paragraphBlockContainer__JO_Rq",paragraphInner:"ListBlocks_paragraphInner__Gxkci",citationContainer:"ListBlocks_citationContainer__gt1On"}},30744:function(e){e.exports={circleImageContainer:"MenuCircle_circleImageContainer__4MEC1",circleCopy:"MenuCircle_circleCopy__hMCGn",overlay:"MenuCircle_overlay__YG8g1"}},28633:function(e){e.exports={linkContainer:"SearchItem_linkContainer__rDBLL",imageContainerContainer:"SearchItem_imageContainerContainer__8HTOB",imageContainer:"SearchItem_imageContainer__2Sof_",image:"SearchItem_image__ugknF",overlay:"SearchItem_overlay__UlRZc",copyContainer:"SearchItem_copyContainer__w6Yxw",type:"SearchItem_type__5PeNB",title:"SearchItem_title__f_ndH",highlight:"SearchItem_highlight__HvA3s",year:"SearchItem_year__1wyj0"}},64990:function(e){e.exports={overview__container:"SolutionIndex_overview__container__zABkG",overview__description:"SolutionIndex_overview__description__bHYuM",overview__button:"SolutionIndex_overview__button__e1kO4",eyeContainer:"SolutionIndex_eyeContainer__xYzM5"}},76792:function(e){e.exports={categories:"Categories_categories__55zBz","is--active":"Categories_is--active__uOFPK",categories__single:"Categories_categories__single__ydC56",icon:"Categories_icon__mNz3M"}},27339:function(e){e.exports={root:"BottomInfo_root__DoTIg","is--mobile":"BottomInfo_is--mobile__oN6qM",topContent:"BottomInfo_topContent__yW54U",below__wrapper:"BottomInfo_below__wrapper__1mT7k",dialogue__start:"BottomInfo_dialogue__start__G105W",dialogue__end:"BottomInfo_dialogue__end__FfRJ9",dialogue__single:"BottomInfo_dialogue__single__CAJCu","is--active":"BottomInfo_is--active__KoGr9",solutionMap__links:"BottomInfo_solutionMap__links__azkyQ",solutionMap__link:"BottomInfo_solutionMap__link__Q0tml"}},79960:function(e){e.exports={root:"Overview_root__GdNTk",wrapper:"Overview_wrapper__mEyxt",inner:"Overview_inner__8caGr",links__single:"Overview_links__single__bQEG0","links__single-bullet":"Overview_links__single-bullet__3God0"}},65184:function(e){e.exports={root:"Practices_root__7BCo2",wrapper:"Practices_wrapper__53lFj",inner:"Practices_inner__2jzQV",topImage:"Practices_topImage__QeHrv",entries:"Practices_entries__II_oO",entries__single:"Practices_entries__single__N1AMr","entries__single-image":"Practices_entries__single-image__H_VRQ","entries__single-content":"Practices_entries__single-content__yz_Dk","entries__single-label":"Practices_entries__single-label__qe_ua"}},10542:function(e){e.exports={root:"MobileBestPractices_root__0ihjb",backArrowContainer:"MobileBestPractices_backArrowContainer__pbQVv"}},33465:function(e){e.exports={root:"TakeActionCta_root__g0G4L","is--mobile":"TakeActionCta_is--mobile__r6W7R",solutionsLink:"TakeActionCta_solutionsLink__lzVKu",arrowContainer:"TakeActionCta_arrowContainer__8YgVH"}},13781:function(e){e.exports={root:"YearToggle_root__Fr_z_","root--desktop":"YearToggle_root--desktop__TyMtx",line:"YearToggle_line__5ihoA","root--mobile":"YearToggle_root--mobile__f_nWo",number:"YearToggle_number__SrzPf",bullet:"YearToggle_bullet___HcYe"}},63881:function(e){e.exports={container:"SoundIcon_container__ee3Mp","container--muted":"SoundIcon_container--muted__jghYS",strikethrough:"SoundIcon_strikethrough__jTee7","strikethrough--muted":"SoundIcon_strikethrough--muted__yf5bH"}},36965:function(e){e.exports={container:"TimelineBottomBar_container__T5or9",inner:"TimelineBottomBar_inner__QAtyF",year:"TimelineBottomBar_year__WOv1S",timelineBottomBar:"TimelineBottomBar_timelineBottomBar__QaKEs",timelineBottomBar__controller:"TimelineBottomBar_timelineBottomBar__controller__BeE4z",filler:"TimelineBottomBar_filler__ShnJu",background:"TimelineBottomBar_background__Jxp5q"}},38755:function(e){e.exports={container:"TimelineItem_container__46JzI",left:"TimelineItem_left__VHd4i","left--expanded":"TimelineItem_left--expanded__9aJlo",copyButton:"TimelineItem_copyButton__oGLLl",title:"TimelineItem_title__eLHTa",timeSpan:"TimelineItem_timeSpan__wiXnw",readMoreContainer:"TimelineItem_readMoreContainer__AF_y_",readMore:"TimelineItem_readMore__gE7yx"}},6522:function(e){e.exports={container:"TimelineSideMobileBar_container__oIBvo",inner:"TimelineSideMobileBar_inner__xFn9W",container__timeline:"TimelineSideMobileBar_container__timeline__MRhV6",container__controller:"TimelineSideMobileBar_container__controller__aDn4M",yearContainer:"TimelineSideMobileBar_yearContainer__b6GTB",year:"TimelineSideMobileBar_year__sAptr",era:"TimelineSideMobileBar_era__u5hPD"}},92922:function(e){e.exports={container:"UploadArea_container__b2dz_",copyContainer:"UploadArea_copyContainer__ZR5My",browseButton:"UploadArea_browseButton__6_j_w",deleteButton:"UploadArea_deleteButton__XZ3Nh",previewContainer:"UploadArea_previewContainer__M6_f7",imageContainer:"UploadArea_imageContainer__GVtyD"}},95135:function(e){e.exports={root:"Canvas_root___xWnK"}},66332:function(e){e.exports={trigger:"Accordion_trigger__zYPmn",arrowContainer:"Accordion_arrowContainer__aCiIE",content:"Accordion_content__bbGpQ"}},90255:function(e){e.exports={root:"Grid_root__lvXw6",type__1:"Grid_type__1__Is56T",type__2:"Grid_type__2__vy_9Z",type__3:"Grid_type__3__CFxCn",type__4:"Grid_type__4__25EEI"}},91832:function(e){e.exports={root:"Thumbnail_root__k7vSa",image__container:"Thumbnail_image__container__Q_Hlg",image__amount:"Thumbnail_image__amount__NP41c",image__wrapper:"Thumbnail_image__wrapper__dvq19",image__dc:"Thumbnail_image__dc__lbuLk",title:"Thumbnail_title__u03_R"}},49403:function(e){e.exports={root:"GridContainer_root__bX8j_","grid__idem--mobile":"GridContainer_grid__idem--mobile__fN8v_"}},90467:function(e){e.exports={root:"GroupListEntries_root__pbvDy",left:"GroupListEntries_left__UymHU",left__image:"GroupListEntries_left__image__CFMpV",left__name:"GroupListEntries_left__name__7YpA6",right:"GroupListEntries_right__7mNq6",right__entry:"GroupListEntries_right__entry__wxo1N","right__entry-title":"GroupListEntries_right__entry-title__KHuCa","right__entry-category":"GroupListEntries_right__entry-category__WrkxK"}},70179:function(){},77399:function(e){e.exports={root:"TypeSelector_root__S9Esg",root__single:"TypeSelector_root__single__e3Fec",root__clear:"TypeSelector_root__clear__ZmqhX","root__clear-icon":"TypeSelector_root__clear-icon__vfuF4",uniqueSingularity:"TypeSelector_uniqueSingularity__uGnoJ"}},34845:function(e){e.exports={selector:"Selector_selector__EiOrD",selector__container:"Selector_selector__container__ExQXF",selector__entry:"Selector_selector__entry__1ii3l","is--active":"Selector_is--active__Nf0zX",selector__divider:"Selector_selector__divider__rjcfp"}},47803:function(e){e.exports={root:"IndexContent_root__sC1ni",selector:"IndexContent_selector__QhE8F",content:"IndexContent_content__bk0qn"}},18331:function(e){e.exports={intro:"Intro_intro__zaqkU",introHeader:"Intro_introHeader__p8guQ",introButton:"Intro_introButton__cKlFj",storyContainer:"Intro_storyContainer__Bo0aG",skipButtonContainer:"Intro_skipButtonContainer__TWFtd",skipButton:"Intro_skipButton__PutDd",arrowContainer:"Intro_arrowContainer__5RKz3"}},40004:function(e){e.exports={form:"ShareAMemoryForm_form___MTPu","form--loading":"ShareAMemoryForm_form--loading__SnVDj",fieldContainer:"ShareAMemoryForm_fieldContainer__QWd2h",twoColumnContainer:"ShareAMemoryForm_twoColumnContainer__I8ZEb",error:"ShareAMemoryForm_error__YLSIk",errorInput:"ShareAMemoryForm_errorInput__R7C4e",errorTextarea:"ShareAMemoryForm_errorTextarea__YT6HV",formError:"ShareAMemoryForm_formError__Azw9J",locationContainer:"ShareAMemoryForm_locationContainer__yqV_e",predictionsUl:"ShareAMemoryForm_predictionsUl__rJyU_",hidden:"ShareAMemoryForm_hidden__DlcSD",predictionsButton:"ShareAMemoryForm_predictionsButton__FrrRH",permissionError:"ShareAMemoryForm_permissionError__KAlD5",checkboxesContainer:"ShareAMemoryForm_checkboxesContainer__oaloZ",checkboxRow:"ShareAMemoryForm_checkboxRow__W4kP_",checkboxContainer:"ShareAMemoryForm_checkboxContainer__Z_ddN",checkmark:"ShareAMemoryForm_checkmark__gWhU3",submitButton:"ShareAMemoryForm_submitButton__Y5N9Z",checkboxCopy:"ShareAMemoryForm_checkboxCopy__TyxyW",successContainer:"ShareAMemoryForm_successContainer__1eRj_"}},41806:function(e){e.exports={container:"TimelineDotModal_container__CpzUl",grid:"TimelineDotModal_grid__Vwzbt",imageContainer:"TimelineDotModal_imageContainer__eYYb0",imageMask:"TimelineDotModal_imageMask__h_Vq3",outerCircle:"TimelineDotModal_outerCircle__Mb4Nz",image:"TimelineDotModal_image__MgKUE",content:"TimelineDotModal_content__qzjod",closeButton:"TimelineDotModal_closeButton__rwLsC",mobileImageContainer:"TimelineDotModal_mobileImageContainer__BcXBn",mobileImageMask:"TimelineDotModal_mobileImageMask__5ScDU",mobileImage:"TimelineDotModal_mobileImage__WwYNF",copyContainer:"TimelineDotModal_copyContainer__THan9",title:"TimelineDotModal_title__QkAKW",timeSpan:"TimelineDotModal_timeSpan__E2cub",contentContainer:"TimelineDotModal_contentContainer___79ea",citationContainer:"TimelineDotModal_citationContainer__SNQer",navArrowContainer:"TimelineDotModal_navArrowContainer__Q0Wx_",arrow:"TimelineDotModal_arrow__YXAZB","arrow--inactive":"TimelineDotModal_arrow--inactive__rP3YW",downArrow:"TimelineDotModal_downArrow__LfP5L",upArrow:"TimelineDotModal_upArrow__3Bxac"}},45495:function(e){e.exports={container:"ContentBlocks_container__TylEc","container--what-if":"ContentBlocks_container--what-if__w6Mse"}},6562:function(e){e.exports={container:"ContentContainer_container__hT1Xq","container--transparent-bg":"ContentContainer_container--transparent-bg__DYUGl","container--inactive":"ContentContainer_container--inactive__w_yS4",inner:"ContentContainer_inner__3B8u6",standardGrid:"ContentContainer_standardGrid__Pi36z",fullWidth:"ContentContainer_fullWidth__lxzBC"}},23831:function(e){e.exports={heroContainer:"ContentHero_heroContainer__MMGs1","heroContainer--no-header-asset":"ContentHero_heroContainer--no-header-asset__Khxxj","heroContainer--video":"ContentHero_heroContainer--video__Ocimh",blurryBackground:"ContentHero_blurryBackground__MV7CC",bottomGradient:"ContentHero_bottomGradient__2pBls","bottomGradient--circle-image":"ContentHero_bottomGradient--circle-image__Nqkx_",backArrowContainer:"ContentHero_backArrowContainer__n6YMU","backArrowContainer--circle-image":"ContentHero_backArrowContainer--circle-image__I3FjB",videoContainer:"ContentHero_videoContainer__EPR9W",imageContainer:"ContentHero_imageContainer__xPGWy",fullWidthImageContainer:"ContentHero_fullWidthImageContainer__okvgx",titleContainer:"ContentHero_titleContainer__bs_BV"}},99900:function(e){e.exports={contentContainer:"ContentParagraph_contentContainer__G42Ox",citationContainer:"ContentParagraph_citationContainer__ijWO5"}},48372:function(e){e.exports={titleContainer:"ContentTitle_titleContainer__7qJhf",contributor:"ContentTitle_contributor__pskOX",year:"ContentTitle_year__KkpHF"}},88522:function(e){e.exports={container:"FlipFrame_container__Jx8TP",heroContainer:"FlipFrame_heroContainer__1qEJV",background:"FlipFrame_background__7VhTM","heroContainer--video":"FlipFrame_heroContainer--video__jYjjU","heroContainer--no-header-asset":"FlipFrame_heroContainer--no-header-asset__DbXeC"}},43212:function(e){e.exports={container:"Header_container__xF540",inner:"Header_inner__J6Yj0",left:"Header_left__CXJEs",right:"Header_right__hoT_o",wim:"Header_wim__6GTy2",share:"Header_share__GURoa",button:"Header_button__4hs9t",viewButton:"Header_viewButton__kzTad",viewButtonSelected:"Header_viewButtonSelected__N70Yv",hamburger:"Header_hamburger__rIEB8",mobileClose:"Header_mobileClose__16h2l",mobileSearch:"Header_mobileSearch__Nol_d"}},60324:function(e){e.exports={container:"Layout_container__dHYHC"}},38567:function(e){e.exports={container:"Menu_container__W31v1","container--homepage":"Menu_container--homepage__9eZLW",header:"Menu_header__3gCsf",headerButton:"Menu_headerButton__KRbz9",circle:"Menu_circle__Uq3g9","circle--homepage":"Menu_circle--homepage__kDOvW",circleContainer:"Menu_circleContainer__hd2X7",circleImageContainer:"Menu_circleImageContainer___OCZQ",circleCopy:"Menu_circleCopy__8wyEZ",ul:"Menu_ul__3wOWN",linkContainer:"Menu_linkContainer__LKVv5",dot:"Menu_dot__1ZHT4",innerDot:"Menu_innerDot__JqPUK","innerDot--active":"Menu_innerDot--active__xB6vM",linkCopy:"Menu_linkCopy__eyJGp",footer:"Menu_footer__Y_9RK",footerInner:"Menu_footerInner__lHIsI",audioButton:"Menu_audioButton__a4n_r",footerNav:"Menu_footerNav__GLSvE",pathCopy:"Menu_pathCopy__QXG2D"}},43323:function(e){e.exports={root:"MobileGlobeCategoriesModal_root__pcCQD",wrapper:"MobileGlobeCategoriesModal_wrapper__01wVR",inner:"MobileGlobeCategoriesModal_inner___1oeb",topImage:"MobileGlobeCategoriesModal_topImage__kFxVo",entries:"MobileGlobeCategoriesModal_entries__VA4BE",entries__single:"MobileGlobeCategoriesModal_entries__single__DSogM","entries__single-image":"MobileGlobeCategoriesModal_entries__single-image__VPVFc","entries__single-content":"MobileGlobeCategoriesModal_entries__single-content__Nebhx","entries__single-label":"MobileGlobeCategoriesModal_entries__single-label__g9pRd",description:"MobileGlobeCategoriesModal_description__DVMTK",backArrowContainer:"MobileGlobeCategoriesModal_backArrowContainer__lCcgR"}},86904:function(e){e.exports={container:"MobileMenu_container__MlKIw",nav:"MobileMenu_nav__31FSC",menu:"MobileMenu_menu__XE2o9",link:"MobileMenu_link__93i9e",imageContainer:"MobileMenu_imageContainer__p7sqU",menuItemLabel:"MobileMenu_menuItemLabel__k8CIF",circleOutline:"MobileMenu_circleOutline__ZD0Ex",soundContainer:"MobileMenu_soundContainer___x8TI",audioButton:"MobileMenu_audioButton__6bMFl",footerNav:"MobileMenu_footerNav__vHlX4"}},29489:function(e){e.exports={exploreMoreContainer:"content_exploreMoreContainer__7zKHs"}},74831:function(){},77663:function(e){!function(){var t={229:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,l=[],u=!1,c=-1;function d(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&h())}function h(){if(!u){var e=a(d);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},9008:function(e,t,n){e.exports=n(72717)},25675:function(e,t,n){e.exports=n(78566)},41664:function(e,t,n){e.exports=n(7942)},11163:function(e,t,n){e.exports=n(69898)},4298:function(e,t,n){n(72189)},92703:function(e,t,n){"use strict";var r=n(50414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},55760:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,o=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),l=new t(512),u=new t(512);function c(e){return s.get(e)||s.set(e,d(e).map((function(e){return e.replace(a,"$2")})))}function d(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!h(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return o.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:c,setter:function(e){var t=c(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,i=t.length,o=e;r<i-1;){var a=t[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return e;o=o[t[r++]]}o[t[r]]=n}))},getter:function(e,t){var n=c(e);return u.get(e)||u.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,o,a,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(f(r)&&(r='"'+r+'"'),o=!(a=h(r))&&/^\d+$/.test(r),t.call(n,r,a,o,i,e))}(Array.isArray(e)?e:d(e),t,n)}}},55162:function(e,t,n){"use strict";n.d(t,{uI:function(){return pe}});var r=n(67294),i=n(45697),o=n.n(i);function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function l(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-->0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;var u=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function c(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=u.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var d=[".DS_Store","Thumbs.db"];function h(e){return"object"===typeof e&&null!==e}function f(e){return v(e.target.files).map((function(e){return c(e)}))}function p(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return c(e)}))]}}))}))}function m(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return null===e?[2,[]]:e.items?(n=v(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(y))]):[3,2];case 1:return[2,g(_(r.sent()))];case 2:return[2,g(v(e.files).map((function(e){return c(e)})))]}}))}))}function g(e){return e.filter((function(e){return-1===d.indexOf(e.name)}))}function v(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function y(e){if("function"!==typeof e.webkitGetAsEntry)return b(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?w(t):b(e)}function _(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(e,Array.isArray(t)?_(t):[t])}),[])}function b(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=c(t);return Promise.resolve(n)}function x(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,e.isDirectory?w(e):S(e)]}))}))}function w(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var o=this;t.readEntries((function(t){return a(o,void 0,void 0,(function(){var o,a,l;return s(this,(function(s){switch(s.label){case 0:if(t.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=s.sent(),e(o),[3,4];case 3:return a=s.sent(),n(a),[3,4];case 4:return[3,6];case 5:l=Promise.all(t.map(x)),r.push(l),i(),s.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function S(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=c(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var D=n(58363);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P="file-invalid-type",R="file-too-large",k="file-too-small",O="too-many-files",L=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:P,message:"File type must be ".concat(t)}},F=function(e){return{code:R,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},I=function(e){return{code:k,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},N={code:O,message:"Too many files"};function B(e,t){var n="application/x-moz-file"===e.type||(0,D.Z)(e,t);return[n,n?null:L(t)]}function j(e,t,n){if(z(e.size))if(z(t)&&z(n)){if(e.size>n)return[!1,F(n)];if(e.size<t)return[!1,I(t)]}else{if(z(t)&&e.size<t)return[!1,I(t)];if(z(n)&&e.size>n)return[!1,F(n)]}return[!0,null]}function z(e){return void 0!==e&&null!==e}function U(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,a=e.maxFiles;return!(!o&&t.length>1||o&&a>=1&&t.length>a)&&t.every((function(e){var t=C(B(e,n),1)[0],o=C(j(e,r,i),1)[0];return t&&o}))}function H(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function G(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function V(e){e.preventDefault()}function W(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function Z(e){return-1!==e.indexOf("Edge/")}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return W(e)||Z(e)}function q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!H(e)&&t&&t.apply(void 0,[e].concat(r)),H(e)}))}}function Y(){return"showOpenFilePicker"in window}function K(e){return e="string"===typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return E(E({},e),{},M({},t,[]))}),{}):{}}]}function X(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function Q(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}var J=["children"],ee=["open"],te=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ne=["refKey","onChange","onClick"];function re(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var de=(0,r.forwardRef)((function(e,t){var n=e.children,i=pe(ce(e,J)),o=i.open,a=ce(i,ee);return(0,r.useImperativeHandle)(t,(function(){return{open:o}}),[o]),r.createElement(r.Fragment,null,n(le(le({},a),{},{open:o})))}));de.displayName="Dropzone";var he={disabled:!1,getFilesFromEvent:function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return h(e)&&h(e.dataTransfer)?[2,m(e.dataTransfer,e.type)]:function(e){return h(e)&&h(e.target)}(e)?[2,f(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,p(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};de.defaultProps=he,de.propTypes={children:o().func,accept:o().oneOfType([o().string,o().arrayOf(o().string)]),multiple:o().bool,preventDropOnDocument:o().bool,noClick:o().bool,noKeyboard:o().bool,noDrag:o().bool,noDragEventsBubbling:o().bool,minSize:o().number,maxSize:o().number,maxFiles:o().number,disabled:o().bool,getFilesFromEvent:o().func,onFileDialogCancel:o().func,onFileDialogOpen:o().func,useFsAccessApi:o().bool,onDragEnter:o().func,onDragLeave:o().func,onDragOver:o().func,onDrop:o().func,onDropAccepted:o().func,onDropRejected:o().func,validator:o().func};var fe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=le(le({},he),e),n=t.accept,i=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,s=t.minSize,l=t.multiple,u=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,h=t.onDragOver,f=t.onDrop,p=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,v=t.onFileDialogOpen,y=t.useFsAccessApi,_=t.preventDropOnDocument,b=t.noClick,x=t.noKeyboard,w=t.noDrag,S=t.noDragEventsBubbling,D=t.validator,A=(0,r.useMemo)((function(){return"function"===typeof v?v:ge}),[v]),E=(0,r.useMemo)((function(){return"function"===typeof g?g:ge}),[g]),M=(0,r.useRef)(null),C=(0,r.useRef)(null),T=(0,r.useReducer)(me,fe),P=ie(T,2),R=P[0],k=P[1],O=R.isFocused,L=R.isFileDialogActive,F=R.draggedFiles,I=(0,r.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&Y()),z=function(){!I.current&&L&&setTimeout((function(){C.current&&(C.current.files.length||(k({type:"closeDialog"}),E()))}),300)};(0,r.useEffect)((function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}}),[C,L,E,I]);var W=(0,r.useRef)([]),Z=function(e){M.current&&M.current.contains(e.target)||(e.preventDefault(),W.current=[])};(0,r.useEffect)((function(){return _&&(document.addEventListener("dragover",V,!1),document.addEventListener("drop",Z,!1)),function(){_&&(document.removeEventListener("dragover",V),document.removeEventListener("drop",Z))}}),[M,_]);var J=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Se(e),W.current=[].concat(re(W.current),[e.target]),G(e)&&Promise.resolve(o(e)).then((function(t){H(e)&&!S||(k({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e))}))}),[o,c,S]),ee=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Se(e);var t=G(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,S]),oe=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Se(e);var t=W.current.filter((function(e){return M.current&&M.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),W.current=t,t.length>0||(k({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),G(e)&&d&&d(e))}),[M,d,S]),ae=(0,r.useCallback)((function(e,t){var r=[],i=[];e.forEach((function(e){var t=ie(B(e,n),2),o=t[0],l=t[1],u=ie(j(e,s,a),2),c=u[0],d=u[1],h=D?D(e):null;if(o&&c&&!h)r.push(e);else{var f=[l,d];h&&(f=f.concat(h)),i.push({file:e,errors:f.filter((function(e){return e}))})}})),(!l&&r.length>1||l&&u>=1&&r.length>u)&&(r.forEach((function(e){i.push({file:e,errors:[N]})})),r.splice(0)),k({acceptedFiles:r,fileRejections:i,type:"setFiles"}),f&&f(r,i,t),i.length>0&&m&&m(i,t),r.length>0&&p&&p(r,t)}),[k,l,n,s,a,u,f,p,m,D]),se=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Se(e),W.current=[],G(e)&&Promise.resolve(o(e)).then((function(t){H(e)&&!S||ae(t,e)})),k({type:"reset"})}),[o,ae,S]),de=(0,r.useCallback)((function(){if(I.current){k({type:"openDialog"}),A();var e={multiple:l,types:K(n)};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){ae(e,null),k({type:"closeDialog"})})).catch((function(e){X(e)?(E(e),k({type:"closeDialog"})):Q(e)&&(I.current=!1,C.current&&(C.current.value=null,C.current.click()))}))}else C.current&&(k({type:"openDialog"}),A(),C.current.value=null,C.current.click())}),[k,A,E,y,ae,n,l]),pe=(0,r.useCallback)((function(e){M.current&&M.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),de()))}),[M,de]),ve=(0,r.useCallback)((function(){k({type:"focus"})}),[]),ye=(0,r.useCallback)((function(){k({type:"blur"})}),[]),_e=(0,r.useCallback)((function(){b||($()?setTimeout(de,0):de())}),[b,de]),be=function(e){return i?null:e},xe=function(e){return x?null:be(e)},we=function(e){return w?null:be(e)},Se=function(e){S&&e.stopPropagation()},De=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,o=e.onKeyDown,a=e.onFocus,s=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,d=e.onDragLeave,h=e.onDrop,f=ce(e,te);return le(le(ue({onKeyDown:xe(q(o,pe)),onFocus:xe(q(a,ve)),onBlur:xe(q(s,ye)),onClick:be(q(l,_e)),onDragEnter:we(q(u,J)),onDragOver:we(q(c,ee)),onDragLeave:we(q(d,oe)),onDrop:we(q(h,se)),role:"string"===typeof r&&""!==r?r:"button"},n,M),i||x?{}:{tabIndex:0}),f)}}),[M,pe,ve,ye,_e,J,ee,oe,se,x,w,i]),Ae=(0,r.useCallback)((function(e){e.stopPropagation()}),[]),Ee=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,i=e.onChange,o=e.onClick,a=ce(e,ne),s=ue({accept:n,multiple:l,type:"file",style:{display:"none"},onChange:be(q(i,se)),onClick:be(q(o,Ae)),tabIndex:-1},r,C);return le(le({},s),a)}}),[C,n,l,se,i]),Me=F.length,Ce=Me>0&&U({files:F,accept:n,minSize:s,maxSize:a,multiple:l,maxFiles:u}),Te=Me>0&&!Ce;return le(le({},R),{},{isDragAccept:Ce,isDragReject:Te,isFocused:O&&!i,getRootProps:De,getInputProps:Ee,rootRef:M,inputRef:C,open:be(de)})}function me(e,t){switch(t.type){case"focus":return le(le({},e),{},{isFocused:!0});case"blur":return le(le({},e),{},{isFocused:!1});case"openDialog":return le(le({},fe),{},{isFileDialogActive:!0});case"closeDialog":return le(le({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return le(le({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return le(le({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return le({},fe);default:return e}}function ge(){}},69590:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){var s,l,u,c=t(e),d=t(a);if(c&&d){if((l=e.length)!=a.length)return!1;for(s=l;0!==s--;)if(!o(e[s],a[s]))return!1;return!0}if(c!=d)return!1;var h=e instanceof Date,f=a instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==a.getTime();var p=e instanceof RegExp,m=a instanceof RegExp;if(p!=m)return!1;if(p&&m)return e.toString()==a.toString();var g=n(e);if((l=g.length)!==n(a).length)return!1;for(s=l;0!==s--;)if(!r.call(a,g[s]))return!1;if(i&&e instanceof Element&&a instanceof Element)return e===a;for(s=l;0!==s--;)if(("_owner"!==(u=g[s])||!e.$$typeof)&&!o(e[u],a[u]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return o(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},69921:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||x(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===v)},t.typeOf=x},59864:function(e,t,n){"use strict";e.exports=n(69921)},46511:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},67287:function(e,t,n){e.exports=function(e){var t={},r=n(67294),i=n(60373),o=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:S(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}function D(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function A(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function E(e){if(A(e)!==e)throw Error(a(188))}function M(e){var t=e.alternate;if(!t){if(null===(t=A(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return E(i),e;if(o===r)return E(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function C(e){return null!==(e=M(e))?T(e):null}function T(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=T(e);if(null!==t)return t;e=e.sibling}return null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=P(e);if(null!==t)return t}e=e.sibling}return null}var R,k=Array.isArray,O=e.getPublicInstance,L=e.getRootHostContext,F=e.getChildHostContext,I=e.prepareForCommit,N=e.resetAfterCommit,B=e.createInstance,j=e.appendInitialChild,z=e.finalizeInitialChildren,U=e.prepareUpdate,H=e.shouldSetTextContent,G=e.createTextInstance,V=e.scheduleTimeout,W=e.cancelTimeout,Z=e.noTimeout,$=e.isPrimaryRenderer,q=e.supportsMutation,Y=e.supportsPersistence,K=e.supportsHydration,X=e.getInstanceFromNode,Q=e.preparePortalMount,J=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,oe=e.getBoundingRect,ae=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ue=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,_e=e.removeChildFromContainer,be=e.resetTextContent,xe=e.hideInstance,we=e.hideTextInstance,Se=e.unhideInstance,De=e.unhideTextInstance,Ae=e.clearContainer,Ee=e.cloneInstance,Me=e.createContainerChildSet,Ce=e.appendChildToContainerChildSet,Te=e.finalizeContainerChildren,Pe=e.replaceContainerChildren,Re=e.cloneHiddenInstance,ke=e.cloneHiddenTextInstance,Oe=e.canHydrateInstance,Le=e.canHydrateTextInstance,Fe=e.canHydrateSuspenseInstance,Ie=e.isSuspenseInstancePending,Ne=e.isSuspenseInstanceFallback,Be=e.registerSuspenseInstanceRetry,je=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,Ue=e.getFirstHydratableChildWithinContainer,He=e.getFirstHydratableChildWithinSuspenseInstance,Ge=e.hydrateInstance,Ve=e.hydrateTextInstance,We=e.hydrateSuspenseInstance,Ze=e.getNextHydratableInstanceAfterSuspenseInstance,$e=e.commitHydratedContainer,qe=e.commitHydratedSuspenseInstance,Ye=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,Xe=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],ot=-1;function at(e){return{current:e}}function st(e){0>ot||(e.current=it[ot],it[ot]=null,ot--)}function lt(e,t){ot++,it[ot]=e.current,e.current=t}var ut={},ct=at(ut),dt=at(!1),ht=ut;function ft(e,t){var n=e.type.contextTypes;if(!n)return ut;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){st(dt),st(ct)}function gt(e,t,n){if(ct.current!==ut)throw Error(a(168));lt(ct,t),lt(dt,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,D(e)||"Unknown",i));return o({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ut,ht=ct.current,lt(ct,e),lt(dt,dt.current),!0}function _t(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vt(e,t,ht),r.__reactInternalMemoizedMergedChildContext=e,st(dt),st(ct),lt(ct,e)):st(dt),lt(dt,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xt(e)/wt|0)|0},xt=Math.log,wt=Math.LN2;var St=64,Dt=4194304;function At(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Et(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=At(s):0!==(o&=a)&&(r=At(o))}else 0!==(a=n&~i)?r=At(a):0!==o&&(r=At(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function Mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Tt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function Ot(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Lt=i.unstable_scheduleCallback,Ft=i.unstable_cancelCallback,It=i.unstable_shouldYield,Nt=i.unstable_requestPaint,Bt=i.unstable_now,jt=i.unstable_ImmediatePriority,zt=i.unstable_UserBlockingPriority,Ut=i.unstable_NormalPriority,Ht=i.unstable_IdlePriority,Gt=null,Vt=null;var Wt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Zt=null,$t=!1,qt=!1;function Yt(e){null===Zt?Zt=[e]:Zt.push(e)}function Kt(){if(!qt&&null!==Zt){qt=!0;var e=0,t=kt;try{var n=Zt;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Zt=null,$t=!1}catch(i){throw null!==Zt&&(Zt=Zt.slice(e+1)),Lt(jt,Kt),i}finally{kt=t,qt=!1}}return null}var Xt=s.ReactCurrentBatchConfig;function Qt(e,t){if(Wt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function Jt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=at(null),nn=null,rn=null,on=null;function an(){on=rn=nn=null}function sn(e,t,n){$?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),$?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,on=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ii=!0),e.firstContext=null)}function dn(e){var t=$?e._currentValue:e._currentValue2;if(on!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Yo&&0!==(1&e.mode)&&0===(2&qo)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function _n(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var i=e.updateQueue;fn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(s=0,d=c=u=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==d&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(f=t,p=n,g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(p,h,f):m)||void 0===f)break e;h=o({},h,f);break e;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,u=h):d=d.next=p,s|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===d&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);na|=s,e.lanes=s,e.memoizedState=h}}function xn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var wn=(new r.Component).refs;function Sn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Dn={isMounted:function(e){return!!(e=e._reactInternals)&&A(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xa(),i=wa(e),o=gn(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),vn(e,o),null!==(t=Sa(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xa(),i=wa(e),o=gn(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),vn(e,o),null!==(t=Sa(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xa(),r=wa(e),i=gn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),vn(e,i),null!==(t=Sa(e,r,n))&&yn(t,e,r)}};function An(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qt(n,r)||!Qt(i,o))}function En(e,t,n){var r=!1,i=ut,o=t.contextType;return"object"===typeof o&&null!==o?o=dn(o):(i=pt(t)?ht:ct.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ft(e,i):ut),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Dn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Mn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Dn.enqueueReplaceState(t,t.state,null)}function Cn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=wn,pn(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=dn(o):(o=pt(t)?ht:ct.current,i.context=ft(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Sn(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Dn.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var Tn=[],Pn=0,Rn=null,kn=0,On=[],Ln=0,Fn=null,In=1,Nn="";function Bn(e,t){Tn[Pn++]=kn,Tn[Pn++]=Rn,Rn=e,kn=t}function jn(e,t,n){On[Ln++]=In,On[Ln++]=Nn,On[Ln++]=Fn,Fn=e;var r=In;e=Nn;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var o=32-bt(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,In=1<<32-bt(t)+i|n<<i|r,Nn=o+e}else In=1<<o|n<<i|r,Nn=e}function zn(e){null!==e.return&&(Bn(e,1),jn(e,1,0))}function Un(e){for(;e===Rn;)Rn=Tn[--Pn],Tn[Pn]=null,kn=Tn[--Pn],Tn[Pn]=null;for(;e===Fn;)Fn=On[--Ln],On[Ln]=null,Nn=On[--Ln],On[Ln]=null,In=On[--Ln],On[Ln]=null}var Hn=null,Gn=null,Vn=!1,Wn=!1,Zn=null;function $n(e,t){var n=Qa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function qn(e,t){switch(e.tag){case 5:return null!==(t=Oe(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=ze(t),!0);case 6:return null!==(t=Le(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=null,!0);case 13:if(null!==(t=Fe(t))){var n=null!==Fn?{id:In,overflow:Nn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Qa(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Gn=null,!0}return!1;default:return!1}}function Yn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Kn(e){if(Vn){var t=Gn;if(t){var n=t;if(!qn(e,t)){if(Yn(e))throw Error(a(418));t=je(n);var r=Hn;t&&qn(e,t)?$n(r,n):(e.flags=-4097&e.flags|2,Vn=!1,Hn=e)}}else{if(Yn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Vn=!1,Hn=e}}}function Xn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Qn(e){if(!K||e!==Hn)return!1;if(!Vn)return Xn(e),Vn=!0,!1;if(3!==e.tag&&(5!==e.tag||Xe(e.type)&&!H(e.type,e.memoizedProps))){var t=Gn;if(t){if(Yn(e)){for(e=Gn;e;)e=je(e);throw Error(a(418))}for(;t;)$n(e,t),t=je(t)}}if(Xn(e),13===e.tag){if(!K)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Gn=Ze(e)}else Gn=Hn?je(e.stateNode):null;return!0}function Jn(){K&&(Gn=Hn=null,Wn=Vn=!1)}function er(e){null===Zn?Zn=[e]:Zn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===wn&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var o=n.type;return o===c?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===_&&rr(o)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=os(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=ns(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case u:return(t=os(t,e.mode,n)).return=e,t;case _:return m(e,(0,t._init)(t._payload),n)}if(k(t)||w(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:d(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?h(e,t,n,r):null;case u:return n.key===i?f(e,t,n,r):null;case _:return g(e,t,(i=n._init)(n._payload),r)}if(k(n)||w(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return d(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return v(e,t,n,(0,r._init)(r._payload),i)}if(k(r)||w(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,a,s,l){for(var u=null,c=null,d=a,h=a=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=g(i,d,s[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),a=o(p,a,h),null===c?u=p:c.sibling=p,c=p,d=f}if(h===s.length)return n(i,d),Vn&&Bn(i,h),u;if(null===d){for(;h<s.length;h++)null!==(d=m(i,s[h],l))&&(a=o(d,a,h),null===c?u=d:c.sibling=d,c=d);return Vn&&Bn(i,h),u}for(d=r(i,d);h<s.length;h++)null!==(f=v(d,i,h,s[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),a=o(f,a,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach((function(e){return t(i,e)})),Vn&&Bn(i,h),u}function b(i,s,l,u){var c=w(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,h=s,f=s=0,p=null,y=l.next();null!==h&&!y.done;f++,y=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var _=g(i,h,y.value,u);if(null===_){null===h&&(h=p);break}e&&h&&null===_.alternate&&t(i,h),s=o(_,s,f),null===d?c=_:d.sibling=_,d=_,h=p}if(y.done)return n(i,h),Vn&&Bn(i,f),c;if(null===h){for(;!y.done;f++,y=l.next())null!==(y=m(i,y.value,u))&&(s=o(y,s,f),null===d?c=y:d.sibling=y,d=y);return Vn&&Bn(i,f),c}for(h=r(i,h);!y.done;f++,y=l.next())null!==(y=v(h,i,f,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),s=o(y,s,f),null===d?c=y:d.sibling=y,d=y);return e&&h.forEach((function(e){return t(i,e)})),Vn&&Bn(i,f),c}return function e(r,o,a,d){if("object"===typeof a&&null!==a&&a.type===c&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:e:{for(var h=a.key,f=o;null!==f;){if(f.key===h){if((h=a.type)===c){if(7===f.tag){n(r,f.sibling),(o=i(f,a.props.children)).return=r,r=o;break e}}else if(f.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===_&&rr(h)===f.type){n(r,f.sibling),(o=i(f,a.props)).ref=tr(r,f,a),o.return=r,r=o;break e}n(r,f);break}t(r,f),f=f.sibling}a.type===c?((o=ns(a.props.children,r.mode,d,a.key)).return=r,r=o):((d=ts(a.type,a.key,a.props,null,r.mode,d)).ref=tr(r,o,a),d.return=r,r=d)}return s(r);case u:e:{for(f=a.key;null!==o;){if(o.key===f){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=os(a,r.mode,d)).return=r,r=o}return s(r);case _:return e(r,o,(f=a._init)(a._payload),d)}if(k(a))return y(r,o,a,d);if(w(a))return b(r,o,a,d);nr(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=is(a,r.mode,d)).return=r,r=o),s(r)):n(r,o)}}var or=ir(!0),ar=ir(!1),sr={},lr=at(sr),ur=at(sr),cr=at(sr);function dr(e){if(e===sr)throw Error(a(174));return e}function hr(e,t){lt(cr,t),lt(ur,e),lt(lr,sr),e=L(t),st(lr),lt(lr,e)}function fr(){st(lr),st(ur),st(cr)}function pr(e){var t=dr(cr.current),n=dr(lr.current);n!==(t=F(n,e.type,t))&&(lt(ur,e),lt(lr,t))}function mr(e){ur.current===e&&(st(lr),st(ur))}var gr=at(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ie(n)||Ne(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function _r(){for(var e=0;e<yr.length;e++){var t=yr[e];$?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var br=s.ReactCurrentDispatcher,xr=s.ReactCurrentBatchConfig,wr=0,Sr=null,Dr=null,Ar=null,Er=!1,Mr=!1,Cr=0,Tr=0;function Pr(){throw Error(a(321))}function Rr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function kr(e,t,n,r,i,o){if(wr=o,Sr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?pi:mi,e=n(r,i),Mr){o=0;do{if(Mr=!1,Cr=0,25<=o)throw Error(a(301));o+=1,Ar=Dr=null,t.updateQueue=null,br.current=gi,e=n(r,i)}while(Mr)}if(br.current=fi,t=null!==Dr&&null!==Dr.next,wr=0,Ar=Dr=Sr=null,Er=!1,t)throw Error(a(300));return e}function Or(){var e=0!==Cr;return Cr=0,e}function Lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ar?Sr.memoizedState=Ar=e:Ar=Ar.next=e,Ar}function Fr(){if(null===Dr){var e=Sr.alternate;e=null!==e?e.memoizedState:null}else e=Dr.next;var t=null===Ar?Sr.memoizedState:Ar.next;if(null!==t)Ar=t,Dr=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Dr=e).memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},null===Ar?Sr.memoizedState=Ar=e:Ar=Ar.next=e}return Ar}function Ir(e,t){return"function"===typeof t?t(e):t}function Nr(e){var t=Fr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Dr,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((wr&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,Sr.lanes|=d,na|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,Wt(r,t.memoizedState)||(Ii=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,Sr.lanes|=o,na|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Br(e){var t=Fr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Wt(o,t.memoizedState)||(Ii=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function jr(){}function zr(e,t){var n=Sr,r=Fr(),i=t(),o=!Wt(r.memoizedState,i);if(o&&(r.memoizedState=i,Ii=!0),r=r.queue,Xr(Gr.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==Ar&&1&Ar.memoizedState.tag){if(n.flags|=2048,Zr(9,Hr.bind(null,n,r,i,t),void 0,null),null===Yo)throw Error(a(349));0!==(30&wr)||Ur(n,t,i)}return i}function Ur(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Sr.updateQueue)?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hr(e,t,n,r){t.value=n,t.getSnapshot=r,Vr(t)&&Sa(e,1,-1)}function Gr(e,t,n){return n((function(){Vr(t)&&Sa(e,1,-1)}))}function Vr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(r){return!0}}function Wr(e){var t=Lr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,Sr,e),[t.memoizedState,e]}function Zr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Sr.updateQueue)?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function $r(){return Fr().memoizedState}function qr(e,t,n,r){var i=Lr();Sr.flags|=e,i.memoizedState=Zr(1|t,n,void 0,void 0===r?null:r)}function Yr(e,t,n,r){var i=Fr();r=void 0===r?null:r;var o=void 0;if(null!==Dr){var a=Dr.memoizedState;if(o=a.destroy,null!==r&&Rr(r,a.deps))return void(i.memoizedState=Zr(t,n,o,r))}Sr.flags|=e,i.memoizedState=Zr(1|t,n,o,r)}function Kr(e,t){return qr(8390656,8,e,t)}function Xr(e,t){return Yr(2048,8,e,t)}function Qr(e,t){return Yr(4,2,e,t)}function Jr(e,t){return Yr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Fr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Rr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Fr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Rr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function oi(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=xr.transition;xr.transition={};try{e(!1),t()}finally{kt=n,xr.transition=r}}function ai(){return Fr().memoizedState}function si(e,t,n){var r=wa(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)?ci(t,n):(di(e,t,n),null!==(e=Sa(e,r,n=xa()))&&hi(e,t,r))}function li(e,t,n){var r=wa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(e))ci(t,i);else{di(e,t,i);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Wt(s,a))return}catch(l){}null!==(e=Sa(e,r,n=xa()))&&hi(e,t,r)}}function ui(e){var t=e.alternate;return e===Sr||null!==t&&t===Sr}function ci(e,t){Mr=Er=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function di(e,t,n){null!==Yo&&0!==(1&e.mode)&&0===(2&qo)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var fi={readContext:dn,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},pi={readContext:dn,useCallback:function(e,t){return Lr().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Kr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){return qr(4,2,e,t)},useMemo:function(e,t){var n=Lr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,Sr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Lr().memoizedState=e},useState:Wr,useDebugValue:ni,useDeferredValue:function(e){var t=Wr(e),n=t[0],r=t[1];return Kr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){var e=Wr(!1),t=e[0];return e=oi.bind(null,e[1]),Lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Sr,i=Lr();if(Vn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Yo)throw Error(a(349));0!==(30&wr)||Ur(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Kr(Gr.bind(null,r,o,e),[e]),r.flags|=2048,Zr(9,Hr.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Lr(),t=Yo.identifierPrefix;if(Vn){var n=Nn;t=":"+t+"R"+(n=(In&~(1<<32-bt(In)-1)).toString(32)+n),0<(n=Cr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Tr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mi={readContext:dn,useCallback:ri,useContext:dn,useEffect:Xr,useImperativeHandle:ti,useInsertionEffect:Qr,useLayoutEffect:Jr,useMemo:ii,useReducer:Nr,useRef:$r,useState:function(){return Nr(Ir)},useDebugValue:ni,useDeferredValue:function(e){var t=Nr(Ir),n=t[0],r=t[1];return Xr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Nr(Ir)[0],Fr().memoizedState]},useMutableSource:jr,useSyncExternalStore:zr,useId:ai,unstable_isNewReconciler:!1},gi={readContext:dn,useCallback:ri,useContext:dn,useEffect:Xr,useImperativeHandle:ti,useInsertionEffect:Qr,useLayoutEffect:Jr,useMemo:ii,useReducer:Br,useRef:$r,useState:function(){return Br(Ir)},useDebugValue:ni,useDeferredValue:function(e){var t=Br(Ir),n=t[0],r=t[1];return Xr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Br(Ir)[0],Fr().memoizedState]},useMutableSource:jr,useSyncExternalStore:zr,useId:ai,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=Jt(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var _i,bi,xi,wi,Si="function"===typeof WeakMap?WeakMap:Map;function Di(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){da||(da=!0,ha=r),yi(0,t)},n}function Ai(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===fa?fa=new Set([this]):fa.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ei(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Si;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Za.bind(null,e,t,n),t.then(e,e))}function Mi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ci(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ti(e){e.flags|=4}function Pi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(q)_i=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)j(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},bi=function(){},xi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=dr(lr.current);n=U(o,n,e,r,i,a),(t.updateQueue=n)&&Ti(t)}},wi=function(e,t,n,r){n!==r&&Ti(t)};else if(Y){_i=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Re(o,i.type,i.memoizedProps,i)),j(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=ke(o,i.memoizedProps,i)),j(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),_i(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Ri=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Re(o,i.type,i.memoizedProps,i)),Ce(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=ke(o,i.memoizedProps,i)),Ce(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Ri(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};bi=function(e,t){var n=t.stateNode;if(!Pi(e,t)){e=n.containerInfo;var r=Me(e);Ri(r,t,!1,!1),n.pendingChildren=r,Ti(t),Te(e,r)}},xi=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=Pi(e,t))&&a===r)t.stateNode=o;else{var s=t.stateNode,l=dr(lr.current),u=null;a!==r&&(u=U(s,n,a,r,i,l)),e&&null===u?t.stateNode=o:(o=Ee(o,u,n,a,r,t,e,s),z(o,n,r,i,l)&&Ti(t),t.stateNode=o,e?Ti(t):_i(o,t,!1,!1))}},wi=function(e,t,n,r){n!==r?(e=dr(cr.current),n=dr(lr.current),t.stateNode=G(r,e,n,t),Ti(t)):t.stateNode=e.stateNode}}else bi=function(){},xi=function(){},wi=function(){};function ki(e,t){if(!Vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Li(e,t,n){var r=t.pendingProps;switch(Un(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oi(t),null;case 1:case 17:return pt(t.type)&&mt(),Oi(t),null;case 3:return r=t.stateNode,fr(),st(dt),st(ct),_r(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?Ti(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Zn&&(Ca(Zn),Zn=null))),bi(e,t),Oi(t),null;case 5:mr(t),n=dr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)xi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Oi(t),null}if(e=dr(lr.current),Qn(t)){if(!K)throw Error(a(175));e=Ge(t.stateNode,t.type,t.memoizedProps,n,e,t,!Wn),t.updateQueue=e,null!==e&&Ti(t)}else{var o=B(i,r,n,e,t);_i(o,t,!1,!1),t.stateNode=o,z(o,i,r,n,e)&&Ti(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Oi(t),null;case 6:if(e&&null!=t.stateNode)wi(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=dr(cr.current),n=dr(lr.current),Qn(t)){if(!K)throw Error(a(176));if(e=t.stateNode,r=t.memoizedProps,(n=Ve(e,r,t,!Wn))&&null!==(i=Hn))switch(o=0!==(1&i.mode),i.tag){case 3:Qe(i.stateNode.containerInfo,e,r,o);break;case 5:Je(i.type,i.memoizedProps,i.stateNode,e,r,o)}n&&Ti(t)}else t.stateNode=G(r,e,n,t)}return Oi(t),null;case 13:if(st(gr),r=t.memoizedState,Vn&&null!==Gn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Gn;e;)e=je(e);return Jn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Qn(t),null===e){if(!r)throw Error(a(318));if(!K)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));We(e,t)}else Jn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Oi(t),null}return null!==Zn&&(Ca(Zn),Zn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Qn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gr.current)?0===ea&&(ea=3):Ia())),null!==t.updateQueue&&(t.flags|=4),Oi(t),null);case 4:return fr(),bi(e,t),null===e&&Q(t.stateNode.containerInfo),Oi(t),null;case 10:return ln(t.type._context),Oi(t),null;case 19:if(st(gr),null===(i=t.memoizedState))return Oi(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)ki(i,!1);else{if(0!==ea||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=vr(e))){for(t.flags|=128,ki(i,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&Bt()>la&&(t.flags|=128,r=!0,ki(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(o))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),ki(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Vn)return Oi(t),null}else 2*Bt()-i.renderingStartTime>la&&1073741824!==n&&(t.flags|=128,r=!0,ki(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Bt(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Oi(t),null);case 22:case 23:return ka(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Qo)&&(Oi(t),q&&6&t.subtreeFlags&&(t.flags|=8192)):Oi(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var Fi=s.ReactCurrentOwner,Ii=!1;function Ni(e,t,n,r){t.child=null===e?ar(t,null,n,r):or(t,e.child,n,r)}function Bi(e,t,n,r,i){n=n.render;var o=t.ref;return cn(t,i),r=kr(e,t,n,r,o,i),n=Or(),null===e||Ii?(Vn&&n&&zn(t),t.flags|=1,Ni(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,io(e,t,i))}function ji(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ja(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,zi(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Qt)(a,r)&&e.ref===t.ref)return io(e,t,i)}return t.flags|=1,(e=es(o,r)).ref=t.ref,e.return=t,t.child=e}function zi(e,t,n,r,i){if(null!==e&&Qt(e.memoizedProps,r)&&e.ref===t.ref){if(Ii=!1,0===(e.lanes&i))return t.lanes=e.lanes,io(e,t,i);0!==(131072&e.flags)&&(Ii=!0)}return Gi(e,t,n,r,i)}function Ui(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Jo,Qo),Qo|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Jo,Qo),Qo|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,lt(Jo,Qo),Qo|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt(Jo,Qo),Qo|=r;return Ni(e,t,i,n),t.child}function Hi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gi(e,t,n,r,i){var o=pt(n)?ht:ct.current;return o=ft(t,o),cn(t,i),n=kr(e,t,n,r,o,i),r=Or(),null===e||Ii?(Vn&&r&&zn(t),t.flags|=1,Ni(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,io(e,t,i))}function Vi(e,t,n,r,i){if(pt(n)){var o=!0;yt(t)}else o=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),En(t,n,r),Cn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=dn(u):u=ft(t,u=pt(n)?ht:ct.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Mn(t,a,r,u),fn=!1;var h=t.memoizedState;a.state=h,bn(t,r,a,i),l=t.memoizedState,s!==r||h!==l||dt.current||fn?("function"===typeof c&&(Sn(t,n,c,r),l=t.memoizedState),(s=fn||An(t,n,s,r,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,mn(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:en(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=dn(l):l=ft(t,l=pt(n)?ht:ct.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Mn(t,a,r,l),fn=!1,h=t.memoizedState,a.state=h,bn(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||dt.current||fn?("function"===typeof f&&(Sn(t,n,f,r),p=t.memoizedState),(u=fn||An(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Wi(e,t,n,r,o,i)}function Wi(e,t,n,r,i,o){Hi(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&_t(t,n,!1),io(e,t,o);r=t.stateNode,Fi.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=or(t,e.child,null,o),t.child=or(t,null,s,o)):Ni(e,t,s,o),t.memoizedState=r.state,i&&_t(t,n,!0),t.child}function Zi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hr(e,t.containerInfo)}function $i(e,t,n,r,i){return Jn(),er(i),t.flags|=256,Ni(e,t,n,r),t.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function Yi(e){return{baseLanes:e,cachePool:null}}function Ki(e,t,n){var r,i=t.pendingProps,o=gr.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(gr,1&o),null===e)return Kn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Ne(e)?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=rs(o,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Yi(n),t.memoizedState=qi,e):Xi(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,eo(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=rs({mode:"visible",children:i.children},o,0,null),(s=ns(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&or(t,e.child,null,n),t.child.memoizedState=Yi(n),t.memoizedState=qi,s);if(0===(1&t.mode))t=eo(e,t,n,null);else if(Ne(r))t=eo(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),Ii||i){if(null!==(i=Yo)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Sa(e,i,-1))}Ia(),t=eo(e,t,n,Error(a(421)))}else Ie(r)?(t.flags|=128,t.child=e.child,t=qa.bind(null,e),Be(r,t),t=null):(n=o.treeContext,K&&(Gn=He(r),Hn=t,Vn=!0,Zn=null,Wn=!1,null!==n&&(On[Ln++]=In,On[Ln++]=Nn,On[Ln++]=Fn,In=n.id,Nn=n.overflow,Fn=t)),(t=Xi(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Ji(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Yi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=qi,i):(n=Qi(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Ji(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Yi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=qi,i):(n=Qi(e,t,i.children,n),t.memoizedState=null,n)}function Xi(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qi(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ji(e,t,n,r,i){var o=t.mode,a=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==a?r=es(a,r):(r=ns(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function eo(e,t,n,r){return null!==r&&er(r),or(t,e.child,null,n),(e=Xi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function to(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),un(e.return,t,n)}function no(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ro(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ni(e,t,r.children,n),0!==(2&(r=gr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,n,t);else if(19===e.tag)to(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),no(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}no(t,!0,n,null,o);break;case"together":no(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function io(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),na|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function oo(e,t){switch(Un(t),t.tag){case 1:return pt(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fr(),st(dt),st(ct),_r(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mr(t),null;case 13:if(st(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Jn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(gr),null;case 4:return fr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return ka(),null;default:return null}}var ao=!1,so=!1,lo="function"===typeof WeakSet?WeakSet:Set,uo=null;function co(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Wa(e,t,r)}else n.current=null}function ho(e,t,n){try{n()}catch(r){Wa(e,t,r)}}var fo=!1;function po(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ho(t,n,o)}i=i.next}while(i!==r)}}function mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function go(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=O(n);else e=n;"function"===typeof t?t(e):t.current=e}}function vo(e,t,n){if(Vt&&"function"===typeof Vt.onCommitFiberUnmount)try{Vt.onCommitFiberUnmount(Gt,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&ho(t,n,o),r=r.next}while(r!==e)}break;case 1:if(co(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Wa(t,n,a)}break;case 5:co(t,n);break;case 4:q?Ao(e,t,n):Y&&Y&&(t=t.stateNode.containerInfo,n=Me(t),Pe(t,n))}}function yo(e,t,n){for(var r=t;;)if(vo(e,r,n),null===r.child||q&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function _o(e){var t=e.alternate;null!==t&&(e.alternate=null,_o(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bo(e){return 5===e.tag||3===e.tag||4===e.tag}function xo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||bo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wo(e){if(q){e:{for(var t=e.return;null!==t;){if(bo(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),Do(e,n=xo(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,So(e,n=xo(e),t);break;default:throw Error(a(161))}}}function So(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(So(e,t,n),e=e.sibling;null!==e;)So(e,t,n),e=e.sibling}function Do(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Do(e,t,n),e=e.sibling;null!==e;)Do(e,t,n),e=e.sibling}function Ao(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag)yo(e,o,n),i?_e(r,o.stateNode):ye(r,o.stateNode);else if(18===o.tag)i?Ke(r,o.stateNode):Ye(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(vo(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Eo(e,t){if(q){switch(t.tag){case 0:case 11:case 14:case 15:return po(3,t,t.return),mo(3,t),void po(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&me(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(K&&null!==e&&e.memoizedState.isDehydrated&&$e(t.stateNode.containerInfo));case 13:case 19:return void Mo(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return po(3,t,t.return),mo(3,t),void po(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Mo(t);case 3:K&&null!==e&&e.memoizedState.isDehydrated&&$e(t.stateNode.containerInfo)}e:if(Y){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Pe(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Mo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new lo),t.forEach((function(t){var r=Ya.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Co(e,t,n){uo=e,To(e,t,n)}function To(e,t,n){for(var r=0!==(1&e.mode);null!==uo;){var i=uo,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||ao;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||so;s=ao;var u=so;if(ao=a,(so=l)&&!u)for(uo=i;null!==uo;)l=(a=uo).child,22===a.tag&&null!==a.memoizedState?ko(i):null!==l?(l.return=a,uo=l):ko(i);for(;null!==o;)uo=o,To(o,t,n),o=o.sibling;uo=i,ao=s,so=u}Po(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,uo=o):Po(e)}}function Po(e){for(;null!==uo;){var t=uo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:so||mo(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!so)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&xn(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=O(t.child.stateNode);break;case 1:n=t.child.stateNode}xn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&qe(d)}}}break;default:throw Error(a(163))}so||512&t.flags&&go(t)}catch(h){Wa(t,t.return,h)}}if(t===e){uo=null;break}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}function Ro(e){for(;null!==uo;){var t=uo;if(t===e){uo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,uo=n;break}uo=t.return}}function ko(e){for(;null!==uo;){var t=uo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(l){Wa(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Wa(t,i,l)}}var o=t.return;try{go(t)}catch(l){Wa(t,o,l)}break;case 5:var a=t.return;try{go(t)}catch(l){Wa(t,a,l)}}}catch(l){Wa(t,t.return,l)}if(t===e){uo=null;break}var s=t.sibling;if(null!==s){s.return=t.return,uo=s;break}uo=t.return}}var Oo=0,Lo=1,Fo=2,Io=3,No=4;if("function"===typeof Symbol&&Symbol.for){var Bo=Symbol.for;Oo=Bo("selector.component"),Lo=Bo("selector.has_pseudo_class"),Fo=Bo("selector.role"),Io=Bo("selector.test_id"),No=Bo("selector.text")}function jo(e){var t=X(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=ie(e)))throw Error(a(362));return e.stateNode.current}function zo(e,t){switch(t.$$typeof){case Oo:if(e.type===t.value)return!0;break;case Lo:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!se(r)){for(;null!=o&&zo(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Fo:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case No:if((5===e.tag||6===e.tag)&&(null!==(e=ae(e))&&0<=e.indexOf(t.value)))return!0;break;case Io:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Uo(e){switch(e.$$typeof){case Oo:return"<"+(S(e.value)||"Unknown")+">";case Lo:return":has("+(Uo(e)||"")+")";case Fo:return'[role="'+e.value+'"]';case No:return'"'+e.value+'"';case Io:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Ho(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!se(i)){for(;null!=a&&zo(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Go(e,t){if(!re)throw Error(a(363));e=Ho(e=jo(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Vo=Math.ceil,Wo=s.ReactCurrentDispatcher,Zo=s.ReactCurrentOwner,$o=s.ReactCurrentBatchConfig,qo=0,Yo=null,Ko=null,Xo=0,Qo=0,Jo=at(0),ea=0,ta=null,na=0,ra=0,ia=0,oa=null,aa=null,sa=0,la=1/0;function ua(){la=Bt()+500}var ca,da=!1,ha=null,fa=null,pa=!1,ma=null,ga=0,va=0,ya=null,_a=-1,ba=0;function xa(){return 0!==(6&qo)?Bt():-1!==_a?_a:_a=Bt()}function wa(e){return 0===(1&e.mode)?1:0!==(2&qo)&&0!==Xo?Xo&-Xo:null!==Xt.transition?(0===ba&&(e=St,0===(4194240&(St<<=1))&&(St=64),ba=e),ba):0!==(e=kt)?e:J()}function Sa(e,t,n){if(50<va)throw va=0,ya=null,Error(a(185));var r=Da(e,t);return null===r?null:(Pt(r,t,n),0!==(2&qo)&&r===Yo||(r===Yo&&(0===(2&qo)&&(ra|=t),4===ea&&Ta(r,Xo)),Aa(r,n),1===t&&0===qo&&0===(1&e.mode)&&(ua(),$t&&Kt())),r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Aa(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-bt(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=Mt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=Et(e,e===Yo?Xo:0);if(0===r)null!==n&&Ft(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ft(n),1===t)0===e.tag?function(e){$t=!0,Yt(e)}(Pa.bind(null,e)):Yt(Pa.bind(null,e)),te?ne((function(){0===qo&&Kt()})):Lt(jt,Kt),n=null;else{switch(Ot(r)){case 1:n=jt;break;case 4:n=zt;break;case 16:default:n=Ut;break;case 536870912:n=Ht}n=Ka(n,Ea.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ea(e,t){if(_a=-1,ba=0,0!==(6&qo))throw Error(a(327));var n=e.callbackNode;if(Ga()&&e.callbackNode!==n)return null;var r=Et(e,e===Yo?Xo:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Na(e,r);else{t=r;var i=qo;qo|=2;var o=Fa();for(Yo===e&&Xo===t||(ua(),Oa(e,t));;)try{ja();break}catch(l){La(e,l)}an(),Wo.current=o,qo=i,null!==Ko?t=0:(Yo=null,Xo=0,t=ea)}if(0!==t){if(2===t&&(0!==(i=Ct(e))&&(r=i,t=Ma(e,i))),1===t)throw n=ta,Oa(e,0),Ta(e,r),Aa(e,Bt()),n;if(6===t)Ta(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wt(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Na(e,r))&&(0!==(o=Ct(e))&&(r=o,t=Ma(e,o))),1===t))throw n=ta,Oa(e,0),Ta(e,r),Aa(e,Bt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ha(e,aa);break;case 3:if(Ta(e,r),(130023424&r)===r&&10<(t=sa+500-Bt())){if(0!==Et(e,0))break;if(((i=e.suspendedLanes)&r)!==r){xa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=V(Ha.bind(null,e,aa),t);break}Ha(e,aa);break;case 4:if(Ta(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-bt(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Bt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vo(r/1960))-r)){e.timeoutHandle=V(Ha.bind(null,e,aa),r);break}Ha(e,aa);break;default:throw Error(a(329))}}}return Aa(e,Bt()),e.callbackNode===n?Ea.bind(null,e):null}function Ma(e,t){var n=oa;return e.current.memoizedState.isDehydrated&&(Oa(e,t).flags|=256),2!==(e=Na(e,t))&&(t=aa,aa=n,null!==t&&Ca(t)),e}function Ca(e){null===aa?aa=e:aa.push.apply(aa,e)}function Ta(e,t){for(t&=~ia,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function Pa(e){if(0!==(6&qo))throw Error(a(327));Ga();var t=Et(e,0);if(0===(1&t))return Aa(e,Bt()),null;var n=Na(e,t);if(0!==e.tag&&2===n){var r=Ct(e);0!==r&&(t=r,n=Ma(e,r))}if(1===n)throw n=ta,Oa(e,0),Ta(e,t),Aa(e,Bt()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ha(e,aa),Aa(e,Bt()),null}function Ra(e){null!==ma&&0===ma.tag&&0===(6&qo)&&Ga();var t=qo;qo|=1;var n=$o.transition,r=kt;try{if($o.transition=null,kt=1,e)return e()}finally{kt=r,$o.transition=n,0===(6&(qo=t))&&Kt()}}function ka(){Qo=Jo.current,st(Jo)}function Oa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==Z&&(e.timeoutHandle=Z,W(n)),null!==Ko)for(n=Ko.return;null!==n;){var r=n;switch(Un(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mt();break;case 3:fr(),st(dt),st(ct),_r();break;case 5:mr(r);break;case 4:fr();break;case 13:case 19:st(gr);break;case 10:ln(r.type._context);break;case 22:case 23:ka()}n=n.return}if(Yo=e,Ko=e=es(e.current,null),Xo=Qo=t,ea=0,ta=null,ia=ra=na=0,aa=oa=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(r=(n=hn[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}hn=null}return e}function La(e,t){for(;;){var n=Ko;try{if(an(),br.current=fi,Er){for(var r=Sr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Er=!1}if(wr=0,Ar=Dr=Sr=null,Mr=!1,Cr=0,Zo.current=null,null===n||null===n.return){ea=1,ta=t,Ko=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Xo,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Mi(s);if(null!==p){p.flags&=-257,Ci(p,s,l,0,t),1&p.mode&&Ei(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){Ei(o,c,t),Ia();break e}u=Error(a(426))}else if(Vn&&1&l.mode){var v=Mi(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ci(v,s,l,0,t),er(u);break e}}o=u,4!==ea&&(ea=2),null===oa?oa=[o]:oa.push(o),u=vi(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,_n(l,Di(0,u,t));break e;case 1:o=u;var y=l.type,_=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===fa||!fa.has(_)))){l.flags|=65536,t&=-t,l.lanes|=t,_n(l,Ai(l,o,t));break e}}l=l.return}while(null!==l)}Ua(n)}catch(b){t=b,Ko===n&&null!==n&&(Ko=n=n.return);continue}break}}function Fa(){var e=Wo.current;return Wo.current=fi,null===e?fi:e}function Ia(){0!==ea&&3!==ea&&2!==ea||(ea=4),null===Yo||0===(268435455&na)&&0===(268435455&ra)||Ta(Yo,Xo)}function Na(e,t){var n=qo;qo|=2;var r=Fa();for(Yo===e&&Xo===t||Oa(e,t);;)try{Ba();break}catch(i){La(e,i)}if(an(),qo=n,Wo.current=r,null!==Ko)throw Error(a(261));return Yo=null,Xo=0,ea}function Ba(){for(;null!==Ko;)za(Ko)}function ja(){for(;null!==Ko&&!It();)za(Ko)}function za(e){var t=ca(e.alternate,e,Qo);e.memoizedProps=e.pendingProps,null===t?Ua(e):Ko=t,Zo.current=null}function Ua(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Li(n,t,Qo)))return void(Ko=n)}else{if(null!==(n=oo(n,t)))return n.flags&=32767,void(Ko=n);if(null===e)return ea=6,void(Ko=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ko=t);Ko=t=e}while(null!==t);0===ea&&(ea=5)}function Ha(e,t){var n=kt,r=$o.transition;try{$o.transition=null,kt=1,function(e,t,n){do{Ga()}while(null!==ma);if(0!==(6&qo))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Yo&&(Ko=Yo=null,Xo=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||pa||(pa=!0,Ka(Ut,(function(){return Ga(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=$o.transition,$o.transition=null;var s=kt;kt=1;var l=qo;qo|=4,Zo.current=null,function(e,t){for(I(e.containerInfo),uo=t;null!==uo;)if(t=(e=uo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,uo=t;else for(;null!==uo;){e=uo;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=e.stateNode,s=o.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:q&&Ae(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,uo=t;break}uo=e.return}n=fo,fo=!1}(e,r),function(e,t){for(uo=t;null!==uo;){var n=(t=uo).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e;q?Ao(o,i,t):yo(o,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(x){Wa(i,t,x)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,uo=n;else for(;null!==uo;){t=uo;try{var s=t.flags;if(32&s&&q&&be(t.stateNode),512&s){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(sa=Bt())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,f=null!==h&&null!==h.memoizedState;if(n=t,q)e:if(r=n,i=d,o=null,q)for(var p=r;;){if(5===p.tag){if(null===o){o=p;var m=p.stateNode;i?xe(m):Se(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===o){var g=p.stateNode;i?we(g):De(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;o===p&&(o=null),p=p.return}o===p&&(o=null),p.sibling.return=p.return,p=p.sibling}if(d&&!f&&0!==(1&n.mode)){uo=n;for(var v=n.child;null!==v;){for(n=uo=v;null!==uo;){var y=(r=uo).child;switch(r.tag){case 0:case 11:case 14:case 15:po(4,r,r.return);break;case 1:co(r,r.return);var _=r.stateNode;if("function"===typeof _.componentWillUnmount){var b=r.return;try{_.props=r.memoizedProps,_.state=r.memoizedState,_.componentWillUnmount()}catch(x){Wa(r,b,x)}}break;case 5:co(r,r.return);break;case 22:if(null!==r.memoizedState){Ro(n);continue}}null!==y?(y.return=r,uo=y):Ro(n)}v=v.sibling}}}switch(4102&s){case 2:wo(t),t.flags&=-3;break;case 6:wo(t),t.flags&=-3,Eo(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Eo(t.alternate,t);break;case 4:Eo(t.alternate,t)}}catch(x){Wa(t,t.return,x)}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}}(e,r),N(e.containerInfo),e.current=r,Co(r,e,i),Nt(),qo=l,kt=s,$o.transition=o}else e.current=r;if(pa&&(pa=!1,ma=e,ga=i),0===(o=e.pendingLanes)&&(fa=null),function(e){if(Vt&&"function"===typeof Vt.onCommitFiberRoot)try{Vt.onCommitFiberRoot(Gt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Aa(e,Bt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(da)throw da=!1,e=ha,ha=null,e;0!==(1&ga)&&0!==e.tag&&Ga(),0!==(1&(o=e.pendingLanes))?e===ya?va++:(va=0,ya=e):va=0,Kt()}(e,t,n)}finally{$o.transition=r,kt=n}return null}function Ga(){if(null!==ma){var e=Ot(ga),t=$o.transition,n=kt;try{if($o.transition=null,kt=16>e?16:e,null===ma)var r=!1;else{if(e=ma,ma=null,ga=0,0!==(6&qo))throw Error(a(331));var i=qo;for(qo|=4,uo=e.current;null!==uo;){var o=uo,s=o.child;if(0!==(16&uo.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(uo=c;null!==uo;){var d=uo;switch(d.tag){case 0:case 11:case 15:po(8,d,o)}var h=d.child;if(null!==h)h.return=d,uo=h;else for(;null!==uo;){var f=(d=uo).sibling,p=d.return;if(_o(d),d===c){uo=null;break}if(null!==f){f.return=p,uo=f;break}uo=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}uo=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,uo=s;else e:for(;null!==uo;){if(0!==(2048&(o=uo).flags))switch(o.tag){case 0:case 11:case 15:po(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,uo=y;break e}uo=o.return}}var _=e.current;for(uo=_;null!==uo;){var b=(s=uo).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,uo=b;else e:for(s=_;null!==uo;){if(0!==(2048&(l=uo).flags))try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(w){Wa(l,l.return,w)}if(l===s){uo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,uo=x;break e}uo=l.return}}if(qo=i,Kt(),Vt&&"function"===typeof Vt.onPostCommitFiberRoot)try{Vt.onPostCommitFiberRoot(Gt,e)}catch(w){}r=!0}return r}finally{kt=n,$o.transition=t}}return!1}function Va(e,t,n){vn(e,t=Di(0,t=vi(n,t),1)),t=xa(),null!==(e=Da(e,1))&&(Pt(e,1,t),Aa(e,t))}function Wa(e,t,n){if(3===e.tag)Va(e,e,n);else for(;null!==t;){if(3===t.tag){Va(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===fa||!fa.has(r))){vn(t,e=Ai(t,e=vi(n,e),1)),e=xa(),null!==(t=Da(t,1))&&(Pt(t,1,e),Aa(t,e));break}}t=t.return}}function Za(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=xa(),e.pingedLanes|=e.suspendedLanes&n,Yo===e&&(Xo&n)===n&&(4===ea||3===ea&&(130023424&Xo)===Xo&&500>Bt()-sa?Oa(e,0):ia|=n),Aa(e,t)}function $a(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Dt,0===(130023424&(Dt<<=1))&&(Dt=4194304)));var n=xa();null!==(e=Da(e,t))&&(Pt(e,t,n),Aa(e,n))}function qa(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),$a(e,n)}function Ya(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),$a(e,n)}function Ka(e,t){return Lt(e,t)}function Xa(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,n,r){return new Xa(e,t,n,r)}function Ja(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Qa(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ja(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,o,t);case d:s=8,i|=8;break;case h:return(e=Qa(12,n,t,2|i)).elementType=h,e.lanes=o,e;case g:return(e=Qa(13,n,t,i)).elementType=g,e.lanes=o,e;case v:return(e=Qa(19,n,t,i)).elementType=v,e.lanes=o,e;case b:return rs(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case m:s=11;break e;case y:s=14;break e;case _:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Qa(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function ns(e,t,n,r){return(e=Qa(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Qa(22,e,r,t)).elementType=b,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Qa(6,e,null,t)).lanes=n,e}function os(e,t,n){return(t=Qa(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function as(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Z,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tt(0),this.expirationTimes=Tt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.identifierPrefix=r,this.onRecoverableError=i,K&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,o,a,s,l){return e=new as(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Qa(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(o),e}function ls(e){if(!e)return ut;e:{if(A(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(pt(n))return vt(e,n,t)}return t}function us(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=C(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ds(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function hs(e){return null===(e=C(e))?null:e.stateNode}function fs(){return null}return ca=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Ii=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ii=!1,function(e,t,n){switch(t.tag){case 3:Zi(t),Jn();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ki(e,t,n):(lt(gr,1&gr.current),null!==(e=io(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ro(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Ui(e,t,n)}return io(e,t,n)}(e,t,n);Ii=0!==(131072&e.flags)}else Ii=!1,Vn&&0!==(1048576&t.flags)&&jn(t,kn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ct.current);cn(t,n),i=kr(null,t,r,e,i,n);var o=Or();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(o=!0,yt(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=Dn,t.stateNode=i,i._reactInternals=t,Cn(t,r,e,n),t=Wi(null,t,r,!0,o,n)):(t.tag=0,Vn&&o&&zn(t),Ni(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ja(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Gi(null,t,r,e,n);break e;case 1:t=Vi(null,t,r,e,n);break e;case 11:t=Bi(null,t,r,e,n);break e;case 14:t=ji(null,t,r,en(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Gi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Zi(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,mn(e,t),bn(t,r,null,n);var s=t.memoizedState;if(r=s.element,K&&o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=$i(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=$i(e,t,r,n,i=Error(a(424)));break e}for(K&&(Gn=Ue(t.stateNode.containerInfo),Hn=t,Vn=!0,Zn=null,Wn=!1),n=ar(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Jn(),r===i){t=io(e,t,n);break e}Ni(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Kn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,H(r,i)?s=null:null!==o&&H(r,o)&&(t.flags|=32),Hi(e,t),Ni(e,t,s,n),t.child;case 6:return null===e&&Kn(t),null;case 13:return Ki(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=or(t,null,r,n):Ni(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Bi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Ni(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ni(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,sn(0,r,s=i.value),null!==o)if(Wt(o.value,s)){if(o.children===i.children&&!dt.current){t=io(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=gn(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),un(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),un(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Ni(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=dn(i)),t.flags|=1,Ni(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),ji(e,t,r,i=en(r.type,i),n);case 15:return zi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,cn(t,n),En(t,r,i),Cn(t,r,i,n),Wi(null,t,r,!0,e,n);case 19:return ro(e,t,n);case 22:return Ui(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(Sa(e,134217728,xa()),ds(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=xa(),n=wa(e);Sa(e,n,t),ds(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=At(t.pendingLanes);0!==n&&(Rt(t,1|n),Aa(t,Bt()),0===(6&qo)&&(ua(),Kt()))}break;case 13:var r=xa();Ra((function(){return Sa(e,1,r)})),ds(e,1)}},t.batchedUpdates=function(e,t){var n=qo;qo|=1;try{return e(t)}finally{0===(qo=n)&&(ua(),$t&&Kt())}},t.createComponentSelector=function(e){return{$$typeof:Oo,value:e}},t.createContainer=function(e,t,n,r,i,o,a){return ss(e,t,!1,null,0,r,0,o,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Lo,value:e}},t.createHydrationContainer=function(e,t,n,r,i,o,a,s,l){return(e=ss(n,r,!0,e,0,o,0,s,l)).context=ls(null),n=e.current,(o=gn(r=xa(),i=wa(n))).callback=void 0!==t&&null!==t?t:null,vn(n,o),e.current.lanes=i,Pt(e,i,r),Aa(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Fo,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Io,value:e}},t.createTextSelector=function(e){return{$$typeof:No,value:e}},t.deferredUpdates=function(e){var t=kt,n=$o.transition;try{return $o.transition=null,kt=16,e()}finally{kt=t,$o.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var o=kt,a=$o.transition;try{return $o.transition=null,kt=1,e(t,n,r,i)}finally{kt=o,$o.transition=a,0===qo&&ua()}},t.findAllNodes=Go,t.findBoundingRects=function(e,t){if(!re)throw Error(a(363));t=Go(e,t),e=[];for(var n=0;n<t.length;n++)e.push(oe(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,d=c+u.width,h=u.y,f=h+u.height;if(r>=c&&o>=h&&i<=d&&s<=f){e.splice(t,1);break}if(!(r!==c||n.width!==u.width||f<o||h>s)){h>o&&(u.height+=h-o,u.y=o),f<s&&(u.height=s-h),e.splice(t,1);break}if(!(o!==h||n.height!==u.height||d<r||c>i)){c>r&&(u.width+=c-r,u.x=r),d<i&&(u.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=us,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=M(e))?P(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return us(e)},t.flushControlled=function(e){var t=qo;qo|=1;var n=$o.transition,r=kt;try{$o.transition=null,kt=1,e()}finally{kt=r,$o.transition=n,0===(qo=t)&&(ua(),Kt())}},t.flushPassiveEffects=Ga,t.flushSync=Ra,t.focusWithin=function(e,t){if(!re)throw Error(a(363));for(t=Ho(e=jo(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ue(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return kt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(a(363));var n=0,r=[];e=[jo(e),0];for(var i=0;i<e.length;){var o=e[i++],s=e[i++],l=t[s];if((5!==o.tag||!se(o))&&(zo(o,l)&&(r.push(Uo(l)),++s>n&&(n=s)),s<t.length))for(o=o.child;null!==o;)e.push(o,s),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Uo(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?O(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:hs,findFiberByHostInstance:e.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Gt=t.inject(e),Vt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(a(363));e=Go(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,o=xa(),a=wa(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=Sa(i,a,o))&&yn(e,i,a),a},t}},32576:function(e,t,n){"use strict";e.exports=n(46511)},76525:function(e,t,n){"use strict";e.exports=n(67287)},52546:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,O(w);else{var t=r(c);null!==t&&L(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var o=f;try{for(b(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&i(u),b(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&L(x,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,D=!1,A=null,E=-1,M=5,C=-1;function T(){return!(t.unstable_now()-C<M)}function P(){if(null!==A){var e=t.unstable_now();C=e;var n=!0;try{n=A(!0,e)}finally{n?S():(D=!1,A=null)}}else D=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,k=R.port2;R.port1.onmessage=P,S=function(){k.postMessage(null)}}else S=function(){v(P,0)};function O(e){A=e,D||(D=!0,S())}function L(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(y(E),E=-1):g=!0,L(x,o-a))):(e.sortIndex=s,n(u,e),m||p||(m=!0,O(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},60373:function(e,t,n){"use strict";e.exports=n(52546)},41086:function(e,t,n){"use strict";var r=n(7853),i=n(36919),o=n(55299),a=n(84642);function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!a(e))return e;if(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!==typeof t)return e;for(var l=r(t,{sep:".",brackets:!0}).filter(s),u=l.length,c=-1,d=e;++c<u;){var h=l[c];c===u-1?o(d[h])&&o(n)?d[h]=i({},d[h],n):d[h]=n:(a(d[h])||(d[h]={}),d=d[h])}return e}},84642:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},59252:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function i(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function o(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(e,t){var n,s,l,u,c,d=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,h=[],f="",p=t||{},m=0;function g(e){var t=r[e[1]||""],n=h[h.length-1]==e;return t?t[1]?(n?h.pop():h.push(e),t[0|n]):t[0]:e}function v(){for(var e="";h.length;)e+=g(h[h.length-1]);return e}for(e=e.replace(/^\[(.+?)\]:\s*(.+)$/gm,(function(e,t,n){return p[t.toLowerCase()]=n,""})).replace(/^\n+|\n+$/g,"");l=d.exec(e);)s=e.substring(m,l.index),m=d.lastIndex,n=l[0],s.match(/[^\\](\\\\)*\\$/)||((c=l[3]||l[4])?n='<pre class="code '+(l[4]?"poetry":l[2].toLowerCase())+'"><code'+(l[2]?' class="language-'+l[2].toLowerCase()+'"':"")+">"+i(o(c).replace(/^\n+|\n+$/g,""))+"</code></pre>":(c=l[6])?(c.match(/\./)&&(l[5]=l[5].replace(/^\d+/gm,"")),u=a(i(l[5].replace(/^\s*[>*+.-]/gm,""))),">"==c?c="blockquote":(c=c.match(/\./)?"ol":"ul",u=u.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),n="<"+c+">"+u+"</"+c+">"):l[8]?n='<img src="'+o(l[8])+'" alt="'+o(l[7])+'">':l[10]?(f=f.replace("<a>",'<a href="'+o(l[11]||p[s.toLowerCase()])+'">'),n=v()+"</a>"):l[9]?n="<a>":l[12]||l[14]?n="<"+(c="h"+(l[14]?l[14].length:l[13]>"="?1:2))+">"+a(l[12]||l[15],p)+"</"+c+">":l[16]?n="<code>"+o(l[16])+"</code>":(l[17]||l[1])&&(n=g(l[17]||"--"))),f+=s,f+=n;return(f+e.substring(m)+v()).replace(/^\n+|\n+$/g,"")}},7853:function(e,t,n){"use strict";var r=n(98071);function i(e,t,n,r){var o=e.indexOf(t,n);return"\\"===e.charAt(o-1)?i(e,t,o+1):o}function o(e,t){return!0===t.keepDoubleQuotes&&'"'===e||(!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes)}function a(e,t,n){return"function"===typeof e.keepEscaping?e.keepEscaping(t,n):!0===e.keepEscaping||"\\"===t[n+1]}e.exports=function(e,t,n){if("string"!==typeof e)throw new TypeError("expected a string");"function"===typeof t&&(n=t,t=null),"string"===typeof t&&(t={sep:t});var s,l=r({sep:"."},t),u=l.quotes||['"',"'","`"];!0===l.brackets?s={"<":">","(":")","[":"]","{":"}"}:l.brackets&&(s=l.brackets);var c,d=[],h=[],f=[""],p=l.sep,m=e.length,g=-1;function v(){if(s&&h.length)return s[h[h.length-1]]}for(;++g<m;){var y=e[g],_=e[g+1],b={val:y,idx:g,arr:f,str:e};if(d.push(b),"\\"!==y){if(s&&s[y]){h.push(y);var x=v(),w=g+1;if(-1!==e.indexOf(x,w+1))for(;h.length&&w<m;){var S=e[++w];if("\\"!==S)if(-1===u.indexOf(S)){if(x=v(),h.length&&-1===e.indexOf(x,w+1))break;s[S]?h.push(S):x===S&&h.pop()}else w=i(e,S,w+1);else S++}if(-1===(c=w)){f[f.length-1]+=y;continue}y=e.slice(g,c+1),b.val=y,b.idx=g=c}if(-1!==u.indexOf(y)){if(-1===(c=i(e,y,g+1))){f[f.length-1]+=y;continue}y=!0===o(y,l)?e.slice(g,c+1):e.slice(g+1,c),b.val=y,b.idx=g=c}"function"===typeof n&&(n(b,d),y=b.val,g=b.idx),b.val!==p||!1===b.split?f[f.length-1]+=b.val:f.push("")}else b.val=!0===a(l,e,g)?y+_:_,b.escaped=!0,"function"===typeof n&&n(b),f[f.length-1]+=b.val,g++}return f}},98071:function(e,t,n){"use strict";var r=n(51833),i=n(1052);function o(e,t){for(var n in t)u(t,n)&&(e[n]=t[n])}function a(e){return e&&"string"===typeof e}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e){return e&&"object"===typeof e||r(e)}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=Object.assign||function(e){if(null===e||"undefined"===typeof e)throw new TypeError("Cannot convert undefined or null to object");l(e)||(e={});for(var t=1;t<arguments.length;t++){var n=arguments[t];a(n)&&(n=s(n)),l(n)&&(o(e,n),i(e,n))}return e}},94633:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},o=n,a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)i[o]||l(e[o],o,new Set);return r;function l(e,t,o){if(o.has(e)){var u;try{u=", node was:"+JSON.stringify(e)}catch(h){u=""}throw new Error("Cyclic dependency"+u)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var c=a.get(e)||new Set;if(t=(c=Array.from(c)).length){o.add(e);do{var d=c[--t];l(d,s.get(d),o)}while(t);o.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},38891:function(e,t,n){"use strict";n.d(t,{Ir:function(){return u},Yz:function(){return a}});var r=n(67294);function i(e,t=0){const n=performance.now(),r={};return function i(){r.id=requestAnimationFrame((r=>{r-n>t?e():i()}))}(),r}function o(e){e.id&&cancelAnimationFrame(e.id)}function a(e,t){const[n,a]=(0,r.useState)(e?"enter":"from"),s=(0,r.useRef)({}),[l,u]=(0,r.useState)(e);return(0,r.useEffect)((function(){return o(s.current),e?(a("from"),u(!0),i((()=>{a("enter")}))):(a("leave"),s.current=i((()=>{u(!1)}),t)),()=>{o(s.current)}}),[e,t]),{stage:n,shouldMount:l}}var s=n(85893);function l({state:e,timeout:t,mode:n,keyRef:i,list:o,setList:a}){(0,r.useEffect)((()=>{if(void 0!==n&&"default"!==n)return;const[r]=o.slice(-1);if(r.state===e)return;const s=i.current;i.current++;const l=i.current;a((t=>t.concat({state:e,key:l,stage:"from"})));setTimeout((()=>{a((e=>e.map((e=>(e=>e.key===l)(e)?Object.assign(Object.assign({},e),{stage:"enter"}):e))))}));a((e=>e.map((e=>(e=>e.key===s)(e)?Object.assign(Object.assign({},e),{stage:"leave"}):e))));const u=e=>e.key!==s;setTimeout((()=>{a((e=>e.filter(u)))}),t)}),[i,o,n,a,e,t])}function u(e,t,n){const a=(0,r.useRef)(0),u={state:e,key:a.current,stage:"enter"},[c,d]=(0,r.useState)([u]);return l({state:e,timeout:t,keyRef:a,mode:n,list:c,setList:d}),function({state:e,timeout:t,mode:n,keyRef:a,list:s,setList:l}){const u=(0,r.useRef)({});(0,r.useEffect)((()=>{if("out-in"!==n)return;const[r]=s.slice(-1);return r.state!==e&&"enter"===r.stage&&l([Object.assign(Object.assign({},r),{stage:"leave"})]),r.state!==e&&"leave"===r.stage&&(o(u.current),u.current=i((()=>{a.current++,l([{state:e,key:a.current,stage:"from"}])}),t)),r.state===e&&"from"===r.stage&&i((()=>{l((e=>[Object.assign(Object.assign({},e[0]),{stage:"enter"})]))})),()=>{o(u.current)}}),[a,s,n,l,e,t])}({state:e,timeout:t,keyRef:a,mode:n,list:c,setList:d}),function({state:e,timeout:t,mode:n,keyRef:a,list:s,setList:l}){const u=(0,r.useRef)({}),c=(0,r.useRef)({});(0,r.useEffect)((()=>{if("in-out"!==n)return;const[r,d]=s.reverse();return r.state!==e&&"enter"===r.stage&&(a.current++,l((t=>t.slice(-1).concat({state:e,key:a.current,stage:"from"})))),r.state===e&&"from"===r.stage&&i((()=>{l([d,Object.assign(Object.assign({},r),{stage:"enter"})])})),r.state===e&&"enter"===r.stage&&"enter"===d.stage&&(o(u.current),u.current=i((()=>{l([Object.assign(Object.assign({},d),{stage:"leave"}),r])}),t)),"leave"===d.stage&&(o(c.current),c.current=i((()=>{l([r])}),t)),()=>{o(u.current),o(c.current)}}),[a,s,n,l,e,t])}({state:e,timeout:t,keyRef:a,mode:n,list:c,setList:d}),function(e){return c.map((t=>(0,s.jsx)(r.Fragment,{children:e(t.state,t.stage)},t.key)))}}},54245:function(e,t,n){"use strict";t.Z=void 0;var r=n(67294),i=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e}),[e,t.current]),t.current};t.Z=i},53250:function(e,t,n){"use strict";var r=n(67294);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s((function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,n,t]),a((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},50139:function(e,t,n){"use strict";var r=n(67294),i=n(61688);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u((function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var f=a(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=f}),[f]),c(f),f}},61688:function(e,t,n){"use strict";e.exports=n(53250)},52798:function(e,t,n){"use strict";e.exports=n(50139)},55877:function(e,t,n){var r=n(23570),i=n(71171),o=i;o.v1=r,o.v4=i,e.exports=o},45327:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},85217:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},23570:function(e,t,n){var r,i,o=n(85217),a=n(45327),s=0,l=0;e.exports=function(e,t,n){var u=t&&n||0,c=t||[],d=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==h){var f=o();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,g=p-s+(m-l)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||p>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,l=m,i=h;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;c[u++]=v>>>24&255,c[u++]=v>>>16&255,c[u++]=v>>>8&255,c[u++]=255&v;var y=p/4294967296*1e4&268435455;c[u++]=y>>>8&255,c[u++]=255&y,c[u++]=y>>>24&15|16,c[u++]=y>>>16&255,c[u++]=h>>>8|128,c[u++]=255&h;for(var _=0;_<6;++_)c[u+_]=d[_];return t||a(c)}},71171:function(e,t,n){var r=n(85217),i=n(45327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},36902:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s}});const r=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o};var i=n(67294),o=n(52798);const a=e=>{const t="function"===typeof e?(e=>e?r(e):r)(e):e,n=(e,n)=>function(e,t=e.getState,n){const r=(0,o.useSyncExternalStoreWithSelector)(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,i.useDebugValue)(r),r}(t,e,n);return Object.assign(n,t),n};var s=e=>e?a(e):a},87462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},13541:function(e,t,n){"use strict";n.d(t,{xQ:function(){return L},bt:function(){return k}});var r=n(67294);let i=b();const o=e=>g(e,i);let a=b();o.write=e=>g(e,a);let s=b();o.onStart=e=>g(e,s);let l=b();o.onFrame=e=>g(e,l);let u=b();o.onFinish=e=>g(e,u);let c=[];o.setTimeout=(e,t)=>{let n=o.now()+t,r=()=>{let e=c.findIndex((e=>e.cancel==r));~e&&c.splice(e,1),p-=~e?1:0},i={time:n,handler:e,cancel:r};return c.splice(d(n),0,i),p+=1,v(),i};let d=e=>~(~c.findIndex((t=>t.time>e))||~c.length);o.cancel=e=>{s.delete(e),l.delete(e),i.delete(e),a.delete(e),u.delete(e)},o.sync=e=>{m=!0,o.batchedUpdates(e),m=!1},o.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,o.onStart(n)}return r.handler=e,r.cancel=()=>{s.delete(n),t=null},r};let h="undefined"!=typeof window?window.requestAnimationFrame:()=>{};o.use=e=>h=e,o.now="undefined"!=typeof performance?()=>performance.now():Date.now,o.batchedUpdates=e=>e(),o.catch=console.error,o.frameLoop="always",o.advance=()=>{"demand"!==o.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):_()};let f=-1,p=0,m=!1;function g(e,t){m?(t.delete(e),e(0)):(t.add(e),v())}function v(){f<0&&(f=0,"demand"!==o.frameLoop&&h(y))}function y(){~f&&(h(y),o.batchedUpdates(_))}function _(){let e=f;f=o.now();let t=d(f);t&&(x(c.splice(0,t),(e=>e.handler())),p-=t),s.flush(),i.flush(e?Math.min(64,f-e):16.667),l.flush(),a.flush(),u.flush(),p||(f=-1)}function b(){let e=new Set,t=e;return{add(n){p+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(p-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,p-=t.size,x(t,(t=>t(n)&&e.add(t))),p+=e.size,t=e)}}}function x(e,t){e.forEach((e=>{try{t(e)}catch(n){o.catch(n)}}))}var w=function(){};var S="undefined"!==typeof window,D=S?r.useLayoutEffect:r.useEffect,A={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};var E=S&&"undefined"!==typeof window.ResizeObserver?function(){var e=(0,r.useState)(null),t=e[0],n=e[1],i=(0,r.useState)(A),o=i[0],a=i[1],s=(0,r.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,i=t.width,o=t.height,s=t.top,l=t.left,u=t.bottom,c=t.right;a({x:n,y:r,width:i,height:o,top:s,left:l,bottom:u,right:c})}}))}),[]);return D((function(){if(t)return s.observe(t),function(){s.disconnect()}}),[t]),[n,o]}:function(){return[w,A]},M=function(e){(0,r.useEffect)(e,[])},C=function(e){var t=(0,r.useRef)(e);t.current=e,M((function(){return function(){return t.current()}}))},T=function(e){var t=(0,r.useRef)(0),n=(0,r.useState)(e),i=n[0],o=n[1],a=(0,r.useCallback)((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){o(e)}))}),[]);return C((function(){cancelAnimationFrame(t.current)})),[i,a]},P=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var n=T({width:S?window.innerWidth:e,height:S?window.innerHeight:t}),i=n[0],o=n[1];return(0,r.useEffect)((function(){if(S){var e=function(){o({width:window.innerWidth,height:window.innerHeight})};return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"resize",e),function(){!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"resize",e)}}}),[]),i};function R(e,t,n){var r=(n||{}).atBegin;return function(e,t,n){var r,i=n||{},o=i.noTrailing,a=void 0!==o&&o,s=i.noLeading,l=void 0!==s&&s,u=i.debounceMode,c=void 0===u?void 0:u,d=!1,h=0;function f(){r&&clearTimeout(r)}function p(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=this,u=Date.now()-h;function p(){h=Date.now(),t.apply(s,i)}function m(){r=void 0}d||(l||!c||r||p(),f(),void 0===c&&u>e?l?(h=Date.now(),a||(r=setTimeout(c?m:p,e))):p():!0!==a&&(r=setTimeout(c?m:p,void 0===c?e-u:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;f(),d=!n},p}(e,t,{debounceMode:!1!==(void 0!==r&&r)})}var k="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,O={};function L(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))();k((function(){if(e)return O[r]={callback:e,priority:t},function(){delete O[r]}}),[e,r,t].concat(n))}o.onFrame((function(){return Object.entries(O).sort((function(e,t){return e[1].priority-t[1].priority})).forEach((function(e){(0,e[1].callback)(o.now())})),!0}));function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function I(e,t){void 0===t&&(t=0);var n=t+e.offsetTop;return e.offsetParent?I(e.offsetParent,n):n}function N(e,t){void 0===t&&(t=0);var n=t+e.offsetLeft;return e.offsetParent?N(e.offsetParent,n):n}},52587:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},50029:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},59499:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},4730:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},27812:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(52587);var i=n(2937);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2937:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(52587);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},99477:function(e,t,n){"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return ne},AddEquation:function(){return A},AddOperation:function(){return X},AdditiveAnimationBlendMode:function(){return Ct},AdditiveBlending:function(){return x},AlphaFormat:function(){return Le},AlwaysDepth:function(){return H},AlwaysStencilFunc:function(){return nn},AmbientLight:function(){return Ud},AmbientLightProbe:function(){return ih},AnimationClip:function(){return hd},AnimationLoader:function(){return bd},AnimationMixer:function(){return Bh},AnimationObjectGroup:function(){return Fh},AnimationUtils:function(){return Jc},ArcCurve:function(){return xu},ArrayCamera:function(){return el},ArrowHelper:function(){return Cf},Audio:function(){return gh},AudioAnalyser:function(){return wh},AudioContext:function(){return th},AudioListener:function(){return mh},AudioLoader:function(){return nh},AxesHelper:function(){return Tf},BackSide:function(){return m},BasicDepthPacking:function(){return Lt},BasicShadowMap:function(){return c},Bone:function(){return zl},BooleanKeyframeTrack:function(){return od},Box2:function(){return qh},Box3:function(){return ur},Box3Helper:function(){return Sf},BoxBufferGeometry:function(){return uo},BoxGeometry:function(){return uo},BoxHelper:function(){return wf},BufferAttribute:function(){return Ai},BufferGeometry:function(){return Gi},BufferGeometryLoader:function(){return qd},ByteType:function(){return De},Cache:function(){return pd},Camera:function(){return mo},CameraHelper:function(){return _f},CanvasTexture:function(){return yu},CapsuleBufferGeometry:function(){return Hu},CapsuleGeometry:function(){return Hu},CatmullRomCurve3:function(){return Mu},CineonToneMapping:function(){return te},CircleBufferGeometry:function(){return Gu},CircleGeometry:function(){return Gu},ClampToEdgeWrapping:function(){return de},Clock:function(){return uh},Color:function(){return Wn},ColorKeyframeTrack:function(){return ad},ColorManagement:function(){return Bn},CompressedTexture:function(){return vu},CompressedTextureLoader:function(){return xd},ConeBufferGeometry:function(){return Wu},ConeGeometry:function(){return Wu},CubeCamera:function(){return yo},CubeReflectionMapping:function(){return oe},CubeRefractionMapping:function(){return ae},CubeTexture:function(){return _o},CubeTextureLoader:function(){return Sd},CubeUVReflectionMapping:function(){return ue},CubicBezierCurve:function(){return Ru},CubicBezierCurve3:function(){return ku},CubicInterpolant:function(){return td},CullFaceBack:function(){return s},CullFaceFront:function(){return l},CullFaceFrontBack:function(){return u},CullFaceNone:function(){return a},Curve:function(){return _u},CurvePath:function(){return ju},CustomBlending:function(){return D},CustomToneMapping:function(){return re},CylinderBufferGeometry:function(){return Vu},CylinderGeometry:function(){return Vu},Cylindrical:function(){return Zh},Data3DTexture:function(){return nr},DataArrayTexture:function(){return er},DataTexture:function(){return Ul},DataTexture2DArray:function(){return Zf},DataTexture3D:function(){return $f},DataTextureLoader:function(){return Dd},DataUtils:function(){return Rf},DecrementStencilOp:function(){return Wt},DecrementWrapStencilOp:function(){return $t},DefaultLoadingManager:function(){return gd},DepthFormat:function(){return je},DepthStencilFormat:function(){return ze},DepthTexture:function(){return il},DirectionalLight:function(){return zd},DirectionalLightHelper:function(){return gf},DiscreteInterpolant:function(){return rd},DodecahedronBufferGeometry:function(){return $u},DodecahedronGeometry:function(){return $u},DoubleSide:function(){return g},DstAlphaFactor:function(){return I},DstColorFactor:function(){return B},DynamicCopyUsage:function(){return dn},DynamicDrawUsage:function(){return on},DynamicReadUsage:function(){return ln},EdgesGeometry:function(){return Qu},EllipseCurve:function(){return bu},EqualDepth:function(){return W},EqualStencilFunc:function(){return Xt},EquirectangularReflectionMapping:function(){return se},EquirectangularRefractionMapping:function(){return le},Euler:function(){return $r},EventDispatcher:function(){return gn},ExtrudeBufferGeometry:function(){return Cc},ExtrudeGeometry:function(){return Cc},FileLoader:function(){return _d},FlatShading:function(){return v},Float16BufferAttribute:function(){return Oi},Float32BufferAttribute:function(){return Li},Float64BufferAttribute:function(){return Fi},FloatType:function(){return Te},Fog:function(){return cl},FogExp2:function(){return ul},Font:function(){return Gf},FontLoader:function(){return Hf},FramebufferTexture:function(){return gu},FrontSide:function(){return p},Frustum:function(){return Mo},GLBufferAttribute:function(){return Uh},GLSL1:function(){return fn},GLSL3:function(){return pn},GreaterDepth:function(){return $},GreaterEqualDepth:function(){return Z},GreaterEqualStencilFunc:function(){return tn},GreaterStencilFunc:function(){return Jt},GridHelper:function(){return df},Group:function(){return tl},HalfFloatType:function(){return Pe},HemisphereLight:function(){return Md},HemisphereLightHelper:function(){return cf},HemisphereLightProbe:function(){return rh},IcosahedronBufferGeometry:function(){return Pc},IcosahedronGeometry:function(){return Pc},ImageBitmapLoader:function(){return Jd},ImageLoader:function(){return wd},ImageUtils:function(){return $n},ImmediateRenderObject:function(){return Vf},IncrementStencilOp:function(){return Vt},IncrementWrapStencilOp:function(){return Zt},InstancedBufferAttribute:function(){return Wl},InstancedBufferGeometry:function(){return $d},InstancedInterleavedBuffer:function(){return zh},InstancedMesh:function(){return Kl},Int16BufferAttribute:function(){return Ti},Int32BufferAttribute:function(){return Ri},Int8BufferAttribute:function(){return Ei},IntType:function(){return Me},InterleavedBuffer:function(){return hl},InterleavedBufferAttribute:function(){return pl},Interpolant:function(){return ed},InterpolateDiscrete:function(){return xt},InterpolateLinear:function(){return wt},InterpolateSmooth:function(){return St},InvertStencilOp:function(){return qt},KeepStencilOp:function(){return Ht},KeyframeTrack:function(){return id},LOD:function(){return Ol},LatheBufferGeometry:function(){return Uu},LatheGeometry:function(){return Uu},Layers:function(){return qr},LessDepth:function(){return G},LessEqualDepth:function(){return V},LessEqualStencilFunc:function(){return Qt},LessStencilFunc:function(){return Kt},Light:function(){return Ed},LightProbe:function(){return Vd},Line:function(){return ru},Line3:function(){return Xh},LineBasicMaterial:function(){return Xl},LineCurve:function(){return Ou},LineCurve3:function(){return Lu},LineDashedMaterial:function(){return Xc},LineLoop:function(){return su},LineSegments:function(){return au},LinearEncoding:function(){return kt},LinearFilter:function(){return ye},LinearInterpolant:function(){return nd},LinearMipMapLinearFilter:function(){return we},LinearMipMapNearestFilter:function(){return be},LinearMipmapLinearFilter:function(){return xe},LinearMipmapNearestFilter:function(){return _e},LinearSRGBColorSpace:function(){return zt},LinearToneMapping:function(){return J},Loader:function(){return vd},LoaderUtils:function(){return Zd},LoadingManager:function(){return md},LoopOnce:function(){return yt},LoopPingPong:function(){return bt},LoopRepeat:function(){return _t},LuminanceAlphaFormat:function(){return Be},LuminanceFormat:function(){return Ne},MOUSE:function(){return i},Material:function(){return xi},MaterialLoader:function(){return Wd},MathUtils:function(){return Cn},Matrix3:function(){return Pn},Matrix4:function(){return Nr},MaxEquation:function(){return T},Mesh:function(){return so},MeshBasicMaterial:function(){return wi},MeshDepthMaterial:function(){return qs},MeshDistanceMaterial:function(){return Ys},MeshLambertMaterial:function(){return Yc},MeshMatcapMaterial:function(){return Kc},MeshNormalMaterial:function(){return qc},MeshPhongMaterial:function(){return Zc},MeshPhysicalMaterial:function(){return Wc},MeshStandardMaterial:function(){return Vc},MeshToonMaterial:function(){return $c},MinEquation:function(){return C},MirroredRepeatWrapping:function(){return he},MixOperation:function(){return K},MultiplyBlending:function(){return S},MultiplyOperation:function(){return Y},NearestFilter:function(){return fe},NearestMipMapLinearFilter:function(){return ve},NearestMipMapNearestFilter:function(){return me},NearestMipmapLinearFilter:function(){return ge},NearestMipmapNearestFilter:function(){return pe},NeverDepth:function(){return U},NeverStencilFunc:function(){return Yt},NoBlending:function(){return _},NoColorSpace:function(){return Bt},NoToneMapping:function(){return Q},NormalAnimationBlendMode:function(){return Mt},NormalBlending:function(){return b},NotEqualDepth:function(){return q},NotEqualStencilFunc:function(){return en},NumberKeyframeTrack:function(){return sd},Object3D:function(){return li},ObjectLoader:function(){return Yd},ObjectSpaceNormalMap:function(){return Nt},OctahedronBufferGeometry:function(){return Rc},OctahedronGeometry:function(){return Rc},OneFactor:function(){return R},OneMinusDstAlphaFactor:function(){return N},OneMinusDstColorFactor:function(){return j},OneMinusSrcAlphaFactor:function(){return F},OneMinusSrcColorFactor:function(){return O},OrthographicCamera:function(){return zo},PCFShadowMap:function(){return d},PCFSoftShadowMap:function(){return h},PMREMGenerator:function(){return Yo},ParametricGeometry:function(){return zf},Path:function(){return zu},PerspectiveCamera:function(){return go},Plane:function(){return Do},PlaneBufferGeometry:function(){return Po},PlaneGeometry:function(){return Po},PlaneHelper:function(){return Df},PointLight:function(){return Bd},PointLightHelper:function(){return af},Points:function(){return fu},PointsMaterial:function(){return lu},PolarGridHelper:function(){return hf},PolyhedronBufferGeometry:function(){return Zu},PolyhedronGeometry:function(){return Zu},PositionalAudio:function(){return xh},PropertyBinding:function(){return Lh},PropertyMixer:function(){return Sh},QuadraticBezierCurve:function(){return Fu},QuadraticBezierCurve3:function(){return Iu},Quaternion:function(){return or},QuaternionKeyframeTrack:function(){return ud},QuaternionLinearInterpolant:function(){return ld},REVISION:function(){return r},RGBADepthPacking:function(){return Ft},RGBAFormat:function(){return Ie},RGBAIntegerFormat:function(){return We},RGBA_ASTC_10x10_Format:function(){return pt},RGBA_ASTC_10x5_Format:function(){return dt},RGBA_ASTC_10x6_Format:function(){return ht},RGBA_ASTC_10x8_Format:function(){return ft},RGBA_ASTC_12x10_Format:function(){return mt},RGBA_ASTC_12x12_Format:function(){return gt},RGBA_ASTC_4x4_Format:function(){return rt},RGBA_ASTC_5x4_Format:function(){return it},RGBA_ASTC_5x5_Format:function(){return ot},RGBA_ASTC_6x5_Format:function(){return at},RGBA_ASTC_6x6_Format:function(){return st},RGBA_ASTC_8x5_Format:function(){return lt},RGBA_ASTC_8x6_Format:function(){return ut},RGBA_ASTC_8x8_Format:function(){return ct},RGBA_BPTC_Format:function(){return vt},RGBA_ETC2_EAC_Format:function(){return nt},RGBA_PVRTC_2BPPV1_Format:function(){return Je},RGBA_PVRTC_4BPPV1_Format:function(){return Qe},RGBA_S3TC_DXT1_Format:function(){return $e},RGBA_S3TC_DXT3_Format:function(){return qe},RGBA_S3TC_DXT5_Format:function(){return Ye},RGBFormat:function(){return Fe},RGB_ETC1_Format:function(){return et},RGB_ETC2_Format:function(){return tt},RGB_PVRTC_2BPPV1_Format:function(){return Xe},RGB_PVRTC_4BPPV1_Format:function(){return Ke},RGB_S3TC_DXT1_Format:function(){return Ze},RGFormat:function(){return Ge},RGIntegerFormat:function(){return Ve},RawShaderMaterial:function(){return Gc},Ray:function(){return Ir},Raycaster:function(){return Hh},RectAreaLight:function(){return Hd},RedFormat:function(){return Ue},RedIntegerFormat:function(){return He},ReinhardToneMapping:function(){return ee},RepeatWrapping:function(){return ce},ReplaceStencilOp:function(){return Gt},ReverseSubtractEquation:function(){return M},RingBufferGeometry:function(){return kc},RingGeometry:function(){return kc},SRGBColorSpace:function(){return jt},Scene:function(){return dl},ShaderChunk:function(){return Ro},ShaderLib:function(){return Oo},ShaderMaterial:function(){return po},ShadowMaterial:function(){return Hc},Shape:function(){return Ju},ShapeBufferGeometry:function(){return Oc},ShapeGeometry:function(){return Oc},ShapePath:function(){return Pf},ShapeUtils:function(){return Ac},ShortType:function(){return Ae},Skeleton:function(){return Vl},SkeletonHelper:function(){return rf},SkinnedMesh:function(){return jl},SmoothShading:function(){return y},Source:function(){return qn},Sphere:function(){return Cr},SphereBufferGeometry:function(){return Lc},SphereGeometry:function(){return Lc},Spherical:function(){return Wh},SphericalHarmonics3:function(){return Gd},SplineCurve:function(){return Nu},SpotLight:function(){return Od},SpotLightHelper:function(){return Jh},Sprite:function(){return Tl},SpriteMaterial:function(){return ml},SrcAlphaFactor:function(){return L},SrcAlphaSaturateFactor:function(){return z},SrcColorFactor:function(){return k},StaticCopyUsage:function(){return cn},StaticDrawUsage:function(){return rn},StaticReadUsage:function(){return sn},StereoCamera:function(){return lh},StreamCopyUsage:function(){return hn},StreamDrawUsage:function(){return an},StreamReadUsage:function(){return un},StringKeyframeTrack:function(){return cd},SubtractEquation:function(){return E},SubtractiveBlending:function(){return w},TOUCH:function(){return o},TangentSpaceNormalMap:function(){return It},TetrahedronBufferGeometry:function(){return Fc},TetrahedronGeometry:function(){return Fc},TextGeometry:function(){return Uf},Texture:function(){return Xn},TextureLoader:function(){return Ad},TorusBufferGeometry:function(){return Ic},TorusGeometry:function(){return Ic},TorusKnotBufferGeometry:function(){return Nc},TorusKnotGeometry:function(){return Nc},Triangle:function(){return _i},TriangleFanDrawMode:function(){return Rt},TriangleStripDrawMode:function(){return Pt},TrianglesDrawMode:function(){return Tt},TubeBufferGeometry:function(){return Bc},TubeGeometry:function(){return Bc},UVMapping:function(){return ie},Uint16BufferAttribute:function(){return Pi},Uint32BufferAttribute:function(){return ki},Uint8BufferAttribute:function(){return Mi},Uint8ClampedBufferAttribute:function(){return Ci},Uniform:function(){return jh},UniformsLib:function(){return ko},UniformsUtils:function(){return fo},UnsignedByteType:function(){return Se},UnsignedInt248Type:function(){return Oe},UnsignedIntType:function(){return Ce},UnsignedShort4444Type:function(){return Re},UnsignedShort5551Type:function(){return ke},UnsignedShortType:function(){return Ee},VSMShadowMap:function(){return f},Vector2:function(){return Tn},Vector3:function(){return ar},Vector4:function(){return Qn},VectorKeyframeTrack:function(){return dd},VideoTexture:function(){return mu},WebGL1Renderer:function(){return ll},WebGL3DRenderTarget:function(){return rr},WebGLArrayRenderTarget:function(){return tr},WebGLCubeRenderTarget:function(){return bo},WebGLMultipleRenderTargets:function(){return ir},WebGLMultisampleRenderTarget:function(){return Wf},WebGLRenderTarget:function(){return Jn},WebGLRenderer:function(){return sl},WebGLUtils:function(){return Js},WireframeGeometry:function(){return jc},WrapAroundEnding:function(){return Et},ZeroCurvatureEnding:function(){return Dt},ZeroFactor:function(){return P},ZeroSlopeEnding:function(){return At},ZeroStencilOp:function(){return Ut},_SRGBAFormat:function(){return mn},sRGBEncoding:function(){return Ot}});const r="141",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,u=3,c=0,d=1,h=2,f=3,p=0,m=1,g=2,v=1,y=2,_=0,b=1,x=2,w=3,S=4,D=5,A=100,E=101,M=102,C=103,T=104,P=200,R=201,k=202,O=203,L=204,F=205,I=206,N=207,B=208,j=209,z=210,U=0,H=1,G=2,V=3,W=4,Z=5,$=6,q=7,Y=0,K=1,X=2,Q=0,J=1,ee=2,te=3,ne=4,re=5,ie=300,oe=301,ae=302,se=303,le=304,ue=306,ce=1e3,de=1001,he=1002,fe=1003,pe=1004,me=1004,ge=1005,ve=1005,ye=1006,_e=1007,be=1007,xe=1008,we=1008,Se=1009,De=1010,Ae=1011,Ee=1012,Me=1013,Ce=1014,Te=1015,Pe=1016,Re=1017,ke=1018,Oe=1020,Le=1021,Fe=1022,Ie=1023,Ne=1024,Be=1025,je=1026,ze=1027,Ue=1028,He=1029,Ge=1030,Ve=1031,We=1033,Ze=33776,$e=33777,qe=33778,Ye=33779,Ke=35840,Xe=35841,Qe=35842,Je=35843,et=36196,tt=37492,nt=37496,rt=37808,it=37809,ot=37810,at=37811,st=37812,lt=37813,ut=37814,ct=37815,dt=37816,ht=37817,ft=37818,pt=37819,mt=37820,gt=37821,vt=36492,yt=2200,_t=2201,bt=2202,xt=2300,wt=2301,St=2302,Dt=2400,At=2401,Et=2402,Mt=2500,Ct=2501,Tt=0,Pt=1,Rt=2,kt=3e3,Ot=3001,Lt=3200,Ft=3201,It=0,Nt=1,Bt="",jt="srgb",zt="srgb-linear",Ut=0,Ht=7680,Gt=7681,Vt=7682,Wt=7683,Zt=34055,$t=34056,qt=5386,Yt=512,Kt=513,Xt=514,Qt=515,Jt=516,en=517,tn=518,nn=519,rn=35044,on=35048,an=35040,sn=35045,ln=35049,un=35041,cn=35046,dn=35050,hn=35042,fn="100",pn="300 es",mn=1035;class gn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const vn=[];for(let qf=0;qf<256;qf++)vn[qf]=(qf<16?"0":"")+qf.toString(16);let yn=1234567;const _n=Math.PI/180,bn=180/Math.PI;function xn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(vn[255&e]+vn[e>>8&255]+vn[e>>16&255]+vn[e>>24&255]+"-"+vn[255&t]+vn[t>>8&255]+"-"+vn[t>>16&15|64]+vn[t>>24&255]+"-"+vn[63&n|128]+vn[n>>8&255]+"-"+vn[n>>16&255]+vn[n>>24&255]+vn[255&r]+vn[r>>8&255]+vn[r>>16&255]+vn[r>>24&255]).toLowerCase()}function wn(e,t,n){return Math.max(t,Math.min(n,e))}function Sn(e,t){return(e%t+t)%t}function Dn(e,t,n){return(1-n)*e+n*t}function An(e){return 0===(e&e-1)&&0!==e}function En(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Mn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Cn=Object.freeze({__proto__:null,DEG2RAD:_n,RAD2DEG:bn,generateUUID:xn,clamp:wn,euclideanModulo:Sn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Dn,damp:function(e,t,n,r){return Dn(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Sn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(yn=e);let t=yn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*_n},radToDeg:function(e){return e*bn},isPowerOfTwo:An,ceilPowerOfTwo:En,floorPowerOfTwo:Mn,setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),u=o((t+r)/2),c=a((t+r)/2),d=o((t-r)/2),h=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}});class Tn{constructor(e=0,t=0){this.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pn{constructor(){this.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*p+a*v+s*b,i[3]=o*m+a*y+s*x,i[6]=o*g+a*_+s*w,i[1]=l*p+u*v+c*b,i[4]=l*m+u*y+c*x,i[7]=l*g+u*_+c*w,i[2]=d*p+h*v+f*b,i[5]=d*m+h*y+f*x,i[8]=d*g+h*_+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*i*u+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=u*o-a*l,d=a*s-u*i,h=l*i-o*s,f=t*c+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(a*n-r*o)*p,e[3]=d*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*u,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Rn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}const kn={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function On(e,t){return new kn[e](t)}function Ln(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Fn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function In(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Nn={[jt]:{[zt]:Fn},[zt]:{[jt]:In}},Bn={legacyMode:!0,get workingColorSpace(){return zt},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Nn[t]&&void 0!==Nn[t][n]){const r=Nn[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zn={r:0,g:0,b:0},Un={h:0,s:0,l:0},Hn={h:0,s:0,l:0};function Gn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Vn(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class Wn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=jt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Bn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=zt){return this.r=e,this.g=t,this.b=n,Bn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=zt){if(e=Sn(e,1),t=wn(t,0,1),n=wn(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Gn(i,r,e+1/3),this.g=Gn(i,r,e),this.b=Gn(i,r,e-1/3)}return Bn.toWorkingColorSpace(this,r),this}setStyle(e,t=jt){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Bn.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Bn.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100;return n(e[4]),this.setHSL(r,i,o,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Bn.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Bn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=jt){const n=jn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fn(e.r),this.g=Fn(e.g),this.b=Fn(e.b),this}copyLinearToSRGB(e){return this.r=In(e.r),this.g=In(e.g),this.b=In(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jt){return Bn.fromWorkingColorSpace(Vn(this,zn),e),wn(255*zn.r,0,255)<<16^wn(255*zn.g,0,255)<<8^wn(255*zn.b,0,255)<<0}getHexString(e=jt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zt){Bn.fromWorkingColorSpace(Vn(this,zn),t);const n=zn.r,r=zn.g,i=zn.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const u=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=u<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e,t=zt){return Bn.fromWorkingColorSpace(Vn(this,zn),t),e.r=zn.r,e.g=zn.g,e.b=zn.b,e}getStyle(e=jt){return Bn.fromWorkingColorSpace(Vn(this,zn),e),e!==jt?`color(${e} ${zn.r} ${zn.g} ${zn.b})`:`rgb(${255*zn.r|0},${255*zn.g|0},${255*zn.b|0})`}offsetHSL(e,t,n){return this.getHSL(Un),Un.h+=e,Un.s+=t,Un.l+=n,this.setHSL(Un.h,Un.s,Un.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Un),e.getHSL(Hn);const n=Dn(Un.h,Hn.h,t),r=Dn(Un.s,Hn.s,t),i=Dn(Un.l,Hn.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Zn;Wn.NAMES=jn;class $n{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Zn&&(Zn=Ln("canvas")),Zn.width=e.width,Zn.height=e.height;const n=Zn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Ln("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Fn(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Fn(t[e]/255)):t[e]=Fn(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class qn{constructor(e=null){this.isSource=!0,this.uuid=xn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Yn(r[t].image)):e.push(Yn(r[t]))}else e=Yn(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Yn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?$n.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Kn=0;class Xn extends gn{constructor(e=Xn.DEFAULT_IMAGE,t=Xn.DEFAULT_MAPPING,n=de,r=de,i=ye,o=xe,a=Ie,s=Se,l=1,u=kt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Kn++}),this.uuid=xn(),this.name="",this.source=new qn(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Tn(0,0),this.repeat=new Tn(1,1),this.center=new Tn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ce:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case he:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ce:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case he:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Xn.DEFAULT_IMAGE=null,Xn.DEFAULT_MAPPING=ie;class Qn{constructor(e=0,t=0,n=0,r=1){this.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],u=s[4],c=s[8],d=s[1],h=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(u-d)<o&&Math.abs(c-p)<o&&Math.abs(f-m)<o){if(Math.abs(u+d)<a&&Math.abs(c+p)<a&&Math.abs(f+m)<a&&Math.abs(l+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,v=(g+1)/2,y=(u+d)/4,_=(c+p)/4,b=(f+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=_/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=b/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=_/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(d-u)*(d-u));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(c-p)/v,this.z=(d-u)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Jn extends gn{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Qn(0,0,e,t),this.scissorTest=!1,this.viewport=new Qn(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Xn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ye,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class er extends Xn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=fe,this.minFilter=fe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tr extends Jn{constructor(e,t,n){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new er(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class nr extends Xn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=fe,this.minFilter=fe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rr extends Jn{constructor(e,t,n){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new nr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ir extends Jn{constructor(e,t,n,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=i.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class or{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==d||l!==h||u!==f){let e=1-a;const t=s*d+l*h+u*f+c*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+d*i,l=l*e+h*i,u=u*e+f*i,c=c*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=e,l*=e,u*=e,c*=e}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[o],d=i[o+1],h=i[o+2],f=i[o+3];return e[t]=a*f+u*c+s*h-l*d,e[t+1]=s*f+u*d+l*c-a*h,e[t+2]=l*f+u*h+a*d-s*c,e[t+3]=u*f-a*c-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"YXZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"ZXY":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"ZYX":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"YZX":this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f;break;case"XZY":this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=n+a+c;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(u-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>c){const e=2*Math.sqrt(1+n-a-c);this._w=(u-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>c){const e=2*Math.sqrt(1+a-n-c);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+u)/e}else{const e=2*Math.sqrt(1+c-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),u=Math.atan2(l,a),c=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=o*c+this._w*d,this._x=n*c+this._x*d,this._y=r*c+this._y*d,this._z=i*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ar{constructor(e=0,t=0,n=0){this.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(lr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,u=s*n+a*t-i*r,c=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=l*s+d*-i+u*-a-c*-o,this.y=u*s+d*-o+c*-i-l*-a,this.z=c*s+d*-a+l*-o-u*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return sr.copy(this).projectOnVector(e),this.sub(sr)}reflect(e){return this.sub(sr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(wn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sr=new ar,lr=new or;class ur{constructor(e=new ar(1/0,1/0,1/0),t=new ar(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],u=e[s+1],c=e[s+2];l<t&&(t=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),u=e.getY(s),c=e.getZ(s);l<t&&(t=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=dr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)dr.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(dr)}else null===n.boundingBox&&n.computeBoundingBox(),hr.copy(n.boundingBox),hr.applyMatrix4(e.matrixWorld),this.union(hr);const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,dr),dr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_r),br.subVectors(this.max,_r),fr.subVectors(e.a,_r),pr.subVectors(e.b,_r),mr.subVectors(e.c,_r),gr.subVectors(pr,fr),vr.subVectors(mr,pr),yr.subVectors(fr,mr);let t=[0,-gr.z,gr.y,0,-vr.z,vr.y,0,-yr.z,yr.y,gr.z,0,-gr.x,vr.z,0,-vr.x,yr.z,0,-yr.x,-gr.y,gr.x,0,-vr.y,vr.x,0,-yr.y,yr.x,0];return!!Sr(t,fr,pr,mr,br)&&(t=[1,0,0,0,1,0,0,0,1],!!Sr(t,fr,pr,mr,br)&&(xr.crossVectors(gr,vr),t=[xr.x,xr.y,xr.z],Sr(t,fr,pr,mr,br)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return dr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(dr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(cr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cr=[new ar,new ar,new ar,new ar,new ar,new ar,new ar,new ar],dr=new ar,hr=new ur,fr=new ar,pr=new ar,mr=new ar,gr=new ar,vr=new ar,yr=new ar,_r=new ar,br=new ar,xr=new ar,wr=new ar;function Sr(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){wr.fromArray(e,o);const a=i.x*Math.abs(wr.x)+i.y*Math.abs(wr.y)+i.z*Math.abs(wr.z),s=t.dot(wr),l=n.dot(wr),u=r.dot(wr);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>a)return!1}return!0}const Dr=new ur,Ar=new ar,Er=new ar,Mr=new ar;class Cr{constructor(e=new ar,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Dr.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Mr.subVectors(e,this.center);const t=Mr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Mr.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?Er.set(0,0,1).multiplyScalar(e.radius):Er.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Ar.copy(e.center).add(Er)),this.expandByPoint(Ar.copy(e.center).sub(Er)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tr=new ar,Pr=new ar,Rr=new ar,kr=new ar,Or=new ar,Lr=new ar,Fr=new ar;class Ir{constructor(e=new ar,t=new ar(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tr.copy(this.direction).multiplyScalar(t).add(this.origin),Tr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Pr.copy(e).add(t).multiplyScalar(.5),Rr.copy(t).sub(e).normalize(),kr.copy(this.origin).sub(Pr);const i=.5*e.distanceTo(t),o=-this.direction.dot(Rr),a=kr.dot(this.direction),s=-kr.dot(Rr),l=kr.lengthSq(),u=Math.abs(1-o*o);let c,d,h,f;if(u>0)if(c=o*s-a,d=o*a-s,f=i*u,c>=0)if(d>=-f)if(d<=f){const e=1/u;c*=e,d*=e,h=c*(c+o*d+2*a)+d*(o*c+d+2*s)+l}else d=i,c=Math.max(0,-(o*d+a)),h=-c*c+d*(d+2*s)+l;else d=-i,c=Math.max(0,-(o*d+a)),h=-c*c+d*(d+2*s)+l;else d<=-f?(c=Math.max(0,-(-o*i+a)),d=c>0?-i:Math.min(Math.max(-i,-s),i),h=-c*c+d*(d+2*s)+l):d<=f?(c=0,d=Math.min(Math.max(-i,-s),i),h=d*(d+2*s)+l):(c=Math.max(0,-(o*i+a)),d=c>0?i:Math.min(Math.max(-i,-s),i),h=-c*c+d*(d+2*s)+l);else d=o>0?-i:i,c=Math.max(0,-(o*d+a)),h=-c*c+d*(d+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Rr).multiplyScalar(d).add(Pr),h}intersectSphere(e,t){Tr.subVectors(e.center,this.origin);const n=Tr.dot(this.direction),r=Tr.dot(Tr)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(i=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(i=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(a=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Tr)}intersectTriangle(e,t,n,r,i){Or.subVectors(t,e),Lr.subVectors(n,e),Fr.crossVectors(Or,Lr);let o,a=this.direction.dot(Fr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}kr.subVectors(this.origin,e);const s=o*this.direction.dot(Lr.crossVectors(kr,Lr));if(s<0)return null;const l=o*this.direction.dot(Or.cross(kr));if(l<0)return null;if(s+l>a)return null;const u=-o*kr.dot(Fr);return u<0?null:this.at(u/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Nr{constructor(){this.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l,u,c,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Nr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Br.setFromMatrixColumn(e,0).length(),i=1/Br.setFromMatrixColumn(e,1).length(),o=1/Br.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=o*u,n=o*c,r=a*u,i=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e-i*a,t[4]=-o*c,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*u,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*u,n=o*c,r=a*u,i=a*c;t[0]=s*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=o*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=a*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(zr,e,Ur)}lookAt(e,t,n){const r=this.elements;return Vr.subVectors(e,t),0===Vr.lengthSq()&&(Vr.z=1),Vr.normalize(),Hr.crossVectors(n,Vr),0===Hr.lengthSq()&&(1===Math.abs(n.z)?Vr.x+=1e-4:Vr.z+=1e-4,Vr.normalize(),Hr.crossVectors(n,Vr)),Hr.normalize(),Gr.crossVectors(Vr,Hr),r[0]=Hr.x,r[4]=Gr.x,r[8]=Vr.x,r[1]=Hr.y,r[5]=Gr.y,r[9]=Vr.y,r[2]=Hr.z,r[6]=Gr.z,r[10]=Vr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],S=r[8],D=r[12],A=r[1],E=r[5],M=r[9],C=r[13],T=r[2],P=r[6],R=r[10],k=r[14],O=r[3],L=r[7],F=r[11],I=r[15];return i[0]=o*x+a*A+s*T+l*O,i[4]=o*w+a*E+s*P+l*L,i[8]=o*S+a*M+s*R+l*F,i[12]=o*D+a*C+s*k+l*I,i[1]=u*x+c*A+d*T+h*O,i[5]=u*w+c*E+d*P+h*L,i[9]=u*S+c*M+d*R+h*F,i[13]=u*D+c*C+d*k+h*I,i[2]=f*x+p*A+m*T+g*O,i[6]=f*w+p*E+m*P+g*L,i[10]=f*S+p*M+m*R+g*F,i[14]=f*D+p*C+m*k+g*I,i[3]=v*x+y*A+_*T+b*O,i[7]=v*w+y*E+_*P+b*L,i[11]=v*S+y*M+_*R+b*F,i[15]=v*D+y*C+_*k+b*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+i*s*c-r*l*c-i*a*d+n*l*d+r*a*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*o*d-r*o*h+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*h-i*o*c+n*o*h+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*d+r*o*c-n*o*d+n*s*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*d*l+p*s*h-a*m*h-c*s*g+a*d*g,y=f*d*l-u*m*l-f*s*h+o*m*h+u*s*g-o*d*g,_=u*p*l-f*c*l+f*a*h-o*p*h-u*a*g+o*c*g,b=f*c*s-u*p*s-f*a*d+o*p*d+u*a*m-o*c*m,x=t*v+n*y+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(p*d*i-c*m*i-p*r*h+n*m*h+c*r*g-n*d*g)*w,e[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*w,e[3]=(c*s*i-a*d*i-c*r*l+n*d*l+a*r*h-n*s*h)*w,e[4]=y*w,e[5]=(u*m*i-f*d*i+f*r*h-t*m*h-u*r*g+t*d*g)*w,e[6]=(f*s*i-o*m*i-f*r*l+t*m*l+o*r*g-t*s*g)*w,e[7]=(o*d*i-u*s*i+u*r*l-t*d*l-o*r*h+t*s*h)*w,e[8]=_*w,e[9]=(f*c*i-u*p*i-f*n*h+t*p*h+u*n*g-t*c*g)*w,e[10]=(o*p*i-f*a*i+f*n*l-t*p*l-o*n*g+t*a*g)*w,e[11]=(u*a*i-o*c*i-u*n*l+t*c*l+o*n*h-t*a*h)*w,e[12]=b*w,e[13]=(u*p*r-f*c*r+f*n*d-t*p*d-u*n*m+t*c*m)*w,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*w,e[15]=(o*c*r-u*a*r+u*n*s-t*c*s-o*n*d+t*a*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,u=o+o,c=a+a,d=i*l,h=i*u,f=i*c,p=o*u,m=o*c,g=a*c,v=s*l,y=s*u,_=s*c,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+g))*b,r[1]=(h+_)*b,r[2]=(f-y)*b,r[3]=0,r[4]=(h-_)*x,r[5]=(1-(d+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Br.set(r[0],r[1],r[2]).length();const o=Br.set(r[4],r[5],r[6]).length(),a=Br.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],jr.copy(this);const s=1/i,l=1/o,u=1/a;return jr.elements[0]*=s,jr.elements[1]*=s,jr.elements[2]*=s,jr.elements[4]*=l,jr.elements[5]*=l,jr.elements[6]*=l,jr.elements[8]*=u,jr.elements[9]*=u,jr.elements[10]*=u,t.setFromRotationMatrix(jr),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(o-i),c=(t+e)*s,d=(n+r)*l,h=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Br=new ar,jr=new Nr,zr=new ar(0,0,0),Ur=new ar(1,1,1),Hr=new ar,Gr=new ar,Vr=new ar,Wr=new Nr,Zr=new or;class $r{constructor(e=0,t=0,n=0,r=$r.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(wn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-wn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(wn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-wn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(wn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-wn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Wr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wr,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Zr.setFromEuler(this),this.setFromQuaternion(Zr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}$r.DefaultOrder="XYZ",$r.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class qr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&(1<<e|0))}}let Yr=0;const Kr=new ar,Xr=new or,Qr=new Nr,Jr=new ar,ei=new ar,ti=new ar,ni=new or,ri=new ar(1,0,0),ii=new ar(0,1,0),oi=new ar(0,0,1),ai={type:"added"},si={type:"removed"};class li extends gn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Yr++}),this.uuid=xn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=li.DefaultUp.clone();const e=new ar,t=new $r,n=new or,r=new ar(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Nr},normalMatrix:{value:new Pn}}),this.matrix=new Nr,this.matrixWorld=new Nr,this.matrixAutoUpdate=li.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Xr.setFromAxisAngle(e,t),this.quaternion.multiply(Xr),this}rotateOnWorldAxis(e,t){return Xr.setFromAxisAngle(e,t),this.quaternion.premultiply(Xr),this}rotateX(e){return this.rotateOnAxis(ri,e)}rotateY(e){return this.rotateOnAxis(ii,e)}rotateZ(e){return this.rotateOnAxis(oi,e)}translateOnAxis(e,t){return Kr.copy(e).applyQuaternion(this.quaternion),this.position.add(Kr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ri,e)}translateY(e){return this.translateOnAxis(ii,e)}translateZ(e){return this.translateOnAxis(oi,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Qr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Jr.copy(e):Jr.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ei.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qr.lookAt(ei,Jr,this.up):Qr.lookAt(Jr,ei,this.up),this.quaternion.setFromRotationMatrix(Qr),r&&(Qr.extractRotation(r.matrixWorld),Xr.setFromRotationMatrix(Qr),this.quaternion.premultiply(Xr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ai)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(si)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(si)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Qr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Qr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ei,e,ti),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ei,ni,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),u=o(e.animations),c=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}li.DefaultUp=new ar(0,1,0),li.DefaultMatrixAutoUpdate=!0;const ui=new ar,ci=new ar,di=new ar,hi=new ar,fi=new ar,pi=new ar,mi=new ar,gi=new ar,vi=new ar,yi=new ar;class _i{constructor(e=new ar,t=new ar,n=new ar){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ui.subVectors(e,t),r.cross(ui);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ui.subVectors(r,t),ci.subVectors(n,t),di.subVectors(e,t);const o=ui.dot(ui),a=ui.dot(ci),s=ui.dot(di),l=ci.dot(ci),u=ci.dot(di),c=o*l-a*a;if(0===c)return i.set(-2,-1,-1);const d=1/c,h=(l*s-a*u)*d,f=(o*u-a*s)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,hi),hi.x>=0&&hi.y>=0&&hi.x+hi.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,hi),s.set(0,0),s.addScaledVector(i,hi.x),s.addScaledVector(o,hi.y),s.addScaledVector(a,hi.z),s}static isFrontFacing(e,t,n,r){return ui.subVectors(n,t),ci.subVectors(e,t),ui.cross(ci).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ui.subVectors(this.c,this.b),ci.subVectors(this.a,this.b),.5*ui.cross(ci).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _i.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return _i.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return _i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;fi.subVectors(r,n),pi.subVectors(i,n),gi.subVectors(e,n);const s=fi.dot(gi),l=pi.dot(gi);if(s<=0&&l<=0)return t.copy(n);vi.subVectors(e,r);const u=fi.dot(vi),c=pi.dot(vi);if(u>=0&&c<=u)return t.copy(r);const d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return o=s/(s-u),t.copy(n).addScaledVector(fi,o);yi.subVectors(e,i);const h=fi.dot(yi),f=pi.dot(yi);if(f>=0&&h<=f)return t.copy(i);const p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(pi,a);const m=u*f-h*c;if(m<=0&&c-u>=0&&h-f>=0)return mi.subVectors(i,r),a=(c-u)/(c-u+(h-f)),t.copy(r).addScaledVector(mi,a);const g=1/(m+p+d);return o=p*g,a=d*g,t.copy(n).addScaledVector(fi,o).addScaledVector(pi,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let bi=0;class xi extends gn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bi++}),this.uuid=xn(),this.name="",this.type="Material",this.blending=b,this.side=p,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=L,this.blendDst=F,this.blendEquation=A,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ht,this.stencilZFail=Ht,this.stencilZPass=Ht,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(n.blending=this.blending),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}get vertexTangents(){return console.warn("THREE."+this.type+": .vertexTangents has been removed."),!1}set vertexTangents(e){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}xi.fromType=function(){return null};class wi extends xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Si=new ar,Di=new Tn;class Ai{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=rn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Wn),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Tn),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new ar),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Qn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Di.fromBufferAttribute(this,t),Di.applyMatrix3(e),this.setXY(t,Di.x,Di.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix3(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix4(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.applyNormalMatrix(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.transformDirection(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==rn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class Ei extends Ai{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Mi extends Ai{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Ci extends Ai{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Ti extends Ai{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Pi extends Ai{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Ri extends Ai{constructor(e,t,n){super(new Int32Array(e),t,n)}}class ki extends Ai{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Oi extends Ai{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class Li extends Ai{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Fi extends Ai{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Ii=0;const Ni=new Nr,Bi=new li,ji=new ar,zi=new ur,Ui=new ur,Hi=new ar;class Gi extends gn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ii++}),this.uuid=xn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Rn(e)?ki:Pi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Pn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ni.makeRotationFromQuaternion(e),this.applyMatrix4(Ni),this}rotateX(e){return Ni.makeRotationX(e),this.applyMatrix4(Ni),this}rotateY(e){return Ni.makeRotationY(e),this.applyMatrix4(Ni),this}rotateZ(e){return Ni.makeRotationZ(e),this.applyMatrix4(Ni),this}translate(e,t,n){return Ni.makeTranslation(e,t,n),this.applyMatrix4(Ni),this}scale(e,t,n){return Ni.makeScale(e,t,n),this.applyMatrix4(Ni),this}lookAt(e){return Bi.lookAt(e),Bi.updateMatrix(),this.applyMatrix4(Bi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ji).negate(),this.translate(ji.x,ji.y,ji.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Li(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ar(-1/0,-1/0,-1/0),new ar(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];zi.setFromBufferAttribute(e),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,zi.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,zi.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(zi.min),this.boundingBox.expandByPoint(zi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ar,1/0);if(e){const n=this.boundingSphere.center;if(zi.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];Ui.setFromBufferAttribute(n),this.morphTargetsRelative?(Hi.addVectors(zi.min,Ui.min),zi.expandByPoint(Hi),Hi.addVectors(zi.max,Ui.max),zi.expandByPoint(Hi)):(zi.expandByPoint(Ui.min),zi.expandByPoint(Ui.max))}zi.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Hi.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Hi));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)Hi.fromBufferAttribute(o,t),a&&(ji.fromBufferAttribute(e,t),Hi.add(ji)),r=Math.max(r,n.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ai(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],u=[];for(let A=0;A<a;A++)l[A]=new ar,u[A]=new ar;const c=new ar,d=new ar,h=new ar,f=new Tn,p=new Tn,m=new Tn,g=new ar,v=new ar;function y(e,t,n){c.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),d.sub(c),h.sub(c),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(v),u[t].add(v),u[n].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let A=0,E=_.length;A<E;++A){const e=_[A],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)y(n[r+0],n[r+1],n[r+2])}const b=new ar,x=new ar,w=new ar,S=new ar;function D(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];b.copy(t),b.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(u[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let A=0,E=_.length;A<E;++A){const e=_[A],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)D(n[r+0]),D(n[r+1]),D(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ai(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new ar,i=new ar,o=new ar,a=new ar,s=new ar,l=new ar,u=new ar,c=new ar;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(u),s.add(u),l.add(u),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Hi.fromBufferAttribute(e,t),Hi.normalize(),e.setXYZ(t,Hi.x,Hi.y,Hi.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let l=0,u=t.length;l<u;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Ai(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gi,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Vi=new Nr,Wi=new Ir,Zi=new Cr,$i=new ar,qi=new ar,Yi=new ar,Ki=new ar,Xi=new ar,Qi=new ar,Ji=new ar,eo=new ar,to=new ar,no=new Tn,ro=new Tn,io=new Tn,oo=new ar,ao=new ar;class so extends li{constructor(e=new Gi,t=new wi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Zi.copy(n.boundingSphere),Zi.applyMatrix4(i),!1===e.ray.intersectsSphere(Zi))return;if(Vi.copy(i).invert(),Wi.copy(e.ray).applyMatrix4(Vi),null!==n.boundingBox&&!1===Wi.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,d=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==a)if(Array.isArray(r))for(let p=0,m=h.length;p<m;p++){const n=h[p],i=r[n.materialIndex];for(let r=Math.max(n.start,f.start),h=Math.min(a.count,Math.min(n.start+n.count,f.start+f.count));r<h;r+=3){const h=a.getX(r),f=a.getX(r+1),p=a.getX(r+2);o=lo(this,i,e,Wi,s,l,u,c,d,h,f,p),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count);n<i;n+=3){const i=a.getX(n),h=a.getX(n+1),f=a.getX(n+2);o=lo(this,r,e,Wi,s,l,u,c,d,i,h,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let p=0,m=h.length;p<m;p++){const n=h[p],i=r[n.materialIndex];for(let r=Math.max(n.start,f.start),a=Math.min(s.count,Math.min(n.start+n.count,f.start+f.count));r<a;r+=3){o=lo(this,i,e,Wi,s,l,u,c,d,r,r+1,r+2),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(s.count,f.start+f.count);n<i;n+=3){o=lo(this,r,e,Wi,s,l,u,c,d,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}}function lo(e,t,n,r,i,o,a,s,l,u,c,d){$i.fromBufferAttribute(i,u),qi.fromBufferAttribute(i,c),Yi.fromBufferAttribute(i,d);const h=e.morphTargetInfluences;if(o&&h){Ji.set(0,0,0),eo.set(0,0,0),to.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=h[e],n=o[e];0!==t&&(Ki.fromBufferAttribute(n,u),Xi.fromBufferAttribute(n,c),Qi.fromBufferAttribute(n,d),a?(Ji.addScaledVector(Ki,t),eo.addScaledVector(Xi,t),to.addScaledVector(Qi,t)):(Ji.addScaledVector(Ki.sub($i),t),eo.addScaledVector(Xi.sub(qi),t),to.addScaledVector(Qi.sub(Yi),t)))}$i.add(Ji),qi.add(eo),Yi.add(to)}e.isSkinnedMesh&&(e.boneTransform(u,$i),e.boneTransform(c,qi),e.boneTransform(d,Yi));const f=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===m?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==g,s),null===l)return null;ao.copy(s),ao.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(ao);return u<n.near||u>n.far?null:{distance:u,point:ao.clone(),object:e}}(e,t,n,r,$i,qi,Yi,oo);if(f){s&&(no.fromBufferAttribute(s,u),ro.fromBufferAttribute(s,c),io.fromBufferAttribute(s,d),f.uv=_i.getUV(oo,$i,qi,Yi,no,ro,io,new Tn)),l&&(no.fromBufferAttribute(l,u),ro.fromBufferAttribute(l,c),io.fromBufferAttribute(l,d),f.uv2=_i.getUV(oo,$i,qi,Yi,no,ro,io,new Tn));const e={a:u,b:c,c:d,normal:new ar,materialIndex:0};_i.getNormal($i,qi,Yi,e.normal),f.face=e}return f}class uo extends Gi{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],u=[],c=[];let d=0,h=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,_=f/g,b=o/2,x=f/2,w=p/2,S=m+1,D=g+1;let A=0,E=0;const M=new ar;for(let a=0;a<D;a++){const o=a*_-x;for(let s=0;s<S;s++){const d=s*y-b;M[e]=d*r,M[t]=o*i,M[n]=w,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=p>0?1:-1,u.push(M.x,M.y,M.z),c.push(s/m),c.push(1-a/g),A+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=d+e+S*a,n=d+e+S*(a+1),r=d+(e+1)+S*(a+1),i=d+(e+1)+S*a;s.push(t,n,i),s.push(n,r,i),E+=6}a.addGroup(h,E,v),h+=E,d+=A}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Li(l,3)),this.setAttribute("normal",new Li(u,3)),this.setAttribute("uv",new Li(c,2))}static fromJSON(e){return new uo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function co(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function ho(e){const t={};for(let n=0;n<e.length;n++){const r=co(e[n]);for(const e in r)t[e]=r[e]}return t}const fo={clone:co,merge:ho};class po extends xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=co(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class mo extends li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nr,this.projectionMatrix=new Nr,this.projectionMatrixInverse=new Nr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class go extends mo{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*bn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*_n*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*bn*Math.atan(Math.tan(.5*_n*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*_n*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const vo=90;class yo extends li{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new go(vo,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ar(1,0,0)),this.add(r);const i=new go(vo,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ar(-1,0,0)),this.add(i);const o=new go(vo,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ar(0,1,0)),this.add(o);const a=new go(vo,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ar(0,-1,0)),this.add(a);const s=new go(vo,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ar(0,0,1)),this.add(s);const l=new go(vo,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ar(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,u=e.getRenderTarget(),c=e.toneMapping,d=e.xr.enabled;e.toneMapping=Q,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=c,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class _o extends Xn{constructor(e,t,n,r,i,o,a,s,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:oe,n,r,i,o,a,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bo extends Jn{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new _o(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ye}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new uo(5,5,5),i=new po({name:"CubemapFromEquirect",uniforms:co(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:_});i.uniforms.tEquirect.value=t;const o=new so(r,i),a=t.minFilter;t.minFilter===xe&&(t.minFilter=ye);return new yo(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}const xo=new ar,wo=new ar,So=new Pn;class Do{constructor(e=new ar(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=xo.subVectors(n,t).cross(wo.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(xo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||So.getNormalMatrix(e),r=this.coplanarPoint(xo).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ao=new Cr,Eo=new ar;class Mo{constructor(e=new Do,t=new Do,n=new Do,r=new Do,i=new Do,o=new Do){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-d,y-m).normalize(),t[1].setComponents(a+r,c+s,p+d,y+m).normalize(),t[2].setComponents(a+i,c+l,p+h,y+g).normalize(),t[3].setComponents(a-i,c-l,p-h,y-g).normalize(),t[4].setComponents(a-o,c-u,p-f,y-v).normalize(),t[5].setComponents(a+o,c+u,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ao.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)}intersectsSprite(e){return Ao.center.set(0,0,0),Ao.radius=.7071067811865476,Ao.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Eo.x=r.normal.x>0?e.max.x:e.min.x,Eo.y=r.normal.y>0?e.max.y:e.min.y,Eo.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Eo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Co(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function To(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();let s;if(e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class Po extends Gi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,u=s+1,c=e/a,d=t/s,h=[],f=[],p=[],m=[];for(let g=0;g<u;g++){const e=g*d-o;for(let t=0;t<l;t++){const n=t*c-i;f.push(n,-e,0),p.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new Li(f,3)),this.setAttribute("normal",new Li(p,3)),this.setAttribute("uv",new Li(m,2))}static fromJSON(e){return new Po(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ro={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ko={common:{diffuse:{value:new Wn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pn},uv2Transform:{value:new Pn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Tn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pn}},sprite:{diffuse:{value:new Wn(16777215)},opacity:{value:1},center:{value:new Tn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pn}}},Oo={basic:{uniforms:ho([ko.common,ko.specularmap,ko.envmap,ko.aomap,ko.lightmap,ko.fog]),vertexShader:Ro.meshbasic_vert,fragmentShader:Ro.meshbasic_frag},lambert:{uniforms:ho([ko.common,ko.specularmap,ko.envmap,ko.aomap,ko.lightmap,ko.emissivemap,ko.fog,ko.lights,{emissive:{value:new Wn(0)}}]),vertexShader:Ro.meshlambert_vert,fragmentShader:Ro.meshlambert_frag},phong:{uniforms:ho([ko.common,ko.specularmap,ko.envmap,ko.aomap,ko.lightmap,ko.emissivemap,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.fog,ko.lights,{emissive:{value:new Wn(0)},specular:{value:new Wn(1118481)},shininess:{value:30}}]),vertexShader:Ro.meshphong_vert,fragmentShader:Ro.meshphong_frag},standard:{uniforms:ho([ko.common,ko.envmap,ko.aomap,ko.lightmap,ko.emissivemap,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.roughnessmap,ko.metalnessmap,ko.fog,ko.lights,{emissive:{value:new Wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ro.meshphysical_vert,fragmentShader:Ro.meshphysical_frag},toon:{uniforms:ho([ko.common,ko.aomap,ko.lightmap,ko.emissivemap,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.gradientmap,ko.fog,ko.lights,{emissive:{value:new Wn(0)}}]),vertexShader:Ro.meshtoon_vert,fragmentShader:Ro.meshtoon_frag},matcap:{uniforms:ho([ko.common,ko.bumpmap,ko.normalmap,ko.displacementmap,ko.fog,{matcap:{value:null}}]),vertexShader:Ro.meshmatcap_vert,fragmentShader:Ro.meshmatcap_frag},points:{uniforms:ho([ko.points,ko.fog]),vertexShader:Ro.points_vert,fragmentShader:Ro.points_frag},dashed:{uniforms:ho([ko.common,ko.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ro.linedashed_vert,fragmentShader:Ro.linedashed_frag},depth:{uniforms:ho([ko.common,ko.displacementmap]),vertexShader:Ro.depth_vert,fragmentShader:Ro.depth_frag},normal:{uniforms:ho([ko.common,ko.bumpmap,ko.normalmap,ko.displacementmap,{opacity:{value:1}}]),vertexShader:Ro.meshnormal_vert,fragmentShader:Ro.meshnormal_frag},sprite:{uniforms:ho([ko.sprite,ko.fog]),vertexShader:Ro.sprite_vert,fragmentShader:Ro.sprite_frag},background:{uniforms:{uvTransform:{value:new Pn},t2D:{value:null}},vertexShader:Ro.background_vert,fragmentShader:Ro.background_frag},cube:{uniforms:ho([ko.envmap,{opacity:{value:1}}]),vertexShader:Ro.cube_vert,fragmentShader:Ro.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ro.equirect_vert,fragmentShader:Ro.equirect_frag},distanceRGBA:{uniforms:ho([ko.common,ko.displacementmap,{referencePosition:{value:new ar},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ro.distanceRGBA_vert,fragmentShader:Ro.distanceRGBA_frag},shadow:{uniforms:ho([ko.lights,ko.fog,{color:{value:new Wn(0)},opacity:{value:1}}]),vertexShader:Ro.shadow_vert,fragmentShader:Ro.shadow_frag}};function Lo(e,t,n,r,i,o){const a=new Wn(0);let s,l,u=!0===i?0:1,c=null,d=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),u=t,f(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(a,u)},render:function(n,i){let o=!1,g=!0===i.isScene?i.background:null;g&&g.isTexture&&(g=t.get(g));const v=e.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?f(a,u):g&&g.isColor&&(f(g,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.mapping===ue)?(void 0===l&&(l=new so(new uo(1,1,1),new po({name:"BackgroundCubeMaterial",uniforms:co(Oo.cube.uniforms),vertexShader:Oo.cube.vertexShader,fragmentShader:Oo.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,c===g&&d===g.version&&h===e.toneMapping||(l.material.needsUpdate=!0,c=g,d=g.version,h=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(void 0===s&&(s=new so(new Po(2,2),new po({name:"BackgroundMaterial",uniforms:co(Oo.background.uniforms),vertexShader:Oo.background.vertexShader,fragmentShader:Oo.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),s.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&d===g.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=g,d=g.version,h=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}}}function Fo(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=f(null);let u=l,c=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=u.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const o=u.newAttributes,a=u.enabledAttributes,s=u.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){const t=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function _(){b(),c=!0,u!==l&&(u=l,d(u.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,_,b){let x=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[a];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),u[a]=c);return c}(_,h,l);u!==t&&(u=t,d(u.object)),x=function(e,t,n,r){const i=u.attributes,o=t.attributes;let a=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){const t=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}}return u.attributesNum!==a||u.index!==r}(i,_,h,b),x&&function(e,t,n,r){const i={},o=t.attributes;let a=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,a++}}u.attributes=i,u.attributesNum=a,u.index=r}(i,_,h,b)}else{const e=!0===l.wireframe;u.geometry===_.id&&u.program===h.id&&u.wireframe===e||(u.geometry=_.id,u.program=h.id,u.wireframe=e,x=!0)}null!==b&&n.update(b,34963),(x||c)&&(c=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,u=a.getAttributes(),c=o.defaultAttributeValues;for(const t in u){const r=u[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const u=l.buffer,c=l.type,d=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,h=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,u);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,c,t,l*d,(h+a/r.locationSize*e)*d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,u);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,c,t,a*d,a/r.locationSize*e*d)}}else if(void 0!==c){const n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,h,_),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:_,resetDefaultState:b,dispose:function(){_();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function Io(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,u;if(i)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,r,a,s),n.update(a,o,s)}}function No(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,_=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?e.getParameter(36183):0}}function Bo(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new Do,s=new Pn,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){const o=null!==e?e.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(u,l),u[l+3]=a.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=c(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,u()},this.setState=function(t,a,s){const d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||o&&!f)o?c(null):u();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=c(d,a,t,s);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function jo(e){let t=new WeakMap;function n(e,t){return t===se?e.mapping=oe:t===le&&(e.mapping=ae),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===se||o===le){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=new bo(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}Oo.physical={uniforms:ho([Oo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Tn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Wn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Tn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Wn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Wn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ro.meshphysical_vert,fragmentShader:Ro.meshphysical_frag};class zo extends mo{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Uo=[.125,.215,.35,.446,.526,.582],Ho=20,Go=new zo,Vo=new Wn;let Wo=null;const Zo=(1+Math.sqrt(5))/2,$o=1/Zo,qo=[new ar(1,1,1),new ar(-1,1,1),new ar(1,1,-1),new ar(-1,1,-1),new ar(0,Zo,$o),new ar(0,Zo,-$o),new ar($o,0,Zo),new ar(-$o,0,Zo),new ar(Zo,$o,0),new ar(-Zo,$o,0)];class Yo{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Wo=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Jo(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Qo(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Wo),e.scissorTest=!1,Xo(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oe||e.mapping===ae?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Wo=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ye,minFilter:ye,generateMipmaps:!1,type:Pe,format:Ie,encoding:kt,depthBuffer:!1},r=Ko(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ko(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+Uo.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=Uo[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),u=-l,c=1+l,d=[u,u,c,u,c,c,u,u,c,c,u,c],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),_=new Float32Array(g*f*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(d,m*f*e);const i=[e,e,e,e,e,e];_.set(i,g*f*e)}const b=new Gi;b.setAttribute("position",new Ai(v,p)),b.setAttribute("uv",new Ai(y,m)),b.setAttribute("faceIndex",new Ai(_,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Ho),i=new ar(0,1,0);return new po({name:"SphericalGaussianBlur",defines:{n:Ho,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:ea(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:_,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new so(this._lodPlanes[0],e);this._renderer.compile(t,Go)}_sceneToCubeUV(e,t,n,r){const i=new go(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(Vo),s.toneMapping=Q,s.autoClear=!1;const c=new wi({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),d=new so(new uo,c);let h=!1;const f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,h=!0):(c.color.copy(Vo),h=!0);for(let p=0;p<6;p++){const t=p%3;0===t?(i.up.set(0,o[p],0),i.lookAt(a[p],0,0)):1===t?(i.up.set(0,0,o[p]),i.lookAt(0,a[p],0)):(i.up.set(0,o[p],0),i.lookAt(0,0,a[p]));const n=this._cubeSize;Xo(r,t*n,p>2?n:0,n,n),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===oe||e.mapping===ae;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Jo()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Qo());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new so(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;Xo(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,Go)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=qo[(r-1)%qo.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new so(this._lodPlanes[r],l),c=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):Ho;p>Ho&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let _=0;_<Ho;++_){const e=_/f,t=Math.exp(-e*e/2);m.push(t),0===_?g+=t:_<p&&(g+=2*t)}for(let _=0;_<m.length;_++)m[_]=m[_]/g;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a);const{_lodMax:v}=this;c.dTheta.value=h,c.mipInt.value=v-n;const y=this._sizeLods[r];Xo(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(u,Go)}}function Ko(e,t,n){const r=new Jn(e,t,n);return r.texture.mapping=ue,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Xo(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Qo(){return new po({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ea(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:_,depthTest:!1,depthWrite:!1})}function Jo(){return new po({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ea(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:_,depthTest:!1,depthWrite:!1})}function ea(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function ta(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===se||o===le,s=o===oe||o===ae;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Yo(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){null===n&&(n=new Yo(e));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function na(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function ra(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Rn(n)?ki:Pi)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function ia(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,u){if(0===u)return;let c,d;if(i)c=e,d="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](o,l,a,r*s,u),n.update(l,o,u)}}function oa(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function aa(e,t){return e[0]-t[0]}function sa(e,t){return Math.abs(t[1])-Math.abs(e[1])}function la(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function ua(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Qn,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0;let m=o.get(u);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const y=void 0!==u.morphAttributes.position,_=void 0!==u.morphAttributes.normal,b=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],S=u.morphAttributes.color||[];let D=0;!0===y&&(D=1),!0===_&&(D=2),!0===b&&(D=3);let A=u.attributes.position.count*D,E=1;A>t.maxTextureSize&&(E=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const M=new Float32Array(A*E*4*p),C=new er(M,A,E,p);C.type=Te,C.needsUpdate=!0;const T=4*D;for(let R=0;R<p;R++){const k=x[R],O=w[R],L=S[R],F=A*E*4*R;for(let I=0;I<k.count;I++){const N=I*T;!0===y&&(a.fromBufferAttribute(k,I),!0===k.normalized&&la(a,k),M[F+N+0]=a.x,M[F+N+1]=a.y,M[F+N+2]=a.z,M[F+N+3]=0),!0===_&&(a.fromBufferAttribute(O,I),!0===O.normalized&&la(a,O),M[F+N+4]=a.x,M[F+N+5]=a.y,M[F+N+6]=a.z,M[F+N+7]=0),!0===b&&(a.fromBufferAttribute(L,I),!0===L.normalized&&la(a,L),M[F+N+8]=a.x,M[F+N+9]=a.y,M[F+N+10]=a.z,M[F+N+11]=4===L.itemSize?a.w:1)}}function P(){C.dispose(),o.delete(u),u.removeEventListener("dispose",P)}m={count:p,texture:C,size:new Tn(A,E)},o.set(u,m),u.addEventListener("dispose",P)}let g=0;for(let B=0;B<h.length;B++)g+=h[B];const v=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(e,"morphTargetBaseInfluence",v),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const j=void 0===h?0:h.length;let z=r[u.id];if(void 0===z||z.length!==j){z=[];for(let W=0;W<j;W++)z[W]=[W,0];r[u.id]=z}for(let Z=0;Z<j;Z++){const $=z[Z];$[0]=Z,$[1]=h[Z]}z.sort(sa);for(let q=0;q<8;q++)q<j&&z[q][1]?(s[q][0]=z[q][0],s[q][1]=z[q][1]):(s[q][0]=Number.MAX_SAFE_INTEGER,s[q][1]=0);s.sort(aa);const U=u.morphAttributes.position,H=u.morphAttributes.normal;let G=0;for(let Y=0;Y<8;Y++){const K=s[Y],X=K[0],Q=K[1];X!==Number.MAX_SAFE_INTEGER&&Q?(U&&u.getAttribute("morphTarget"+Y)!==U[X]&&u.setAttribute("morphTarget"+Y,U[X]),H&&u.getAttribute("morphNormal"+Y)!==H[X]&&u.setAttribute("morphNormal"+Y,H[X]),i[Y]=Q,G+=Q):(U&&!0===u.hasAttribute("morphTarget"+Y)&&u.deleteAttribute("morphTarget"+Y),H&&!0===u.hasAttribute("morphNormal"+Y)&&u.deleteAttribute("morphNormal"+Y),i[Y]=0)}const V=u.morphTargetsRelative?1:1-G;d.getUniforms().setValue(e,"morphTargetBaseInfluence",V),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function ca(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const da=new Xn,ha=new er,fa=new nr,pa=new _o,ma=[],ga=[],va=new Float32Array(16),ya=new Float32Array(9),_a=new Float32Array(4);function ba(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=ma[i];if(void 0===o&&(o=new Float32Array(i),ma[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function xa(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function wa(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Sa(e,t){let n=ga[t];void 0===n&&(n=new Int32Array(t),ga[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Da(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Aa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(xa(n,t))return;e.uniform2fv(this.addr,t),wa(n,t)}}function Ea(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(xa(n,t))return;e.uniform3fv(this.addr,t),wa(n,t)}}function Ma(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(xa(n,t))return;e.uniform4fv(this.addr,t),wa(n,t)}}function Ca(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(xa(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),wa(n,t)}else{if(xa(n,r))return;_a.set(r),e.uniformMatrix2fv(this.addr,!1,_a),wa(n,r)}}function Ta(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(xa(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),wa(n,t)}else{if(xa(n,r))return;ya.set(r),e.uniformMatrix3fv(this.addr,!1,ya),wa(n,r)}}function Pa(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(xa(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),wa(n,t)}else{if(xa(n,r))return;va.set(r),e.uniformMatrix4fv(this.addr,!1,va),wa(n,r)}}function Ra(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ka(e,t){const n=this.cache;xa(n,t)||(e.uniform2iv(this.addr,t),wa(n,t))}function Oa(e,t){const n=this.cache;xa(n,t)||(e.uniform3iv(this.addr,t),wa(n,t))}function La(e,t){const n=this.cache;xa(n,t)||(e.uniform4iv(this.addr,t),wa(n,t))}function Fa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ia(e,t){const n=this.cache;xa(n,t)||(e.uniform2uiv(this.addr,t),wa(n,t))}function Na(e,t){const n=this.cache;xa(n,t)||(e.uniform3uiv(this.addr,t),wa(n,t))}function Ba(e,t){const n=this.cache;xa(n,t)||(e.uniform4uiv(this.addr,t),wa(n,t))}function ja(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||da,i)}function za(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||fa,i)}function Ua(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||pa,i)}function Ha(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ha,i)}function Ga(e,t){e.uniform1fv(this.addr,t)}function Va(e,t){const n=ba(t,this.size,2);e.uniform2fv(this.addr,n)}function Wa(e,t){const n=ba(t,this.size,3);e.uniform3fv(this.addr,n)}function Za(e,t){const n=ba(t,this.size,4);e.uniform4fv(this.addr,n)}function $a(e,t){const n=ba(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function qa(e,t){const n=ba(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ya(e,t){const n=ba(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ka(e,t){e.uniform1iv(this.addr,t)}function Xa(e,t){e.uniform2iv(this.addr,t)}function Qa(e,t){e.uniform3iv(this.addr,t)}function Ja(e,t){e.uniform4iv(this.addr,t)}function es(e,t){e.uniform1uiv(this.addr,t)}function ts(e,t){e.uniform2uiv(this.addr,t)}function ns(e,t){e.uniform3uiv(this.addr,t)}function rs(e,t){e.uniform4uiv(this.addr,t)}function is(e,t,n){const r=t.length,i=Sa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2D(t[o]||da,i[o])}function os(e,t,n){const r=t.length,i=Sa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture3D(t[o]||fa,i[o])}function as(e,t,n){const r=t.length,i=Sa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTextureCube(t[o]||pa,i[o])}function ss(e,t,n){const r=t.length,i=Sa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2DArray(t[o]||ha,i[o])}class ls{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Da;case 35664:return Aa;case 35665:return Ea;case 35666:return Ma;case 35674:return Ca;case 35675:return Ta;case 35676:return Pa;case 5124:case 35670:return Ra;case 35667:case 35671:return ka;case 35668:case 35672:return Oa;case 35669:case 35673:return La;case 5125:return Fa;case 36294:return Ia;case 36295:return Na;case 36296:return Ba;case 35678:case 36198:case 36298:case 36306:case 35682:return ja;case 35679:case 36299:case 36307:return za;case 35680:case 36300:case 36308:case 36293:return Ua;case 36289:case 36303:case 36311:case 36292:return Ha}}(t.type)}}class us{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ga;case 35664:return Va;case 35665:return Wa;case 35666:return Za;case 35674:return $a;case 35675:return qa;case 35676:return Ya;case 5124:case 35670:return Ka;case 35667:case 35671:return Xa;case 35668:case 35672:return Qa;case 35669:case 35673:return Ja;case 5125:return es;case 36294:return ts;case 36295:return ns;case 36296:return rs;case 35678:case 36198:case 36298:case 36306:case 35682:return is;case 35679:case 36299:case 36307:return os;case 35680:case 36300:case 36308:case 36293:return as;case 36289:case 36303:case 36311:case 36292:return ss}}(t.type)}}class cs{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const ds=/(\w+)(\])?(\[|\.)?/g;function hs(e,t){e.seq.push(t),e.map[t.id]=t}function fs(e,t,n){const r=e.name,i=r.length;for(ds.lastIndex=0;;){const o=ds.exec(r),a=ds.lastIndex;let s=o[1];const l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){hs(n,void 0===u?new ls(s,e,t):new us(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new cs(s),hs(n,e)),n=e}}}class ps{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);fs(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function ms(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let gs=0;function vs(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=i;a<o;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ys(e,t){const n=function(e){switch(e){case kt:return["Linear","( value )"];case Ot:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function _s(e,t){let n;switch(t){case J:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function bs(e){return""!==e}function xs(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ws(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ss=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ds(e){return e.replace(Ss,As)}function As(e,t){const n=Ro[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ds(n)}const Es=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ms=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cs(e){return e.replace(Ms,Ps).replace(Es,Ts)}function Ts(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ps(e,t,n,r)}function Ps(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Rs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ks(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===f&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case oe:case ae:t="ENVMAP_TYPE_CUBE";break;case ue:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===ae&&(t="ENVMAP_MODE_REFRACTION");return t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Y:t="ENVMAP_BLENDING_MULTIPLY";break;case K:t="ENVMAP_BLENDING_MIX";break;case X:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bs).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),y=i.createProgram();let _,b,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=[v].filter(bs).join("\n"),_.length>0&&(_+="\n"),b=[g,v].filter(bs).join("\n"),b.length>0&&(b+="\n")):(_=[Rs(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(bs).join("\n"),b=[g,Rs(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Q?"#define TONE_MAPPING":"",n.toneMapping!==Q?Ro.tonemapping_pars_fragment:"",n.toneMapping!==Q?_s("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ro.encodings_pars_fragment,ys("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(bs).join("\n")),a=Ds(a),a=xs(a,n),a=ws(a,n),s=Ds(s),s=xs(s,n),s=ws(s,n),a=Cs(a),s=Cs(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,b=["#define varying in",n.glslVersion===pn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===pn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const w=x+b+s,S=ms(i,35633,x+_+a),D=ms(i,35632,w);if(i.attachShader(y,S),i.attachShader(y,D),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(D).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const t=vs(i,S,"vertex"),n=vs(i,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:_},fragmentShader:{log:n,prefix:b}})}let A,E;return i.deleteShader(S),i.deleteShader(D),this.getUniforms=function(){return void 0===A&&(A=new ps(i,y)),A},this.getAttributes=function(){return void 0===E&&(E=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,y)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=gs++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=D,this}let Os=0;class Ls{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new Fs(e);t.set(e,n)}return t.get(e)}}class Fs{constructor(e){this.id=Os++,this.code=e,this.usedTimes=0}}function Is(e,t,n,r,i,o,a){const s=new qr,l=new Ls,u=[],c=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,u,v,y){const _=v.fog,x=y.geometry,w=o.isMeshStandardMaterial?v.environment:null,S=(o.isMeshStandardMaterial?n:t).get(o.envMap||w),D=S&&S.mapping===ue?S.image.height:null,A=p[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const E=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,M=void 0!==E?E.length:0;let C,T,P,R,k=0;if(void 0!==x.morphAttributes.position&&(k=1),void 0!==x.morphAttributes.normal&&(k=2),void 0!==x.morphAttributes.color&&(k=3),A){const e=Oo[A];C=e.vertexShader,T=e.fragmentShader}else C=o.vertexShader,T=o.fragmentShader,l.update(o),P=l.getVertexShaderID(o),R=l.getFragmentShaderID(o);const O=e.getRenderTarget(),L=o.alphaTest>0,F=o.clearcoat>0,I=o.iridescence>0;return{isWebGL2:c,shaderID:A,shaderName:o.type,vertexShader:C,fragmentShader:T,defines:o.defines,customVertexShaderID:P,customFragmentShaderID:R,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null===O?e.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:kt,map:!!o.map,matcap:!!o.matcap,envMap:!!S,envMapMode:S&&S.mapping,envMapCubeUVHeight:D,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===Nt,tangentSpaceNormalMap:o.normalMapType===It,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===Ot,clearcoat:F,clearcoatMap:F&&!!o.clearcoatMap,clearcoatRoughnessMap:F&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:F&&!!o.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!o.iridescenceMap,iridescenceThicknessMap:I&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===b,alphaMap:!!o.alphaMap,alphaTest:L,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!x.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.iridescenceMap||!!o.iridescenceThicknessMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||!!o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap)&&!!o.displacementMap,fog:!!_,useFog:!0===o.fog,fogExp2:_&&_.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:M,morphTextureStride:k,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:Q,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===g,flipSided:o.side===m,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.lightMap&&s.enable(7);t.aoMap&&s.enable(8);t.emissiveMap&&s.enable(9);t.bumpMap&&s.enable(10);t.normalMap&&s.enable(11);t.objectSpaceNormalMap&&s.enable(12);t.tangentSpaceNormalMap&&s.enable(13);t.clearcoat&&s.enable(14);t.clearcoatMap&&s.enable(15);t.clearcoatRoughnessMap&&s.enable(16);t.clearcoatNormalMap&&s.enable(17);t.iridescence&&s.enable(18);t.iridescenceMap&&s.enable(19);t.iridescenceThicknessMap&&s.enable(20);t.displacementMap&&s.enable(21);t.specularMap&&s.enable(22);t.roughnessMap&&s.enable(23);t.metalnessMap&&s.enable(24);t.gradientMap&&s.enable(25);t.alphaMap&&s.enable(26);t.alphaTest&&s.enable(27);t.vertexColors&&s.enable(28);t.vertexAlphas&&s.enable(29);t.vertexUvs&&s.enable(30);t.vertexTangents&&s.enable(31);t.uvsVertexOnly&&s.enable(32);t.fog&&s.enable(33);e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0);t.flatShading&&s.enable(1);t.logarithmicDepthBuffer&&s.enable(2);t.skinning&&s.enable(3);t.morphTargets&&s.enable(4);t.morphNormals&&s.enable(5);t.morphColors&&s.enable(6);t.premultipliedAlpha&&s.enable(7);t.shadowMapEnabled&&s.enable(8);t.physicallyCorrectLights&&s.enable(9);t.doubleSided&&s.enable(10);t.flipSided&&s.enable(11);t.useDepthPacking&&s.enable(12);t.dithering&&s.enable(13);t.specularIntensityMap&&s.enable(14);t.specularColorMap&&s.enable(15);t.transmission&&s.enable(16);t.transmissionMap&&s.enable(17);t.thicknessMap&&s.enable(18);t.sheen&&s.enable(19);t.sheenColorMap&&s.enable(20);t.sheenRoughnessMap&&s.enable(21);t.decodeVideoTexture&&s.enable(22);t.opaque&&s.enable(23);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=Oo[t];n=fo.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=u.length;e<i;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new ks(e,n,t,o),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Ns(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Bs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function js(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function zs(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,u){const c=o(e,t,a,s,l,u);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(e,t,a,s,l,u){const c=o(e,t,a,s,l,u);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Bs),r.length>1&&r.sort(t||js),i.length>1&&i.sort(t||js)}}}function Us(){let e=new WeakMap;return{get:function(t,n){let r;return!1===e.has(t)?(r=new zs,e.set(t,[r])):n>=e.get(t).length?(r=new zs,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function Hs(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ar,color:new Wn};break;case"SpotLight":n={position:new ar,direction:new ar,color:new Wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ar,color:new Wn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ar,skyColor:new Wn,groundColor:new Wn};break;case"RectAreaLight":n={color:new Wn,position:new ar,halfWidth:new ar,halfHeight:new ar}}return e[t.id]=n,n}}}let Gs=0;function Vs(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ws(e,t){const n=new Hs,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Tn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Tn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new ar);const o=new ar,a=new Nr,s=new Nr;return{setup:function(o,a){let s=0,l=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0;o.sort(Vs);const y=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,_=t.intensity,b=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*_*y,l+=a.g*_*y,u+=a.b*_*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],_);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=x,i.directionalShadowMatrix[c]=t.shadow.matrix,m++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(_*y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=x,i.spotShadowMatrix[h]=t.shadow.matrix,v++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=x,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*y),e.groundColor.copy(t.groundColor).multiplyScalar(_*y),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=ko.LTC_FLOAT_1,i.rectAreaLTC2=ko.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=ko.LTC_HALF_1,i.rectAreaLTC2=ko.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;const _=i.hash;_.directionalLength===c&&_.pointLength===d&&_.spotLength===h&&_.rectAreaLength===f&&_.hemiLength===p&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v||(i.directional.length=c,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,_.directionalLength=c,_.pointLength=d,_.spotLength=h,_.rectAreaLength=f,_.hemiLength=p,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,i.version=Gs++)},setupView:function(e,t){let n=0,r=0,l=0,u=0,c=0;const d=t.matrixWorldInverse;for(let h=0,f=e.length;h<f;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=i.rectArea[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(t.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),u++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),r++}else if(t.isHemisphereLight){const e=i.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),c++}}},state:i}}function Zs(e,t){const n=new Ws(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function $s(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new Zs(e,t),n.set(r,[o])):i>=n.get(r).length?(o=new Zs(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class qs extends xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ys extends xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ar,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Ks(e,t,n){let r=new Mo;const i=new Tn,o=new Tn,a=new Qn,s=new qs({depthPacking:Ft}),l=new Ys,u={},c=n.maxTextureSize,h={0:m,1:p,2:g},v=new po({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Tn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const b=new Gi;b.setAttribute("position",new Ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new so(b,v),w=this;function S(n,r){const i=t.update(x);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,v,x,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,y,x,null)}function D(t,n,r,i,o,a){let c=null;const d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==d?d:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=c.uuid,t=n.uuid;let r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=c.clone(),r[t]=i),c=i}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=a===f?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=o),c}function A(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===f)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],c=i[u.materialIndex];if(c&&c.visible){const t=D(n,c,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,u)}}}else if(i.visible){const t=D(n,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)A(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d,this.render=function(t,n,s){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(_),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let p=0,m=t.length;p<m;p++){const l=t[p],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const d=u.getFrameExtents();if(i.multiply(d),o.copy(u.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/d.x),i.x=o.x*d.x,u.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/d.y),i.y=o.y*d.y,u.mapSize.y=o.y)),null!==u.map||u.isPointLightShadow||this.type!==f||(u.map=new Jn(i.x,i.y),u.map.texture.name=l.name+".shadowMap",u.mapPass=new Jn(i.x,i.y),u.camera.updateProjectionMatrix()),null===u.map){const e={minFilter:fe,magFilter:fe,format:Ie};u.map=new Jn(i.x,i.y,e),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const m=u.getViewportCount();for(let e=0;e<m;e++){const t=u.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(a),u.updateMatrices(l,e),r=u.getFrustum(),A(n,s,u.camera,l,this.type)}u.isPointLightShadow||this.type!==f||S(u,s),u.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(l,u,d)}}function Xs(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new Qn;let r=null;const i=new Qn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?_e(2929):be(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case U:e.depthFunc(512);break;case H:e.depthFunc(519);break;case G:e.depthFunc(513);break;case V:e.depthFunc(515);break;case W:e.depthFunc(514);break;case Z:e.depthFunc(518);break;case $:e.depthFunc(516);break;case q:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?_e(2960):be(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}};let c={},d={},h=new WeakMap,f=[],p=null,v=!1,y=null,Y=null,K=null,X=null,Q=null,J=null,ee=null,te=!1,ne=null,re=null,ie=null,oe=null,ae=null;const se=e.getParameter(35661);let le=!1,ue=0;const ce=e.getParameter(7938);-1!==ce.indexOf("WebGL")?(ue=parseFloat(/^WebGL (\d)/.exec(ce)[1]),le=ue>=1):-1!==ce.indexOf("OpenGL ES")&&(ue=parseFloat(/^OpenGL ES (\d)/.exec(ce)[1]),le=ue>=2);let de=null,he={};const fe=e.getParameter(3088),pe=e.getParameter(2978),me=(new Qn).fromArray(fe),ge=(new Qn).fromArray(pe);function ve(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const ye={};function _e(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function be(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}ye[3553]=ve(3553,3553,1),ye[34067]=ve(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),u.setClear(0),_e(2929),o.setFunc(V),De(!1),Ae(s),_e(2884),Se(_);const xe={[A]:32774,[E]:32778,[M]:32779};if(r)xe[C]=32775,xe[T]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(xe[C]=e.MIN_EXT,xe[T]=e.MAX_EXT)}const we={[P]:0,[R]:1,[k]:768,[L]:770,[z]:776,[B]:774,[I]:772,[O]:769,[F]:771,[j]:775,[N]:773};function Se(t,n,r,i,o,a,s,l){if(t!==_){if(!1===v&&(_e(3042),v=!0),t===D)o=o||n,a=a||r,s=s||i,n===Y&&o===Q||(e.blendEquationSeparate(xe[n],xe[o]),Y=n,Q=o),r===K&&i===X&&a===J&&s===ee||(e.blendFuncSeparate(we[r],we[i],we[a],we[s]),K=r,X=i,J=a,ee=s),y=t,te=null;else if(t!==y||l!==te){if(Y===A&&Q===A||(e.blendEquation(32774),Y=A,Q=A),l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case w:e.blendFuncSeparate(0,769,0,1);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case w:e.blendFuncSeparate(0,769,0,1);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}K=null,X=null,J=null,ee=null,y=t,te=l}}else!0===v&&(be(3042),v=!1)}function De(t){ne!==t&&(t?e.frontFace(2304):e.frontFace(2305),ne=t)}function Ae(t){t!==a?(_e(2884),t!==re&&(t===s?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):be(2884),re=t}function Ee(t,n,r){t?(_e(32823),oe===n&&ae===r||(e.polygonOffset(n,r),oe=n,ae=r)):be(32823)}function Me(t){void 0===t&&(t=33984+se-1),de!==t&&(e.activeTexture(t),de=t)}return{buffers:{color:i,depth:o,stencil:u},enable:_e,disable:be,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,r&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},drawBuffers:function(r,i){let o=f,a=!1;if(r)if(o=h.get(i),void 0===o&&(o=[],h.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:Se,setMaterial:function(e,t){e.side===g?be(2884):_e(2884);let n=e.side===m;t&&(n=!n),De(n),e.blending===b&&!1===e.transparent?Se(_):Se(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ee(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?_e(32926):be(32926)},setFlipSided:De,setCullFace:Ae,setLineWidth:function(t){t!==ie&&(le&&e.lineWidth(t),ie=t)},setPolygonOffset:Ee,setScissorTest:function(e){e?_e(3089):be(3089)},activeTexture:Me,bindTexture:function(t,n){null===de&&Me();let r=he[de];void 0===r&&(r={type:void 0,texture:void 0},he[de]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||ye[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=he[de];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===me.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),me.copy(t))},viewport:function(t){!1===ge.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ge.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},de=null,he={},d={},h=new WeakMap,f=[],p=null,v=!1,y=null,Y=null,K=null,X=null,Q=null,J=null,ee=null,te=!1,ne=null,re=null,ie=null,oe=null,ae=null,me.set(0,0,e.canvas.width,e.canvas.height),ge.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),u.reset()}}}function Qs(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(H){}function y(e,t){return v?new OffscreenCanvas(e,t):Ln("canvas")}function _(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Mn:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return An(e.width)&&An(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==fe&&e.minFilter!==ye}function w(t){e.generateMipmap(t)}function S(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===Ot&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function D(e,t,n){return!0===x(e,n)||e.isFramebufferTexture&&e.minFilter!==fe&&e.minFilter!==ye?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(e){return e===fe||e===pe||e===ge?9728:9729}function E(e){const t=e.target;t.removeEventListener("dispose",E),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,i=r.get(t),o=r.get(n);void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}function C(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let T=0;function P(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void F(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}const R={[ce]:10497,[de]:33071,[he]:33648},k={[fe]:9728,[pe]:9984,[ge]:9986,[ye]:9729,[_e]:9985,[xe]:9987};function O(n,o,a){if(a?(e.texParameteri(n,10242,R[o.wrapS]),e.texParameteri(n,10243,R[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,R[o.wrapR]),e.texParameteri(n,10240,k[o.magFilter]),e.texParameteri(n,10241,k[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===de&&o.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,A(o.magFilter)),e.texParameteri(n,10241,A(o.minFilter)),o.minFilter!==fe&&o.minFilter!==ye&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===Te&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===Pe&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function L(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&C(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function F(t,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);const l=L(t,r),u=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),u.version!==u.__currentVersion||!0===l){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!s&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==fe&&e.minFilter!==ye)}(r)&&!1===b(r.image);let i=_(r.image,t,!1,c);i=U(r,i);const d=b(i)||s,h=o.convert(r.format,r.encoding);let f,p=o.convert(r.type),m=S(r.internalFormat,h,p,r.encoding,r.isVideoTexture);O(a,r,d);const g=r.mipmaps,v=s&&!0!==r.isVideoTexture,y=void 0===u.__currentVersion||!0===l,A=D(r,i,d);if(r.isDepthTexture)m=6402,s?m=r.type===Te?36012:r.type===Ce?33190:r.type===Oe?35056:33189:r.type===Te&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===je&&6402===m&&r.type!==Ee&&r.type!==Ce&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ce,p=o.convert(r.type)),r.format===ze&&6402===m&&(m=34041,r.type!==Oe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Oe,p=o.convert(r.type))),y&&(v?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,h,p,null));else if(r.isDataTexture)if(g.length>0&&d){v&&y&&n.texStorage2D(3553,A,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],v?n.texSubImage2D(3553,e,0,0,f.width,f.height,h,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,h,p,f.data);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,A,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,h,p,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,h,p,i.data);else if(r.isCompressedTexture){v&&y&&n.texStorage2D(3553,A,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],r.format!==Ie?null!==h?v?n.compressedTexSubImage2D(3553,e,0,0,f.width,f.height,h,f.data):n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,e,0,0,f.width,f.height,h,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,h,p,f.data)}else if(r.isDataArrayTexture)v?(y&&n.texStorage3D(35866,A,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,h,p,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,h,p,i.data);else if(r.isData3DTexture)v?(y&&n.texStorage3D(32879,A,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,h,p,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,h,p,i.data);else if(r.isFramebufferTexture){if(y)if(v)n.texStorage2D(3553,A,m,i.width,i.height);else{let e=i.width,t=i.height;for(let r=0;r<A;r++)n.texImage2D(3553,r,m,e,t,0,h,p,null),e>>=1,t>>=1}}else if(g.length>0&&d){v&&y&&n.texStorage2D(3553,A,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],v?n.texSubImage2D(3553,e,0,0,h,p,f):n.texImage2D(3553,e,m,h,p,f);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,A,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,h,p,i)):n.texImage2D(3553,0,m,h,p,i);x(r,d)&&w(a),u.__currentVersion=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function I(t,i,a,s,l){const u=o.convert(a.format,a.encoding),c=o.convert(a.type),d=S(a.internalFormat,u,c,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,d,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,t),z(i)?h.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,j(i)):e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||z(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Te?i=36012:t.type===Ce&&(i=33190));const r=j(n);z(n)?h.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=j(n);r&&!1===z(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):z(n)?h.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),u=S(a.internalFormat,s,l,a.encoding),c=j(n);r&&!1===z(n)?e.renderbufferStorageMultisample(36161,c,u,n.width,n.height):z(n)?h.renderbufferStorageMultisampleEXT(36161,c,u,n.width,n.height):e.renderbufferStorage(36161,u,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function B(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=j(i);if(i.depthTexture.format===je)z(i)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==ze)throw new Error("Unknown depthTexture format");z(i)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),N(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function j(e){return Math.min(d,e.samples)}function z(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,n){const r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===mn||r!==kt&&(r===Ot?!1===s?!0===t.has("EXT_sRGB")&&i===Ie?(e.format=mn,e.minFilter=ye,e.generateMipmaps=!1):n=$n.sRGBToLinear(n):i===Ie&&o===Se||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=T;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?F(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?F(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;const a=L(t,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),l.version!==l.__currentVersion||!0===a){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,c=[];for(let e=0;e<6;e++)c[e]=t||i?i?r.image[e].image:r.image[e]:_(r.image[e],!1,!0,u),c[e]=U(r,c[e]);const d=c[0],h=b(d)||s,f=o.convert(r.format,r.encoding),p=o.convert(r.type),m=S(r.internalFormat,f,p,r.encoding),g=s&&!0!==r.isVideoTexture,v=void 0===l.__currentVersion||!0===a;let y,A=D(r,d,h);if(O(34067,r,h),t){g&&v&&n.texStorage2D(34067,A,m,d.width,d.height);for(let e=0;e<6;e++){y=c[e].mipmaps;for(let t=0;t<y.length;t++){const i=y[t];r.format!==Ie?null!==f?g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,f,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,f,p,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,f,p,i.data)}}}else{y=r.mipmaps,g&&v&&(y.length>0&&A++,n.texStorage2D(34067,A,m,c[0].width,c[0].height));for(let e=0;e<6;e++)if(i){g?n.texSubImage2D(34069+e,0,0,0,c[e].width,c[e].height,f,p,c[e].data):n.texImage2D(34069+e,0,m,c[e].width,c[e].height,0,f,p,c[e].data);for(let t=0;t<y.length;t++){const r=y[t].image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,f,p,r.data):n.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,p,r.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,f,p,c[e]):n.texImage2D(34069+e,0,m,f,p,c[e]);for(let t=0;t<y.length;t++){const r=y[t];g?n.texSubImage2D(34069+e,t+1,0,0,f,p,r.image[e]):n.texImage2D(34069+e,t+1,m,f,p,r.image[e])}}}x(r,h)&&w(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&I(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&B(e)},this.setupRenderTarget=function(t){const l=t.texture,u=r.get(t),c=r.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=l.version,a.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=b(t)||s;if(d){u.__webglFramebuffer=[];for(let t=0;t<6;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else{if(u.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===z(t)){const r=h?l:[l];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];u.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=S(i.internalFormat,a,s,i.encoding),c=j(t);e.renderbufferStorageMultisample(36161,c,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,u.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),N(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,c.__webglTexture),O(34067,l,f);for(let e=0;e<6;e++)I(u.__webglFramebuffer[e],t,l,36064,34069+e);x(l,f)&&w(34067),n.unbindTexture()}else if(h){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),O(3553,o,f),I(u.__webglFramebuffer,t,o,36064+i,3553),x(o,f)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,c.__webglTexture),O(e,l,f),I(u.__webglFramebuffer,t,l,36064,e),x(l,f)&&w(e),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(e){const t=b(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(x(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===z(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height;let s=16384;const l=[],u=t.stencilBuffer?33306:36096,c=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(u);const h=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),f&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,c.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=I,this.useMultisampledRTT=z}function Js(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===Se)return 5121;if(n===Re)return 32819;if(n===ke)return 32820;if(n===De)return 5120;if(n===Ae)return 5122;if(n===Ee)return 5123;if(n===Me)return 5124;if(n===Ce)return 5125;if(n===Te)return 5126;if(n===Pe)return r?5131:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===Le)return 6406;if(n===Ie)return 6408;if(n===Ne)return 6409;if(n===Be)return 6410;if(n===je)return 6402;if(n===ze)return 34041;if(n===Ue)return 6403;if(n===Fe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===mn)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===He)return 36244;if(n===Ge)return 33319;if(n===Ve)return 33320;if(n===We)return 36249;if(n===Ze||n===$e||n===qe||n===Ye)if(i===Ot){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Ze)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===$e)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===qe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ye)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Ze)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===$e)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===qe)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ye)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ke||n===Xe||n===Qe||n===Je){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===Ke)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Xe)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Qe)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Je)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===et)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===tt||n===nt){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===tt)return i===Ot?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===nt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===rt||n===it||n===ot||n===at||n===st||n===lt||n===ut||n===ct||n===dt||n===ht||n===ft||n===pt||n===mt||n===gt){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===rt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===it)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===ot)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===at)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===st)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===lt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ut)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ct)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===dt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ht)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ft)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===pt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===mt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===gt)return i===Ot?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===vt){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===vt)return i===Ot?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Oe?r?34042:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class el extends go{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class tl extends li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const nl={type:"move"};class rl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new tl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new tl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ar,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ar),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new tl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ar,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ar),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(nl))),l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n);if(void 0===l.joints[o.jointName]){const e=new tl;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[o.jointName]=e,l.add(e)}const r=l.joints[o.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&a>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class il extends Xn{constructor(e,t,n,r,i,o,a,s,l,u){if((u=void 0!==u?u:je)!==je&&u!==ze)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===je&&(n=Ce),void 0===n&&u===ze&&(n=Oe),super(null,r,i,o,a,s,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:fe,this.minFilter=void 0!==s?s:fe,this.flipY=!1,this.generateMipmaps=!1}}class ol extends gn{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=null,l=null,u=null,c=null,d=null,h=null;const f=t.getContextAttributes();let p=null,m=null;const g=[],v=new Map,y=new go;y.layers.enable(1),y.viewport=new Qn;const _=new go;_.layers.enable(2),_.viewport=new Qn;const b=[y,_],x=new el;x.layers.enable(1),x.layers.enable(2);let w=null,S=null;function D(e){const t=v.get(e.inputSource);void 0!==t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function A(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",A),r.removeEventListener("inputsourceschange",E),v.forEach((function(e,t){void 0!==e&&e.disconnect(t)})),v.clear(),w=null,S=null,e.setRenderTarget(p),d=null,c=null,u=null,r=null,m=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function E(e){const t=r.inputSources;for(let n=0;n<t.length;n++){const e="right"===t[n].handedness?1:0;v.set(t[n],g[e])}for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=v.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),v.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=v.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new rl,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new rl,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new rl,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(e){s=e},this.getBaseLayer=function(){return null!==c?c:d},this.getBinding=function(){return u},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",A),r.addEventListener("inputsourceschange",E),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),m=new Jn(d.framebufferWidth,d.framebufferHeight,{format:Ie,type:Se,encoding:e.outputEncoding})}else{let n=null,o=null,a=null;f.depth&&(a=f.stencil?35056:33190,n=f.stencil?ze:je,o=f.stencil?Oe:Ce);const s={colorFormat:e.outputEncoding===Ot?35907:32856,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),c=u.createProjectionLayer(s),r.updateRenderState({layers:[c]}),m=new Jn(c.textureWidth,c.textureHeight,{format:Ie,type:Se,depthTexture:new il(c.textureWidth,c.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});e.properties.get(m).__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,o=await r.requestReferenceSpace(a),R.setContext(r),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const M=new ar,C=new ar;function T(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;x.near=_.near=y.near=e.near,x.far=_.far=y.far=e.far,w===x.near&&S===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,S=x.far);const t=e.parent,n=x.cameras;T(x,t);for(let r=0;r<n.length;r++)T(n[r],t);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),e.position.copy(x.position),e.quaternion.copy(x.quaternion),e.scale.copy(x.scale),e.matrix.copy(x.matrix),e.matrixWorld.copy(x.matrixWorld);const i=e.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);2===n.length?function(e,t,n){M.setFromMatrixPosition(t.matrixWorld),C.setFromMatrixPosition(n.matrixWorld);const r=M.distanceTo(C),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=a*c,f=a*d,p=r/(-c+d),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,v=s+p,y=h-m,_=f+(r-m),b=l*s/v*g,x=u*s/v*g;e.projectionMatrix.makePerspective(y,_,b,x,g,v)}(x,y,_):x.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==c&&(c.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let P=null;const R=new Co;R.setAnimationLoop((function(t,n){if(l=n.getViewerPose(s||o),h=n,null!==l){const t=l.views;null!==d&&(e.setRenderTargetFramebuffer(m,d.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=u.getViewSubImage(c,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,c.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=b[r];void 0===a&&(a=new go,a.layers.enable(r),a.viewport=new Qn,b[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&x.matrix.copy(a.matrix),!0===n&&x.cameras.push(a)}}const i=r.inputSources;for(let e=0;e<g.length;e++){const t=i[e],r=v.get(t);void 0!==r&&r.update(t,n,s||o)}P&&P(t,n),h=null})),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}}function al(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===m&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===m&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let o,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function sl(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=Ln("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let d;d=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,f=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=kt,this.physicallyCorrectLights=!1,this.toneMapping=Q,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const _=this;let b=!1,x=0,w=0,S=null,D=-1,A=null;const E=new Qn,M=new Qn;let C=null,T=t.width,P=t.height,R=1,k=null,O=null;const L=new Qn(0,0,T,P),F=new Qn(0,0,T,P);let I=!1;const N=new Mo;let B=!1,j=!1,z=null;const U=new Nr,H=new Tn,G=new ar,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function W(){return null===S?R:1}let Z,$,q,Y,K,X,J,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,he,fe,pe,me,ge=n;function ve(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",be,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",De,!1),null===ge){const t=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&t.shift(),ge=ve(t,e),null===ge)throw ve(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(je){throw console.error("THREE.WebGLRenderer: "+je.message),je}function ye(){Z=new na(ge),$=new No(ge,Z,e),Z.init($),pe=new Js(ge,Z,$),q=new Xs(ge,Z,$),Y=new oa(ge),K=new Ns,X=new Qs(ge,Z,q,K,$,pe,Y),J=new jo(_),ee=new ta(_),te=new To(ge,$),me=new Fo(ge,Z,te,$),ne=new ra(ge,te,Y,me),re=new ca(ge,ne,te,Y),de=new ua(ge,$,X),le=new Bo(K),ie=new Is(_,J,ee,Z,$,me,le),oe=new al(_,K),ae=new Us,se=new $s(Z,$),ce=new Lo(_,J,q,re,d,s),ue=new Ks(_,re,$),he=new Io(ge,Z,Y,$),fe=new ia(ge,Z,Y,$),Y.programs=ie.programs,_.capabilities=$,_.extensions=Z,_.properties=K,_.renderLists=ae,_.shadowMap=ue,_.state=q,_.info=Y}ye();const _e=new ol(_,ge);function be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=Y.autoReset,t=ue.enabled,n=ue.autoUpdate,r=ue.needsUpdate,i=ue.type;ye(),Y.autoReset=e,ue.enabled=t,ue.autoUpdate=n,ue.needsUpdate=r,ue.type=i}function De(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ae(e){const t=e.target;t.removeEventListener("dispose",Ae),function(e){(function(e){const t=K.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),K.remove(e)}(t)}this.xr=_e,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const e=Z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(e){void 0!==e&&(R=e,this.setSize(T,P,!1))},this.getSize=function(e){return e.set(T,P)},this.setSize=function(e,n,r){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,P=n,t.width=Math.floor(e*R),t.height=Math.floor(n*R),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*R,P*R).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,P=n,R=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(E)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),q.viewport(E.copy(L).multiplyScalar(R).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,r){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,r),q.scissor(M.copy(F).multiplyScalar(R).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(e){q.setScissorTest(I=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(ce.getClearColor())},this.setClearColor=function(){ce.setClearColor.apply(ce,arguments)},this.getClearAlpha=function(){return ce.getClearAlpha()},this.setClearAlpha=function(){ce.setClearAlpha.apply(ce,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),ge.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",be,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",De,!1),ae.dispose(),se.dispose(),K.dispose(),J.dispose(),ee.dispose(),re.dispose(),me.dispose(),ie.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Me),_e.removeEventListener("sessionend",Ce),z&&(z.dispose(),z=null),Re.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=V);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=V);X.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===S?_.outputEncoding:!0===S.isXRRenderTarget?S.texture.encoding:kt,l=(r.isMeshStandardMaterial?ee:J).get(r.envMap||a),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=r.toneMapped?_.toneMapping:Q,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=K.get(r),b=f.state.lights;if(!0===B&&(!0===j||e!==A)){const t=e===A&&r.id===D;le.setState(r,e,t)}let x=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputEncoding!==s||i.isInstancedMesh&&!1===y.instancing?x=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?x=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===r.fog&&y.fog!==o?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===le.numPlanes&&y.numIntersection===le.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==c||y.morphTargets!==d||y.morphNormals!==h||y.morphColors!==p||y.toneMapping!==m||!0===$.isWebGL2&&y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,y.__version=r.version);let w=y.currentProgram;!0===x&&(w=Ne(r,t,i));let E=!1,M=!1,C=!1;const T=w.getUniforms(),k=y.uniforms;q.useProgram(w.program)&&(E=!0,M=!0,C=!0);r.id!==D&&(D=r.id,M=!0);if(E||A!==e){if(T.setValue(ge,"projectionMatrix",e.projectionMatrix),$.logarithmicDepthBuffer&&T.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),A!==e&&(A=e,M=!0,C=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=T.map.cameraPosition;void 0!==t&&t.setValue(ge,G.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&T.setValue(ge,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&T.setValue(ge,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){T.setOptional(ge,i,"bindMatrix"),T.setOptional(ge,i,"bindMatrixInverse");const e=i.skeleton;e&&($.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),T.setValue(ge,"boneTexture",e.boneTexture,X),T.setValue(ge,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===$.isWebGL2)&&de.update(i,n,r,w);(M||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,T.setValue(ge,"receiveShadow",i.receiveShadow));M&&(T.setValue(ge,"toneMappingExposure",_.toneMappingExposure),y.needsLights&&(F=C,(L=k).ambientLightColor.needsUpdate=F,L.lightProbe.needsUpdate=F,L.directionalLights.needsUpdate=F,L.directionalLightShadows.needsUpdate=F,L.pointLights.needsUpdate=F,L.pointLightShadows.needsUpdate=F,L.spotLights.needsUpdate=F,L.spotLightShadows.needsUpdate=F,L.rectAreaLights.needsUpdate=F,L.hemisphereLights.needsUpdate=F),o&&!0===r.fog&&oe.refreshFogUniforms(k,o),oe.refreshMaterialUniforms(k,r,R,P,z),ps.upload(ge,y.uniformsList,k,X));var L,F;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ps.upload(ge,y.uniformsList,k,X),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&T.setValue(ge,"center",i.center);return T.setValue(ge,"modelViewMatrix",i.modelViewMatrix),T.setValue(ge,"normalMatrix",i.normalMatrix),T.setValue(ge,"modelMatrix",i.matrixWorld),w}(e,t,n,r,i);q.setMaterial(r,a);let l=n.index;const u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let c,d=1;!0===r.wireframe&&(l=ne.getWireframeAttribute(n),d=2),me.setup(i,r,s,n,l);let h=he;null!==l&&(c=te.get(l),h=fe,h.setIndex(c));const p=null!==l?l.count:u.count,m=n.drawRange.start*d,g=n.drawRange.count*d,v=null!==o?o.start*d:0,y=null!==o?o.count*d:1/0,b=Math.max(m,v),x=Math.min(p,m+g,v+y)-1,w=Math.max(0,x-b+1);if(0!==w){if(i.isMesh)!0===r.wireframe?(q.setLineWidth(r.wireframeLinewidth*W()),h.setMode(1)):h.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),q.setLineWidth(e*W()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(b,w,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(b,w,e)}else h.render(b,w)}},this.compile=function(e,t){f=se.get(e),f.init(),y.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(_.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Ne(n[r],e,t)}else Ne(n,e,t)})),y.pop(),f=null};let Ee=null;function Me(){Re.stop()}function Ce(){Re.start()}const Re=new Co;function ke(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),i=e.material;i.visible&&h.push(e,t,i,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Y.render.frame&&(e.skeleton.update(),e.skeleton.frame=Y.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,G.z,a)}}else i.visible&&h.push(e,t,i,n,G.z,null)}const i=e.children;for(let o=0,a=i.length;o<a;o++)ke(i[o],t,n,r)}function Oe(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;f.setupLightsView(n),o.length>0&&function(e,t,n){const r=$.isWebGL2;null===z&&(z=new Jn(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?Pe:Se,minFilter:xe,samples:r&&!0===a?4:0}));_.getDrawingBufferSize(H),r?z.setSize(H.x,H.y):z.setSize(Mn(H.x),Mn(H.y));const i=_.getRenderTarget();_.setRenderTarget(z),_.clear();const o=_.toneMapping;_.toneMapping=Q,Le(e,t,n),_.toneMapping=o,X.updateMultisampleRenderTarget(z),X.updateRenderTargetMipmap(z),_.setRenderTarget(i)}(i,t,n),r&&q.viewport(E.copy(r)),i.length>0&&Le(i,t,n),o.length>0&&Le(o,t,n),s.length>0&&Le(s,t,n),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Le(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,u=o.group;a.layers.test(n.layers)&&Fe(a,t,n,s,l,u)}}function Fe(e,t,n,r,i,o){e.onBeforeRender(_,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(_,t,n,r,e,o),!0===i.transparent&&i.side===g?(i.side=m,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,o),i.side=p,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,o),i.side=g):_.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(_,t,n,r,i,o)}function Ne(e,t,n){!0!==t.isScene&&(t=V);const r=K.get(e),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=ie.getParameters(e,i.state,o,t,n),l=ie.getProgramCacheKey(s);let u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:J).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",Ae),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Be(e,s),c}else s.uniforms=ie.getUniforms(e),e.onBuild(n,s,_),e.onBeforeCompile(s,_),c=ie.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;const d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Be(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=c.getUniforms(),p=ps.seqWithValue(h.seq,d);return r.currentProgram=c,r.uniformsList=p,c}function Be(e,t){const n=K.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop((function(e){Ee&&Ee(e)})),"undefined"!==typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){Ee=e,_e.setAnimationLoop(e),null===e?Re.stop():Re.start()},_e.addEventListener("sessionstart",Me),_e.addEventListener("sessionend",Ce),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(_,e,t,S),f=se.get(e,y.length),f.init(),y.push(f),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(U),j=this.localClippingEnabled,B=le.init(this.clippingPlanes,j,t),h=ae.get(e,v.length),h.init(),v.push(h),ke(e,t,0,_.sortObjects),h.finish(),!0===_.sortObjects&&h.sort(k,O),!0===B&&le.beginShadows();const n=f.state.shadowsArray;if(ue.render(n,e,t),!0===B&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ce.render(h,e),f.setupLights(_.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Oe(h,e,r,r.viewport)}}else Oe(h,e,t);null!==S&&(X.updateMultisampleRenderTarget(S),X.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(_,e,t),me.resetDefaultState(),D=-1,A=null,y.pop(),f=y.length>0?y[y.length-1]:null,v.pop(),h=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=n;const r=K.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=K.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,x=t,w=n;let r=!0;if(e){const t=K.get(e);void 0!==t.__useDefaultFramebuffer?(q.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?X.setupRenderTarget(e):t.__hasExternalTextures&&X.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture)}let i=null,o=!1,a=!1;if(e){const n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);const r=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],o=!0):i=$.isWebGL2&&e.samples>0&&!1===X.useMultisampledRTT(e)?K.get(e).__webglMultisampledFramebuffer:r,E.copy(e.viewport),M.copy(e.scissor),C=e.scissorTest}else E.copy(L).multiplyScalar(R).floor(),M.copy(F).multiplyScalar(R).floor(),C=I;if(q.bindFramebuffer(36160,i)&&$.drawBuffers&&r&&q.drawBuffers(e,i),q.viewport(E),q.scissor(M),q.setScissorTest(C),o){const r=K.get(e.texture);ge.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=K.get(e.texture),i=t||0;ge.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}D=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){q.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==Ie&&pe.convert(s)!==ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===Pe&&(Z.has("EXT_color_buffer_half_float")||$.isWebGL2&&Z.has("EXT_color_buffer_float"));if(l!==Se&&pe.convert(l)!==ge.getParameter(35738)&&(l!==Te||!($.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ge.readPixels(t,n,r,i,pe.convert(s),pe.convert(l),o)}finally{const e=null!==S?K.get(S).__webglFramebuffer:null;q.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);X.setTexture2D(t,0),ge.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),q.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=pe.convert(n.format),s=pe.convert(n.type);X.setTexture2D(n,0),ge.pixelStorei(37440,n.flipY),ge.pixelStorei(37441,n.premultiplyAlpha),ge.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ge.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ge.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ge.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ge.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=pe.convert(r.format),u=pe.convert(r.type);let c;if(r.isData3DTexture)X.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),c=35866}ge.pixelStorei(37440,r.flipY),ge.pixelStorei(37441,r.premultiplyAlpha),ge.pixelStorei(3317,r.unpackAlignment);const d=ge.getParameter(3314),h=ge.getParameter(32878),f=ge.getParameter(3316),p=ge.getParameter(3315),m=ge.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ge.pixelStorei(3314,g.width),ge.pixelStorei(32878,g.height),ge.pixelStorei(3316,e.min.x),ge.pixelStorei(3315,e.min.y),ge.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ge.texSubImage3D(c,i,t.x,t.y,t.z,o,a,s,l,u,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ge.compressedTexSubImage3D(c,i,t.x,t.y,t.z,o,a,s,l,g.data)):ge.texSubImage3D(c,i,t.x,t.y,t.z,o,a,s,l,u,g),ge.pixelStorei(3314,d),ge.pixelStorei(32878,h),ge.pixelStorei(3316,f),ge.pixelStorei(3315,p),ge.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ge.generateMipmap(c),q.unbindTexture()},this.initTexture=function(e){X.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){x=0,w=0,S=null,q.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class ll extends sl{}ll.prototype.isWebGL1Renderer=!0;class ul{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Wn(e),this.density=t}clone(){return new ul(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class cl{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Wn(e),this.near=t,this.far=n}clone(){return new cl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class dl extends li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}class hl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=rn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fl=new ar;class pl{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fl.fromBufferAttribute(this,t),fl.applyMatrix4(e),this.setXYZ(t,fl.x,fl.y,fl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fl.fromBufferAttribute(this,t),fl.applyNormalMatrix(e),this.setXYZ(t,fl.x,fl.y,fl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fl.fromBufferAttribute(this,t),fl.transformDirection(e),this.setXYZ(t,fl.x,fl.y,fl.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ai(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new pl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ml extends xi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Wn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gl;const vl=new ar,yl=new ar,_l=new ar,bl=new Tn,xl=new Tn,wl=new Nr,Sl=new ar,Dl=new ar,Al=new ar,El=new Tn,Ml=new Tn,Cl=new Tn;class Tl extends li{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===gl){gl=new Gi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new hl(e,5);gl.setIndex([0,1,2,0,2,3]),gl.setAttribute("position",new pl(t,3,0,!1)),gl.setAttribute("uv",new pl(t,2,3,!1))}this.geometry=gl,this.material=void 0!==e?e:new ml,this.center=new Tn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yl.setFromMatrixScale(this.matrixWorld),wl.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_l.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&yl.multiplyScalar(-_l.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Pl(Sl.set(-.5,-.5,0),_l,o,yl,r,i),Pl(Dl.set(.5,-.5,0),_l,o,yl,r,i),Pl(Al.set(.5,.5,0),_l,o,yl,r,i),El.set(0,0),Ml.set(1,0),Cl.set(1,1);let a=e.ray.intersectTriangle(Sl,Dl,Al,!1,vl);if(null===a&&(Pl(Dl.set(-.5,.5,0),_l,o,yl,r,i),Ml.set(0,1),a=e.ray.intersectTriangle(Sl,Al,Dl,!1,vl),null===a))return;const s=e.ray.origin.distanceTo(vl);s<e.near||s>e.far||t.push({distance:s,point:vl.clone(),uv:_i.getUV(vl,Sl,Dl,Al,El,Ml,Cl,new Tn),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Pl(e,t,n,r,i,o){bl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(xl.x=o*bl.x-i*bl.y,xl.y=i*bl.x+o*bl.y):xl.copy(bl),e.copy(t),e.x+=xl.x,e.y+=xl.y,e.applyMatrix4(wl)}const Rl=new ar,kl=new ar;class Ol extends li{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Rl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Rl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Rl.setFromMatrixPosition(e.matrixWorld),kl.setFromMatrixPosition(this.matrixWorld);const n=Rl.distanceTo(kl)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance})}return t}}const Ll=new ar,Fl=new Qn,Il=new Qn,Nl=new ar,Bl=new Nr;class jl extends so{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Nr,this.bindMatrixInverse=new Nr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Fl.fromBufferAttribute(r.attributes.skinIndex,e),Il.fromBufferAttribute(r.attributes.skinWeight,e),Ll.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=Il.getComponent(i);if(0!==e){const r=Fl.getComponent(i);Bl.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Nl.copy(Ll).applyMatrix4(Bl),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class zl extends li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ul extends Xn{constructor(e=null,t=1,n=1,r,i,o,a,s,l=fe,u=fe,c,d){super(null,o,a,s,l,u,r,i,c,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Hl=new Nr,Gl=new Nr;class Vl{constructor(e=[],t=[]){this.uuid=xn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Nr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Nr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const r=e[i]?e[i].matrixWorld:Gl;Hl.multiplyMatrices(r,t[i]),Hl.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Vl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=En(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ul(t,e,e,Ie,Te);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new zl),this.bones.push(i),this.boneInverses.push((new Nr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class Wl extends Ai{constructor(e,t,n,r=1){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Zl=new Nr,$l=new Nr,ql=[],Yl=new so;class Kl extends so{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wl(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Yl.geometry=this.geometry,Yl.material=this.material,void 0!==Yl.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Zl),$l.multiplyMatrices(n,Zl),Yl.matrixWorld=$l,Yl.raycast(e,ql);for(let e=0,n=ql.length;e<n;e++){const n=ql[e];n.instanceId=i,n.object=this,t.push(n)}ql.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Wl(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Xl extends xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Wn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ql=new ar,Jl=new ar,eu=new Nr,tu=new Ir,nu=new Cr;class ru extends li{constructor(e=new Gi,t=new Xl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Ql.fromBufferAttribute(t,e-1),Jl.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Ql.distanceTo(Jl);e.setAttribute("lineDistance",new Li(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),nu.copy(n.boundingSphere),nu.applyMatrix4(r),nu.radius+=i,!1===e.ray.intersectsSphere(nu))return;eu.copy(r).invert(),tu.copy(e.ray).applyMatrix4(eu);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new ar,u=new ar,c=new ar,d=new ar,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=h){const r=f.getX(n),i=f.getX(n+1);l.fromBufferAttribute(p,r),u.fromBufferAttribute(p,i);if(tu.distanceSqToSegment(l,u,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(d);o<e.near||o>e.far||t.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=h){l.fromBufferAttribute(p,n),u.fromBufferAttribute(p,n+1);if(tu.distanceSqToSegment(l,u,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const iu=new ar,ou=new ar;class au extends ru{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)iu.fromBufferAttribute(t,e),ou.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+iu.distanceTo(ou);e.setAttribute("lineDistance",new Li(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class su extends ru{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class lu extends xi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Wn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const uu=new Nr,cu=new Ir,du=new Cr,hu=new ar;class fu extends li{constructor(e=new Gi,t=new lu){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),du.copy(n.boundingSphere),du.applyMatrix4(r),du.radius+=i,!1===e.ray.intersectsSphere(du))return;uu.copy(r).invert(),cu.copy(e.ray).applyMatrix4(uu);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,u=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);hu.fromBufferAttribute(u,i),pu(hu,i,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(u.count,o.start+o.count);n<i;n++)hu.fromBufferAttribute(u,n),pu(hu,n,s,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function pu(e,t,n,r,i,o,a){const s=cu.distanceSqToPoint(e);if(s<n){const n=new ar;cu.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class mu extends Xn{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:ye,this.magFilter=void 0!==i?i:ye,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class gu extends Xn{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=fe,this.minFilter=fe,this.generateMipmaps=!1,this.needsUpdate=!0}}class vu extends Xn{constructor(e,t,n,r,i,o,a,s,l,u,c,d){super(null,o,a,s,l,u,r,i,c,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yu extends Xn{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _u{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new Tn:new ar);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ar,r=[],i=[],o=[],a=new ar,s=new Nr;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new ar)}i[0]=new ar,o[0]=new ar;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),c=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(wn(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(s.makeRotationAxis(a,e))}o[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(wn(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bu extends _u{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new Tn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class xu extends bu{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function wu(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,u*=a,i(t,n,l,u)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}const Su=new ar,Du=new wu,Au=new wu,Eu=new wu;class Mu extends _u{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ar){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===u&&l===i-1&&(l=i-2,u=1),this.closed||l>0?a=r[(l-1)%i]:(Su.subVectors(r[0],r[1]).add(r[0]),a=Su);const c=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(Su.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=Su),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Du.initNonuniformCatmullRom(a.x,c.x,d.x,s.x,t,n,r),Au.initNonuniformCatmullRom(a.y,c.y,d.y,s.y,t,n,r),Eu.initNonuniformCatmullRom(a.z,c.z,d.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(Du.initCatmullRom(a.x,c.x,d.x,s.x,this.tension),Au.initCatmullRom(a.y,c.y,d.y,s.y,this.tension),Eu.initCatmullRom(a.z,c.z,d.z,s.z,this.tension));return n.set(Du.calc(u),Au.calc(u),Eu.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ar).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Cu(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Tu(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Pu(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Ru extends _u{constructor(e=new Tn,t=new Tn,n=new Tn,r=new Tn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Tn){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Pu(e,r.x,i.x,o.x,a.x),Pu(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ku extends _u{constructor(e=new ar,t=new ar,n=new ar,r=new ar){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ar){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Pu(e,r.x,i.x,o.x,a.x),Pu(e,r.y,i.y,o.y,a.y),Pu(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ou extends _u{constructor(e=new Tn,t=new Tn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Tn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Tn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Lu extends _u{constructor(e=new ar,t=new ar){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ar){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fu extends _u{constructor(e=new Tn,t=new Tn,n=new Tn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Tn){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(Tu(e,r.x,i.x,o.x),Tu(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Iu extends _u{constructor(e=new ar,t=new ar,n=new ar){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ar){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(Tu(e,r.x,i.x,o.x),Tu(e,r.y,i.y,o.y),Tu(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nu extends _u{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Tn){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Cu(a,s.x,l.x,u.x,c.x),Cu(a,s.y,l.y,u.y,c.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Tn).fromArray(n))}return this}}var Bu=Object.freeze({__proto__:null,ArcCurve:xu,CatmullRomCurve3:Mu,CubicBezierCurve:Ru,CubicBezierCurve3:ku,EllipseCurve:bu,LineCurve:Ou,LineCurve3:Lu,QuadraticBezierCurve:Fu,QuadraticBezierCurve3:Iu,SplineCurve:Nu});class ju extends _u{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ou(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Bu[n.type]).fromJSON(n))}return this}}class zu extends ju{constructor(e){super(),this.type="Path",this.currentPoint=new Tn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Ou(this.currentPoint.clone(),new Tn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Fu(this.currentPoint.clone(),new Tn(e,t),new Tn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new Ru(this.currentPoint.clone(),new Tn(e,t),new Tn(n,r),new Tn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Nu(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const l=new bu(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Uu extends Gi{constructor(e=[new Tn(0,.5),new Tn(.5,0),new Tn(0,-.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=wn(r,0,2*Math.PI);const i=[],o=[],a=[],s=[],l=[],u=1/t,c=new ar,d=new Tn,h=new ar,f=new ar,p=new ar;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(f)}for(let v=0;v<=t;v++){const i=n+v*u*r,h=Math.sin(i),f=Math.cos(i);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*h,c.y=e[n].y,c.z=e[n].x*f,o.push(c.x,c.y,c.z),d.x=v/t,d.y=n/(e.length-1),a.push(d.x,d.y);const r=s[3*n+0]*h,i=s[3*n+1],u=s[3*n+0]*f;l.push(r,i,u)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,r=n,o=n+e.length,a=n+e.length+1,s=n+1;i.push(r,o,s),i.push(a,s,o)}this.setIndex(i),this.setAttribute("position",new Li(o,3)),this.setAttribute("uv",new Li(a,2)),this.setAttribute("normal",new Li(l,3))}static fromJSON(e){return new Uu(e.points,e.segments,e.phiStart,e.phiLength)}}class Hu extends Uu{constructor(e=1,t=1,n=4,r=8){const i=new zu;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Hu(e.radius,e.length,e.capSegments,e.radialSegments)}}class Gu extends Gi{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],l=new ar,u=new Tn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let c=0,d=3;c<=t;c++,d+=3){const i=n+c/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),o.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,s.push(u.x,u.y)}for(let c=1;c<=t;c++)i.push(c,c+1,0);this.setIndex(i),this.setAttribute("position",new Li(o,3)),this.setAttribute("normal",new Li(a,3)),this.setAttribute("uv",new Li(s,2))}static fromJSON(e){return new Gu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vu extends Gi{constructor(e=1,t=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const u=[],c=[],d=[],h=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,o=new Tn,p=new ar;let v=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,m*_,0),d.push(0,_,0),h.push(.5,.5),f++;const b=f;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*_,p.z=y*n,c.push(p.x,p.y,p.z),d.push(0,_,0),o.x=.5*n+.5,o.y=.5*i*_+.5,h.push(o.x,o.y),f++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new ar,v=new ar;let y=0;const _=(t-e)/n;for(let l=0;l<=i;l++){const u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,c.push(v.x,v.y,v.z),o.set(l,_,p).normalize(),d.push(o.x,o.y,o.z),h.push(t,1-g),u.push(f++)}p.push(u)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];u.push(n,r,o),u.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new Li(c,3)),this.setAttribute("normal",new Li(d,3)),this.setAttribute("uv",new Li(h,2))}static fromJSON(e){return new Vu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wu extends Vu{constructor(e=1,t=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Wu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Zu extends Gi{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];const r=e.clone().lerp(n,a/i),s=t.clone().lerp(n,a/i),l=i-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===i?r:r.clone().lerp(s,e/l)}for(let a=0;a<i;a++)for(let e=0;e<2*(i-a)-1;e++){const t=Math.floor(e/2);e%2===0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new ar,r=new ar,i=new ar;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new ar;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new ar;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=c(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new ar,t=new ar,n=new ar,r=new ar,a=new Tn,s=new Tn,l=new Tn;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=c(r);u(a,h+0,e,f),u(s,h+2,t,f),u(l,h+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Li(i,3)),this.setAttribute("normal",new Li(i.slice(),3)),this.setAttribute("uv",new Li(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Zu(e.vertices,e.indices,e.radius,e.details)}}class $u extends Zu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $u(e.radius,e.detail)}}const qu=new ar,Yu=new ar,Ku=new ar,Xu=new _i;class Qu extends Gi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(_n*t),o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),d={},h=[];for(let e=0;e<s;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=Xu;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),Xu.getNormal(Ku),c[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,c[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,c[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],r=c[t],o=Xu[u[e]],a=Xu[u[t]],s=`${n}_${r}`,f=`${r}_${n}`;f in d&&d[f]?(Ku.dot(d[f].normal)<=i&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),d[f]=null):s in d||(d[s]={index0:l[e],index1:l[t],normal:Ku.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];qu.fromBufferAttribute(a,t),Yu.fromBufferAttribute(a,n),h.push(qu.x,qu.y,qu.z),h.push(Yu.x,Yu.y,Yu.z)}this.setAttribute("position",new Li(h,3))}}}class Ju extends zu{constructor(e){super(e),this.uuid=xn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new zu).fromJSON(n))}return this}}const ec=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=tc(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,u,c,d,h,f;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,u=tc(e,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(hc(u));for(i.sort(lc),o=0;o<i.length;o++)uc(i[o],n),n=nc(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<s&&(s=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);f=Math.max(u-s,c-l),f=0!==f?1/f:0}return rc(o,a,n,s,l,f),a};function tc(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=wc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=wc(o,e[o],e[o+1],a);return a&&gc(a,a.next)&&(Sc(a),a=a.next),a}function nc(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!gc(r,r.next)&&0!==mc(r.prev,r,r.next))r=r.next;else{if(Sc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function rc(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=dc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ,r);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);let s,l,u=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?oc(e,r,i,o):ic(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Sc(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?rc(e=ac(nc(e),t,n),t,n,r,i,o,2):2===a&&sc(e,t,n,r,i,o):rc(nc(e),t,n,r,i,o,1);break}}function ic(e){const t=e.prev,n=e,r=e.next;if(mc(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(fc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&mc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function oc(e,t,n,r){const i=e.prev,o=e,a=e.next;if(mc(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,d=dc(s,l,t,n,r),h=dc(u,c,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&fc(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&mc(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&fc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&mc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&fc(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&mc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&fc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&mc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ac(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!gc(i,o)&&vc(i,r,r.next,o)&&bc(i,o)&&bc(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Sc(r),Sc(r.next),r=e=o),r=r.next}while(r!==e);return nc(r)}function sc(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&pc(a,e)){let s=xc(a,e);return a=nc(a,a.next),s=nc(s,s.next),rc(a,t,n,r,i,o),void rc(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function lc(e,t){return e.x-t.x}function uc(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,l=o.x,u=o.y;let c,d=1/0;n=o;do{r>=n.x&&n.x>=l&&r!==n.x&&fc(i<u?r:a,i,l,u,i<u?a:r,i,n.x,n.y)&&(c=Math.abs(i-n.y)/(r-n.x),bc(n,e)&&(c<d||c===d&&(n.x>o.x||n.x===o.x&&cc(o,n)))&&(o=n,d=c)),n=n.next}while(n!==s);return o}(e,t),t){const n=xc(t,e);nc(t,t.next),nc(n,n.next)}}function cc(e,t){return mc(e.prev,e,t.prev)<0&&mc(t.next,e,e.next)<0}function dc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function fc(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function pc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&vc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(bc(e,t)&&bc(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(mc(e.prev,e,t.prev)||mc(e,t.prev,t))||gc(e,t)&&mc(e.prev,e,e.next)>0&&mc(t.prev,t,t.next)>0)}function mc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function gc(e,t){return e.x===t.x&&e.y===t.y}function vc(e,t,n,r){const i=_c(mc(e,t,n)),o=_c(mc(e,t,r)),a=_c(mc(n,r,e)),s=_c(mc(n,r,t));return i!==o&&a!==s||(!(0!==i||!yc(e,n,t))||(!(0!==o||!yc(e,r,t))||(!(0!==a||!yc(n,e,r))||!(0!==s||!yc(n,t,r)))))}function yc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _c(e){return e>0?1:e<0?-1:0}function bc(e,t){return mc(e.prev,e,e.next)<0?mc(e,t,e.next)>=0&&mc(e,e.prev,t)>=0:mc(e,t,e.prev)<0||mc(e,e.next,t)<0}function xc(e,t){const n=new Dc(e.i,e.x,e.y),r=new Dc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function wc(e,t,n,r){const i=new Dc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Sc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Dc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ac{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Ac.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Ec(e),Mc(n,e);let o=e.length;t.forEach(Ec);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,Mc(n,t[s]);const a=ec(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function Ec(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Mc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Cc extends Gi{constructor(e=new Ju([new Tn(.5,.5),new Tn(-.5,.5),new Tn(-.5,-.5),new Tn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:1,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:c-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Tc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,_,b,x=!1;p&&(g=p.getSpacedPoints(s),x=!0,u=!1,v=p.computeFrenetFrames(s,!1),y=new ar,_=new ar,b=new ar),u||(f=0,c=0,d=0,h=0);const w=e.extractPoints(a);let S=w.shape;const D=w.holes;if(!Ac.isClockWise(S)){S=S.reverse();for(let e=0,t=D.length;e<t;e++){const t=D[e];Ac.isClockWise(t)&&(D[e]=t.reverse())}}const A=Ac.triangulateShape(S,D),E=S;for(let t=0,n=D.length;t<n;t++){const e=D[t];S=S.concat(e)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=S.length,T=A.length;function P(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+s*s,d=a*u-s*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(c),h=Math.sqrt(l*l+u*u),f=t.x-s/d,p=t.y+a/d,m=((n.x-u/h-f)*u-(n.y+l/h-p)*l)/(a*u-s*l);r=f+a*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new Tn(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(u)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Tn(r/o,i/o)}const R=[];for(let t=0,n=E.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),R[t]=P(E[t],E[r],E[i]);const k=[];let O,L=R.concat();for(let t=0,n=D.length;t<n;t++){const e=D[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=P(e[t],e[r],e[i]);k.push(O),L=L.concat(O)}for(let t=0;t<f;t++){const e=t/f,n=c*Math.cos(e*Math.PI/2),r=d*Math.sin(e*Math.PI/2)+h;for(let t=0,i=E.length;t<i;t++){const e=M(E[t],R[t],r);N(e.x,e.y,-n)}for(let t=0,i=D.length;t<i;t++){const e=D[t];O=k[t];for(let t=0,i=e.length;t<i;t++){const i=M(e[t],O[t],r);N(i.x,i.y,-n)}}}const F=d+h;for(let t=0;t<C;t++){const e=u?M(S[t],L[t],F):S[t];x?(_.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(_).add(y),N(b.x,b.y,b.z)):N(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<C;e++){const n=u?M(S[e],L[e],F):S[e];x?(_.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(_).add(y),N(b.x,b.y,b.z)):N(n.x,n.y,l/s*t)}for(let t=f-1;t>=0;t--){const e=t/f,n=c*Math.cos(e*Math.PI/2),r=d*Math.sin(e*Math.PI/2)+h;for(let t=0,i=E.length;t<i;t++){const e=M(E[t],R[t],r);N(e.x,e.y,l+n)}for(let t=0,i=D.length;t<i;t++){const e=D[t];O=k[t];for(let t=0,i=e.length;t<i;t++){const i=M(e[t],O[t],r);x?N(i.x,i.y+g[s-1].y,g[s-1].x+n):N(i.x,i.y,l+n)}}}function I(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=C*e,o=C*(e+1);j(t+r+n,t+i+n,t+i+o,t+r+o)}}}function N(e,t,n){o.push(e),o.push(t),o.push(n)}function B(e,t,i){z(e),z(t),z(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[2])}function j(e,t,i,o){z(e),z(t),z(o),z(t),z(i),z(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[3]),U(s[1]),U(s[2]),U(s[3])}function z(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function U(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(u){let e=0,t=C*e;for(let n=0;n<T;n++){const e=A[n];B(e[2]+t,e[1]+t,e[0]+t)}e=s+2*f,t=C*e;for(let n=0;n<T;n++){const e=A[n];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<T;e++){const t=A[e];B(t[2],t[1],t[0])}for(let e=0;e<T;e++){const t=A[e];B(t[0]+C*s,t[1]+C*s,t[2]+C*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;I(E,t),t+=E.length;for(let n=0,r=D.length;n<r;n++){const e=D[n];I(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Li(r,3)),this.setAttribute("uv",new Li(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,o=e.shapes.length;i<o;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Bu[r.type]).fromJSON(r)),new Cc(n,e.options)}}const Tc={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new Tn(o,a),new Tn(s,l),new Tn(u,c)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-c)<Math.abs(a-u)?[new Tn(a,1-l),new Tn(u,1-d),new Tn(h,1-p),new Tn(m,1-v)]:[new Tn(s,1-l),new Tn(c,1-d),new Tn(f,1-p),new Tn(g,1-v)]}};class Pc extends Zu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pc(e.radius,e.detail)}}class Rc extends Zu{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rc(e.radius,e.detail)}}class kc extends Gi{constructor(e=.5,t=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],l=[],u=[];let c=e;const d=(t-e)/(r=Math.max(1,r)),h=new ar,f=new Tn;for(let p=0;p<=r;p++){for(let e=0;e<=n;e++){const r=i+e/n*o;h.x=c*Math.cos(r),h.y=c*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(h.x/t+1)/2,f.y=(h.y/t+1)/2,u.push(f.x,f.y)}c+=d}for(let p=0;p<r;p++){const e=p*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,s=r+n+2,l=r+1;a.push(i,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Li(s,3)),this.setAttribute("normal",new Li(l,3)),this.setAttribute("uv",new Li(u,2))}static fromJSON(e){return new kc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Oc extends Gi{constructor(e=new Ju([new Tn(0,.5),new Tn(-.5,-.5),new Tn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,s,u),a+=s,s=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let u=l.shape;const c=l.holes;!1===Ac.isClockWise(u)&&(u=u.reverse());for(let t=0,n=c.length;t<n;t++){const e=c[t];!0===Ac.isClockWise(e)&&(c[t]=e.reverse())}const d=Ac.triangulateShape(u,c);for(let t=0,n=c.length;t<n;t++){const e=c[t];u=u.concat(e)}for(let t=0,n=u.length;t<n;t++){const e=u[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=d.length;t<r;t++){const e=d[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Li(r,3)),this.setAttribute("normal",new Li(i,3)),this.setAttribute("uv",new Li(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Oc(n,e.curveSegments)}}class Lc extends Gi{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const u=[],c=new ar,d=new ar,h=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let y=0;0==g&&0==o?y=.5/t:g==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;c.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),c.y=e*Math.cos(o+v*a),c.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),f.push(c.x,c.y,c.z),d.copy(c).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),h.push(l++)}u.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=u[g][e+1],r=u[g][e],i=u[g+1][e],a=u[g+1][e+1];(0!==g||o>0)&&h.push(t,r,a),(g!==n-1||s<Math.PI)&&h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new Li(f,3)),this.setAttribute("normal",new Li(p,3)),this.setAttribute("uv",new Li(m,2))}static fromJSON(e){return new Lc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Fc extends Zu{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fc(e.radius,e.detail)}}class Ic extends Gi{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],u=new ar,c=new ar,d=new ar;for(let h=0;h<=n;h++)for(let o=0;o<=r;o++){const f=o/r*i,p=h/n*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(f),c.y=(e+t*Math.cos(p))*Math.sin(f),c.z=t*Math.sin(p),a.push(c.x,c.y,c.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(c,u).normalize(),s.push(d.x,d.y,d.z),l.push(o/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,i=(r+1)*(h-1)+e,a=(r+1)*h+e;o.push(t,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new Li(a,3)),this.setAttribute("normal",new Li(s,3)),this.setAttribute("uv",new Li(l,2))}static fromJSON(e){return new Ic(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Nc extends Gi{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],l=[],u=[],c=new ar,d=new ar,h=new ar,f=new ar,p=new ar,m=new ar,g=new ar;for(let y=0;y<=n;++y){const a=y/n*i*Math.PI*2;v(a,i,o,e,h),v(a+.01,i,o,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),a=t*Math.sin(i);c.x=h.x+(o*g.x+a*p.x),c.y=h.y+(o*g.y+a*p.y),c.z=h.z+(o*g.z+a*p.z),s.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(y/n),u.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){const t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,o=(r+1)*(y-1)+e;a.push(t,n,o),a.push(n,i,o)}function v(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Li(s,3)),this.setAttribute("normal",new Li(l,3)),this.setAttribute("uv",new Li(u,2))}static fromJSON(e){return new Nc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Bc extends Gi{constructor(e=new Iu(new ar(-1,-1,0),new ar(-1,1,0),new ar(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ar,s=new ar,l=new Tn;let u=new ar;const c=[],d=[],h=[],f=[];function p(i){u=e.getPointAt(i/t,u);const l=o.normals[i],h=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+i*h.x,s.y=o*l.y+i*h.y,s.z=o*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),a.x=u.x+n*s.x,a.y=u.y+n*s.y,a.z=u.z+n*s.z,c.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;f.push(n,i,a),f.push(i,o,a)}}()}(),this.setIndex(f),this.setAttribute("position",new Li(c,3)),this.setAttribute("normal",new Li(d,3)),this.setAttribute("uv",new Li(h,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Bc((new Bu[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class jc extends Gi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new ar,i=new ar;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],u=l.start;for(let e=u,s=u+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=a.getX(e+l),u=a.getX(e+(l+1)%3);r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,u),!0===zc(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,a=o.count/3;e<a;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,l),!0===zc(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Li(t,3))}}}function zc(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Uc=Object.freeze({__proto__:null,BoxGeometry:uo,BoxBufferGeometry:uo,CapsuleGeometry:Hu,CapsuleBufferGeometry:Hu,CircleGeometry:Gu,CircleBufferGeometry:Gu,ConeGeometry:Wu,ConeBufferGeometry:Wu,CylinderGeometry:Vu,CylinderBufferGeometry:Vu,DodecahedronGeometry:$u,DodecahedronBufferGeometry:$u,EdgesGeometry:Qu,ExtrudeGeometry:Cc,ExtrudeBufferGeometry:Cc,IcosahedronGeometry:Pc,IcosahedronBufferGeometry:Pc,LatheGeometry:Uu,LatheBufferGeometry:Uu,OctahedronGeometry:Rc,OctahedronBufferGeometry:Rc,PlaneGeometry:Po,PlaneBufferGeometry:Po,PolyhedronGeometry:Zu,PolyhedronBufferGeometry:Zu,RingGeometry:kc,RingBufferGeometry:kc,ShapeGeometry:Oc,ShapeBufferGeometry:Oc,SphereGeometry:Lc,SphereBufferGeometry:Lc,TetrahedronGeometry:Fc,TetrahedronBufferGeometry:Fc,TorusGeometry:Ic,TorusBufferGeometry:Ic,TorusKnotGeometry:Nc,TorusKnotBufferGeometry:Nc,TubeGeometry:Bc,TubeBufferGeometry:Bc,WireframeGeometry:jc});class Hc extends xi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Wn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Gc extends po{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Vc extends xi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Wn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Tn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wc extends Vc{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Tn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Wn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Wn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Wn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Zc extends xi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Wn(16777215),this.specular=new Wn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Tn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $c extends xi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Wn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Tn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qc extends xi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Tn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Yc extends xi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Kc extends xi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Wn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Tn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xc extends Xl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const Qc={ShadowMaterial:Hc,SpriteMaterial:ml,RawShaderMaterial:Gc,ShaderMaterial:po,PointsMaterial:lu,MeshPhysicalMaterial:Wc,MeshStandardMaterial:Vc,MeshPhongMaterial:Zc,MeshToonMaterial:$c,MeshNormalMaterial:qc,MeshLambertMaterial:Yc,MeshDepthMaterial:qs,MeshDistanceMaterial:Ys,MeshBasicMaterial:wi,MeshMatcapMaterial:Kc,LineDashedMaterial:Xc,LineBasicMaterial:Xl,Material:xi};xi.fromType=function(e){return new Qc[e]};const Jc={arraySlice:function(e,t,n){return Jc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),s=[],u=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)u.push(e.values[o*t+n])}}0!==s.length&&(e.times=Jc.convertArray(s,e.times.constructor),e.values=Jc.convertArray(u,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let u=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const d=t.times.length-1;let h;if(o<=t.times[0]){const e=s,n=l-s;h=Jc.arraySlice(t.values,e,n)}else if(o>=t.times[d]){const e=d*l+s,n=e+l-s;h=Jc.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=s,r=l-s;e.evaluate(o),h=Jc.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){(new or).fromArray(h).normalize().conjugate().toArray(h)}const f=i.times.length;for(let e=0;e<f;++e){const t=e*c+u;if("quaternion"===r)or.multiplyQuaternionsFlat(i.values,t,h,0,i.values,t);else{const e=c-2*u;for(let n=0;n<e;++n)i.values[t+n]-=h[n]}}}return e.blendMode=Ct,e}};class ed{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class td extends ed{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dt,endingEnd:Dt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case At:i=e,a=2*t-n;break;case Et:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case At:o=e,s=2*n-t;break;case Et:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,_=h*m-h*p;for(let b=0;b!==a;++b)i[b]=g*o[u+b]+v*o[l+b]+y*o[s+b]+_*o[c+b];return i}}class nd extends ed{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(n-t)/(r-t),c=1-u;for(let d=0;d!==a;++d)i[d]=o[l+d]*c+o[s+d]*u;return i}}class rd extends ed{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class id{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jc.convertArray(t,this.TimeBufferType),this.values=Jc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Jc.convertArray(e.times,Array),values:Jc.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new rd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new nd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new td(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xt:t=this.InterpolantFactoryMethodDiscrete;break;case wt:t=this.InterpolantFactoryMethodLinear;break;case St:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xt;case this.InterpolantFactoryMethodLinear:return wt;case this.InterpolantFactoryMethodSmooth:return St}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=Jc.arraySlice(n,i,o),this.values=Jc.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&Jc.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=Jc.arraySlice(this.times),t=Jc.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===St,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=Jc.arraySlice(e,0,o),this.values=Jc.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Jc.arraySlice(this.times,0),t=Jc.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}id.prototype.TimeBufferType=Float32Array,id.prototype.ValueBufferType=Float32Array,id.prototype.DefaultInterpolation=wt;class od extends id{}od.prototype.ValueTypeName="bool",od.prototype.ValueBufferType=Array,od.prototype.DefaultInterpolation=xt,od.prototype.InterpolantFactoryMethodLinear=void 0,od.prototype.InterpolantFactoryMethodSmooth=void 0;class ad extends id{}ad.prototype.ValueTypeName="color";class sd extends id{}sd.prototype.ValueTypeName="number";class ld extends ed{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)or.slerpFlat(i,0,o,l-a,o,l,s);return i}}class ud extends id{InterpolantFactoryMethodLinear(e){return new ld(this.times,this.values,this.getValueSize(),e)}}ud.prototype.ValueTypeName="quaternion",ud.prototype.DefaultInterpolation=wt,ud.prototype.InterpolantFactoryMethodSmooth=void 0;class cd extends id{}cd.prototype.ValueTypeName="string",cd.prototype.ValueBufferType=Array,cd.prototype.DefaultInterpolation=xt,cd.prototype.InterpolantFactoryMethodLinear=void 0,cd.prototype.InterpolantFactoryMethodSmooth=void 0;class dd extends id{}dd.prototype.ValueTypeName="vector";class hd{constructor(e,t=-1,n,r=Mt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=xn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(fd(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(id.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const l=Jc.getKeyframeOrder(e);e=Jc.sortedArray(e,1,l),s=Jc.sortedArray(s,1,l),r||0!==e[0]||(e.push(i),s.push(s[0])),o.push(new sd(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];Jc.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const e=l[u].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new sd(".morphTargetInfluence["+i+"]",t,o))}s=t.length*o}else{const i=".bones["+t[u].name+"]";n(dd,i+".position",e,"pos",r),n(ud,i+".quaternion",e,"rot",r),n(dd,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sd;case"vector":case"vector2":case"vector3":case"vector4":return dd;case"color":return ad;case"quaternion":return ud;case"bool":case"boolean":return od;case"string":return cd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Jc.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const pd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class md{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const gd=new md;class vd{constructor(e){this.manager=void 0!==e?e:gd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const yd={};class _d extends vd{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=pd.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==yd[e])return void yd[e].push({onLoad:t,onProgress:n,onError:r});yd[e]=[],yd[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=yd[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{pd.add(e,t);const n=yd[e];delete yd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=yd[e];if(void 0===n)throw this.manager.itemError(e),t;delete yd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class bd extends vd{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new _d(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=hd.parse(e[n]);t.push(r)}return t}}class xd extends vd{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],a=new vu,s=new _d(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function u(u){s.load(e[u],(function(e){const n=i.parse(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=ye),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let c=0,d=e.length;c<d;++c)u(c);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ye),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class wd extends vd{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=pd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=Ln("img");function s(){u(),pd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Sd extends vd{constructor(e){super(e)}load(e,t,n,r){const i=new _o,o=new wd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)s(l);return i}}class Dd extends vd{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Ul,a=new _d(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:de,o.wrapT=void 0!==n.wrapT?n.wrapT:de,o.magFilter=void 0!==n.magFilter?n.magFilter:ye,o.minFilter=void 0!==n.minFilter?n.minFilter:ye,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=xe),1===n.mipmapCount&&(o.minFilter=ye),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class Ad extends vd{constructor(e){super(e)}load(e,t,n,r){const i=new Xn,o=new wd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Ed extends li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Wn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Md extends Ed{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(li.DefaultUp),this.updateMatrix(),this.groundColor=new Wn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Cd=new Nr,Td=new ar,Pd=new ar;class Rd{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Tn(512,512),this.map=null,this.mapPass=null,this.matrix=new Nr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Mo,this._frameExtents=new Tn(1,1),this._viewportCount=1,this._viewports=[new Qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Td.setFromMatrixPosition(e.matrixWorld),t.position.copy(Td),Pd.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Pd),t.updateMatrixWorld(),Cd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kd extends Rd{constructor(){super(new go(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*bn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Od extends Ed{constructor(e,t,n=0,r=Math.PI/3,i=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(li.DefaultUp),this.updateMatrix(),this.target=new li,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new kd}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Ld=new Nr,Fd=new ar,Id=new ar;class Nd extends Rd{constructor(){super(new go(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Tn(4,2),this._viewportCount=6,this._viewports=[new Qn(2,1,1,1),new Qn(0,1,1,1),new Qn(3,1,1,1),new Qn(1,1,1,1),new Qn(3,0,1,1),new Qn(1,0,1,1)],this._cubeDirections=[new ar(1,0,0),new ar(-1,0,0),new ar(0,0,1),new ar(0,0,-1),new ar(0,1,0),new ar(0,-1,0)],this._cubeUps=[new ar(0,1,0),new ar(0,1,0),new ar(0,1,0),new ar(0,1,0),new ar(0,0,1),new ar(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Fd.setFromMatrixPosition(e.matrixWorld),n.position.copy(Fd),Id.copy(n.position),Id.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Id),n.updateMatrixWorld(),r.makeTranslation(-Fd.x,-Fd.y,-Fd.z),Ld.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ld)}}class Bd extends Ed{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Nd}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class jd extends Rd{constructor(){super(new zo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zd extends Ed{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(li.DefaultUp),this.updateMatrix(),this.target=new li,this.shadow=new jd}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ud extends Ed{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Hd extends Ed{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Gd{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ar)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class Vd extends Ed{constructor(e=new Gd,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Wd extends vd{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new _d(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=xi.fromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Wn).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new Wn).setHex(t.value);break;case"v2":r.uniforms[i].value=(new Tn).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new ar).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new Qn).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new Pn).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new Nr).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Tn).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Tn).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}}class Zd{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $d extends Gi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class qd extends vd{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new _d(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=On(i.type,o),s=new hl(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new $d:new Gi,o=e.data.index;if(void 0!==o){const e=On(o.type,o.array);i.setIndex(new Ai(e,1))}const a=e.data.attributes;for(const c in a){const t=a[c];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new pl(i,t.itemSize,t.offset,t.normalized)}else{const e=On(t.type,t.array);n=new(t.isInstancedBufferAttribute?Wl:Ai)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),i.setAttribute(c,n)}const s=e.data.morphAttributes;if(s)for(const c in s){const t=s[c],n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];let a;if(o.isInterleavedBufferAttribute){const t=r(e.data,o.data);a=new pl(t,o.itemSize,o.offset,o.normalized)}else{const e=On(o.type,o.array);a=new Ai(e,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}i.morphAttributes[c]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let c=0,d=l.length;c!==d;++c){const e=l[c];i.addGroup(e.start,e.count,e.materialIndex)}const u=e.data.boundingSphere;if(void 0!==u){const e=new ar;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new Cr(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class Yd extends vd{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?Zd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new _d(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?Zd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new _d(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a,o,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Ju).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,o=e.length;i<o;i++){const t=(new Vl).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new qd;for(let i=0,o=e.length;i<o;i++){let o;const a=e[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(a);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:a.type in Uc?o=Uc[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Wd;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=hd.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:On(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new md(t);i=new wd(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=o(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ul(n.data,n.width,n.height)))}r[n.uuid]=new qn(e)}else{const e=o(n.url);r[n.uuid]=new qn(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"===typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:On(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new wd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Ul(r.data,r.width,r.height)))}n[r.uuid]=new qn(e)}else{const e=await i(r.url);n[r.uuid]=new qn(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=t[o.image],s=a.data;let l;Array.isArray(s)?(l=new _o,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Ul:new Xn,s&&(l.needsUpdate=!0)),l.source=a,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,Kd)),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],Xd),l.wrapT=n(o.wrap[1],Xd)),void 0!==o.format&&(l.format=o.format),void 0!==o.type&&(l.type=o.type),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,Qd)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,Qd)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}parseObject(e,t,n,r,i){let o,a,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new dl,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Wn(e.background):o.background=c(e.background)),void 0!==e.environment&&(o.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new cl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new ul(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new go(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new zo(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Ud(e.color,e.intensity);break;case"DirectionalLight":o=new zd(e.color,e.intensity);break;case"PointLight":o=new Bd(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Hd(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Od(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Md(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new Vd).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),s=u(e.material),o=new jl(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),s=u(e.material),o=new so(a,s);break;case"InstancedMesh":a=l(e.geometry),s=u(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new Kl(a,s,t),o.instanceMatrix=new Wl(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new Wl(new Float32Array(r.array),r.itemSize));break;case"LOD":o=new Ol;break;case"Line":o=new ru(l(e.geometry),u(e.material));break;case"LineLoop":o=new su(l(e.geometry),u(e.material));break;case"LineSegments":o=new au(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new fu(l(e.geometry),u(e.material));break;case"Sprite":o=new Tl(u(e.material));break;case"Group":o=new tl;break;case"Bone":o=new zl;break;default:o=new li}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)o.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const Kd={UVMapping:ie,CubeReflectionMapping:oe,CubeRefractionMapping:ae,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ue},Xd={RepeatWrapping:ce,ClampToEdgeWrapping:de,MirroredRepeatWrapping:he},Qd={NearestFilter:fe,NearestMipmapNearestFilter:pe,NearestMipmapLinearFilter:ge,LinearFilter:ye,LinearMipmapNearestFilter:_e,LinearMipmapLinearFilter:xe};class Jd extends vd{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=pd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){pd.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let eh;const th={getContext:function(){return void 0===eh&&(eh=new(window.AudioContext||window.webkitAudioContext)),eh},setContext:function(e){eh=e}};class nh extends vd{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new _d(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);th.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}class rh extends Vd{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new Wn).set(e),i=(new Wn).set(t),o=new ar(r.r,r.g,r.b),a=new ar(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}}class ih extends Vd{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new Wn).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const oh=new Nr,ah=new Nr,sh=new Nr;class lh{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new go,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new go,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,sh.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(_n*t.fov*.5)/t.zoom;let o,a;ah.elements[12]=-n,oh.elements[12]=n,o=-i*t.aspect+r,a=i*t.aspect+r,sh.elements[0]=2*t.near/(a-o),sh.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(sh),o=-i*t.aspect-r,a=i*t.aspect-r,sh.elements[0]=2*t.near/(a-o),sh.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ah),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(oh)}}class uh{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ch(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ch();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ch(){return("undefined"===typeof performance?Date:performance).now()}const dh=new ar,hh=new or,fh=new ar,ph=new ar;class mh extends li{constructor(){super(),this.type="AudioListener",this.context=th.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new uh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(dh,hh,fh),ph.set(0,0,-1).applyQuaternion(hh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(dh.x,e),t.positionY.linearRampToValueAtTime(dh.y,e),t.positionZ.linearRampToValueAtTime(dh.z,e),t.forwardX.linearRampToValueAtTime(ph.x,e),t.forwardY.linearRampToValueAtTime(ph.y,e),t.forwardZ.linearRampToValueAtTime(ph.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(dh.x,dh.y,dh.z),t.setOrientation(ph.x,ph.y,ph.z,n.x,n.y,n.z)}}class gh extends li{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const vh=new ar,yh=new or,_h=new ar,bh=new ar;class xh extends gh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(vh,yh,_h),bh.set(0,0,1).applyQuaternion(yh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(vh.x,e),t.positionY.linearRampToValueAtTime(vh.y,e),t.positionZ.linearRampToValueAtTime(vh.z,e),t.orientationX.linearRampToValueAtTime(bh.x,e),t.orientationY.linearRampToValueAtTime(bh.y,e),t.orientationZ.linearRampToValueAtTime(bh.z,e)}else t.setPosition(vh.x,vh.y,vh.z),t.setOrientation(bh.x,bh.y,bh.z)}}class wh{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Sh{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){or.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;or.multiplyQuaternionsFlat(e,o,e,t,e,n),or.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const Dh="\\[\\]\\.:\\/",Ah=new RegExp("[\\[\\]\\.:\\/]","g"),Eh="[^\\[\\]\\.:\\/]",Mh="[^"+Dh.replace("\\.","")+"]",Ch=/((?:WC+[\/:])*)/.source.replace("WC",Eh),Th=/(WCOD+)?/.source.replace("WCOD",Mh),Ph=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Eh),Rh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Eh),kh=new RegExp("^"+Ch+Th+Ph+Rh+"$"),Oh=["material","materials","bones"];class Lh{constructor(e,t,n){this.path=t,this.parsedPath=n||Lh.parseTrackName(t),this.node=Lh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Lh.Composite(e,t,n):new Lh(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ah,"")}static parseTrackName(e){const t=kh.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Oh.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Lh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Lh.Composite=class{constructor(e,t,n){const r=n||Lh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Lh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Lh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Lh.prototype.GetterByBindingType=[Lh.prototype._getValue_direct,Lh.prototype._getValue_array,Lh.prototype._getValue_arrayElement,Lh.prototype._getValue_toArray],Lh.prototype.SetterByBindingTypeAndVersioning=[[Lh.prototype._setValue_direct,Lh.prototype._setValue_direct_setNeedsUpdate,Lh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lh.prototype._setValue_array,Lh.prototype._setValue_array_setNeedsUpdate,Lh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lh.prototype._setValue_arrayElement,Lh.prototype._setValue_arrayElement_setNeedsUpdate,Lh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lh.prototype._setValue_fromArray,Lh.prototype._setValue_fromArray_setNeedsUpdate,Lh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Fh{constructor(){this.isAnimationObjectGroup=!0,this.uuid=xn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const c=arguments[u],d=c.uuid;let h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(c);for(let e=0,t=o;e!==t;++e)i[e].push(new Lh(c,n[e],r[e]))}else if(h<l){a=e[h];const s=--l,u=e[s];t[u.uuid]=h,e[h]=u,t[d]=s,e[s]=c;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[h];t[h]=o,void 0===a&&(a=new Lh(c,n[e],r[e])),t[s]=a}}else e[h]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=i){const o=i++,u=e[o];t[u.uuid]=l,e[l]=u,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const a=--i,s=e[a],u=--o,c=e[u];t[s.uuid]=l,e[l]=s,t[c.uuid]=a,e[a]=c,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[u];t[l]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(let d=u,h=s.length;d!==h;++d){const n=s[d];c[d]=new Lh(n,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}class Ih{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:Dt,endingEnd:Dt};for(let l=0;l!==o;++l){const e=i[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_t,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Ct)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===bt;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(n===yt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=At,r.endingEnd=At):(r.endingStart=e?this.zeroSlopeAtStart?At:Dt:Et,r.endingEnd=t?this.zeroSlopeAtEnd?At:Dt:Et)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}const Nh=new Float32Array(1);class Bh extends gn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let u=l[s];void 0===u&&(u={},l[s]=u);for(let c=0;c!==i;++c){const e=r[c],i=e.name;let l=u[i];if(void 0!==l)++l.referenceCount,o[c]=l;else{if(l=o[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}const r=t&&t._propertyBindings[c].binding.parsedPath;l=new Sh(Lh.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),o[c]=l}a[c].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new nd(new Float32Array(2),new Float32Array(2),1,Nh),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"===typeof e?hd.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Mt),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new Ih(this,o,t,n);return this._bindAction(u,l),this._addInactiveAction(u,a,i),u}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?hd.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class jh{constructor(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new jh(void 0===this.value.clone?this.value:this.value.clone())}}class zh extends hl{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Uh{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Hh{constructor(e,t,n=0,r=1/0){this.ray=new Ir(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new qr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Vh(e,this,n,t),n.sort(Gh),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)Vh(e[r],this,n,t);return n.sort(Gh),n}}function Gh(e,t){return e.distance-t.distance}function Vh(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Vh(r[e],t,n,!0)}}class Wh{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(wn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Zh{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const $h=new Tn;class qh{constructor(e=new Tn(1/0,1/0),t=new Tn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=$h.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return $h.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yh=new ar,Kh=new ar;class Xh{constructor(e=new ar,t=new ar){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Yh.subVectors(e,this.start),Kh.subVectors(this.end,this.start);const n=Kh.dot(Kh);let r=Kh.dot(Yh)/n;return t&&(r=wn(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Qh=new ar;class Jh extends li{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Gi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const e=o/s*Math.PI*2,t=a/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Li(r,3));const i=new Xl({fog:!1,toneMapped:!1});this.cone=new au(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Qh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ef=new ar,tf=new Nr,nf=new Nr;class rf extends au{constructor(e){const t=of(e),n=new Gi,r=[],i=[],o=new Wn(0,0,1),a=new Wn(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Li(r,3)),n.setAttribute("color",new Li(i,3));super(n,new Xl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");nf.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(tf.multiplyMatrices(nf,e.matrixWorld),ef.setFromMatrixPosition(tf),r.setXYZ(o,ef.x,ef.y,ef.z),tf.multiplyMatrices(nf,e.parent.matrixWorld),ef.setFromMatrixPosition(tf),r.setXYZ(o+1,ef.x,ef.y,ef.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function of(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,of(e.children[n]));return t}class af extends so{constructor(e,t,n){super(new Lc(t,4,2),new wi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sf=new ar,lf=new Wn,uf=new Wn;class cf extends li{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Rc(t);r.rotateY(.5*Math.PI),this.material=new wi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ai(o,3)),this.add(new so(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");lf.copy(this.light.color),uf.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?lf:uf;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(sf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class df extends au{constructor(e=10,t=10,n=4473924,r=8947848){n=new Wn(n),r=new Wn(r);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let c=0,d=0,h=-a;c<=t;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);const e=c===i?n:r;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const u=new Gi;u.setAttribute("position",new Li(s,3)),u.setAttribute("color",new Li(l,3));super(u,new Xl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class hf extends au{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new Wn(i),o=new Wn(o);const a=[],s=[];for(let u=0;u<=t;u++){const n=u/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(r,0,l);const c=1&u?i:o;s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(let u=0;u<=n;u++){const t=1&u?i:o,l=e-e/n*u;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l;a.push(i,0,o),s.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l,a.push(i,0,o),s.push(t.r,t.g,t.b)}}const l=new Gi;l.setAttribute("position",new Li(a,3)),l.setAttribute("color",new Li(s,3));super(l,new Xl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const ff=new ar,pf=new ar,mf=new ar;class gf extends li{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new Gi;r.setAttribute("position",new Li([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Xl({fog:!1,toneMapped:!1});this.lightPlane=new ru(r,i),this.add(this.lightPlane),r=new Gi,r.setAttribute("position",new Li([0,0,0,0,0,1],3)),this.targetLine=new ru(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ff.setFromMatrixPosition(this.light.matrixWorld),pf.setFromMatrixPosition(this.light.target.matrixWorld),mf.subVectors(pf,ff),this.lightPlane.lookAt(pf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(pf),this.targetLine.scale.z=mf.length()}}const vf=new ar,yf=new mo;class _f extends au{constructor(e){const t=new Gi,n=new Xl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new Wn(16755200),s=new Wn(16711680),l=new Wn(43775),u=new Wn(16777215),c=new Wn(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.setAttribute("position",new Li(r,3)),t.setAttribute("color",new Li(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;yf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),bf("c",t,e,yf,0,0,-1),bf("t",t,e,yf,0,0,1),bf("n1",t,e,yf,-1,-1,-1),bf("n2",t,e,yf,1,-1,-1),bf("n3",t,e,yf,-1,1,-1),bf("n4",t,e,yf,1,1,-1),bf("f1",t,e,yf,-1,-1,1),bf("f2",t,e,yf,1,-1,1),bf("f3",t,e,yf,-1,1,1),bf("f4",t,e,yf,1,1,1),bf("u1",t,e,yf,.7,1.1,-1),bf("u2",t,e,yf,-.7,1.1,-1),bf("u3",t,e,yf,0,2,-1),bf("cf1",t,e,yf,-1,0,1),bf("cf2",t,e,yf,1,0,1),bf("cf3",t,e,yf,0,-1,1),bf("cf4",t,e,yf,0,1,1),bf("cn1",t,e,yf,-1,0,-1),bf("cn2",t,e,yf,1,0,-1),bf("cn3",t,e,yf,0,-1,-1),bf("cn4",t,e,yf,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function bf(e,t,n,r,i,o,a){vf.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],vf.x,vf.y,vf.z)}}const xf=new ur;class wf extends au{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Gi;i.setIndex(new Ai(n,1)),i.setAttribute("position",new Ai(r,3)),super(i,new Xl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&xf.setFromObject(this.object),xf.isEmpty())return;const t=xf.min,n=xf.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class Sf extends au{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Gi;r.setIndex(new Ai(n,1)),r.setAttribute("position",new Li([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Xl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Df extends ru{constructor(e,t=1,n=16776960){const r=n,i=new Gi;i.setAttribute("position",new Li([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new Xl({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new Gi;o.setAttribute("position",new Li([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new so(o,new wi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?m:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Af=new ar;let Ef,Mf;class Cf extends li{constructor(e=new ar(0,0,1),t=new ar(0,0,0),n=1,r=16776960,i=.2*n,o=.2*i){super(),this.type="ArrowHelper",void 0===Ef&&(Ef=new Gi,Ef.setAttribute("position",new Li([0,0,0,0,1,0],3)),Mf=new Vu(0,.5,1,5,1),Mf.translate(0,-.5,0)),this.position.copy(t),this.line=new ru(Ef,new Xl({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new so(Mf,new wi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Af.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Af,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Tf extends au{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Gi;n.setAttribute("position",new Li(t,3)),n.setAttribute("color",new Li([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Xl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Wn,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Pf{constructor(){this.type="ShapePath",this.color=new Wn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new zu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Ju;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=Ac.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,l;const u=[];if(1===o.length)return s=o[0],l=new Ju,l.curves=s.curves,u.push(l),u;let c=!i(o[0].getPoints());c=e?!c:c;const d=[],h=[];let f,p,m=[],g=0;h[g]=void 0,m[g]=[];for(let v=0,y=o.length;v<y;v++)s=o[v],f=s.getPoints(),a=i(f),a=e?!a:a,a?(!c&&h[g]&&g++,h[g]={s:new Ju,p:f},h[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!h[0])return n(o);if(h.length>1){let e=!1,t=0;for(let n=0,r=h.length;n<r;n++)d[n]=[];for(let n=0,i=h.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<h.length;i++)r(a.p,h[i].p)&&(n!==i&&t++,s?(s=!1,d[i].push(a)):e=!0);s&&d[n].push(a)}}t>0&&!1===e&&(m=d)}for(let v=0,y=h.length;v<y;v++){l=h[v].s,u.push(l),p=m[v];for(let e=0,t=p.length;e<t;e++)l.holes.push(p[e].h)}return u}}class Rf{static toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=wn(e,-65504,65504),Of[0]=e;const t=Lf[0],n=t>>23&511;return Ff[n]+((8388607&t)>>If[n])}static fromHalfFloat(e){const t=e>>10;return Lf[0]=Nf[jf[t]+(1023&e)]+Bf[t],Of[0]}}const kf=new ArrayBuffer(4),Of=new Float32Array(kf),Lf=new Uint32Array(kf),Ff=new Uint32Array(512),If=new Uint32Array(512);for(let qf=0;qf<256;++qf){const e=qf-127;e<-27?(Ff[qf]=0,Ff[256|qf]=32768,If[qf]=24,If[256|qf]=24):e<-14?(Ff[qf]=1024>>-e-14,Ff[256|qf]=1024>>-e-14|32768,If[qf]=-e-1,If[256|qf]=-e-1):e<=15?(Ff[qf]=e+15<<10,Ff[256|qf]=e+15<<10|32768,If[qf]=13,If[256|qf]=13):e<128?(Ff[qf]=31744,Ff[256|qf]=64512,If[qf]=24,If[256|qf]=24):(Ff[qf]=31744,Ff[256|qf]=64512,If[qf]=13,If[256|qf]=13)}const Nf=new Uint32Array(2048),Bf=new Uint32Array(64),jf=new Uint32Array(64);for(let qf=1;qf<1024;++qf){let e=qf<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,Nf[qf]=e|t}for(let qf=1024;qf<2048;++qf)Nf[qf]=939524096+(qf-1024<<13);for(let qf=1;qf<31;++qf)Bf[qf]=qf<<23;Bf[31]=1199570944,Bf[32]=2147483648;for(let qf=33;qf<63;++qf)Bf[qf]=2147483648+(qf-32<<23);Bf[63]=3347054592;for(let qf=1;qf<64;++qf)32!==qf&&(jf[qf]=1024);class zf extends Gi{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class Uf extends Gi{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function Hf(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Gf(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function Vf(){console.error("THREE.ImmediateRenderObject has been removed.")}class Wf extends Jn{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}}class Zf extends er{constructor(e,t,n,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,n,r)}}class $f extends nr{constructor(e,t,n,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,n,r)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},82064:function(e){"use strict";e.exports=JSON.parse('{"yearRanges":[{"range":[-5500000000,-500000000],"label":"5 BILLION","items":[{"year":-5000000000,"label":"5 BIL BCE","zoomPriority":1},{"year":-3750000000,"label":"3.75 BIL BCE","zoomPriority":6},{"year":-2500000000,"label":"2.5 BIL BCE","zoomPriority":3},{"year":-1400000000,"label":"1.5 BIL BCE","zoomPriority":6}]},{"range":[-500000000,-10000],"label":"500 MILLION","items":[{"year":-500000000,"label":"500 MIL BCE","zoomPriority":1},{"year":-375000000,"label":"375 MIL BCE","zoomPriority":6},{"year":-250000000,"label":"250 MIL BCE","zoomPriority":3},{"year":-125000000,"label":"125 MIL BCE","zoomPriority":6}]},{"range":[-10000,0],"label":"","items":[{"year":-10000,"label":"10000 BCE","zoomPriority":1},{"year":-7500,"label":"7500 BCE","zoomPriority":6},{"year":-5000,"label":"5000 BCE","zoomPriority":3},{"year":-2500,"label":"2500 BCE","zoomPriority":6}]},{"range":[0,1500],"label":"","items":[{"year":0,"label":"0 CE","zoomPriority":1},{"year":325,"label":"325 CE","zoomPriority":6},{"year":750,"label":"750 CE","zoomPriority":3},{"year":1125,"label":"1125 CE","zoomPriority":6}]},{"range":[1500,1900],"label":"","items":[{"year":1500,"label":"1500 CE","zoomPriority":1},{"year":1600,"label":"1600 CE","zoomPriority":6},{"year":1700,"label":"1700 CE","zoomPriority":3},{"year":1800,"label":"1800 CE","zoomPriority":6}]},{"range":[1900,1950],"label":"","items":[{"year":1900,"label":"1900 CE","zoomPriority":1},{"year":1913,"label":"1913 CE","zoomPriority":6},{"year":1925,"label":"1925 CE","zoomPriority":3},{"year":1938,"label":"1938 CE","zoomPriority":6}]},{"range":[1950,2000],"label":"","items":[{"year":1950,"label":"1950 CE","zoomPriority":1},{"year":1963,"label":"1963 CE","zoomPriority":6},{"year":1975,"label":"1975 CE","zoomPriority":3},{"year":1988,"label":"1988 CE","zoomPriority":6}]},{"range":[2000,2025],"label":"","items":[{"year":2000,"label":"2000 CE","zoomPriority":1},{"year":2025,"label":"2025 CE","zoomPriority":6},{"year":2050,"label":"2050 CE","zoomPriority":3},{"year":2075,"label":"2075 CE","zoomPriority":6},{"year":2100,"label":"2100 CE","zoomPriority":1}]}],"zoomPriorityLevels":[[1,1.1],[0.72,0.9],[0.6,0.7],[0.48,0.58],[0.35,0.46],[0.3,0.38],[0.19,0.28],[0.15,0.18],[0.09,0.13],[0.05,0.08]]}')}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],(function(){return t(91118),t(69898)}));var n=e.O();_N_E=n}]);